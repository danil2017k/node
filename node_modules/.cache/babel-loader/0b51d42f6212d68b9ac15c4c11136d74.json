{"ast":null,"code":"require(\"core-js/modules/es.error.cause.js\");\n\nrequire(\"core-js/modules/es.regexp.flags.js\");\n\nrequire(\"core-js/modules/web.dom-exception.stack.js\");\n\n/*!\n * Paper.js v0.12.15 - The Swiss Army Knife of Vector Graphics Scripting.\n * http://paperjs.org/\n *\n * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey\n * http://juerglehni.com/ & https://puckey.studio/\n *\n * Distributed under the MIT license. See LICENSE file for details.\n *\n * All rights reserved.\n *\n * Date: Wed Mar 17 10:49:48 2021 +0100\n *\n ***\n *\n * Straps.js - Class inheritance library with support for bean-style accessors\n *\n * Copyright (c) 2006 - 2020 Jürg Lehni\n * http://juerglehni.com/\n *\n * Distributed under the MIT license.\n *\n ***\n *\n * Acorn.js\n * https://marijnhaverbeke.nl/acorn/\n *\n * Acorn is a tiny, fast JavaScript parser written in JavaScript,\n * created by Marijn Haverbeke and released under an MIT license.\n *\n */\nvar paper = function (self, undefined) {\n  self = self || require('./node/self.js');\n  var window = self.window,\n      document = self.document;\n  var Base = new function () {\n    var hidden = /^(statics|enumerable|beans|preserve)$/,\n        array = [],\n        slice = array.slice,\n        create = Object.create,\n        describe = Object.getOwnPropertyDescriptor,\n        define = Object.defineProperty,\n        forEach = array.forEach || function (iter, bind) {\n      for (var i = 0, l = this.length; i < l; i++) {\n        iter.call(bind, this[i], i, this);\n      }\n    },\n        forIn = function (iter, bind) {\n      for (var i in this) {\n        if (this.hasOwnProperty(i)) iter.call(bind, this[i], i, this);\n      }\n    },\n        set = Object.assign || function (dst) {\n      for (var i = 1, l = arguments.length; i < l; i++) {\n        var src = arguments[i];\n\n        for (var key in src) {\n          if (src.hasOwnProperty(key)) dst[key] = src[key];\n        }\n      }\n\n      return dst;\n    },\n        each = function (obj, iter, bind) {\n      if (obj) {\n        var desc = describe(obj, 'length');\n        (desc && typeof desc.value === 'number' ? forEach : forIn).call(obj, iter, bind = bind || obj);\n      }\n\n      return bind;\n    };\n\n    function inject(dest, src, enumerable, beans, preserve) {\n      var beansNames = {};\n\n      function field(name, val) {\n        val = val || (val = describe(src, name)) && (val.get ? val : val.value);\n        if (typeof val === 'string' && val[0] === '#') val = dest[val.substring(1)] || val;\n        var isFunc = typeof val === 'function',\n            res = val,\n            prev = preserve || isFunc && !val.base ? val && val.get ? name in dest : dest[name] : null,\n            bean;\n\n        if (!preserve || !prev) {\n          if (isFunc && prev) val.base = prev;\n          if (isFunc && beans !== false && (bean = name.match(/^([gs]et|is)(([A-Z])(.*))$/))) beansNames[bean[3].toLowerCase() + bean[4]] = bean[2];\n\n          if (!res || isFunc || !res.get || typeof res.get !== 'function' || !Base.isPlainObject(res)) {\n            res = {\n              value: res,\n              writable: true\n            };\n          }\n\n          if ((describe(dest, name) || {\n            configurable: true\n          }).configurable) {\n            res.configurable = true;\n            res.enumerable = enumerable != null ? enumerable : !bean;\n          }\n\n          define(dest, name, res);\n        }\n      }\n\n      if (src) {\n        for (var name in src) {\n          if (src.hasOwnProperty(name) && !hidden.test(name)) field(name);\n        }\n\n        for (var name in beansNames) {\n          var part = beansNames[name],\n              set = dest['set' + part],\n              get = dest['get' + part] || set && dest['is' + part];\n          if (get && (beans === true || get.length === 0)) field(name, {\n            get: get,\n            set: set\n          });\n        }\n      }\n\n      return dest;\n    }\n\n    function Base() {\n      for (var i = 0, l = arguments.length; i < l; i++) {\n        var src = arguments[i];\n        if (src) set(this, src);\n      }\n\n      return this;\n    }\n\n    return inject(Base, {\n      inject: function (src) {\n        if (src) {\n          var statics = src.statics === true ? src : src.statics,\n              beans = src.beans,\n              preserve = src.preserve;\n          if (statics !== src) inject(this.prototype, src, src.enumerable, beans, preserve);\n          inject(this, statics, null, beans, preserve);\n        }\n\n        for (var i = 1, l = arguments.length; i < l; i++) this.inject(arguments[i]);\n\n        return this;\n      },\n      extend: function () {\n        var base = this,\n            ctor,\n            proto;\n\n        for (var i = 0, obj, l = arguments.length; i < l && !(ctor && proto); i++) {\n          obj = arguments[i];\n          ctor = ctor || obj.initialize;\n          proto = proto || obj.prototype;\n        }\n\n        ctor = ctor || function () {\n          base.apply(this, arguments);\n        };\n\n        proto = ctor.prototype = proto || create(this.prototype);\n        define(proto, 'constructor', {\n          value: ctor,\n          writable: true,\n          configurable: true\n        });\n        inject(ctor, this);\n        if (arguments.length) this.inject.apply(ctor, arguments);\n        ctor.base = base;\n        return ctor;\n      }\n    }).inject({\n      enumerable: false,\n      initialize: Base,\n      set: Base,\n      inject: function () {\n        for (var i = 0, l = arguments.length; i < l; i++) {\n          var src = arguments[i];\n\n          if (src) {\n            inject(this, src, src.enumerable, src.beans, src.preserve);\n          }\n        }\n\n        return this;\n      },\n      extend: function () {\n        var res = create(this);\n        return res.inject.apply(res, arguments);\n      },\n      each: function (iter, bind) {\n        return each(this, iter, bind);\n      },\n      clone: function () {\n        return new this.constructor(this);\n      },\n      statics: {\n        set: set,\n        each: each,\n        create: create,\n        define: define,\n        describe: describe,\n        clone: function (obj) {\n          return set(new obj.constructor(), obj);\n        },\n        isPlainObject: function (obj) {\n          var ctor = obj != null && obj.constructor;\n          return ctor && (ctor === Object || ctor === Base || ctor.name === 'Object');\n        },\n        pick: function (a, b) {\n          return a !== undefined ? a : b;\n        },\n        slice: function (list, begin, end) {\n          return slice.call(list, begin, end);\n        }\n      }\n    });\n  }();\n  if (typeof module !== 'undefined') module.exports = Base;\n  Base.inject({\n    enumerable: false,\n    toString: function () {\n      return this._id != null ? (this._class || 'Object') + (this._name ? \" '\" + this._name + \"'\" : ' @' + this._id) : '{ ' + Base.each(this, function (value, key) {\n        if (!/^_/.test(key)) {\n          var type = typeof value;\n          this.push(key + ': ' + (type === 'number' ? Formatter.instance.number(value) : type === 'string' ? \"'\" + value + \"'\" : value));\n        }\n      }, []).join(', ') + ' }';\n    },\n    getClassName: function () {\n      return this._class || '';\n    },\n    importJSON: function (json) {\n      return Base.importJSON(json, this);\n    },\n    exportJSON: function (options) {\n      return Base.exportJSON(this, options);\n    },\n    toJSON: function () {\n      return Base.serialize(this);\n    },\n    set: function (props, exclude) {\n      if (props) Base.filter(this, props, exclude, this._prioritize);\n      return this;\n    }\n  }, {\n    beans: false,\n    statics: {\n      exports: {},\n      extend: function extend() {\n        var res = extend.base.apply(this, arguments),\n            name = res.prototype._class;\n        if (name && !Base.exports[name]) Base.exports[name] = res;\n        return res;\n      },\n      equals: function (obj1, obj2) {\n        if (obj1 === obj2) return true;\n        if (obj1 && obj1.equals) return obj1.equals(obj2);\n        if (obj2 && obj2.equals) return obj2.equals(obj1);\n\n        if (obj1 && obj2 && typeof obj1 === 'object' && typeof obj2 === 'object') {\n          if (Array.isArray(obj1) && Array.isArray(obj2)) {\n            var length = obj1.length;\n            if (length !== obj2.length) return false;\n\n            while (length--) {\n              if (!Base.equals(obj1[length], obj2[length])) return false;\n            }\n          } else {\n            var keys = Object.keys(obj1),\n                length = keys.length;\n            if (length !== Object.keys(obj2).length) return false;\n\n            while (length--) {\n              var key = keys[length];\n              if (!(obj2.hasOwnProperty(key) && Base.equals(obj1[key], obj2[key]))) return false;\n            }\n          }\n\n          return true;\n        }\n\n        return false;\n      },\n      read: function (list, start, options, amount) {\n        if (this === Base) {\n          var value = this.peek(list, start);\n          list.__index++;\n          return value;\n        }\n\n        var proto = this.prototype,\n            readIndex = proto._readIndex,\n            begin = start || readIndex && list.__index || 0,\n            length = list.length,\n            obj = list[begin];\n        amount = amount || length - begin;\n\n        if (obj instanceof this || options && options.readNull && obj == null && amount <= 1) {\n          if (readIndex) list.__index = begin + 1;\n          return obj && options && options.clone ? obj.clone() : obj;\n        }\n\n        obj = Base.create(proto);\n        if (readIndex) obj.__read = true;\n        obj = obj.initialize.apply(obj, begin > 0 || begin + amount < length ? Base.slice(list, begin, begin + amount) : list) || obj;\n\n        if (readIndex) {\n          list.__index = begin + obj.__read;\n          var filtered = obj.__filtered;\n\n          if (filtered) {\n            list.__filtered = filtered;\n            obj.__filtered = undefined;\n          }\n\n          obj.__read = undefined;\n        }\n\n        return obj;\n      },\n      peek: function (list, start) {\n        return list[list.__index = start || list.__index || 0];\n      },\n      remain: function (list) {\n        return list.length - (list.__index || 0);\n      },\n      readList: function (list, start, options, amount) {\n        var res = [],\n            entry,\n            begin = start || 0,\n            end = amount ? begin + amount : list.length;\n\n        for (var i = begin; i < end; i++) {\n          res.push(Array.isArray(entry = list[i]) ? this.read(entry, 0, options) : this.read(list, i, options, 1));\n        }\n\n        return res;\n      },\n      readNamed: function (list, name, start, options, amount) {\n        var value = this.getNamed(list, name),\n            hasValue = value !== undefined;\n\n        if (hasValue) {\n          var filtered = list.__filtered;\n\n          if (!filtered) {\n            var source = this.getSource(list);\n            filtered = list.__filtered = Base.create(source);\n            filtered.__unfiltered = source;\n          }\n\n          filtered[name] = undefined;\n        }\n\n        return this.read(hasValue ? [value] : list, start, options, amount);\n      },\n      readSupported: function (list, dest) {\n        var source = this.getSource(list),\n            that = this,\n            read = false;\n\n        if (source) {\n          Object.keys(source).forEach(function (key) {\n            if (key in dest) {\n              var value = that.readNamed(list, key);\n\n              if (value !== undefined) {\n                dest[key] = value;\n              }\n\n              read = true;\n            }\n          });\n        }\n\n        return read;\n      },\n      getSource: function (list) {\n        var source = list.__source;\n\n        if (source === undefined) {\n          var arg = list.length === 1 && list[0];\n          source = list.__source = arg && Base.isPlainObject(arg) ? arg : null;\n        }\n\n        return source;\n      },\n      getNamed: function (list, name) {\n        var source = this.getSource(list);\n\n        if (source) {\n          return name ? source[name] : list.__filtered || source;\n        }\n      },\n      hasNamed: function (list, name) {\n        return !!this.getNamed(list, name);\n      },\n      filter: function (dest, source, exclude, prioritize) {\n        var processed;\n\n        function handleKey(key) {\n          if (!(exclude && key in exclude) && !(processed && key in processed)) {\n            var value = source[key];\n            if (value !== undefined) dest[key] = value;\n          }\n        }\n\n        if (prioritize) {\n          var keys = {};\n\n          for (var i = 0, key, l = prioritize.length; i < l; i++) {\n            if ((key = prioritize[i]) in source) {\n              handleKey(key);\n              keys[key] = true;\n            }\n          }\n\n          processed = keys;\n        }\n\n        Object.keys(source.__unfiltered || source).forEach(handleKey);\n        return dest;\n      },\n      isPlainValue: function (obj, asString) {\n        return Base.isPlainObject(obj) || Array.isArray(obj) || asString && typeof obj === 'string';\n      },\n      serialize: function (obj, options, compact, dictionary) {\n        options = options || {};\n        var isRoot = !dictionary,\n            res;\n\n        if (isRoot) {\n          options.formatter = new Formatter(options.precision);\n          dictionary = {\n            length: 0,\n            definitions: {},\n            references: {},\n            add: function (item, create) {\n              var id = '#' + item._id,\n                  ref = this.references[id];\n\n              if (!ref) {\n                this.length++;\n                var res = create.call(item),\n                    name = item._class;\n                if (name && res[0] !== name) res.unshift(name);\n                this.definitions[id] = res;\n                ref = this.references[id] = [id];\n              }\n\n              return ref;\n            }\n          };\n        }\n\n        if (obj && obj._serialize) {\n          res = obj._serialize(options, dictionary);\n          var name = obj._class;\n\n          if (name && !obj._compactSerialize && (isRoot || !compact) && res[0] !== name) {\n            res.unshift(name);\n          }\n        } else if (Array.isArray(obj)) {\n          res = [];\n\n          for (var i = 0, l = obj.length; i < l; i++) res[i] = Base.serialize(obj[i], options, compact, dictionary);\n        } else if (Base.isPlainObject(obj)) {\n          res = {};\n          var keys = Object.keys(obj);\n\n          for (var i = 0, l = keys.length; i < l; i++) {\n            var key = keys[i];\n            res[key] = Base.serialize(obj[key], options, compact, dictionary);\n          }\n        } else if (typeof obj === 'number') {\n          res = options.formatter.number(obj, options.precision);\n        } else {\n          res = obj;\n        }\n\n        return isRoot && dictionary.length > 0 ? [['dictionary', dictionary.definitions], res] : res;\n      },\n      deserialize: function (json, create, _data, _setDictionary, _isRoot) {\n        var res = json,\n            isFirst = !_data,\n            hasDictionary = isFirst && json && json.length && json[0][0] === 'dictionary';\n        _data = _data || {};\n\n        if (Array.isArray(json)) {\n          var type = json[0],\n              isDictionary = type === 'dictionary';\n\n          if (json.length == 1 && /^#/.test(type)) {\n            return _data.dictionary[type];\n          }\n\n          type = Base.exports[type];\n          res = [];\n\n          for (var i = type ? 1 : 0, l = json.length; i < l; i++) {\n            res.push(Base.deserialize(json[i], create, _data, isDictionary, hasDictionary));\n          }\n\n          if (type) {\n            var args = res;\n\n            if (create) {\n              res = create(type, args, isFirst || _isRoot);\n            } else {\n              res = new type(args);\n            }\n          }\n        } else if (Base.isPlainObject(json)) {\n          res = {};\n          if (_setDictionary) _data.dictionary = res;\n\n          for (var key in json) res[key] = Base.deserialize(json[key], create, _data);\n        }\n\n        return hasDictionary ? res[1] : res;\n      },\n      exportJSON: function (obj, options) {\n        var json = Base.serialize(obj, options);\n        return options && options.asString == false ? json : JSON.stringify(json);\n      },\n      importJSON: function (json, target) {\n        return Base.deserialize(typeof json === 'string' ? JSON.parse(json) : json, function (ctor, args, isRoot) {\n          var useTarget = isRoot && target && target.constructor === ctor,\n              obj = useTarget ? target : Base.create(ctor.prototype);\n\n          if (args.length === 1 && obj instanceof Item && (useTarget || !(obj instanceof Layer))) {\n            var arg = args[0];\n\n            if (Base.isPlainObject(arg)) {\n              arg.insert = false;\n\n              if (useTarget) {\n                args = args.concat([{\n                  insert: true\n                }]);\n              }\n            }\n          }\n\n          (useTarget ? obj.set : ctor).apply(obj, args);\n          if (useTarget) target = null;\n          return obj;\n        });\n      },\n      push: function (list, items) {\n        var itemsLength = items.length;\n\n        if (itemsLength < 4096) {\n          list.push.apply(list, items);\n        } else {\n          var startLength = list.length;\n          list.length += itemsLength;\n\n          for (var i = 0; i < itemsLength; i++) {\n            list[startLength + i] = items[i];\n          }\n        }\n\n        return list;\n      },\n      splice: function (list, items, index, remove) {\n        var amount = items && items.length,\n            append = index === undefined;\n        index = append ? list.length : index;\n        if (index > list.length) index = list.length;\n\n        for (var i = 0; i < amount; i++) items[i]._index = index + i;\n\n        if (append) {\n          Base.push(list, items);\n          return [];\n        } else {\n          var args = [index, remove];\n          if (items) Base.push(args, items);\n          var removed = list.splice.apply(list, args);\n\n          for (var i = 0, l = removed.length; i < l; i++) removed[i]._index = undefined;\n\n          for (var i = index + amount, l = list.length; i < l; i++) list[i]._index = i;\n\n          return removed;\n        }\n      },\n      capitalize: function (str) {\n        return str.replace(/\\b[a-z]/g, function (match) {\n          return match.toUpperCase();\n        });\n      },\n      camelize: function (str) {\n        return str.replace(/-(.)/g, function (match, chr) {\n          return chr.toUpperCase();\n        });\n      },\n      hyphenate: function (str) {\n        return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n      }\n    }\n  });\n  var Emitter = {\n    on: function (type, func) {\n      if (typeof type !== 'string') {\n        Base.each(type, function (value, key) {\n          this.on(key, value);\n        }, this);\n      } else {\n        var types = this._eventTypes,\n            entry = types && types[type],\n            handlers = this._callbacks = this._callbacks || {};\n        handlers = handlers[type] = handlers[type] || [];\n\n        if (handlers.indexOf(func) === -1) {\n          handlers.push(func);\n          if (entry && entry.install && handlers.length === 1) entry.install.call(this, type);\n        }\n      }\n\n      return this;\n    },\n    off: function (type, func) {\n      if (typeof type !== 'string') {\n        Base.each(type, function (value, key) {\n          this.off(key, value);\n        }, this);\n        return;\n      }\n\n      var types = this._eventTypes,\n          entry = types && types[type],\n          handlers = this._callbacks && this._callbacks[type],\n          index;\n\n      if (handlers) {\n        if (!func || (index = handlers.indexOf(func)) !== -1 && handlers.length === 1) {\n          if (entry && entry.uninstall) entry.uninstall.call(this, type);\n          delete this._callbacks[type];\n        } else if (index !== -1) {\n          handlers.splice(index, 1);\n        }\n      }\n\n      return this;\n    },\n    once: function (type, func) {\n      return this.on(type, function handler() {\n        func.apply(this, arguments);\n        this.off(type, handler);\n      });\n    },\n    emit: function (type, event) {\n      var handlers = this._callbacks && this._callbacks[type];\n      if (!handlers) return false;\n      var args = Base.slice(arguments, 1),\n          setTarget = event && event.target && !event.currentTarget;\n      handlers = handlers.slice();\n      if (setTarget) event.currentTarget = this;\n\n      for (var i = 0, l = handlers.length; i < l; i++) {\n        if (handlers[i].apply(this, args) == false) {\n          if (event && event.stop) event.stop();\n          break;\n        }\n      }\n\n      if (setTarget) delete event.currentTarget;\n      return true;\n    },\n    responds: function (type) {\n      return !!(this._callbacks && this._callbacks[type]);\n    },\n    attach: '#on',\n    detach: '#off',\n    fire: '#emit',\n    _installEvents: function (install) {\n      var types = this._eventTypes,\n          handlers = this._callbacks,\n          key = install ? 'install' : 'uninstall';\n\n      if (types) {\n        for (var type in handlers) {\n          if (handlers[type].length > 0) {\n            var entry = types[type],\n                func = entry && entry[key];\n            if (func) func.call(this, type);\n          }\n        }\n      }\n    },\n    statics: {\n      inject: function inject(src) {\n        var events = src._events;\n\n        if (events) {\n          var types = {};\n          Base.each(events, function (entry, key) {\n            var isString = typeof entry === 'string',\n                name = isString ? entry : key,\n                part = Base.capitalize(name),\n                type = name.substring(2).toLowerCase();\n            types[type] = isString ? {} : entry;\n            name = '_' + name;\n\n            src['get' + part] = function () {\n              return this[name];\n            };\n\n            src['set' + part] = function (func) {\n              var prev = this[name];\n              if (prev) this.off(type, prev);\n              if (func) this.on(type, func);\n              this[name] = func;\n            };\n          });\n          src._eventTypes = types;\n        }\n\n        return inject.base.apply(this, arguments);\n      }\n    }\n  };\n  var PaperScope = Base.extend({\n    _class: 'PaperScope',\n    initialize: function PaperScope() {\n      paper = this;\n      this.settings = new Base({\n        applyMatrix: true,\n        insertItems: true,\n        handleSize: 4,\n        hitTolerance: 0\n      });\n      this.project = null;\n      this.projects = [];\n      this.tools = [];\n      this._id = PaperScope._id++;\n      PaperScope._scopes[this._id] = this;\n      var proto = PaperScope.prototype;\n\n      if (!this.support) {\n        var ctx = CanvasProvider.getContext(1, 1) || {};\n        proto.support = {\n          nativeDash: 'setLineDash' in ctx || 'mozDash' in ctx,\n          nativeBlendModes: BlendMode.nativeModes\n        };\n        CanvasProvider.release(ctx);\n      }\n\n      if (!this.agent) {\n        var user = self.navigator.userAgent.toLowerCase(),\n            os = (/(darwin|win|mac|linux|freebsd|sunos)/.exec(user) || [])[0],\n            platform = os === 'darwin' ? 'mac' : os,\n            agent = proto.agent = proto.browser = {\n          platform: platform\n        };\n        if (platform) agent[platform] = true;\n        user.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\\/?\\s*([.\\d]+)(?:.*version\\/([.\\d]+))?(?:.*rv\\:v?([.\\d]+))?/g, function (match, n, v1, v2, rv) {\n          if (!agent.chrome) {\n            var v = n === 'opera' ? v2 : /^(node|trident)$/.test(n) ? rv : v1;\n            agent.version = v;\n            agent.versionNumber = parseFloat(v);\n            n = {\n              trident: 'msie',\n              jsdom: 'node'\n            }[n] || n;\n            agent.name = n;\n            agent[n] = true;\n          }\n        });\n        if (agent.chrome) delete agent.webkit;\n        if (agent.atom) delete agent.chrome;\n      }\n    },\n    version: \"0.12.15\",\n    getView: function () {\n      var project = this.project;\n      return project && project._view;\n    },\n    getPaper: function () {\n      return this;\n    },\n    execute: function (code, options) {\n      var exports = paper.PaperScript.execute(code, this, options);\n      View.updateFocus();\n      return exports;\n    },\n    install: function (scope) {\n      var that = this;\n      Base.each(['project', 'view', 'tool'], function (key) {\n        Base.define(scope, key, {\n          configurable: true,\n          get: function () {\n            return that[key];\n          }\n        });\n      });\n\n      for (var key in this) if (!/^_/.test(key) && this[key]) scope[key] = this[key];\n    },\n    setup: function (element) {\n      paper = this;\n      this.project = new Project(element);\n      return this;\n    },\n    createCanvas: function (width, height) {\n      return CanvasProvider.getCanvas(width, height);\n    },\n    activate: function () {\n      paper = this;\n    },\n    clear: function () {\n      var projects = this.projects,\n          tools = this.tools;\n\n      for (var i = projects.length - 1; i >= 0; i--) projects[i].remove();\n\n      for (var i = tools.length - 1; i >= 0; i--) tools[i].remove();\n    },\n    remove: function () {\n      this.clear();\n      delete PaperScope._scopes[this._id];\n    },\n    statics: new function () {\n      function handleAttribute(name) {\n        name += 'Attribute';\n        return function (el, attr) {\n          return el[name](attr) || el[name]('data-paper-' + attr);\n        };\n      }\n\n      return {\n        _scopes: {},\n        _id: 0,\n        get: function (id) {\n          return this._scopes[id] || null;\n        },\n        getAttribute: handleAttribute('get'),\n        hasAttribute: handleAttribute('has')\n      };\n    }()\n  });\n  var PaperScopeItem = Base.extend(Emitter, {\n    initialize: function (activate) {\n      this._scope = paper;\n      this._index = this._scope[this._list].push(this) - 1;\n      if (activate || !this._scope[this._reference]) this.activate();\n    },\n    activate: function () {\n      if (!this._scope) return false;\n      var prev = this._scope[this._reference];\n      if (prev && prev !== this) prev.emit('deactivate');\n      this._scope[this._reference] = this;\n      this.emit('activate', prev);\n      return true;\n    },\n    isActive: function () {\n      return this._scope[this._reference] === this;\n    },\n    remove: function () {\n      if (this._index == null) return false;\n      Base.splice(this._scope[this._list], null, this._index, 1);\n      if (this._scope[this._reference] == this) this._scope[this._reference] = null;\n      this._scope = null;\n      return true;\n    },\n    getView: function () {\n      return this._scope.getView();\n    }\n  });\n  var CollisionDetection = {\n    findItemBoundsCollisions: function (items1, items2, tolerance) {\n      function getBounds(items) {\n        var bounds = new Array(items.length);\n\n        for (var i = 0; i < items.length; i++) {\n          var rect = items[i].getBounds();\n          bounds[i] = [rect.left, rect.top, rect.right, rect.bottom];\n        }\n\n        return bounds;\n      }\n\n      var bounds1 = getBounds(items1),\n          bounds2 = !items2 || items2 === items1 ? bounds1 : getBounds(items2);\n      return this.findBoundsCollisions(bounds1, bounds2, tolerance || 0);\n    },\n    findCurveBoundsCollisions: function (curves1, curves2, tolerance, bothAxis) {\n      function getBounds(curves) {\n        var min = Math.min,\n            max = Math.max,\n            bounds = new Array(curves.length);\n\n        for (var i = 0; i < curves.length; i++) {\n          var v = curves[i];\n          bounds[i] = [min(v[0], v[2], v[4], v[6]), min(v[1], v[3], v[5], v[7]), max(v[0], v[2], v[4], v[6]), max(v[1], v[3], v[5], v[7])];\n        }\n\n        return bounds;\n      }\n\n      var bounds1 = getBounds(curves1),\n          bounds2 = !curves2 || curves2 === curves1 ? bounds1 : getBounds(curves2);\n\n      if (bothAxis) {\n        var hor = this.findBoundsCollisions(bounds1, bounds2, tolerance || 0, false, true),\n            ver = this.findBoundsCollisions(bounds1, bounds2, tolerance || 0, true, true),\n            list = [];\n\n        for (var i = 0, l = hor.length; i < l; i++) {\n          list[i] = {\n            hor: hor[i],\n            ver: ver[i]\n          };\n        }\n\n        return list;\n      }\n\n      return this.findBoundsCollisions(bounds1, bounds2, tolerance || 0);\n    },\n    findBoundsCollisions: function (boundsA, boundsB, tolerance, sweepVertical, onlySweepAxisCollisions) {\n      var self = !boundsB || boundsA === boundsB,\n          allBounds = self ? boundsA : boundsA.concat(boundsB),\n          lengthA = boundsA.length,\n          lengthAll = allBounds.length;\n\n      function binarySearch(indices, coord, value) {\n        var lo = 0,\n            hi = indices.length;\n\n        while (lo < hi) {\n          var mid = hi + lo >>> 1;\n\n          if (allBounds[indices[mid]][coord] < value) {\n            lo = mid + 1;\n          } else {\n            hi = mid;\n          }\n        }\n\n        return lo - 1;\n      }\n\n      var pri0 = sweepVertical ? 1 : 0,\n          pri1 = pri0 + 2,\n          sec0 = sweepVertical ? 0 : 1,\n          sec1 = sec0 + 2;\n      var allIndicesByPri0 = new Array(lengthAll);\n\n      for (var i = 0; i < lengthAll; i++) {\n        allIndicesByPri0[i] = i;\n      }\n\n      allIndicesByPri0.sort(function (i1, i2) {\n        return allBounds[i1][pri0] - allBounds[i2][pri0];\n      });\n      var activeIndicesByPri1 = [],\n          allCollisions = new Array(lengthA);\n\n      for (var i = 0; i < lengthAll; i++) {\n        var curIndex = allIndicesByPri0[i],\n            curBounds = allBounds[curIndex],\n            origIndex = self ? curIndex : curIndex - lengthA,\n            isCurrentA = curIndex < lengthA,\n            isCurrentB = self || !isCurrentA,\n            curCollisions = isCurrentA ? [] : null;\n\n        if (activeIndicesByPri1.length) {\n          var pruneCount = binarySearch(activeIndicesByPri1, pri1, curBounds[pri0] - tolerance) + 1;\n          activeIndicesByPri1.splice(0, pruneCount);\n\n          if (self && onlySweepAxisCollisions) {\n            curCollisions = curCollisions.concat(activeIndicesByPri1);\n\n            for (var j = 0; j < activeIndicesByPri1.length; j++) {\n              var activeIndex = activeIndicesByPri1[j];\n              allCollisions[activeIndex].push(origIndex);\n            }\n          } else {\n            var curSec1 = curBounds[sec1],\n                curSec0 = curBounds[sec0];\n\n            for (var j = 0; j < activeIndicesByPri1.length; j++) {\n              var activeIndex = activeIndicesByPri1[j],\n                  activeBounds = allBounds[activeIndex],\n                  isActiveA = activeIndex < lengthA,\n                  isActiveB = self || activeIndex >= lengthA;\n\n              if (onlySweepAxisCollisions || (isCurrentA && isActiveB || isCurrentB && isActiveA) && curSec1 >= activeBounds[sec0] - tolerance && curSec0 <= activeBounds[sec1] + tolerance) {\n                if (isCurrentA && isActiveB) {\n                  curCollisions.push(self ? activeIndex : activeIndex - lengthA);\n                }\n\n                if (isCurrentB && isActiveA) {\n                  allCollisions[activeIndex].push(origIndex);\n                }\n              }\n            }\n          }\n        }\n\n        if (isCurrentA) {\n          if (boundsA === boundsB) {\n            curCollisions.push(curIndex);\n          }\n\n          allCollisions[curIndex] = curCollisions;\n        }\n\n        if (activeIndicesByPri1.length) {\n          var curPri1 = curBounds[pri1],\n              index = binarySearch(activeIndicesByPri1, pri1, curPri1);\n          activeIndicesByPri1.splice(index + 1, 0, curIndex);\n        } else {\n          activeIndicesByPri1.push(curIndex);\n        }\n      }\n\n      for (var i = 0; i < allCollisions.length; i++) {\n        var collisions = allCollisions[i];\n\n        if (collisions) {\n          collisions.sort(function (i1, i2) {\n            return i1 - i2;\n          });\n        }\n      }\n\n      return allCollisions;\n    }\n  };\n  var Formatter = Base.extend({\n    initialize: function (precision) {\n      this.precision = Base.pick(precision, 5);\n      this.multiplier = Math.pow(10, this.precision);\n    },\n    number: function (val) {\n      return this.precision < 16 ? Math.round(val * this.multiplier) / this.multiplier : val;\n    },\n    pair: function (val1, val2, separator) {\n      return this.number(val1) + (separator || ',') + this.number(val2);\n    },\n    point: function (val, separator) {\n      return this.number(val.x) + (separator || ',') + this.number(val.y);\n    },\n    size: function (val, separator) {\n      return this.number(val.width) + (separator || ',') + this.number(val.height);\n    },\n    rectangle: function (val, separator) {\n      return this.point(val, separator) + (separator || ',') + this.size(val, separator);\n    }\n  });\n  Formatter.instance = new Formatter();\n  var Numerical = new function () {\n    var abscissas = [[0.5773502691896257645091488], [0, 0.7745966692414833770358531], [0.3399810435848562648026658, 0.8611363115940525752239465], [0, 0.5384693101056830910363144, 0.9061798459386639927976269], [0.2386191860831969086305017, 0.6612093864662645136613996, 0.9324695142031520278123016], [0, 0.4058451513773971669066064, 0.7415311855993944398638648, 0.9491079123427585245261897], [0.1834346424956498049394761, 0.5255324099163289858177390, 0.7966664774136267395915539, 0.9602898564975362316835609], [0, 0.3242534234038089290385380, 0.6133714327005903973087020, 0.8360311073266357942994298, 0.9681602395076260898355762], [0.1488743389816312108848260, 0.4333953941292471907992659, 0.6794095682990244062343274, 0.8650633666889845107320967, 0.9739065285171717200779640], [0, 0.2695431559523449723315320, 0.5190961292068118159257257, 0.7301520055740493240934163, 0.8870625997680952990751578, 0.9782286581460569928039380], [0.1252334085114689154724414, 0.3678314989981801937526915, 0.5873179542866174472967024, 0.7699026741943046870368938, 0.9041172563704748566784659, 0.9815606342467192506905491], [0, 0.2304583159551347940655281, 0.4484927510364468528779129, 0.6423493394403402206439846, 0.8015780907333099127942065, 0.9175983992229779652065478, 0.9841830547185881494728294], [0.1080549487073436620662447, 0.3191123689278897604356718, 0.5152486363581540919652907, 0.6872929048116854701480198, 0.8272013150697649931897947, 0.9284348836635735173363911, 0.9862838086968123388415973], [0, 0.2011940939974345223006283, 0.3941513470775633698972074, 0.5709721726085388475372267, 0.7244177313601700474161861, 0.8482065834104272162006483, 0.9372733924007059043077589, 0.9879925180204854284895657], [0.0950125098376374401853193, 0.2816035507792589132304605, 0.4580167776572273863424194, 0.6178762444026437484466718, 0.7554044083550030338951012, 0.8656312023878317438804679, 0.9445750230732325760779884, 0.9894009349916499325961542]];\n    var weights = [[1], [0.8888888888888888888888889, 0.5555555555555555555555556], [0.6521451548625461426269361, 0.3478548451374538573730639], [0.5688888888888888888888889, 0.4786286704993664680412915, 0.2369268850561890875142640], [0.4679139345726910473898703, 0.3607615730481386075698335, 0.1713244923791703450402961], [0.4179591836734693877551020, 0.3818300505051189449503698, 0.2797053914892766679014678, 0.1294849661688696932706114], [0.3626837833783619829651504, 0.3137066458778872873379622, 0.2223810344533744705443560, 0.1012285362903762591525314], [0.3302393550012597631645251, 0.3123470770400028400686304, 0.2606106964029354623187429, 0.1806481606948574040584720, 0.0812743883615744119718922], [0.2955242247147528701738930, 0.2692667193099963550912269, 0.2190863625159820439955349, 0.1494513491505805931457763, 0.0666713443086881375935688], [0.2729250867779006307144835, 0.2628045445102466621806889, 0.2331937645919904799185237, 0.1862902109277342514260976, 0.1255803694649046246346943, 0.0556685671161736664827537], [0.2491470458134027850005624, 0.2334925365383548087608499, 0.2031674267230659217490645, 0.1600783285433462263346525, 0.1069393259953184309602547, 0.0471753363865118271946160], [0.2325515532308739101945895, 0.2262831802628972384120902, 0.2078160475368885023125232, 0.1781459807619457382800467, 0.1388735102197872384636018, 0.0921214998377284479144218, 0.0404840047653158795200216], [0.2152638534631577901958764, 0.2051984637212956039659241, 0.1855383974779378137417166, 0.1572031671581935345696019, 0.1215185706879031846894148, 0.0801580871597602098056333, 0.0351194603317518630318329], [0.2025782419255612728806202, 0.1984314853271115764561183, 0.1861610000155622110268006, 0.1662692058169939335532009, 0.1395706779261543144478048, 0.1071592204671719350118695, 0.0703660474881081247092674, 0.0307532419961172683546284], [0.1894506104550684962853967, 0.1826034150449235888667637, 0.1691565193950025381893121, 0.1495959888165767320815017, 0.1246289712555338720524763, 0.0951585116824927848099251, 0.0622535239386478928628438, 0.0271524594117540948517806]];\n\n    var abs = Math.abs,\n        sqrt = Math.sqrt,\n        pow = Math.pow,\n        log2 = Math.log2 || function (x) {\n      return Math.log(x) * Math.LOG2E;\n    },\n        EPSILON = 1e-12,\n        MACHINE_EPSILON = 1.12e-16;\n\n    function clamp(value, min, max) {\n      return value < min ? min : value > max ? max : value;\n    }\n\n    function getDiscriminant(a, b, c) {\n      function split(v) {\n        var x = v * 134217729,\n            y = v - x,\n            hi = y + x,\n            lo = v - hi;\n        return [hi, lo];\n      }\n\n      var D = b * b - a * c,\n          E = b * b + a * c;\n\n      if (abs(D) * 3 < E) {\n        var ad = split(a),\n            bd = split(b),\n            cd = split(c),\n            p = b * b,\n            dp = bd[0] * bd[0] - p + 2 * bd[0] * bd[1] + bd[1] * bd[1],\n            q = a * c,\n            dq = ad[0] * cd[0] - q + ad[0] * cd[1] + ad[1] * cd[0] + ad[1] * cd[1];\n        D = p - q + (dp - dq);\n      }\n\n      return D;\n    }\n\n    function getNormalizationFactor() {\n      var norm = Math.max.apply(Math, arguments);\n      return norm && (norm < 1e-8 || norm > 1e8) ? pow(2, -Math.round(log2(norm))) : 0;\n    }\n\n    return {\n      EPSILON: EPSILON,\n      MACHINE_EPSILON: MACHINE_EPSILON,\n      CURVETIME_EPSILON: 1e-8,\n      GEOMETRIC_EPSILON: 1e-7,\n      TRIGONOMETRIC_EPSILON: 1e-8,\n      KAPPA: 4 * (sqrt(2) - 1) / 3,\n      isZero: function (val) {\n        return val >= -EPSILON && val <= EPSILON;\n      },\n      isMachineZero: function (val) {\n        return val >= -MACHINE_EPSILON && val <= MACHINE_EPSILON;\n      },\n      clamp: clamp,\n      integrate: function (f, a, b, n) {\n        var x = abscissas[n - 2],\n            w = weights[n - 2],\n            A = (b - a) * 0.5,\n            B = A + a,\n            i = 0,\n            m = n + 1 >> 1,\n            sum = n & 1 ? w[i++] * f(B) : 0;\n\n        while (i < m) {\n          var Ax = A * x[i];\n          sum += w[i++] * (f(B + Ax) + f(B - Ax));\n        }\n\n        return A * sum;\n      },\n      findRoot: function (f, df, x, a, b, n, tolerance) {\n        for (var i = 0; i < n; i++) {\n          var fx = f(x),\n              dx = fx / df(x),\n              nx = x - dx;\n\n          if (abs(dx) < tolerance) {\n            x = nx;\n            break;\n          }\n\n          if (fx > 0) {\n            b = x;\n            x = nx <= a ? (a + b) * 0.5 : nx;\n          } else {\n            a = x;\n            x = nx >= b ? (a + b) * 0.5 : nx;\n          }\n        }\n\n        return clamp(x, a, b);\n      },\n      solveQuadratic: function (a, b, c, roots, min, max) {\n        var x1,\n            x2 = Infinity;\n\n        if (abs(a) < EPSILON) {\n          if (abs(b) < EPSILON) return abs(c) < EPSILON ? -1 : 0;\n          x1 = -c / b;\n        } else {\n          b *= -0.5;\n          var D = getDiscriminant(a, b, c);\n\n          if (D && abs(D) < MACHINE_EPSILON) {\n            var f = getNormalizationFactor(abs(a), abs(b), abs(c));\n\n            if (f) {\n              a *= f;\n              b *= f;\n              c *= f;\n              D = getDiscriminant(a, b, c);\n            }\n          }\n\n          if (D >= -MACHINE_EPSILON) {\n            var Q = D < 0 ? 0 : sqrt(D),\n                R = b + (b < 0 ? -Q : Q);\n\n            if (R === 0) {\n              x1 = c / a;\n              x2 = -x1;\n            } else {\n              x1 = R / a;\n              x2 = c / R;\n            }\n          }\n        }\n\n        var count = 0,\n            boundless = min == null,\n            minB = min - EPSILON,\n            maxB = max + EPSILON;\n        if (isFinite(x1) && (boundless || x1 > minB && x1 < maxB)) roots[count++] = boundless ? x1 : clamp(x1, min, max);\n        if (x2 !== x1 && isFinite(x2) && (boundless || x2 > minB && x2 < maxB)) roots[count++] = boundless ? x2 : clamp(x2, min, max);\n        return count;\n      },\n      solveCubic: function (a, b, c, d, roots, min, max) {\n        var f = getNormalizationFactor(abs(a), abs(b), abs(c), abs(d)),\n            x,\n            b1,\n            c2,\n            qd,\n            q;\n\n        if (f) {\n          a *= f;\n          b *= f;\n          c *= f;\n          d *= f;\n        }\n\n        function evaluate(x0) {\n          x = x0;\n          var tmp = a * x;\n          b1 = tmp + b;\n          c2 = b1 * x + c;\n          qd = (tmp + b1) * x + c2;\n          q = c2 * x + d;\n        }\n\n        if (abs(a) < EPSILON) {\n          a = b;\n          b1 = c;\n          c2 = d;\n          x = Infinity;\n        } else if (abs(d) < EPSILON) {\n          b1 = b;\n          c2 = c;\n          x = 0;\n        } else {\n          evaluate(-(b / a) / 3);\n          var t = q / a,\n              r = pow(abs(t), 1 / 3),\n              s = t < 0 ? -1 : 1,\n              td = -qd / a,\n              rd = td > 0 ? 1.324717957244746 * Math.max(r, sqrt(td)) : r,\n              x0 = x - s * rd;\n\n          if (x0 !== x) {\n            do {\n              evaluate(x0);\n              x0 = qd === 0 ? x : x - q / qd / (1 + MACHINE_EPSILON);\n            } while (s * x0 > s * x);\n\n            if (abs(a) * x * x > abs(d / x)) {\n              c2 = -d / x;\n              b1 = (c2 - c) / x;\n            }\n          }\n        }\n\n        var count = Numerical.solveQuadratic(a, b1, c2, roots, min, max),\n            boundless = min == null;\n        if (isFinite(x) && (count === 0 || count > 0 && x !== roots[0] && x !== roots[1]) && (boundless || x > min - EPSILON && x < max + EPSILON)) roots[count++] = boundless ? x : clamp(x, min, max);\n        return count;\n      }\n    };\n  }();\n  var UID = {\n    _id: 1,\n    _pools: {},\n    get: function (name) {\n      if (name) {\n        var pool = this._pools[name];\n        if (!pool) pool = this._pools[name] = {\n          _id: 1\n        };\n        return pool._id++;\n      } else {\n        return this._id++;\n      }\n    }\n  };\n  var Point = Base.extend({\n    _class: 'Point',\n    _readIndex: true,\n    initialize: function Point(arg0, arg1) {\n      var type = typeof arg0,\n          reading = this.__read,\n          read = 0;\n\n      if (type === 'number') {\n        var hasY = typeof arg1 === 'number';\n\n        this._set(arg0, hasY ? arg1 : arg0);\n\n        if (reading) read = hasY ? 2 : 1;\n      } else if (type === 'undefined' || arg0 === null) {\n        this._set(0, 0);\n\n        if (reading) read = arg0 === null ? 1 : 0;\n      } else {\n        var obj = type === 'string' ? arg0.split(/[\\s,]+/) || [] : arg0;\n        read = 1;\n\n        if (Array.isArray(obj)) {\n          this._set(+obj[0], +(obj.length > 1 ? obj[1] : obj[0]));\n        } else if ('x' in obj) {\n          this._set(obj.x || 0, obj.y || 0);\n        } else if ('width' in obj) {\n          this._set(obj.width || 0, obj.height || 0);\n        } else if ('angle' in obj) {\n          this._set(obj.length || 0, 0);\n\n          this.setAngle(obj.angle || 0);\n        } else {\n          this._set(0, 0);\n\n          read = 0;\n        }\n      }\n\n      if (reading) this.__read = read;\n      return this;\n    },\n    set: '#initialize',\n    _set: function (x, y) {\n      this.x = x;\n      this.y = y;\n      return this;\n    },\n    equals: function (point) {\n      return this === point || point && (this.x === point.x && this.y === point.y || Array.isArray(point) && this.x === point[0] && this.y === point[1]) || false;\n    },\n    clone: function () {\n      return new Point(this.x, this.y);\n    },\n    toString: function () {\n      var f = Formatter.instance;\n      return '{ x: ' + f.number(this.x) + ', y: ' + f.number(this.y) + ' }';\n    },\n    _serialize: function (options) {\n      var f = options.formatter;\n      return [f.number(this.x), f.number(this.y)];\n    },\n    getLength: function () {\n      return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n    setLength: function (length) {\n      if (this.isZero()) {\n        var angle = this._angle || 0;\n\n        this._set(Math.cos(angle) * length, Math.sin(angle) * length);\n      } else {\n        var scale = length / this.getLength();\n        if (Numerical.isZero(scale)) this.getAngle();\n\n        this._set(this.x * scale, this.y * scale);\n      }\n    },\n    getAngle: function () {\n      return this.getAngleInRadians.apply(this, arguments) * 180 / Math.PI;\n    },\n    setAngle: function (angle) {\n      this.setAngleInRadians.call(this, angle * Math.PI / 180);\n    },\n    getAngleInDegrees: '#getAngle',\n    setAngleInDegrees: '#setAngle',\n    getAngleInRadians: function () {\n      if (!arguments.length) {\n        return this.isZero() ? this._angle || 0 : this._angle = Math.atan2(this.y, this.x);\n      } else {\n        var point = Point.read(arguments),\n            div = this.getLength() * point.getLength();\n\n        if (Numerical.isZero(div)) {\n          return NaN;\n        } else {\n          var a = this.dot(point) / div;\n          return Math.acos(a < -1 ? -1 : a > 1 ? 1 : a);\n        }\n      }\n    },\n    setAngleInRadians: function (angle) {\n      this._angle = angle;\n\n      if (!this.isZero()) {\n        var length = this.getLength();\n\n        this._set(Math.cos(angle) * length, Math.sin(angle) * length);\n      }\n    },\n    getQuadrant: function () {\n      return this.x >= 0 ? this.y >= 0 ? 1 : 4 : this.y >= 0 ? 2 : 3;\n    }\n  }, {\n    beans: false,\n    getDirectedAngle: function () {\n      var point = Point.read(arguments);\n      return Math.atan2(this.cross(point), this.dot(point)) * 180 / Math.PI;\n    },\n    getDistance: function () {\n      var args = arguments,\n          point = Point.read(args),\n          x = point.x - this.x,\n          y = point.y - this.y,\n          d = x * x + y * y,\n          squared = Base.read(args);\n      return squared ? d : Math.sqrt(d);\n    },\n    normalize: function (length) {\n      if (length === undefined) length = 1;\n      var current = this.getLength(),\n          scale = current !== 0 ? length / current : 0,\n          point = new Point(this.x * scale, this.y * scale);\n      if (scale >= 0) point._angle = this._angle;\n      return point;\n    },\n    rotate: function (angle, center) {\n      if (angle === 0) return this.clone();\n      angle = angle * Math.PI / 180;\n      var point = center ? this.subtract(center) : this,\n          sin = Math.sin(angle),\n          cos = Math.cos(angle);\n      point = new Point(point.x * cos - point.y * sin, point.x * sin + point.y * cos);\n      return center ? point.add(center) : point;\n    },\n    transform: function (matrix) {\n      return matrix ? matrix._transformPoint(this) : this;\n    },\n    add: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x + point.x, this.y + point.y);\n    },\n    subtract: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x - point.x, this.y - point.y);\n    },\n    multiply: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x * point.x, this.y * point.y);\n    },\n    divide: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x / point.x, this.y / point.y);\n    },\n    modulo: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x % point.x, this.y % point.y);\n    },\n    negate: function () {\n      return new Point(-this.x, -this.y);\n    },\n    isInside: function () {\n      return Rectangle.read(arguments).contains(this);\n    },\n    isClose: function () {\n      var args = arguments,\n          point = Point.read(args),\n          tolerance = Base.read(args);\n      return this.getDistance(point) <= tolerance;\n    },\n    isCollinear: function () {\n      var point = Point.read(arguments);\n      return Point.isCollinear(this.x, this.y, point.x, point.y);\n    },\n    isColinear: '#isCollinear',\n    isOrthogonal: function () {\n      var point = Point.read(arguments);\n      return Point.isOrthogonal(this.x, this.y, point.x, point.y);\n    },\n    isZero: function () {\n      var isZero = Numerical.isZero;\n      return isZero(this.x) && isZero(this.y);\n    },\n    isNaN: function () {\n      return isNaN(this.x) || isNaN(this.y);\n    },\n    isInQuadrant: function (q) {\n      return this.x * (q > 1 && q < 4 ? -1 : 1) >= 0 && this.y * (q > 2 ? -1 : 1) >= 0;\n    },\n    dot: function () {\n      var point = Point.read(arguments);\n      return this.x * point.x + this.y * point.y;\n    },\n    cross: function () {\n      var point = Point.read(arguments);\n      return this.x * point.y - this.y * point.x;\n    },\n    project: function () {\n      var point = Point.read(arguments),\n          scale = point.isZero() ? 0 : this.dot(point) / point.dot(point);\n      return new Point(point.x * scale, point.y * scale);\n    },\n    statics: {\n      min: function () {\n        var args = arguments,\n            point1 = Point.read(args),\n            point2 = Point.read(args);\n        return new Point(Math.min(point1.x, point2.x), Math.min(point1.y, point2.y));\n      },\n      max: function () {\n        var args = arguments,\n            point1 = Point.read(args),\n            point2 = Point.read(args);\n        return new Point(Math.max(point1.x, point2.x), Math.max(point1.y, point2.y));\n      },\n      random: function () {\n        return new Point(Math.random(), Math.random());\n      },\n      isCollinear: function (x1, y1, x2, y2) {\n        return Math.abs(x1 * y2 - y1 * x2) <= Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2)) * 1e-8;\n      },\n      isOrthogonal: function (x1, y1, x2, y2) {\n        return Math.abs(x1 * x2 + y1 * y2) <= Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2)) * 1e-8;\n      }\n    }\n  }, Base.each(['round', 'ceil', 'floor', 'abs'], function (key) {\n    var op = Math[key];\n\n    this[key] = function () {\n      return new Point(op(this.x), op(this.y));\n    };\n  }, {}));\n  var LinkedPoint = Point.extend({\n    initialize: function Point(x, y, owner, setter) {\n      this._x = x;\n      this._y = y;\n      this._owner = owner;\n      this._setter = setter;\n    },\n    _set: function (x, y, _dontNotify) {\n      this._x = x;\n      this._y = y;\n      if (!_dontNotify) this._owner[this._setter](this);\n      return this;\n    },\n    getX: function () {\n      return this._x;\n    },\n    setX: function (x) {\n      this._x = x;\n\n      this._owner[this._setter](this);\n    },\n    getY: function () {\n      return this._y;\n    },\n    setY: function (y) {\n      this._y = y;\n\n      this._owner[this._setter](this);\n    },\n    isSelected: function () {\n      return !!(this._owner._selection & this._getSelection());\n    },\n    setSelected: function (selected) {\n      this._owner._changeSelection(this._getSelection(), selected);\n    },\n    _getSelection: function () {\n      return this._setter === 'setPosition' ? 4 : 0;\n    }\n  });\n  var Size = Base.extend({\n    _class: 'Size',\n    _readIndex: true,\n    initialize: function Size(arg0, arg1) {\n      var type = typeof arg0,\n          reading = this.__read,\n          read = 0;\n\n      if (type === 'number') {\n        var hasHeight = typeof arg1 === 'number';\n\n        this._set(arg0, hasHeight ? arg1 : arg0);\n\n        if (reading) read = hasHeight ? 2 : 1;\n      } else if (type === 'undefined' || arg0 === null) {\n        this._set(0, 0);\n\n        if (reading) read = arg0 === null ? 1 : 0;\n      } else {\n        var obj = type === 'string' ? arg0.split(/[\\s,]+/) || [] : arg0;\n        read = 1;\n\n        if (Array.isArray(obj)) {\n          this._set(+obj[0], +(obj.length > 1 ? obj[1] : obj[0]));\n        } else if ('width' in obj) {\n          this._set(obj.width || 0, obj.height || 0);\n        } else if ('x' in obj) {\n          this._set(obj.x || 0, obj.y || 0);\n        } else {\n          this._set(0, 0);\n\n          read = 0;\n        }\n      }\n\n      if (reading) this.__read = read;\n      return this;\n    },\n    set: '#initialize',\n    _set: function (width, height) {\n      this.width = width;\n      this.height = height;\n      return this;\n    },\n    equals: function (size) {\n      return size === this || size && (this.width === size.width && this.height === size.height || Array.isArray(size) && this.width === size[0] && this.height === size[1]) || false;\n    },\n    clone: function () {\n      return new Size(this.width, this.height);\n    },\n    toString: function () {\n      var f = Formatter.instance;\n      return '{ width: ' + f.number(this.width) + ', height: ' + f.number(this.height) + ' }';\n    },\n    _serialize: function (options) {\n      var f = options.formatter;\n      return [f.number(this.width), f.number(this.height)];\n    },\n    add: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width + size.width, this.height + size.height);\n    },\n    subtract: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width - size.width, this.height - size.height);\n    },\n    multiply: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width * size.width, this.height * size.height);\n    },\n    divide: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width / size.width, this.height / size.height);\n    },\n    modulo: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width % size.width, this.height % size.height);\n    },\n    negate: function () {\n      return new Size(-this.width, -this.height);\n    },\n    isZero: function () {\n      var isZero = Numerical.isZero;\n      return isZero(this.width) && isZero(this.height);\n    },\n    isNaN: function () {\n      return isNaN(this.width) || isNaN(this.height);\n    },\n    statics: {\n      min: function (size1, size2) {\n        return new Size(Math.min(size1.width, size2.width), Math.min(size1.height, size2.height));\n      },\n      max: function (size1, size2) {\n        return new Size(Math.max(size1.width, size2.width), Math.max(size1.height, size2.height));\n      },\n      random: function () {\n        return new Size(Math.random(), Math.random());\n      }\n    }\n  }, Base.each(['round', 'ceil', 'floor', 'abs'], function (key) {\n    var op = Math[key];\n\n    this[key] = function () {\n      return new Size(op(this.width), op(this.height));\n    };\n  }, {}));\n  var LinkedSize = Size.extend({\n    initialize: function Size(width, height, owner, setter) {\n      this._width = width;\n      this._height = height;\n      this._owner = owner;\n      this._setter = setter;\n    },\n    _set: function (width, height, _dontNotify) {\n      this._width = width;\n      this._height = height;\n      if (!_dontNotify) this._owner[this._setter](this);\n      return this;\n    },\n    getWidth: function () {\n      return this._width;\n    },\n    setWidth: function (width) {\n      this._width = width;\n\n      this._owner[this._setter](this);\n    },\n    getHeight: function () {\n      return this._height;\n    },\n    setHeight: function (height) {\n      this._height = height;\n\n      this._owner[this._setter](this);\n    }\n  });\n  var Rectangle = Base.extend({\n    _class: 'Rectangle',\n    _readIndex: true,\n    beans: true,\n    initialize: function Rectangle(arg0, arg1, arg2, arg3) {\n      var args = arguments,\n          type = typeof arg0,\n          read;\n\n      if (type === 'number') {\n        this._set(arg0, arg1, arg2, arg3);\n\n        read = 4;\n      } else if (type === 'undefined' || arg0 === null) {\n        this._set(0, 0, 0, 0);\n\n        read = arg0 === null ? 1 : 0;\n      } else if (args.length === 1) {\n        if (Array.isArray(arg0)) {\n          this._set.apply(this, arg0);\n\n          read = 1;\n        } else if (arg0.x !== undefined || arg0.width !== undefined) {\n          this._set(arg0.x || 0, arg0.y || 0, arg0.width || 0, arg0.height || 0);\n\n          read = 1;\n        } else if (arg0.from === undefined && arg0.to === undefined) {\n          this._set(0, 0, 0, 0);\n\n          if (Base.readSupported(args, this)) {\n            read = 1;\n          }\n        }\n      }\n\n      if (read === undefined) {\n        var frm = Point.readNamed(args, 'from'),\n            next = Base.peek(args),\n            x = frm.x,\n            y = frm.y,\n            width,\n            height;\n\n        if (next && next.x !== undefined || Base.hasNamed(args, 'to')) {\n          var to = Point.readNamed(args, 'to');\n          width = to.x - x;\n          height = to.y - y;\n\n          if (width < 0) {\n            x = to.x;\n            width = -width;\n          }\n\n          if (height < 0) {\n            y = to.y;\n            height = -height;\n          }\n        } else {\n          var size = Size.read(args);\n          width = size.width;\n          height = size.height;\n        }\n\n        this._set(x, y, width, height);\n\n        read = args.__index;\n      }\n\n      var filtered = args.__filtered;\n      if (filtered) this.__filtered = filtered;\n      if (this.__read) this.__read = read;\n      return this;\n    },\n    set: '#initialize',\n    _set: function (x, y, width, height) {\n      this.x = x;\n      this.y = y;\n      this.width = width;\n      this.height = height;\n      return this;\n    },\n    clone: function () {\n      return new Rectangle(this.x, this.y, this.width, this.height);\n    },\n    equals: function (rect) {\n      var rt = Base.isPlainValue(rect) ? Rectangle.read(arguments) : rect;\n      return rt === this || rt && this.x === rt.x && this.y === rt.y && this.width === rt.width && this.height === rt.height || false;\n    },\n    toString: function () {\n      var f = Formatter.instance;\n      return '{ x: ' + f.number(this.x) + ', y: ' + f.number(this.y) + ', width: ' + f.number(this.width) + ', height: ' + f.number(this.height) + ' }';\n    },\n    _serialize: function (options) {\n      var f = options.formatter;\n      return [f.number(this.x), f.number(this.y), f.number(this.width), f.number(this.height)];\n    },\n    getPoint: function (_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      return new ctor(this.x, this.y, this, 'setPoint');\n    },\n    setPoint: function () {\n      var point = Point.read(arguments);\n      this.x = point.x;\n      this.y = point.y;\n    },\n    getSize: function (_dontLink) {\n      var ctor = _dontLink ? Size : LinkedSize;\n      return new ctor(this.width, this.height, this, 'setSize');\n    },\n    _fw: 1,\n    _fh: 1,\n    setSize: function () {\n      var size = Size.read(arguments),\n          sx = this._sx,\n          sy = this._sy,\n          w = size.width,\n          h = size.height;\n\n      if (sx) {\n        this.x += (this.width - w) * sx;\n      }\n\n      if (sy) {\n        this.y += (this.height - h) * sy;\n      }\n\n      this.width = w;\n      this.height = h;\n      this._fw = this._fh = 1;\n    },\n    getLeft: function () {\n      return this.x;\n    },\n    setLeft: function (left) {\n      if (!this._fw) {\n        var amount = left - this.x;\n        this.width -= this._sx === 0.5 ? amount * 2 : amount;\n      }\n\n      this.x = left;\n      this._sx = this._fw = 0;\n    },\n    getTop: function () {\n      return this.y;\n    },\n    setTop: function (top) {\n      if (!this._fh) {\n        var amount = top - this.y;\n        this.height -= this._sy === 0.5 ? amount * 2 : amount;\n      }\n\n      this.y = top;\n      this._sy = this._fh = 0;\n    },\n    getRight: function () {\n      return this.x + this.width;\n    },\n    setRight: function (right) {\n      if (!this._fw) {\n        var amount = right - this.x;\n        this.width = this._sx === 0.5 ? amount * 2 : amount;\n      }\n\n      this.x = right - this.width;\n      this._sx = 1;\n      this._fw = 0;\n    },\n    getBottom: function () {\n      return this.y + this.height;\n    },\n    setBottom: function (bottom) {\n      if (!this._fh) {\n        var amount = bottom - this.y;\n        this.height = this._sy === 0.5 ? amount * 2 : amount;\n      }\n\n      this.y = bottom - this.height;\n      this._sy = 1;\n      this._fh = 0;\n    },\n    getCenterX: function () {\n      return this.x + this.width / 2;\n    },\n    setCenterX: function (x) {\n      if (this._fw || this._sx === 0.5) {\n        this.x = x - this.width / 2;\n      } else {\n        if (this._sx) {\n          this.x += (x - this.x) * 2 * this._sx;\n        }\n\n        this.width = (x - this.x) * 2;\n      }\n\n      this._sx = 0.5;\n      this._fw = 0;\n    },\n    getCenterY: function () {\n      return this.y + this.height / 2;\n    },\n    setCenterY: function (y) {\n      if (this._fh || this._sy === 0.5) {\n        this.y = y - this.height / 2;\n      } else {\n        if (this._sy) {\n          this.y += (y - this.y) * 2 * this._sy;\n        }\n\n        this.height = (y - this.y) * 2;\n      }\n\n      this._sy = 0.5;\n      this._fh = 0;\n    },\n    getCenter: function (_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      return new ctor(this.getCenterX(), this.getCenterY(), this, 'setCenter');\n    },\n    setCenter: function () {\n      var point = Point.read(arguments);\n      this.setCenterX(point.x);\n      this.setCenterY(point.y);\n      return this;\n    },\n    getArea: function () {\n      return this.width * this.height;\n    },\n    isEmpty: function () {\n      return this.width === 0 || this.height === 0;\n    },\n    contains: function (arg) {\n      return arg && arg.width !== undefined || (Array.isArray(arg) ? arg : arguments).length === 4 ? this._containsRectangle(Rectangle.read(arguments)) : this._containsPoint(Point.read(arguments));\n    },\n    _containsPoint: function (point) {\n      var x = point.x,\n          y = point.y;\n      return x >= this.x && y >= this.y && x <= this.x + this.width && y <= this.y + this.height;\n    },\n    _containsRectangle: function (rect) {\n      var x = rect.x,\n          y = rect.y;\n      return x >= this.x && y >= this.y && x + rect.width <= this.x + this.width && y + rect.height <= this.y + this.height;\n    },\n    intersects: function () {\n      var rect = Rectangle.read(arguments),\n          epsilon = Base.read(arguments) || 0;\n      return rect.x + rect.width > this.x - epsilon && rect.y + rect.height > this.y - epsilon && rect.x < this.x + this.width + epsilon && rect.y < this.y + this.height + epsilon;\n    },\n    intersect: function () {\n      var rect = Rectangle.read(arguments),\n          x1 = Math.max(this.x, rect.x),\n          y1 = Math.max(this.y, rect.y),\n          x2 = Math.min(this.x + this.width, rect.x + rect.width),\n          y2 = Math.min(this.y + this.height, rect.y + rect.height);\n      return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n    },\n    unite: function () {\n      var rect = Rectangle.read(arguments),\n          x1 = Math.min(this.x, rect.x),\n          y1 = Math.min(this.y, rect.y),\n          x2 = Math.max(this.x + this.width, rect.x + rect.width),\n          y2 = Math.max(this.y + this.height, rect.y + rect.height);\n      return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n    },\n    include: function () {\n      var point = Point.read(arguments);\n      var x1 = Math.min(this.x, point.x),\n          y1 = Math.min(this.y, point.y),\n          x2 = Math.max(this.x + this.width, point.x),\n          y2 = Math.max(this.y + this.height, point.y);\n      return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n    },\n    expand: function () {\n      var amount = Size.read(arguments),\n          hor = amount.width,\n          ver = amount.height;\n      return new Rectangle(this.x - hor / 2, this.y - ver / 2, this.width + hor, this.height + ver);\n    },\n    scale: function (hor, ver) {\n      return this.expand(this.width * hor - this.width, this.height * (ver === undefined ? hor : ver) - this.height);\n    }\n  }, Base.each([['Top', 'Left'], ['Top', 'Right'], ['Bottom', 'Left'], ['Bottom', 'Right'], ['Left', 'Center'], ['Top', 'Center'], ['Right', 'Center'], ['Bottom', 'Center']], function (parts, index) {\n    var part = parts.join(''),\n        xFirst = /^[RL]/.test(part);\n    if (index >= 4) parts[1] += xFirst ? 'Y' : 'X';\n    var x = parts[xFirst ? 0 : 1],\n        y = parts[xFirst ? 1 : 0],\n        getX = 'get' + x,\n        getY = 'get' + y,\n        setX = 'set' + x,\n        setY = 'set' + y,\n        get = 'get' + part,\n        set = 'set' + part;\n\n    this[get] = function (_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      return new ctor(this[getX](), this[getY](), this, set);\n    };\n\n    this[set] = function () {\n      var point = Point.read(arguments);\n      this[setX](point.x);\n      this[setY](point.y);\n    };\n  }, {\n    beans: true\n  }));\n  var LinkedRectangle = Rectangle.extend({\n    initialize: function Rectangle(x, y, width, height, owner, setter) {\n      this._set(x, y, width, height, true);\n\n      this._owner = owner;\n      this._setter = setter;\n    },\n    _set: function (x, y, width, height, _dontNotify) {\n      this._x = x;\n      this._y = y;\n      this._width = width;\n      this._height = height;\n      if (!_dontNotify) this._owner[this._setter](this);\n      return this;\n    }\n  }, new function () {\n    var proto = Rectangle.prototype;\n    return Base.each(['x', 'y', 'width', 'height'], function (key) {\n      var part = Base.capitalize(key),\n          internal = '_' + key;\n\n      this['get' + part] = function () {\n        return this[internal];\n      };\n\n      this['set' + part] = function (value) {\n        this[internal] = value;\n        if (!this._dontNotify) this._owner[this._setter](this);\n      };\n    }, Base.each(['Point', 'Size', 'Center', 'Left', 'Top', 'Right', 'Bottom', 'CenterX', 'CenterY', 'TopLeft', 'TopRight', 'BottomLeft', 'BottomRight', 'LeftCenter', 'TopCenter', 'RightCenter', 'BottomCenter'], function (key) {\n      var name = 'set' + key;\n\n      this[name] = function () {\n        this._dontNotify = true;\n        proto[name].apply(this, arguments);\n        this._dontNotify = false;\n\n        this._owner[this._setter](this);\n      };\n    }, {\n      isSelected: function () {\n        return !!(this._owner._selection & 2);\n      },\n      setSelected: function (selected) {\n        var owner = this._owner;\n\n        if (owner._changeSelection) {\n          owner._changeSelection(2, selected);\n        }\n      }\n    }));\n  }());\n  var Matrix = Base.extend({\n    _class: 'Matrix',\n    initialize: function Matrix(arg, _dontNotify) {\n      var args = arguments,\n          count = args.length,\n          ok = true;\n\n      if (count >= 6) {\n        this._set.apply(this, args);\n      } else if (count === 1 || count === 2) {\n        if (arg instanceof Matrix) {\n          this._set(arg._a, arg._b, arg._c, arg._d, arg._tx, arg._ty, _dontNotify);\n        } else if (Array.isArray(arg)) {\n          this._set.apply(this, _dontNotify ? arg.concat([_dontNotify]) : arg);\n        } else {\n          ok = false;\n        }\n      } else if (!count) {\n        this.reset();\n      } else {\n        ok = false;\n      }\n\n      if (!ok) {\n        throw new Error('Unsupported matrix parameters');\n      }\n\n      return this;\n    },\n    set: '#initialize',\n    _set: function (a, b, c, d, tx, ty, _dontNotify) {\n      this._a = a;\n      this._b = b;\n      this._c = c;\n      this._d = d;\n      this._tx = tx;\n      this._ty = ty;\n      if (!_dontNotify) this._changed();\n      return this;\n    },\n    _serialize: function (options, dictionary) {\n      return Base.serialize(this.getValues(), options, true, dictionary);\n    },\n    _changed: function () {\n      var owner = this._owner;\n\n      if (owner) {\n        if (owner._applyMatrix) {\n          owner.transform(null, true);\n        } else {\n          owner._changed(25);\n        }\n      }\n    },\n    clone: function () {\n      return new Matrix(this._a, this._b, this._c, this._d, this._tx, this._ty);\n    },\n    equals: function (mx) {\n      return mx === this || mx && this._a === mx._a && this._b === mx._b && this._c === mx._c && this._d === mx._d && this._tx === mx._tx && this._ty === mx._ty;\n    },\n    toString: function () {\n      var f = Formatter.instance;\n      return '[[' + [f.number(this._a), f.number(this._c), f.number(this._tx)].join(', ') + '], [' + [f.number(this._b), f.number(this._d), f.number(this._ty)].join(', ') + ']]';\n    },\n    reset: function (_dontNotify) {\n      this._a = this._d = 1;\n      this._b = this._c = this._tx = this._ty = 0;\n      if (!_dontNotify) this._changed();\n      return this;\n    },\n    apply: function (recursively, _setApplyMatrix) {\n      var owner = this._owner;\n\n      if (owner) {\n        owner.transform(null, Base.pick(recursively, true), _setApplyMatrix);\n        return this.isIdentity();\n      }\n\n      return false;\n    },\n    translate: function () {\n      var point = Point.read(arguments),\n          x = point.x,\n          y = point.y;\n      this._tx += x * this._a + y * this._c;\n      this._ty += x * this._b + y * this._d;\n\n      this._changed();\n\n      return this;\n    },\n    scale: function () {\n      var args = arguments,\n          scale = Point.read(args),\n          center = Point.read(args, 0, {\n        readNull: true\n      });\n      if (center) this.translate(center);\n      this._a *= scale.x;\n      this._b *= scale.x;\n      this._c *= scale.y;\n      this._d *= scale.y;\n      if (center) this.translate(center.negate());\n\n      this._changed();\n\n      return this;\n    },\n    rotate: function (angle) {\n      angle *= Math.PI / 180;\n      var center = Point.read(arguments, 1),\n          x = center.x,\n          y = center.y,\n          cos = Math.cos(angle),\n          sin = Math.sin(angle),\n          tx = x - x * cos + y * sin,\n          ty = y - x * sin - y * cos,\n          a = this._a,\n          b = this._b,\n          c = this._c,\n          d = this._d;\n      this._a = cos * a + sin * c;\n      this._b = cos * b + sin * d;\n      this._c = -sin * a + cos * c;\n      this._d = -sin * b + cos * d;\n      this._tx += tx * a + ty * c;\n      this._ty += tx * b + ty * d;\n\n      this._changed();\n\n      return this;\n    },\n    shear: function () {\n      var args = arguments,\n          shear = Point.read(args),\n          center = Point.read(args, 0, {\n        readNull: true\n      });\n      if (center) this.translate(center);\n      var a = this._a,\n          b = this._b;\n      this._a += shear.y * this._c;\n      this._b += shear.y * this._d;\n      this._c += shear.x * a;\n      this._d += shear.x * b;\n      if (center) this.translate(center.negate());\n\n      this._changed();\n\n      return this;\n    },\n    skew: function () {\n      var args = arguments,\n          skew = Point.read(args),\n          center = Point.read(args, 0, {\n        readNull: true\n      }),\n          toRadians = Math.PI / 180,\n          shear = new Point(Math.tan(skew.x * toRadians), Math.tan(skew.y * toRadians));\n      return this.shear(shear, center);\n    },\n    append: function (mx, _dontNotify) {\n      if (mx) {\n        var a1 = this._a,\n            b1 = this._b,\n            c1 = this._c,\n            d1 = this._d,\n            a2 = mx._a,\n            b2 = mx._c,\n            c2 = mx._b,\n            d2 = mx._d,\n            tx2 = mx._tx,\n            ty2 = mx._ty;\n        this._a = a2 * a1 + c2 * c1;\n        this._c = b2 * a1 + d2 * c1;\n        this._b = a2 * b1 + c2 * d1;\n        this._d = b2 * b1 + d2 * d1;\n        this._tx += tx2 * a1 + ty2 * c1;\n        this._ty += tx2 * b1 + ty2 * d1;\n        if (!_dontNotify) this._changed();\n      }\n\n      return this;\n    },\n    prepend: function (mx, _dontNotify) {\n      if (mx) {\n        var a1 = this._a,\n            b1 = this._b,\n            c1 = this._c,\n            d1 = this._d,\n            tx1 = this._tx,\n            ty1 = this._ty,\n            a2 = mx._a,\n            b2 = mx._c,\n            c2 = mx._b,\n            d2 = mx._d,\n            tx2 = mx._tx,\n            ty2 = mx._ty;\n        this._a = a2 * a1 + b2 * b1;\n        this._c = a2 * c1 + b2 * d1;\n        this._b = c2 * a1 + d2 * b1;\n        this._d = c2 * c1 + d2 * d1;\n        this._tx = a2 * tx1 + b2 * ty1 + tx2;\n        this._ty = c2 * tx1 + d2 * ty1 + ty2;\n        if (!_dontNotify) this._changed();\n      }\n\n      return this;\n    },\n    appended: function (mx) {\n      return this.clone().append(mx);\n    },\n    prepended: function (mx) {\n      return this.clone().prepend(mx);\n    },\n    invert: function () {\n      var a = this._a,\n          b = this._b,\n          c = this._c,\n          d = this._d,\n          tx = this._tx,\n          ty = this._ty,\n          det = a * d - b * c,\n          res = null;\n\n      if (det && !isNaN(det) && isFinite(tx) && isFinite(ty)) {\n        this._a = d / det;\n        this._b = -b / det;\n        this._c = -c / det;\n        this._d = a / det;\n        this._tx = (c * ty - d * tx) / det;\n        this._ty = (b * tx - a * ty) / det;\n        res = this;\n      }\n\n      return res;\n    },\n    inverted: function () {\n      return this.clone().invert();\n    },\n    concatenate: '#append',\n    preConcatenate: '#prepend',\n    chain: '#appended',\n    _shiftless: function () {\n      return new Matrix(this._a, this._b, this._c, this._d, 0, 0);\n    },\n    _orNullIfIdentity: function () {\n      return this.isIdentity() ? null : this;\n    },\n    isIdentity: function () {\n      return this._a === 1 && this._b === 0 && this._c === 0 && this._d === 1 && this._tx === 0 && this._ty === 0;\n    },\n    isInvertible: function () {\n      var det = this._a * this._d - this._c * this._b;\n      return det && !isNaN(det) && isFinite(this._tx) && isFinite(this._ty);\n    },\n    isSingular: function () {\n      return !this.isInvertible();\n    },\n    transform: function (src, dst, count) {\n      return arguments.length < 3 ? this._transformPoint(Point.read(arguments)) : this._transformCoordinates(src, dst, count);\n    },\n    _transformPoint: function (point, dest, _dontNotify) {\n      var x = point.x,\n          y = point.y;\n      if (!dest) dest = new Point();\n      return dest._set(x * this._a + y * this._c + this._tx, x * this._b + y * this._d + this._ty, _dontNotify);\n    },\n    _transformCoordinates: function (src, dst, count) {\n      for (var i = 0, max = 2 * count; i < max; i += 2) {\n        var x = src[i],\n            y = src[i + 1];\n        dst[i] = x * this._a + y * this._c + this._tx;\n        dst[i + 1] = x * this._b + y * this._d + this._ty;\n      }\n\n      return dst;\n    },\n    _transformCorners: function (rect) {\n      var x1 = rect.x,\n          y1 = rect.y,\n          x2 = x1 + rect.width,\n          y2 = y1 + rect.height,\n          coords = [x1, y1, x2, y1, x2, y2, x1, y2];\n      return this._transformCoordinates(coords, coords, 4);\n    },\n    _transformBounds: function (bounds, dest, _dontNotify) {\n      var coords = this._transformCorners(bounds),\n          min = coords.slice(0, 2),\n          max = min.slice();\n\n      for (var i = 2; i < 8; i++) {\n        var val = coords[i],\n            j = i & 1;\n\n        if (val < min[j]) {\n          min[j] = val;\n        } else if (val > max[j]) {\n          max[j] = val;\n        }\n      }\n\n      if (!dest) dest = new Rectangle();\n      return dest._set(min[0], min[1], max[0] - min[0], max[1] - min[1], _dontNotify);\n    },\n    inverseTransform: function () {\n      return this._inverseTransform(Point.read(arguments));\n    },\n    _inverseTransform: function (point, dest, _dontNotify) {\n      var a = this._a,\n          b = this._b,\n          c = this._c,\n          d = this._d,\n          tx = this._tx,\n          ty = this._ty,\n          det = a * d - b * c,\n          res = null;\n\n      if (det && !isNaN(det) && isFinite(tx) && isFinite(ty)) {\n        var x = point.x - this._tx,\n            y = point.y - this._ty;\n        if (!dest) dest = new Point();\n        res = dest._set((x * d - y * c) / det, (y * a - x * b) / det, _dontNotify);\n      }\n\n      return res;\n    },\n    decompose: function () {\n      var a = this._a,\n          b = this._b,\n          c = this._c,\n          d = this._d,\n          det = a * d - b * c,\n          sqrt = Math.sqrt,\n          atan2 = Math.atan2,\n          degrees = 180 / Math.PI,\n          rotate,\n          scale,\n          skew;\n\n      if (a !== 0 || b !== 0) {\n        var r = sqrt(a * a + b * b);\n        rotate = Math.acos(a / r) * (b > 0 ? 1 : -1);\n        scale = [r, det / r];\n        skew = [atan2(a * c + b * d, r * r), 0];\n      } else if (c !== 0 || d !== 0) {\n        var s = sqrt(c * c + d * d);\n        rotate = Math.asin(c / s) * (d > 0 ? 1 : -1);\n        scale = [det / s, s];\n        skew = [0, atan2(a * c + b * d, s * s)];\n      } else {\n        rotate = 0;\n        skew = scale = [0, 0];\n      }\n\n      return {\n        translation: this.getTranslation(),\n        rotation: rotate * degrees,\n        scaling: new Point(scale),\n        skewing: new Point(skew[0] * degrees, skew[1] * degrees)\n      };\n    },\n    getValues: function () {\n      return [this._a, this._b, this._c, this._d, this._tx, this._ty];\n    },\n    getTranslation: function () {\n      return new Point(this._tx, this._ty);\n    },\n    getScaling: function () {\n      return this.decompose().scaling;\n    },\n    getRotation: function () {\n      return this.decompose().rotation;\n    },\n    applyToContext: function (ctx) {\n      if (!this.isIdentity()) {\n        ctx.transform(this._a, this._b, this._c, this._d, this._tx, this._ty);\n      }\n    }\n  }, Base.each(['a', 'b', 'c', 'd', 'tx', 'ty'], function (key) {\n    var part = Base.capitalize(key),\n        prop = '_' + key;\n\n    this['get' + part] = function () {\n      return this[prop];\n    };\n\n    this['set' + part] = function (value) {\n      this[prop] = value;\n\n      this._changed();\n    };\n  }, {}));\n  var Line = Base.extend({\n    _class: 'Line',\n    initialize: function Line(arg0, arg1, arg2, arg3, arg4) {\n      var asVector = false;\n\n      if (arguments.length >= 4) {\n        this._px = arg0;\n        this._py = arg1;\n        this._vx = arg2;\n        this._vy = arg3;\n        asVector = arg4;\n      } else {\n        this._px = arg0.x;\n        this._py = arg0.y;\n        this._vx = arg1.x;\n        this._vy = arg1.y;\n        asVector = arg2;\n      }\n\n      if (!asVector) {\n        this._vx -= this._px;\n        this._vy -= this._py;\n      }\n    },\n    getPoint: function () {\n      return new Point(this._px, this._py);\n    },\n    getVector: function () {\n      return new Point(this._vx, this._vy);\n    },\n    getLength: function () {\n      return this.getVector().getLength();\n    },\n    intersect: function (line, isInfinite) {\n      return Line.intersect(this._px, this._py, this._vx, this._vy, line._px, line._py, line._vx, line._vy, true, isInfinite);\n    },\n    getSide: function (point, isInfinite) {\n      return Line.getSide(this._px, this._py, this._vx, this._vy, point.x, point.y, true, isInfinite);\n    },\n    getDistance: function (point) {\n      return Math.abs(this.getSignedDistance(point));\n    },\n    getSignedDistance: function (point) {\n      return Line.getSignedDistance(this._px, this._py, this._vx, this._vy, point.x, point.y, true);\n    },\n    isCollinear: function (line) {\n      return Point.isCollinear(this._vx, this._vy, line._vx, line._vy);\n    },\n    isOrthogonal: function (line) {\n      return Point.isOrthogonal(this._vx, this._vy, line._vx, line._vy);\n    },\n    statics: {\n      intersect: function (p1x, p1y, v1x, v1y, p2x, p2y, v2x, v2y, asVector, isInfinite) {\n        if (!asVector) {\n          v1x -= p1x;\n          v1y -= p1y;\n          v2x -= p2x;\n          v2y -= p2y;\n        }\n\n        var cross = v1x * v2y - v1y * v2x;\n\n        if (!Numerical.isMachineZero(cross)) {\n          var dx = p1x - p2x,\n              dy = p1y - p2y,\n              u1 = (v2x * dy - v2y * dx) / cross,\n              u2 = (v1x * dy - v1y * dx) / cross,\n              epsilon = 1e-12,\n              uMin = -epsilon,\n              uMax = 1 + epsilon;\n\n          if (isInfinite || uMin < u1 && u1 < uMax && uMin < u2 && u2 < uMax) {\n            if (!isInfinite) {\n              u1 = u1 <= 0 ? 0 : u1 >= 1 ? 1 : u1;\n            }\n\n            return new Point(p1x + u1 * v1x, p1y + u1 * v1y);\n          }\n        }\n      },\n      getSide: function (px, py, vx, vy, x, y, asVector, isInfinite) {\n        if (!asVector) {\n          vx -= px;\n          vy -= py;\n        }\n\n        var v2x = x - px,\n            v2y = y - py,\n            ccw = v2x * vy - v2y * vx;\n\n        if (!isInfinite && Numerical.isMachineZero(ccw)) {\n          ccw = (v2x * vx + v2x * vx) / (vx * vx + vy * vy);\n          if (ccw >= 0 && ccw <= 1) ccw = 0;\n        }\n\n        return ccw < 0 ? -1 : ccw > 0 ? 1 : 0;\n      },\n      getSignedDistance: function (px, py, vx, vy, x, y, asVector) {\n        if (!asVector) {\n          vx -= px;\n          vy -= py;\n        }\n\n        return vx === 0 ? vy > 0 ? x - px : px - x : vy === 0 ? vx < 0 ? y - py : py - y : ((x - px) * vy - (y - py) * vx) / (vy > vx ? vy * Math.sqrt(1 + vx * vx / (vy * vy)) : vx * Math.sqrt(1 + vy * vy / (vx * vx)));\n      },\n      getDistance: function (px, py, vx, vy, x, y, asVector) {\n        return Math.abs(Line.getSignedDistance(px, py, vx, vy, x, y, asVector));\n      }\n    }\n  });\n  var Project = PaperScopeItem.extend({\n    _class: 'Project',\n    _list: 'projects',\n    _reference: 'project',\n    _compactSerialize: true,\n    initialize: function Project(element) {\n      PaperScopeItem.call(this, true);\n      this._children = [];\n      this._namedChildren = {};\n      this._activeLayer = null;\n      this._currentStyle = new Style(null, null, this);\n      this._view = View.create(this, element || CanvasProvider.getCanvas(1, 1));\n      this._selectionItems = {};\n      this._selectionCount = 0;\n      this._updateVersion = 0;\n    },\n    _serialize: function (options, dictionary) {\n      return Base.serialize(this._children, options, true, dictionary);\n    },\n    _changed: function (flags, item) {\n      if (flags & 1) {\n        var view = this._view;\n\n        if (view) {\n          view._needsUpdate = true;\n          if (!view._requested && view._autoUpdate) view.requestUpdate();\n        }\n      }\n\n      var changes = this._changes;\n\n      if (changes && item) {\n        var changesById = this._changesById,\n            id = item._id,\n            entry = changesById[id];\n\n        if (entry) {\n          entry.flags |= flags;\n        } else {\n          changes.push(changesById[id] = {\n            item: item,\n            flags: flags\n          });\n        }\n      }\n    },\n    clear: function () {\n      var children = this._children;\n\n      for (var i = children.length - 1; i >= 0; i--) children[i].remove();\n    },\n    isEmpty: function () {\n      return !this._children.length;\n    },\n    remove: function remove() {\n      if (!remove.base.call(this)) return false;\n      if (this._view) this._view.remove();\n      return true;\n    },\n    getView: function () {\n      return this._view;\n    },\n    getCurrentStyle: function () {\n      return this._currentStyle;\n    },\n    setCurrentStyle: function (style) {\n      this._currentStyle.set(style);\n    },\n    getIndex: function () {\n      return this._index;\n    },\n    getOptions: function () {\n      return this._scope.settings;\n    },\n    getLayers: function () {\n      return this._children;\n    },\n    getActiveLayer: function () {\n      return this._activeLayer || new Layer({\n        project: this,\n        insert: true\n      });\n    },\n    getSymbolDefinitions: function () {\n      var definitions = [],\n          ids = {};\n      this.getItems({\n        class: SymbolItem,\n        match: function (item) {\n          var definition = item._definition,\n              id = definition._id;\n\n          if (!ids[id]) {\n            ids[id] = true;\n            definitions.push(definition);\n          }\n\n          return false;\n        }\n      });\n      return definitions;\n    },\n    getSymbols: 'getSymbolDefinitions',\n    getSelectedItems: function () {\n      var selectionItems = this._selectionItems,\n          items = [];\n\n      for (var id in selectionItems) {\n        var item = selectionItems[id],\n            selection = item._selection;\n\n        if (selection & 1 && item.isInserted()) {\n          items.push(item);\n        } else if (!selection) {\n          this._updateSelection(item);\n        }\n      }\n\n      return items;\n    },\n    _updateSelection: function (item) {\n      var id = item._id,\n          selectionItems = this._selectionItems;\n\n      if (item._selection) {\n        if (selectionItems[id] !== item) {\n          this._selectionCount++;\n          selectionItems[id] = item;\n        }\n      } else if (selectionItems[id] === item) {\n        this._selectionCount--;\n        delete selectionItems[id];\n      }\n    },\n    selectAll: function () {\n      var children = this._children;\n\n      for (var i = 0, l = children.length; i < l; i++) children[i].setFullySelected(true);\n    },\n    deselectAll: function () {\n      var selectionItems = this._selectionItems;\n\n      for (var i in selectionItems) selectionItems[i].setFullySelected(false);\n    },\n    addLayer: function (layer) {\n      return this.insertLayer(undefined, layer);\n    },\n    insertLayer: function (index, layer) {\n      if (layer instanceof Layer) {\n        layer._remove(false, true);\n\n        Base.splice(this._children, [layer], index, 0);\n\n        layer._setProject(this, true);\n\n        var name = layer._name;\n        if (name) layer.setName(name);\n        if (this._changes) layer._changed(5);\n        if (!this._activeLayer) this._activeLayer = layer;\n      } else {\n        layer = null;\n      }\n\n      return layer;\n    },\n    _insertItem: function (index, item, _created) {\n      item = this.insertLayer(index, item) || (this._activeLayer || this._insertItem(undefined, new Layer(Item.NO_INSERT), true)).insertChild(index, item);\n      if (_created && item.activate) item.activate();\n      return item;\n    },\n    getItems: function (options) {\n      return Item._getItems(this, options);\n    },\n    getItem: function (options) {\n      return Item._getItems(this, options, null, null, true)[0] || null;\n    },\n    importJSON: function (json) {\n      this.activate();\n      var layer = this._activeLayer;\n      return Base.importJSON(json, layer && layer.isEmpty() && layer);\n    },\n    removeOn: function (type) {\n      var sets = this._removeSets;\n\n      if (sets) {\n        if (type === 'mouseup') sets.mousedrag = null;\n        var set = sets[type];\n\n        if (set) {\n          for (var id in set) {\n            var item = set[id];\n\n            for (var key in sets) {\n              var other = sets[key];\n              if (other && other != set) delete other[item._id];\n            }\n\n            item.remove();\n          }\n\n          sets[type] = null;\n        }\n      }\n    },\n    draw: function (ctx, matrix, pixelRatio) {\n      this._updateVersion++;\n      ctx.save();\n      matrix.applyToContext(ctx);\n      var children = this._children,\n          param = new Base({\n        offset: new Point(0, 0),\n        pixelRatio: pixelRatio,\n        viewMatrix: matrix.isIdentity() ? null : matrix,\n        matrices: [new Matrix()],\n        updateMatrix: true\n      });\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        children[i].draw(ctx, param);\n      }\n\n      ctx.restore();\n\n      if (this._selectionCount > 0) {\n        ctx.save();\n        ctx.strokeWidth = 1;\n        var items = this._selectionItems,\n            size = this._scope.settings.handleSize,\n            version = this._updateVersion;\n\n        for (var id in items) {\n          items[id]._drawSelection(ctx, matrix, size, items, version);\n        }\n\n        ctx.restore();\n      }\n    }\n  });\n  var Item = Base.extend(Emitter, {\n    statics: {\n      extend: function extend(src) {\n        if (src._serializeFields) src._serializeFields = Base.set({}, this.prototype._serializeFields, src._serializeFields);\n        return extend.base.apply(this, arguments);\n      },\n      NO_INSERT: {\n        insert: false\n      }\n    },\n    _class: 'Item',\n    _name: null,\n    _applyMatrix: true,\n    _canApplyMatrix: true,\n    _canScaleStroke: false,\n    _pivot: null,\n    _visible: true,\n    _blendMode: 'normal',\n    _opacity: 1,\n    _locked: false,\n    _guide: false,\n    _clipMask: false,\n    _selection: 0,\n    _selectBounds: true,\n    _selectChildren: false,\n    _serializeFields: {\n      name: null,\n      applyMatrix: null,\n      matrix: new Matrix(),\n      pivot: null,\n      visible: true,\n      blendMode: 'normal',\n      opacity: 1,\n      locked: false,\n      guide: false,\n      clipMask: false,\n      selected: false,\n      data: {}\n    },\n    _prioritize: ['applyMatrix']\n  }, new function () {\n    var handlers = ['onMouseDown', 'onMouseUp', 'onMouseDrag', 'onClick', 'onDoubleClick', 'onMouseMove', 'onMouseEnter', 'onMouseLeave'];\n    return Base.each(handlers, function (name) {\n      this._events[name] = {\n        install: function (type) {\n          this.getView()._countItemEvent(type, 1);\n        },\n        uninstall: function (type) {\n          this.getView()._countItemEvent(type, -1);\n        }\n      };\n    }, {\n      _events: {\n        onFrame: {\n          install: function () {\n            this.getView()._animateItem(this, true);\n          },\n          uninstall: function () {\n            this.getView()._animateItem(this, false);\n          }\n        },\n        onLoad: {},\n        onError: {}\n      },\n      statics: {\n        _itemHandlers: handlers\n      }\n    });\n  }(), {\n    initialize: function Item() {},\n    _initialize: function (props, point) {\n      var hasProps = props && Base.isPlainObject(props),\n          internal = hasProps && props.internal === true,\n          matrix = this._matrix = new Matrix(),\n          project = hasProps && props.project || paper.project,\n          settings = paper.settings;\n      this._id = internal ? null : UID.get();\n      this._parent = this._index = null;\n      this._applyMatrix = this._canApplyMatrix && settings.applyMatrix;\n      if (point) matrix.translate(point);\n      matrix._owner = this;\n      this._style = new Style(project._currentStyle, this, project);\n\n      if (internal || hasProps && props.insert == false || !settings.insertItems && !(hasProps && props.insert === true)) {\n        this._setProject(project);\n      } else {\n        (hasProps && props.parent || project)._insertItem(undefined, this, true);\n      }\n\n      if (hasProps && props !== Item.NO_INSERT) {\n        this.set(props, {\n          internal: true,\n          insert: true,\n          project: true,\n          parent: true\n        });\n      }\n\n      return hasProps;\n    },\n    _serialize: function (options, dictionary) {\n      var props = {},\n          that = this;\n\n      function serialize(fields) {\n        for (var key in fields) {\n          var value = that[key];\n\n          if (!Base.equals(value, key === 'leading' ? fields.fontSize * 1.2 : fields[key])) {\n            props[key] = Base.serialize(value, options, key !== 'data', dictionary);\n          }\n        }\n      }\n\n      serialize(this._serializeFields);\n      if (!(this instanceof Group)) serialize(this._style._defaults);\n      return [this._class, props];\n    },\n    _changed: function (flags) {\n      var symbol = this._symbol,\n          cacheParent = this._parent || symbol,\n          project = this._project;\n\n      if (flags & 8) {\n        this._bounds = this._position = this._decomposed = undefined;\n      }\n\n      if (flags & 16) {\n        this._globalMatrix = undefined;\n      }\n\n      if (cacheParent && flags & 72) {\n        Item._clearBoundsCache(cacheParent);\n      }\n\n      if (flags & 2) {\n        Item._clearBoundsCache(this);\n      }\n\n      if (project) project._changed(flags, this);\n      if (symbol) symbol._changed(flags);\n    },\n    getId: function () {\n      return this._id;\n    },\n    getName: function () {\n      return this._name;\n    },\n    setName: function (name) {\n      if (this._name) this._removeNamed();\n      if (name === +name + '') throw new Error('Names consisting only of numbers are not supported.');\n\n      var owner = this._getOwner();\n\n      if (name && owner) {\n        var children = owner._children,\n            namedChildren = owner._namedChildren;\n        (namedChildren[name] = namedChildren[name] || []).push(this);\n        if (!(name in children)) children[name] = this;\n      }\n\n      this._name = name || undefined;\n\n      this._changed(256);\n    },\n    getStyle: function () {\n      return this._style;\n    },\n    setStyle: function (style) {\n      this.getStyle().set(style);\n    }\n  }, Base.each(['locked', 'visible', 'blendMode', 'opacity', 'guide'], function (name) {\n    var part = Base.capitalize(name),\n        key = '_' + name,\n        flags = {\n      locked: 256,\n      visible: 265\n    };\n\n    this['get' + part] = function () {\n      return this[key];\n    };\n\n    this['set' + part] = function (value) {\n      if (value != this[key]) {\n        this[key] = value;\n\n        this._changed(flags[name] || 257);\n      }\n    };\n  }, {}), {\n    beans: true,\n    getSelection: function () {\n      return this._selection;\n    },\n    setSelection: function (selection) {\n      if (selection !== this._selection) {\n        this._selection = selection;\n        var project = this._project;\n\n        if (project) {\n          project._updateSelection(this);\n\n          this._changed(257);\n        }\n      }\n    },\n    _changeSelection: function (flag, selected) {\n      var selection = this._selection;\n      this.setSelection(selected ? selection | flag : selection & ~flag);\n    },\n    isSelected: function () {\n      if (this._selectChildren) {\n        var children = this._children;\n\n        for (var i = 0, l = children.length; i < l; i++) if (children[i].isSelected()) return true;\n      }\n\n      return !!(this._selection & 1);\n    },\n    setSelected: function (selected) {\n      if (this._selectChildren) {\n        var children = this._children;\n\n        for (var i = 0, l = children.length; i < l; i++) children[i].setSelected(selected);\n      }\n\n      this._changeSelection(1, selected);\n    },\n    isFullySelected: function () {\n      var children = this._children,\n          selected = !!(this._selection & 1);\n\n      if (children && selected) {\n        for (var i = 0, l = children.length; i < l; i++) if (!children[i].isFullySelected()) return false;\n\n        return true;\n      }\n\n      return selected;\n    },\n    setFullySelected: function (selected) {\n      var children = this._children;\n\n      if (children) {\n        for (var i = 0, l = children.length; i < l; i++) children[i].setFullySelected(selected);\n      }\n\n      this._changeSelection(1, selected);\n    },\n    isClipMask: function () {\n      return this._clipMask;\n    },\n    setClipMask: function (clipMask) {\n      if (this._clipMask != (clipMask = !!clipMask)) {\n        this._clipMask = clipMask;\n\n        if (clipMask) {\n          this.setFillColor(null);\n          this.setStrokeColor(null);\n        }\n\n        this._changed(257);\n\n        if (this._parent) this._parent._changed(2048);\n      }\n    },\n    getData: function () {\n      if (!this._data) this._data = {};\n      return this._data;\n    },\n    setData: function (data) {\n      this._data = data;\n    },\n    getPosition: function (_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n\n      var position = this._position || (this._position = this._getPositionFromBounds());\n\n      return new ctor(position.x, position.y, this, 'setPosition');\n    },\n    setPosition: function () {\n      this.translate(Point.read(arguments).subtract(this.getPosition(true)));\n    },\n    _getPositionFromBounds: function (bounds) {\n      return this._pivot ? this._matrix._transformPoint(this._pivot) : (bounds || this.getBounds()).getCenter(true);\n    },\n    getPivot: function () {\n      var pivot = this._pivot;\n      return pivot ? new LinkedPoint(pivot.x, pivot.y, this, 'setPivot') : null;\n    },\n    setPivot: function () {\n      this._pivot = Point.read(arguments, 0, {\n        clone: true,\n        readNull: true\n      });\n      this._position = undefined;\n    }\n  }, Base.each({\n    getStrokeBounds: {\n      stroke: true\n    },\n    getHandleBounds: {\n      handle: true\n    },\n    getInternalBounds: {\n      internal: true\n    }\n  }, function (options, key) {\n    this[key] = function (matrix) {\n      return this.getBounds(matrix, options);\n    };\n  }, {\n    beans: true,\n    getBounds: function (matrix, options) {\n      var hasMatrix = options || matrix instanceof Matrix,\n          opts = Base.set({}, hasMatrix ? options : matrix, this._boundsOptions);\n      if (!opts.stroke || this.getStrokeScaling()) opts.cacheItem = this;\n\n      var rect = this._getCachedBounds(hasMatrix && matrix, opts).rect;\n\n      return !arguments.length ? new LinkedRectangle(rect.x, rect.y, rect.width, rect.height, this, 'setBounds') : rect;\n    },\n    setBounds: function () {\n      var rect = Rectangle.read(arguments),\n          bounds = this.getBounds(),\n          _matrix = this._matrix,\n          matrix = new Matrix(),\n          center = rect.getCenter();\n      matrix.translate(center);\n\n      if (rect.width != bounds.width || rect.height != bounds.height) {\n        if (!_matrix.isInvertible()) {\n          _matrix.set(_matrix._backup || new Matrix().translate(_matrix.getTranslation()));\n\n          bounds = this.getBounds();\n        }\n\n        matrix.scale(bounds.width !== 0 ? rect.width / bounds.width : 0, bounds.height !== 0 ? rect.height / bounds.height : 0);\n      }\n\n      center = bounds.getCenter();\n      matrix.translate(-center.x, -center.y);\n      this.transform(matrix);\n    },\n    _getBounds: function (matrix, options) {\n      var children = this._children;\n      if (!children || !children.length) return new Rectangle();\n\n      Item._updateBoundsCache(this, options.cacheItem);\n\n      return Item._getBounds(children, matrix, options);\n    },\n    _getBoundsCacheKey: function (options, internal) {\n      return [options.stroke ? 1 : 0, options.handle ? 1 : 0, internal ? 1 : 0].join('');\n    },\n    _getCachedBounds: function (matrix, options, noInternal) {\n      matrix = matrix && matrix._orNullIfIdentity();\n\n      var internal = options.internal && !noInternal,\n          cacheItem = options.cacheItem,\n          _matrix = internal ? null : this._matrix._orNullIfIdentity(),\n          cacheKey = cacheItem && (!matrix || matrix.equals(_matrix)) && this._getBoundsCacheKey(options, internal),\n          bounds = this._bounds;\n\n      Item._updateBoundsCache(this._parent || this._symbol, cacheItem);\n\n      if (cacheKey && bounds && cacheKey in bounds) {\n        var cached = bounds[cacheKey];\n        return {\n          rect: cached.rect.clone(),\n          nonscaling: cached.nonscaling\n        };\n      }\n\n      var res = this._getBounds(matrix || _matrix, options),\n          rect = res.rect || res,\n          style = this._style,\n          nonscaling = res.nonscaling || style.hasStroke() && !style.getStrokeScaling();\n\n      if (cacheKey) {\n        if (!bounds) {\n          this._bounds = bounds = {};\n        }\n\n        var cached = bounds[cacheKey] = {\n          rect: rect.clone(),\n          nonscaling: nonscaling,\n          internal: internal\n        };\n      }\n\n      return {\n        rect: rect,\n        nonscaling: nonscaling\n      };\n    },\n    _getStrokeMatrix: function (matrix, options) {\n      var parent = this.getStrokeScaling() ? null : options && options.internal ? this : this._parent || this._symbol && this._symbol._item,\n          mx = parent ? parent.getViewMatrix().invert() : matrix;\n      return mx && mx._shiftless();\n    },\n    statics: {\n      _updateBoundsCache: function (parent, item) {\n        if (parent && item) {\n          var id = item._id,\n              ref = parent._boundsCache = parent._boundsCache || {\n            ids: {},\n            list: []\n          };\n\n          if (!ref.ids[id]) {\n            ref.list.push(item);\n            ref.ids[id] = item;\n          }\n        }\n      },\n      _clearBoundsCache: function (item) {\n        var cache = item._boundsCache;\n\n        if (cache) {\n          item._bounds = item._position = item._boundsCache = undefined;\n\n          for (var i = 0, list = cache.list, l = list.length; i < l; i++) {\n            var other = list[i];\n\n            if (other !== item) {\n              other._bounds = other._position = undefined;\n              if (other._boundsCache) Item._clearBoundsCache(other);\n            }\n          }\n        }\n      },\n      _getBounds: function (items, matrix, options) {\n        var x1 = Infinity,\n            x2 = -x1,\n            y1 = x1,\n            y2 = x2,\n            nonscaling = false;\n        options = options || {};\n\n        for (var i = 0, l = items.length; i < l; i++) {\n          var item = items[i];\n\n          if (item._visible && !item.isEmpty(true)) {\n            var bounds = item._getCachedBounds(matrix && matrix.appended(item._matrix), options, true),\n                rect = bounds.rect;\n\n            x1 = Math.min(rect.x, x1);\n            y1 = Math.min(rect.y, y1);\n            x2 = Math.max(rect.x + rect.width, x2);\n            y2 = Math.max(rect.y + rect.height, y2);\n            if (bounds.nonscaling) nonscaling = true;\n          }\n        }\n\n        return {\n          rect: isFinite(x1) ? new Rectangle(x1, y1, x2 - x1, y2 - y1) : new Rectangle(),\n          nonscaling: nonscaling\n        };\n      }\n    }\n  }), {\n    beans: true,\n    _decompose: function () {\n      return this._applyMatrix ? null : this._decomposed || (this._decomposed = this._matrix.decompose());\n    },\n    getRotation: function () {\n      var decomposed = this._decompose();\n\n      return decomposed ? decomposed.rotation : 0;\n    },\n    setRotation: function (rotation) {\n      var current = this.getRotation();\n\n      if (current != null && rotation != null) {\n        var decomposed = this._decomposed;\n        this.rotate(rotation - current);\n\n        if (decomposed) {\n          decomposed.rotation = rotation;\n          this._decomposed = decomposed;\n        }\n      }\n    },\n    getScaling: function () {\n      var decomposed = this._decompose(),\n          s = decomposed && decomposed.scaling;\n\n      return new LinkedPoint(s ? s.x : 1, s ? s.y : 1, this, 'setScaling');\n    },\n    setScaling: function () {\n      var current = this.getScaling(),\n          scaling = Point.read(arguments, 0, {\n        clone: true,\n        readNull: true\n      });\n\n      if (current && scaling && !current.equals(scaling)) {\n        var rotation = this.getRotation(),\n            decomposed = this._decomposed,\n            matrix = new Matrix(),\n            isZero = Numerical.isZero;\n\n        if (isZero(current.x) || isZero(current.y)) {\n          matrix.translate(decomposed.translation);\n\n          if (rotation) {\n            matrix.rotate(rotation);\n          }\n\n          matrix.scale(scaling.x, scaling.y);\n\n          this._matrix.set(matrix);\n        } else {\n          var center = this.getPosition(true);\n          matrix.translate(center);\n          if (rotation) matrix.rotate(rotation);\n          matrix.scale(scaling.x / current.x, scaling.y / current.y);\n          if (rotation) matrix.rotate(-rotation);\n          matrix.translate(center.negate());\n          this.transform(matrix);\n        }\n\n        if (decomposed) {\n          decomposed.scaling = scaling;\n          this._decomposed = decomposed;\n        }\n      }\n    },\n    getMatrix: function () {\n      return this._matrix;\n    },\n    setMatrix: function () {\n      var matrix = this._matrix;\n      matrix.set.apply(matrix, arguments);\n    },\n    getGlobalMatrix: function (_dontClone) {\n      var matrix = this._globalMatrix;\n\n      if (matrix) {\n        var parent = this._parent;\n        var parents = [];\n\n        while (parent) {\n          if (!parent._globalMatrix) {\n            matrix = null;\n\n            for (var i = 0, l = parents.length; i < l; i++) {\n              parents[i]._globalMatrix = null;\n            }\n\n            break;\n          }\n\n          parents.push(parent);\n          parent = parent._parent;\n        }\n      }\n\n      if (!matrix) {\n        matrix = this._globalMatrix = this._matrix.clone();\n        var parent = this._parent;\n        if (parent) matrix.prepend(parent.getGlobalMatrix(true));\n      }\n\n      return _dontClone ? matrix : matrix.clone();\n    },\n    getViewMatrix: function () {\n      return this.getGlobalMatrix().prepend(this.getView()._matrix);\n    },\n    getApplyMatrix: function () {\n      return this._applyMatrix;\n    },\n    setApplyMatrix: function (apply) {\n      if (this._applyMatrix = this._canApplyMatrix && !!apply) this.transform(null, true);\n    },\n    getTransformContent: '#getApplyMatrix',\n    setTransformContent: '#setApplyMatrix'\n  }, {\n    getProject: function () {\n      return this._project;\n    },\n    _setProject: function (project, installEvents) {\n      if (this._project !== project) {\n        if (this._project) this._installEvents(false);\n        this._project = project;\n        var children = this._children;\n\n        for (var i = 0, l = children && children.length; i < l; i++) children[i]._setProject(project);\n\n        installEvents = true;\n      }\n\n      if (installEvents) this._installEvents(true);\n    },\n    getView: function () {\n      return this._project._view;\n    },\n    _installEvents: function _installEvents(install) {\n      _installEvents.base.call(this, install);\n\n      var children = this._children;\n\n      for (var i = 0, l = children && children.length; i < l; i++) children[i]._installEvents(install);\n    },\n    getLayer: function () {\n      var parent = this;\n\n      while (parent = parent._parent) {\n        if (parent instanceof Layer) return parent;\n      }\n\n      return null;\n    },\n    getParent: function () {\n      return this._parent;\n    },\n    setParent: function (item) {\n      return item.addChild(this);\n    },\n    _getOwner: '#getParent',\n    getChildren: function () {\n      return this._children;\n    },\n    setChildren: function (items) {\n      this.removeChildren();\n      this.addChildren(items);\n    },\n    getFirstChild: function () {\n      return this._children && this._children[0] || null;\n    },\n    getLastChild: function () {\n      return this._children && this._children[this._children.length - 1] || null;\n    },\n    getNextSibling: function () {\n      var owner = this._getOwner();\n\n      return owner && owner._children[this._index + 1] || null;\n    },\n    getPreviousSibling: function () {\n      var owner = this._getOwner();\n\n      return owner && owner._children[this._index - 1] || null;\n    },\n    getIndex: function () {\n      return this._index;\n    },\n    equals: function (item) {\n      return item === this || item && this._class === item._class && this._style.equals(item._style) && this._matrix.equals(item._matrix) && this._locked === item._locked && this._visible === item._visible && this._blendMode === item._blendMode && this._opacity === item._opacity && this._clipMask === item._clipMask && this._guide === item._guide && this._equals(item) || false;\n    },\n    _equals: function (item) {\n      return Base.equals(this._children, item._children);\n    },\n    clone: function (options) {\n      var copy = new this.constructor(Item.NO_INSERT),\n          children = this._children,\n          insert = Base.pick(options ? options.insert : undefined, options === undefined || options === true),\n          deep = Base.pick(options ? options.deep : undefined, true);\n      if (children) copy.copyAttributes(this);\n      if (!children || deep) copy.copyContent(this);\n      if (!children) copy.copyAttributes(this);\n      if (insert) copy.insertAbove(this);\n      var name = this._name,\n          parent = this._parent;\n\n      if (name && parent) {\n        var children = parent._children,\n            orig = name,\n            i = 1;\n\n        while (children[name]) name = orig + ' ' + i++;\n\n        if (name !== orig) copy.setName(name);\n      }\n\n      return copy;\n    },\n    copyContent: function (source) {\n      var children = source._children;\n\n      for (var i = 0, l = children && children.length; i < l; i++) {\n        this.addChild(children[i].clone(false), true);\n      }\n    },\n    copyAttributes: function (source, excludeMatrix) {\n      this.setStyle(source._style);\n      var keys = ['_locked', '_visible', '_blendMode', '_opacity', '_clipMask', '_guide'];\n\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var key = keys[i];\n        if (source.hasOwnProperty(key)) this[key] = source[key];\n      }\n\n      if (!excludeMatrix) this._matrix.set(source._matrix, true);\n      this.setApplyMatrix(source._applyMatrix);\n      this.setPivot(source._pivot);\n      this.setSelection(source._selection);\n      var data = source._data,\n          name = source._name;\n      this._data = data ? Base.clone(data) : null;\n      if (name) this.setName(name);\n    },\n    rasterize: function (arg0, arg1) {\n      var resolution, insert, raster;\n\n      if (Base.isPlainObject(arg0)) {\n        resolution = arg0.resolution;\n        insert = arg0.insert;\n        raster = arg0.raster;\n      } else {\n        resolution = arg0;\n        insert = arg1;\n      }\n\n      if (raster) {\n        raster.matrix.reset(true);\n      } else {\n        raster = new Raster(Item.NO_INSERT);\n      }\n\n      var bounds = this.getStrokeBounds(),\n          scale = (resolution || this.getView().getResolution()) / 72,\n          topLeft = bounds.getTopLeft().floor(),\n          bottomRight = bounds.getBottomRight().ceil(),\n          boundsSize = new Size(bottomRight.subtract(topLeft)),\n          rasterSize = boundsSize.multiply(scale);\n      raster.setSize(rasterSize, true);\n\n      if (!rasterSize.isZero()) {\n        var ctx = raster.getContext(true),\n            matrix = new Matrix().scale(scale).translate(topLeft.negate());\n        ctx.save();\n        matrix.applyToContext(ctx);\n        this.draw(ctx, new Base({\n          matrices: [matrix]\n        }));\n        ctx.restore();\n      }\n\n      raster.transform(new Matrix().translate(topLeft.add(boundsSize.divide(2))).scale(1 / scale));\n\n      if (insert === undefined || insert) {\n        raster.insertAbove(this);\n      }\n\n      return raster;\n    },\n    contains: function () {\n      var matrix = this._matrix;\n      return matrix.isInvertible() && !!this._contains(matrix._inverseTransform(Point.read(arguments)));\n    },\n    _contains: function (point) {\n      var children = this._children;\n\n      if (children) {\n        for (var i = children.length - 1; i >= 0; i--) {\n          if (children[i].contains(point)) return true;\n        }\n\n        return false;\n      }\n\n      return point.isInside(this.getInternalBounds());\n    },\n    isInside: function () {\n      return Rectangle.read(arguments).contains(this.getBounds());\n    },\n    _asPathItem: function () {\n      return new Path.Rectangle({\n        rectangle: this.getInternalBounds(),\n        matrix: this._matrix,\n        insert: false\n      });\n    },\n    intersects: function (item, _matrix) {\n      if (!(item instanceof Item)) return false;\n      return this._asPathItem().getIntersections(item._asPathItem(), null, _matrix, true).length > 0;\n    }\n  }, new function () {\n    function hitTest() {\n      var args = arguments;\n      return this._hitTest(Point.read(args), HitResult.getOptions(args));\n    }\n\n    function hitTestAll() {\n      var args = arguments,\n          point = Point.read(args),\n          options = HitResult.getOptions(args),\n          all = [];\n\n      this._hitTest(point, new Base({\n        all: all\n      }, options));\n\n      return all;\n    }\n\n    function hitTestChildren(point, options, viewMatrix, _exclude) {\n      var children = this._children;\n\n      if (children) {\n        for (var i = children.length - 1; i >= 0; i--) {\n          var child = children[i];\n\n          var res = child !== _exclude && child._hitTest(point, options, viewMatrix);\n\n          if (res && !options.all) return res;\n        }\n      }\n\n      return null;\n    }\n\n    Project.inject({\n      hitTest: hitTest,\n      hitTestAll: hitTestAll,\n      _hitTest: hitTestChildren\n    });\n    return {\n      hitTest: hitTest,\n      hitTestAll: hitTestAll,\n      _hitTestChildren: hitTestChildren\n    };\n  }(), {\n    _hitTest: function (point, options, parentViewMatrix) {\n      if (this._locked || !this._visible || this._guide && !options.guides || this.isEmpty()) {\n        return null;\n      }\n\n      var matrix = this._matrix,\n          viewMatrix = parentViewMatrix ? parentViewMatrix.appended(matrix) : this.getGlobalMatrix().prepend(this.getView()._matrix),\n          tolerance = Math.max(options.tolerance, 1e-12),\n          tolerancePadding = options._tolerancePadding = new Size(Path._getStrokePadding(tolerance, matrix._shiftless().invert()));\n      point = matrix._inverseTransform(point);\n\n      if (!point || !this._children && !this.getBounds({\n        internal: true,\n        stroke: true,\n        handle: true\n      }).expand(tolerancePadding.multiply(2))._containsPoint(point)) {\n        return null;\n      }\n\n      var checkSelf = !(options.guides && !this._guide || options.selected && !this.isSelected() || options.type && options.type !== Base.hyphenate(this._class) || options.class && !(this instanceof options.class)),\n          match = options.match,\n          that = this,\n          bounds,\n          res;\n\n      function filter(hit) {\n        if (hit && match && !match(hit)) hit = null;\n        if (hit && options.all) options.all.push(hit);\n        return hit;\n      }\n\n      function checkPoint(type, part) {\n        var pt = part ? bounds['get' + part]() : that.getPosition();\n\n        if (point.subtract(pt).divide(tolerancePadding).length <= 1) {\n          return new HitResult(type, that, {\n            name: part ? Base.hyphenate(part) : type,\n            point: pt\n          });\n        }\n      }\n\n      var checkPosition = options.position,\n          checkCenter = options.center,\n          checkBounds = options.bounds;\n\n      if (checkSelf && this._parent && (checkPosition || checkCenter || checkBounds)) {\n        if (checkCenter || checkBounds) {\n          bounds = this.getInternalBounds();\n        }\n\n        res = checkPosition && checkPoint('position') || checkCenter && checkPoint('center', 'Center');\n\n        if (!res && checkBounds) {\n          var points = ['TopLeft', 'TopRight', 'BottomLeft', 'BottomRight', 'LeftCenter', 'TopCenter', 'RightCenter', 'BottomCenter'];\n\n          for (var i = 0; i < 8 && !res; i++) {\n            res = checkPoint('bounds', points[i]);\n          }\n        }\n\n        res = filter(res);\n      }\n\n      if (!res) {\n        res = this._hitTestChildren(point, options, viewMatrix) || checkSelf && filter(this._hitTestSelf(point, options, viewMatrix, this.getStrokeScaling() ? null : viewMatrix._shiftless().invert())) || null;\n      }\n\n      if (res && res.point) {\n        res.point = matrix.transform(res.point);\n      }\n\n      return res;\n    },\n    _hitTestSelf: function (point, options) {\n      if (options.fill && this.hasFill() && this._contains(point)) return new HitResult('fill', this);\n    },\n    matches: function (name, compare) {\n      function matchObject(obj1, obj2) {\n        for (var i in obj1) {\n          if (obj1.hasOwnProperty(i)) {\n            var val1 = obj1[i],\n                val2 = obj2[i];\n\n            if (Base.isPlainObject(val1) && Base.isPlainObject(val2)) {\n              if (!matchObject(val1, val2)) return false;\n            } else if (!Base.equals(val1, val2)) {\n              return false;\n            }\n          }\n        }\n\n        return true;\n      }\n\n      var type = typeof name;\n\n      if (type === 'object') {\n        for (var key in name) {\n          if (name.hasOwnProperty(key) && !this.matches(key, name[key])) return false;\n        }\n\n        return true;\n      } else if (type === 'function') {\n        return name(this);\n      } else if (name === 'match') {\n        return compare(this);\n      } else {\n        var value = /^(empty|editable)$/.test(name) ? this['is' + Base.capitalize(name)]() : name === 'type' ? Base.hyphenate(this._class) : this[name];\n\n        if (name === 'class') {\n          if (typeof compare === 'function') return this instanceof compare;\n          value = this._class;\n        }\n\n        if (typeof compare === 'function') {\n          return !!compare(value);\n        } else if (compare) {\n          if (compare.test) {\n            return compare.test(value);\n          } else if (Base.isPlainObject(compare)) {\n            return matchObject(compare, value);\n          }\n        }\n\n        return Base.equals(value, compare);\n      }\n    },\n    getItems: function (options) {\n      return Item._getItems(this, options, this._matrix);\n    },\n    getItem: function (options) {\n      return Item._getItems(this, options, this._matrix, null, true)[0] || null;\n    },\n    statics: {\n      _getItems: function _getItems(item, options, matrix, param, firstOnly) {\n        if (!param) {\n          var obj = typeof options === 'object' && options,\n              overlapping = obj && obj.overlapping,\n              inside = obj && obj.inside,\n              bounds = overlapping || inside,\n              rect = bounds && Rectangle.read([bounds]);\n          param = {\n            items: [],\n            recursive: obj && obj.recursive !== false,\n            inside: !!inside,\n            overlapping: !!overlapping,\n            rect: rect,\n            path: overlapping && new Path.Rectangle({\n              rectangle: rect,\n              insert: false\n            })\n          };\n\n          if (obj) {\n            options = Base.filter({}, options, {\n              recursive: true,\n              inside: true,\n              overlapping: true\n            });\n          }\n        }\n\n        var children = item._children,\n            items = param.items,\n            rect = param.rect;\n        matrix = rect && (matrix || new Matrix());\n\n        for (var i = 0, l = children && children.length; i < l; i++) {\n          var child = children[i],\n              childMatrix = matrix && matrix.appended(child._matrix),\n              add = true;\n\n          if (rect) {\n            var bounds = child.getBounds(childMatrix);\n            if (!rect.intersects(bounds)) continue;\n            if (!(rect.contains(bounds) || param.overlapping && (bounds.contains(rect) || param.path.intersects(child, childMatrix)))) add = false;\n          }\n\n          if (add && child.matches(options)) {\n            items.push(child);\n            if (firstOnly) break;\n          }\n\n          if (param.recursive !== false) {\n            _getItems(child, options, childMatrix, param, firstOnly);\n          }\n\n          if (firstOnly && items.length > 0) break;\n        }\n\n        return items;\n      }\n    }\n  }, {\n    importJSON: function (json) {\n      var res = Base.importJSON(json, this);\n      return res !== this ? this.addChild(res) : res;\n    },\n    addChild: function (item) {\n      return this.insertChild(undefined, item);\n    },\n    insertChild: function (index, item) {\n      var res = item ? this.insertChildren(index, [item]) : null;\n      return res && res[0];\n    },\n    addChildren: function (items) {\n      return this.insertChildren(this._children.length, items);\n    },\n    insertChildren: function (index, items) {\n      var children = this._children;\n\n      if (children && items && items.length > 0) {\n        items = Base.slice(items);\n        var inserted = {};\n\n        for (var i = items.length - 1; i >= 0; i--) {\n          var item = items[i],\n              id = item && item._id;\n\n          if (!item || inserted[id]) {\n            items.splice(i, 1);\n          } else {\n            item._remove(false, true);\n\n            inserted[id] = true;\n          }\n        }\n\n        Base.splice(children, items, index, 0);\n        var project = this._project,\n            notifySelf = project._changes;\n\n        for (var i = 0, l = items.length; i < l; i++) {\n          var item = items[i],\n              name = item._name;\n          item._parent = this;\n\n          item._setProject(project, true);\n\n          if (name) item.setName(name);\n          if (notifySelf) item._changed(5);\n        }\n\n        this._changed(11);\n      } else {\n        items = null;\n      }\n\n      return items;\n    },\n    _insertItem: '#insertChild',\n    _insertAt: function (item, offset) {\n      var owner = item && item._getOwner(),\n          res = item !== this && owner ? this : null;\n\n      if (res) {\n        res._remove(false, true);\n\n        owner._insertItem(item._index + offset, res);\n      }\n\n      return res;\n    },\n    insertAbove: function (item) {\n      return this._insertAt(item, 1);\n    },\n    insertBelow: function (item) {\n      return this._insertAt(item, 0);\n    },\n    sendToBack: function () {\n      var owner = this._getOwner();\n\n      return owner ? owner._insertItem(0, this) : null;\n    },\n    bringToFront: function () {\n      var owner = this._getOwner();\n\n      return owner ? owner._insertItem(undefined, this) : null;\n    },\n    appendTop: '#addChild',\n    appendBottom: function (item) {\n      return this.insertChild(0, item);\n    },\n    moveAbove: '#insertAbove',\n    moveBelow: '#insertBelow',\n    addTo: function (owner) {\n      return owner._insertItem(undefined, this);\n    },\n    copyTo: function (owner) {\n      return this.clone(false).addTo(owner);\n    },\n    reduce: function (options) {\n      var children = this._children;\n\n      if (children && children.length === 1) {\n        var child = children[0].reduce(options);\n\n        if (this._parent) {\n          child.insertAbove(this);\n          this.remove();\n        } else {\n          child.remove();\n        }\n\n        return child;\n      }\n\n      return this;\n    },\n    _removeNamed: function () {\n      var owner = this._getOwner();\n\n      if (owner) {\n        var children = owner._children,\n            namedChildren = owner._namedChildren,\n            name = this._name,\n            namedArray = namedChildren[name],\n            index = namedArray ? namedArray.indexOf(this) : -1;\n\n        if (index !== -1) {\n          if (children[name] == this) delete children[name];\n          namedArray.splice(index, 1);\n\n          if (namedArray.length) {\n            children[name] = namedArray[0];\n          } else {\n            delete namedChildren[name];\n          }\n        }\n      }\n    },\n    _remove: function (notifySelf, notifyParent) {\n      var owner = this._getOwner(),\n          project = this._project,\n          index = this._index;\n\n      if (this._style) this._style._dispose();\n\n      if (owner) {\n        if (this._name) this._removeNamed();\n\n        if (index != null) {\n          if (project._activeLayer === this) project._activeLayer = this.getNextSibling() || this.getPreviousSibling();\n          Base.splice(owner._children, null, index, 1);\n        }\n\n        this._installEvents(false);\n\n        if (notifySelf && project._changes) this._changed(5);\n        if (notifyParent) owner._changed(11, this);\n        this._parent = null;\n        return true;\n      }\n\n      return false;\n    },\n    remove: function () {\n      return this._remove(true, true);\n    },\n    replaceWith: function (item) {\n      var ok = item && item.insertBelow(this);\n      if (ok) this.remove();\n      return ok;\n    },\n    removeChildren: function (start, end) {\n      if (!this._children) return null;\n      start = start || 0;\n      end = Base.pick(end, this._children.length);\n      var removed = Base.splice(this._children, null, start, end - start);\n\n      for (var i = removed.length - 1; i >= 0; i--) {\n        removed[i]._remove(true, false);\n      }\n\n      if (removed.length > 0) this._changed(11);\n      return removed;\n    },\n    clear: '#removeChildren',\n    reverseChildren: function () {\n      if (this._children) {\n        this._children.reverse();\n\n        for (var i = 0, l = this._children.length; i < l; i++) this._children[i]._index = i;\n\n        this._changed(11);\n      }\n    },\n    isEmpty: function (recursively) {\n      var children = this._children;\n      var numChildren = children ? children.length : 0;\n\n      if (recursively) {\n        for (var i = 0; i < numChildren; i++) {\n          if (!children[i].isEmpty(recursively)) {\n            return false;\n          }\n        }\n\n        return true;\n      }\n\n      return !numChildren;\n    },\n    isEditable: function () {\n      var item = this;\n\n      while (item) {\n        if (!item._visible || item._locked) return false;\n        item = item._parent;\n      }\n\n      return true;\n    },\n    hasFill: function () {\n      return this.getStyle().hasFill();\n    },\n    hasStroke: function () {\n      return this.getStyle().hasStroke();\n    },\n    hasShadow: function () {\n      return this.getStyle().hasShadow();\n    },\n    _getOrder: function (item) {\n      function getList(item) {\n        var list = [];\n\n        do {\n          list.unshift(item);\n        } while (item = item._parent);\n\n        return list;\n      }\n\n      var list1 = getList(this),\n          list2 = getList(item);\n\n      for (var i = 0, l = Math.min(list1.length, list2.length); i < l; i++) {\n        if (list1[i] != list2[i]) {\n          return list1[i]._index < list2[i]._index ? 1 : -1;\n        }\n      }\n\n      return 0;\n    },\n    hasChildren: function () {\n      return this._children && this._children.length > 0;\n    },\n    isInserted: function () {\n      return this._parent ? this._parent.isInserted() : false;\n    },\n    isAbove: function (item) {\n      return this._getOrder(item) === -1;\n    },\n    isBelow: function (item) {\n      return this._getOrder(item) === 1;\n    },\n    isParent: function (item) {\n      return this._parent === item;\n    },\n    isChild: function (item) {\n      return item && item._parent === this;\n    },\n    isDescendant: function (item) {\n      var parent = this;\n\n      while (parent = parent._parent) {\n        if (parent === item) return true;\n      }\n\n      return false;\n    },\n    isAncestor: function (item) {\n      return item ? item.isDescendant(this) : false;\n    },\n    isSibling: function (item) {\n      return this._parent === item._parent;\n    },\n    isGroupedWith: function (item) {\n      var parent = this._parent;\n\n      while (parent) {\n        if (parent._parent && /^(Group|Layer|CompoundPath)$/.test(parent._class) && item.isDescendant(parent)) return true;\n        parent = parent._parent;\n      }\n\n      return false;\n    }\n  }, Base.each(['rotate', 'scale', 'shear', 'skew'], function (key) {\n    var rotate = key === 'rotate';\n\n    this[key] = function () {\n      var args = arguments,\n          value = (rotate ? Base : Point).read(args),\n          center = Point.read(args, 0, {\n        readNull: true\n      });\n      return this.transform(new Matrix()[key](value, center || this.getPosition(true)));\n    };\n  }, {\n    translate: function () {\n      var mx = new Matrix();\n      return this.transform(mx.translate.apply(mx, arguments));\n    },\n    transform: function (matrix, _applyRecursively, _setApplyMatrix) {\n      var _matrix = this._matrix,\n          transformMatrix = matrix && !matrix.isIdentity(),\n          applyMatrix = _setApplyMatrix && this._canApplyMatrix || this._applyMatrix && (transformMatrix || !_matrix.isIdentity() || _applyRecursively && this._children);\n      if (!transformMatrix && !applyMatrix) return this;\n\n      if (transformMatrix) {\n        if (!matrix.isInvertible() && _matrix.isInvertible()) _matrix._backup = _matrix.getValues();\n\n        _matrix.prepend(matrix, true);\n\n        var style = this._style,\n            fillColor = style.getFillColor(true),\n            strokeColor = style.getStrokeColor(true);\n        if (fillColor) fillColor.transform(matrix);\n        if (strokeColor) strokeColor.transform(matrix);\n      }\n\n      if (applyMatrix && (applyMatrix = this._transformContent(_matrix, _applyRecursively, _setApplyMatrix))) {\n        var pivot = this._pivot;\n        if (pivot) _matrix._transformPoint(pivot, pivot, true);\n\n        _matrix.reset(true);\n\n        if (_setApplyMatrix && this._canApplyMatrix) this._applyMatrix = true;\n      }\n\n      var bounds = this._bounds,\n          position = this._position;\n\n      if (transformMatrix || applyMatrix) {\n        this._changed(25);\n      }\n\n      var decomp = transformMatrix && bounds && matrix.decompose();\n\n      if (decomp && decomp.skewing.isZero() && decomp.rotation % 90 === 0) {\n        for (var key in bounds) {\n          var cache = bounds[key];\n\n          if (cache.nonscaling) {\n            delete bounds[key];\n          } else if (applyMatrix || !cache.internal) {\n            var rect = cache.rect;\n\n            matrix._transformBounds(rect, rect);\n          }\n        }\n\n        this._bounds = bounds;\n\n        var cached = bounds[this._getBoundsCacheKey(this._boundsOptions || {})];\n\n        if (cached) {\n          this._position = this._getPositionFromBounds(cached.rect);\n        }\n      } else if (transformMatrix && position && this._pivot) {\n        this._position = matrix._transformPoint(position, position);\n      }\n\n      return this;\n    },\n    _transformContent: function (matrix, applyRecursively, setApplyMatrix) {\n      var children = this._children;\n\n      if (children) {\n        for (var i = 0, l = children.length; i < l; i++) {\n          children[i].transform(matrix, applyRecursively, setApplyMatrix);\n        }\n\n        return true;\n      }\n    },\n    globalToLocal: function () {\n      return this.getGlobalMatrix(true)._inverseTransform(Point.read(arguments));\n    },\n    localToGlobal: function () {\n      return this.getGlobalMatrix(true)._transformPoint(Point.read(arguments));\n    },\n    parentToLocal: function () {\n      return this._matrix._inverseTransform(Point.read(arguments));\n    },\n    localToParent: function () {\n      return this._matrix._transformPoint(Point.read(arguments));\n    },\n    fitBounds: function (rectangle, fill) {\n      rectangle = Rectangle.read(arguments);\n      var bounds = this.getBounds(),\n          itemRatio = bounds.height / bounds.width,\n          rectRatio = rectangle.height / rectangle.width,\n          scale = (fill ? itemRatio > rectRatio : itemRatio < rectRatio) ? rectangle.width / bounds.width : rectangle.height / bounds.height,\n          newBounds = new Rectangle(new Point(), new Size(bounds.width * scale, bounds.height * scale));\n      newBounds.setCenter(rectangle.getCenter());\n      this.setBounds(newBounds);\n    }\n  }), {\n    _setStyles: function (ctx, param, viewMatrix) {\n      var style = this._style,\n          matrix = this._matrix;\n\n      if (style.hasFill()) {\n        ctx.fillStyle = style.getFillColor().toCanvasStyle(ctx, matrix);\n      }\n\n      if (style.hasStroke()) {\n        ctx.strokeStyle = style.getStrokeColor().toCanvasStyle(ctx, matrix);\n        ctx.lineWidth = style.getStrokeWidth();\n        var strokeJoin = style.getStrokeJoin(),\n            strokeCap = style.getStrokeCap(),\n            miterLimit = style.getMiterLimit();\n        if (strokeJoin) ctx.lineJoin = strokeJoin;\n        if (strokeCap) ctx.lineCap = strokeCap;\n        if (miterLimit) ctx.miterLimit = miterLimit;\n\n        if (paper.support.nativeDash) {\n          var dashArray = style.getDashArray(),\n              dashOffset = style.getDashOffset();\n\n          if (dashArray && dashArray.length) {\n            if ('setLineDash' in ctx) {\n              ctx.setLineDash(dashArray);\n              ctx.lineDashOffset = dashOffset;\n            } else {\n              ctx.mozDash = dashArray;\n              ctx.mozDashOffset = dashOffset;\n            }\n          }\n        }\n      }\n\n      if (style.hasShadow()) {\n        var pixelRatio = param.pixelRatio || 1,\n            mx = viewMatrix._shiftless().prepend(new Matrix().scale(pixelRatio, pixelRatio)),\n            blur = mx.transform(new Point(style.getShadowBlur(), 0)),\n            offset = mx.transform(this.getShadowOffset());\n\n        ctx.shadowColor = style.getShadowColor().toCanvasStyle(ctx);\n        ctx.shadowBlur = blur.getLength();\n        ctx.shadowOffsetX = offset.x;\n        ctx.shadowOffsetY = offset.y;\n      }\n    },\n    draw: function (ctx, param, parentStrokeMatrix) {\n      var updateVersion = this._updateVersion = this._project._updateVersion;\n      if (!this._visible || this._opacity === 0) return;\n      var matrices = param.matrices,\n          viewMatrix = param.viewMatrix,\n          matrix = this._matrix,\n          globalMatrix = matrices[matrices.length - 1].appended(matrix);\n      if (!globalMatrix.isInvertible()) return;\n      viewMatrix = viewMatrix ? viewMatrix.appended(globalMatrix) : globalMatrix;\n      matrices.push(globalMatrix);\n\n      if (param.updateMatrix) {\n        this._globalMatrix = globalMatrix;\n      }\n\n      var blendMode = this._blendMode,\n          opacity = Numerical.clamp(this._opacity, 0, 1),\n          normalBlend = blendMode === 'normal',\n          nativeBlend = BlendMode.nativeModes[blendMode],\n          direct = normalBlend && opacity === 1 || param.dontStart || param.clip || (nativeBlend || normalBlend && opacity < 1) && this._canComposite(),\n          pixelRatio = param.pixelRatio || 1,\n          mainCtx,\n          itemOffset,\n          prevOffset;\n\n      if (!direct) {\n        var bounds = this.getStrokeBounds(viewMatrix);\n\n        if (!bounds.width || !bounds.height) {\n          matrices.pop();\n          return;\n        }\n\n        prevOffset = param.offset;\n        itemOffset = param.offset = bounds.getTopLeft().floor();\n        mainCtx = ctx;\n        ctx = CanvasProvider.getContext(bounds.getSize().ceil().add(1).multiply(pixelRatio));\n        if (pixelRatio !== 1) ctx.scale(pixelRatio, pixelRatio);\n      }\n\n      ctx.save();\n      var strokeMatrix = parentStrokeMatrix ? parentStrokeMatrix.appended(matrix) : this._canScaleStroke && !this.getStrokeScaling(true) && viewMatrix,\n          clip = !direct && param.clipItem,\n          transform = !strokeMatrix || clip;\n\n      if (direct) {\n        ctx.globalAlpha = opacity;\n        if (nativeBlend) ctx.globalCompositeOperation = blendMode;\n      } else if (transform) {\n        ctx.translate(-itemOffset.x, -itemOffset.y);\n      }\n\n      if (transform) {\n        (direct ? matrix : viewMatrix).applyToContext(ctx);\n      }\n\n      if (clip) {\n        param.clipItem.draw(ctx, param.extend({\n          clip: true\n        }));\n      }\n\n      if (strokeMatrix) {\n        ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n        var offset = param.offset;\n        if (offset) ctx.translate(-offset.x, -offset.y);\n      }\n\n      this._draw(ctx, param, viewMatrix, strokeMatrix);\n\n      ctx.restore();\n      matrices.pop();\n\n      if (param.clip && !param.dontFinish) {\n        ctx.clip(this.getFillRule());\n      }\n\n      if (!direct) {\n        BlendMode.process(blendMode, ctx, mainCtx, opacity, itemOffset.subtract(prevOffset).multiply(pixelRatio));\n        CanvasProvider.release(ctx);\n        param.offset = prevOffset;\n      }\n    },\n    _isUpdated: function (updateVersion) {\n      var parent = this._parent;\n      if (parent instanceof CompoundPath) return parent._isUpdated(updateVersion);\n      var updated = this._updateVersion === updateVersion;\n\n      if (!updated && parent && parent._visible && parent._isUpdated(updateVersion)) {\n        this._updateVersion = updateVersion;\n        updated = true;\n      }\n\n      return updated;\n    },\n    _drawSelection: function (ctx, matrix, size, selectionItems, updateVersion) {\n      var selection = this._selection,\n          itemSelected = selection & 1,\n          boundsSelected = selection & 2 || itemSelected && this._selectBounds,\n          positionSelected = selection & 4;\n      if (!this._drawSelected) itemSelected = false;\n\n      if ((itemSelected || boundsSelected || positionSelected) && this._isUpdated(updateVersion)) {\n        var layer,\n            color = this.getSelectedColor(true) || (layer = this.getLayer()) && layer.getSelectedColor(true),\n            mx = matrix.appended(this.getGlobalMatrix(true)),\n            half = size / 2;\n        ctx.strokeStyle = ctx.fillStyle = color ? color.toCanvasStyle(ctx) : '#009dec';\n        if (itemSelected) this._drawSelected(ctx, mx, selectionItems);\n\n        if (positionSelected) {\n          var pos = this.getPosition(true),\n              parent = this._parent,\n              point = parent ? parent.localToGlobal(pos) : pos,\n              x = point.x,\n              y = point.y;\n          ctx.beginPath();\n          ctx.arc(x, y, half, 0, Math.PI * 2, true);\n          ctx.stroke();\n          var deltas = [[0, -1], [1, 0], [0, 1], [-1, 0]],\n              start = half,\n              end = size + 1;\n\n          for (var i = 0; i < 4; i++) {\n            var delta = deltas[i],\n                dx = delta[0],\n                dy = delta[1];\n            ctx.moveTo(x + dx * start, y + dy * start);\n            ctx.lineTo(x + dx * end, y + dy * end);\n            ctx.stroke();\n          }\n        }\n\n        if (boundsSelected) {\n          var coords = mx._transformCorners(this.getInternalBounds());\n\n          ctx.beginPath();\n\n          for (var i = 0; i < 8; i++) {\n            ctx[!i ? 'moveTo' : 'lineTo'](coords[i], coords[++i]);\n          }\n\n          ctx.closePath();\n          ctx.stroke();\n\n          for (var i = 0; i < 8; i++) {\n            ctx.fillRect(coords[i] - half, coords[++i] - half, size, size);\n          }\n        }\n      }\n    },\n    _canComposite: function () {\n      return false;\n    }\n  }, Base.each(['down', 'drag', 'up', 'move'], function (key) {\n    this['removeOn' + Base.capitalize(key)] = function () {\n      var hash = {};\n      hash[key] = true;\n      return this.removeOn(hash);\n    };\n  }, {\n    removeOn: function (obj) {\n      for (var name in obj) {\n        if (obj[name]) {\n          var key = 'mouse' + name,\n              project = this._project,\n              sets = project._removeSets = project._removeSets || {};\n          sets[key] = sets[key] || {};\n          sets[key][this._id] = this;\n        }\n      }\n\n      return this;\n    }\n  }), {\n    tween: function (from, to, options) {\n      if (!options) {\n        options = to;\n        to = from;\n        from = null;\n\n        if (!options) {\n          options = to;\n          to = null;\n        }\n      }\n\n      var easing = options && options.easing,\n          start = options && options.start,\n          duration = options != null && (typeof options === 'number' ? options : options.duration),\n          tween = new Tween(this, from, to, duration, easing, start);\n\n      function onFrame(event) {\n        tween._handleFrame(event.time * 1000);\n\n        if (!tween.running) {\n          this.off('frame', onFrame);\n        }\n      }\n\n      if (duration) {\n        this.on('frame', onFrame);\n      }\n\n      return tween;\n    },\n    tweenTo: function (to, options) {\n      return this.tween(null, to, options);\n    },\n    tweenFrom: function (from, options) {\n      return this.tween(from, null, options);\n    }\n  });\n  var Group = Item.extend({\n    _class: 'Group',\n    _selectBounds: false,\n    _selectChildren: true,\n    _serializeFields: {\n      children: []\n    },\n    initialize: function Group(arg) {\n      this._children = [];\n      this._namedChildren = {};\n      if (!this._initialize(arg)) this.addChildren(Array.isArray(arg) ? arg : arguments);\n    },\n    _changed: function _changed(flags) {\n      _changed.base.call(this, flags);\n\n      if (flags & 2050) {\n        this._clipItem = undefined;\n      }\n    },\n    _getClipItem: function () {\n      var clipItem = this._clipItem;\n\n      if (clipItem === undefined) {\n        clipItem = null;\n        var children = this._children;\n\n        for (var i = 0, l = children.length; i < l; i++) {\n          if (children[i]._clipMask) {\n            clipItem = children[i];\n            break;\n          }\n        }\n\n        this._clipItem = clipItem;\n      }\n\n      return clipItem;\n    },\n    isClipped: function () {\n      return !!this._getClipItem();\n    },\n    setClipped: function (clipped) {\n      var child = this.getFirstChild();\n      if (child) child.setClipMask(clipped);\n    },\n    _getBounds: function _getBounds(matrix, options) {\n      var clipItem = this._getClipItem();\n\n      return clipItem ? clipItem._getCachedBounds(clipItem._matrix.prepended(matrix), Base.set({}, options, {\n        stroke: false\n      })) : _getBounds.base.call(this, matrix, options);\n    },\n    _hitTestChildren: function _hitTestChildren(point, options, viewMatrix) {\n      var clipItem = this._getClipItem();\n\n      return (!clipItem || clipItem.contains(point)) && _hitTestChildren.base.call(this, point, options, viewMatrix, clipItem);\n    },\n    _draw: function (ctx, param) {\n      var clip = param.clip,\n          clipItem = !clip && this._getClipItem();\n\n      param = param.extend({\n        clipItem: clipItem,\n        clip: false\n      });\n\n      if (clip) {\n        ctx.beginPath();\n        param.dontStart = param.dontFinish = true;\n      } else if (clipItem) {\n        clipItem.draw(ctx, param.extend({\n          clip: true\n        }));\n      }\n\n      var children = this._children;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        var item = children[i];\n        if (item !== clipItem) item.draw(ctx, param);\n      }\n    }\n  });\n  var Layer = Group.extend({\n    _class: 'Layer',\n    initialize: function Layer() {\n      Group.apply(this, arguments);\n    },\n    _getOwner: function () {\n      return this._parent || this._index != null && this._project;\n    },\n    isInserted: function isInserted() {\n      return this._parent ? isInserted.base.call(this) : this._index != null;\n    },\n    activate: function () {\n      this._project._activeLayer = this;\n    },\n    _hitTestSelf: function () {}\n  });\n  var Shape = Item.extend({\n    _class: 'Shape',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _canScaleStroke: true,\n    _serializeFields: {\n      type: null,\n      size: null,\n      radius: null\n    },\n    initialize: function Shape(props, point) {\n      this._initialize(props, point);\n    },\n    _equals: function (item) {\n      return this._type === item._type && this._size.equals(item._size) && Base.equals(this._radius, item._radius);\n    },\n    copyContent: function (source) {\n      this.setType(source._type);\n      this.setSize(source._size);\n      this.setRadius(source._radius);\n    },\n    getType: function () {\n      return this._type;\n    },\n    setType: function (type) {\n      this._type = type;\n    },\n    getShape: '#getType',\n    setShape: '#setType',\n    getSize: function () {\n      var size = this._size;\n      return new LinkedSize(size.width, size.height, this, 'setSize');\n    },\n    setSize: function () {\n      var size = Size.read(arguments);\n\n      if (!this._size) {\n        this._size = size.clone();\n      } else if (!this._size.equals(size)) {\n        var type = this._type,\n            width = size.width,\n            height = size.height;\n\n        if (type === 'rectangle') {\n          this._radius.set(Size.min(this._radius, size.divide(2).abs()));\n        } else if (type === 'circle') {\n          width = height = (width + height) / 2;\n          this._radius = width / 2;\n        } else if (type === 'ellipse') {\n          this._radius._set(width / 2, height / 2);\n        }\n\n        this._size._set(width, height);\n\n        this._changed(9);\n      }\n    },\n    getRadius: function () {\n      var rad = this._radius;\n      return this._type === 'circle' ? rad : new LinkedSize(rad.width, rad.height, this, 'setRadius');\n    },\n    setRadius: function (radius) {\n      var type = this._type;\n\n      if (type === 'circle') {\n        if (radius === this._radius) return;\n        var size = radius * 2;\n        this._radius = radius;\n\n        this._size._set(size, size);\n      } else {\n        radius = Size.read(arguments);\n\n        if (!this._radius) {\n          this._radius = radius.clone();\n        } else {\n          if (this._radius.equals(radius)) return;\n\n          this._radius.set(radius);\n\n          if (type === 'rectangle') {\n            var size = Size.max(this._size, radius.multiply(2));\n\n            this._size.set(size);\n          } else if (type === 'ellipse') {\n            this._size._set(radius.width * 2, radius.height * 2);\n          }\n        }\n      }\n\n      this._changed(9);\n    },\n    isEmpty: function () {\n      return false;\n    },\n    toPath: function (insert) {\n      var path = new Path[Base.capitalize(this._type)]({\n        center: new Point(),\n        size: this._size,\n        radius: this._radius,\n        insert: false\n      });\n      path.copyAttributes(this);\n      if (paper.settings.applyMatrix) path.setApplyMatrix(true);\n      if (insert === undefined || insert) path.insertAbove(this);\n      return path;\n    },\n    toShape: '#clone',\n    _asPathItem: function () {\n      return this.toPath(false);\n    },\n    _draw: function (ctx, param, viewMatrix, strokeMatrix) {\n      var style = this._style,\n          hasFill = style.hasFill(),\n          hasStroke = style.hasStroke(),\n          dontPaint = param.dontFinish || param.clip,\n          untransformed = !strokeMatrix;\n\n      if (hasFill || hasStroke || dontPaint) {\n        var type = this._type,\n            radius = this._radius,\n            isCircle = type === 'circle';\n        if (!param.dontStart) ctx.beginPath();\n\n        if (untransformed && isCircle) {\n          ctx.arc(0, 0, radius, 0, Math.PI * 2, true);\n        } else {\n          var rx = isCircle ? radius : radius.width,\n              ry = isCircle ? radius : radius.height,\n              size = this._size,\n              width = size.width,\n              height = size.height;\n\n          if (untransformed && type === 'rectangle' && rx === 0 && ry === 0) {\n            ctx.rect(-width / 2, -height / 2, width, height);\n          } else {\n            var x = width / 2,\n                y = height / 2,\n                kappa = 1 - 0.5522847498307936,\n                cx = rx * kappa,\n                cy = ry * kappa,\n                c = [-x, -y + ry, -x, -y + cy, -x + cx, -y, -x + rx, -y, x - rx, -y, x - cx, -y, x, -y + cy, x, -y + ry, x, y - ry, x, y - cy, x - cx, y, x - rx, y, -x + rx, y, -x + cx, y, -x, y - cy, -x, y - ry];\n            if (strokeMatrix) strokeMatrix.transform(c, c, 32);\n            ctx.moveTo(c[0], c[1]);\n            ctx.bezierCurveTo(c[2], c[3], c[4], c[5], c[6], c[7]);\n            if (x !== rx) ctx.lineTo(c[8], c[9]);\n            ctx.bezierCurveTo(c[10], c[11], c[12], c[13], c[14], c[15]);\n            if (y !== ry) ctx.lineTo(c[16], c[17]);\n            ctx.bezierCurveTo(c[18], c[19], c[20], c[21], c[22], c[23]);\n            if (x !== rx) ctx.lineTo(c[24], c[25]);\n            ctx.bezierCurveTo(c[26], c[27], c[28], c[29], c[30], c[31]);\n          }\n        }\n\n        ctx.closePath();\n      }\n\n      if (!dontPaint && (hasFill || hasStroke)) {\n        this._setStyles(ctx, param, viewMatrix);\n\n        if (hasFill) {\n          ctx.fill(style.getFillRule());\n          ctx.shadowColor = 'rgba(0,0,0,0)';\n        }\n\n        if (hasStroke) ctx.stroke();\n      }\n    },\n    _canComposite: function () {\n      return !(this.hasFill() && this.hasStroke());\n    },\n    _getBounds: function (matrix, options) {\n      var rect = new Rectangle(this._size).setCenter(0, 0),\n          style = this._style,\n          strokeWidth = options.stroke && style.hasStroke() && style.getStrokeWidth();\n      if (matrix) rect = matrix._transformBounds(rect);\n      return strokeWidth ? rect.expand(Path._getStrokePadding(strokeWidth, this._getStrokeMatrix(matrix, options))) : rect;\n    }\n  }, new function () {\n    function getCornerCenter(that, point, expand) {\n      var radius = that._radius;\n\n      if (!radius.isZero()) {\n        var halfSize = that._size.divide(2);\n\n        for (var q = 1; q <= 4; q++) {\n          var dir = new Point(q > 1 && q < 4 ? -1 : 1, q > 2 ? -1 : 1),\n              corner = dir.multiply(halfSize),\n              center = corner.subtract(dir.multiply(radius)),\n              rect = new Rectangle(expand ? corner.add(dir.multiply(expand)) : corner, center);\n          if (rect.contains(point)) return {\n            point: center,\n            quadrant: q\n          };\n        }\n      }\n    }\n\n    function isOnEllipseStroke(point, radius, padding, quadrant) {\n      var vector = point.divide(radius);\n      return (!quadrant || vector.isInQuadrant(quadrant)) && vector.subtract(vector.normalize()).multiply(radius).divide(padding).length <= 1;\n    }\n\n    return {\n      _contains: function _contains(point) {\n        if (this._type === 'rectangle') {\n          var center = getCornerCenter(this, point);\n          return center ? point.subtract(center.point).divide(this._radius).getLength() <= 1 : _contains.base.call(this, point);\n        } else {\n          return point.divide(this.size).getLength() <= 0.5;\n        }\n      },\n      _hitTestSelf: function _hitTestSelf(point, options, viewMatrix, strokeMatrix) {\n        var hit = false,\n            style = this._style,\n            hitStroke = options.stroke && style.hasStroke(),\n            hitFill = options.fill && style.hasFill();\n\n        if (hitStroke || hitFill) {\n          var type = this._type,\n              radius = this._radius,\n              strokeRadius = hitStroke ? style.getStrokeWidth() / 2 : 0,\n              strokePadding = options._tolerancePadding.add(Path._getStrokePadding(strokeRadius, !style.getStrokeScaling() && strokeMatrix));\n\n          if (type === 'rectangle') {\n            var padding = strokePadding.multiply(2),\n                center = getCornerCenter(this, point, padding);\n\n            if (center) {\n              hit = isOnEllipseStroke(point.subtract(center.point), radius, strokePadding, center.quadrant);\n            } else {\n              var rect = new Rectangle(this._size).setCenter(0, 0),\n                  outer = rect.expand(padding),\n                  inner = rect.expand(padding.negate());\n              hit = outer._containsPoint(point) && !inner._containsPoint(point);\n            }\n          } else {\n            hit = isOnEllipseStroke(point, radius, strokePadding);\n          }\n        }\n\n        return hit ? new HitResult(hitStroke ? 'stroke' : 'fill', this) : _hitTestSelf.base.apply(this, arguments);\n      }\n    };\n  }(), {\n    statics: new function () {\n      function createShape(type, point, size, radius, args) {\n        var item = Base.create(Shape.prototype);\n        item._type = type;\n        item._size = size;\n        item._radius = radius;\n\n        item._initialize(Base.getNamed(args), point);\n\n        return item;\n      }\n\n      return {\n        Circle: function () {\n          var args = arguments,\n              center = Point.readNamed(args, 'center'),\n              radius = Base.readNamed(args, 'radius');\n          return createShape('circle', center, new Size(radius * 2), radius, args);\n        },\n        Rectangle: function () {\n          var args = arguments,\n              rect = Rectangle.readNamed(args, 'rectangle'),\n              radius = Size.min(Size.readNamed(args, 'radius'), rect.getSize(true).divide(2));\n          return createShape('rectangle', rect.getCenter(true), rect.getSize(true), radius, args);\n        },\n        Ellipse: function () {\n          var args = arguments,\n              ellipse = Shape._readEllipse(args),\n              radius = ellipse.radius;\n\n          return createShape('ellipse', ellipse.center, radius.multiply(2), radius, args);\n        },\n        _readEllipse: function (args) {\n          var center, radius;\n\n          if (Base.hasNamed(args, 'radius')) {\n            center = Point.readNamed(args, 'center');\n            radius = Size.readNamed(args, 'radius');\n          } else {\n            var rect = Rectangle.readNamed(args, 'rectangle');\n            center = rect.getCenter(true);\n            radius = rect.getSize(true).divide(2);\n          }\n\n          return {\n            center: center,\n            radius: radius\n          };\n        }\n      };\n    }()\n  });\n  var Raster = Item.extend({\n    _class: 'Raster',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _boundsOptions: {\n      stroke: false,\n      handle: false\n    },\n    _serializeFields: {\n      crossOrigin: null,\n      source: null\n    },\n    _prioritize: ['crossOrigin'],\n    _smoothing: 'low',\n    beans: true,\n    initialize: function Raster(source, position) {\n      if (!this._initialize(source, position !== undefined && Point.read(arguments))) {\n        var image,\n            type = typeof source,\n            object = type === 'string' ? document.getElementById(source) : type === 'object' ? source : null;\n\n        if (object && object !== Item.NO_INSERT) {\n          if (object.getContext || object.naturalHeight != null) {\n            image = object;\n          } else if (object) {\n            var size = Size.read(arguments);\n\n            if (!size.isZero()) {\n              image = CanvasProvider.getCanvas(size);\n            }\n          }\n        }\n\n        if (image) {\n          this.setImage(image);\n        } else {\n          this.setSource(source);\n        }\n      }\n\n      if (!this._size) {\n        this._size = new Size();\n        this._loaded = false;\n      }\n    },\n    _equals: function (item) {\n      return this.getSource() === item.getSource();\n    },\n    copyContent: function (source) {\n      var image = source._image,\n          canvas = source._canvas;\n\n      if (image) {\n        this._setImage(image);\n      } else if (canvas) {\n        var copyCanvas = CanvasProvider.getCanvas(source._size);\n        copyCanvas.getContext('2d').drawImage(canvas, 0, 0);\n\n        this._setImage(copyCanvas);\n      }\n\n      this._crossOrigin = source._crossOrigin;\n    },\n    getSize: function () {\n      var size = this._size;\n      return new LinkedSize(size ? size.width : 0, size ? size.height : 0, this, 'setSize');\n    },\n    setSize: function (_size, _clear) {\n      var size = Size.read(arguments);\n\n      if (!size.equals(this._size)) {\n        if (size.width > 0 && size.height > 0) {\n          var element = !_clear && this.getElement();\n\n          this._setImage(CanvasProvider.getCanvas(size));\n\n          if (element) {\n            this.getContext(true).drawImage(element, 0, 0, size.width, size.height);\n          }\n        } else {\n          if (this._canvas) CanvasProvider.release(this._canvas);\n          this._size = size.clone();\n        }\n      } else if (_clear) {\n        this.clear();\n      }\n    },\n    getWidth: function () {\n      return this._size ? this._size.width : 0;\n    },\n    setWidth: function (width) {\n      this.setSize(width, this.getHeight());\n    },\n    getHeight: function () {\n      return this._size ? this._size.height : 0;\n    },\n    setHeight: function (height) {\n      this.setSize(this.getWidth(), height);\n    },\n    getLoaded: function () {\n      return this._loaded;\n    },\n    isEmpty: function () {\n      var size = this._size;\n      return !size || size.width === 0 && size.height === 0;\n    },\n    getResolution: function () {\n      var matrix = this._matrix,\n          orig = new Point(0, 0).transform(matrix),\n          u = new Point(1, 0).transform(matrix).subtract(orig),\n          v = new Point(0, 1).transform(matrix).subtract(orig);\n      return new Size(72 / u.getLength(), 72 / v.getLength());\n    },\n    getPpi: '#getResolution',\n    getImage: function () {\n      return this._image;\n    },\n    setImage: function (image) {\n      var that = this;\n\n      function emit(event) {\n        var view = that.getView(),\n            type = event && event.type || 'load';\n\n        if (view && that.responds(type)) {\n          paper = view._scope;\n          that.emit(type, new Event(event));\n        }\n      }\n\n      this._setImage(image);\n\n      if (this._loaded) {\n        setTimeout(emit, 0);\n      } else if (image) {\n        DomEvent.add(image, {\n          load: function (event) {\n            that._setImage(image);\n\n            emit(event);\n          },\n          error: emit\n        });\n      }\n    },\n    _setImage: function (image) {\n      if (this._canvas) CanvasProvider.release(this._canvas);\n\n      if (image && image.getContext) {\n        this._image = null;\n        this._canvas = image;\n        this._loaded = true;\n      } else {\n        this._image = image;\n        this._canvas = null;\n        this._loaded = !!(image && image.src && image.complete);\n      }\n\n      this._size = new Size(image ? image.naturalWidth || image.width : 0, image ? image.naturalHeight || image.height : 0);\n      this._context = null;\n\n      this._changed(1033);\n    },\n    getCanvas: function () {\n      if (!this._canvas) {\n        var ctx = CanvasProvider.getContext(this._size);\n\n        try {\n          if (this._image) ctx.drawImage(this._image, 0, 0);\n          this._canvas = ctx.canvas;\n        } catch (e) {\n          CanvasProvider.release(ctx);\n        }\n      }\n\n      return this._canvas;\n    },\n    setCanvas: '#setImage',\n    getContext: function (_change) {\n      if (!this._context) this._context = this.getCanvas().getContext('2d');\n\n      if (_change) {\n        this._image = null;\n\n        this._changed(1025);\n      }\n\n      return this._context;\n    },\n    setContext: function (context) {\n      this._context = context;\n    },\n    getSource: function () {\n      var image = this._image;\n      return image && image.src || this.toDataURL();\n    },\n    setSource: function (src) {\n      var image = new self.Image(),\n          crossOrigin = this._crossOrigin;\n      if (crossOrigin) image.crossOrigin = crossOrigin;\n      if (src) image.src = src;\n      this.setImage(image);\n    },\n    getCrossOrigin: function () {\n      var image = this._image;\n      return image && image.crossOrigin || this._crossOrigin || '';\n    },\n    setCrossOrigin: function (crossOrigin) {\n      this._crossOrigin = crossOrigin;\n      var image = this._image;\n      if (image) image.crossOrigin = crossOrigin;\n    },\n    getSmoothing: function () {\n      return this._smoothing;\n    },\n    setSmoothing: function (smoothing) {\n      this._smoothing = typeof smoothing === 'string' ? smoothing : smoothing ? 'low' : 'off';\n\n      this._changed(257);\n    },\n    getElement: function () {\n      return this._canvas || this._loaded && this._image;\n    }\n  }, {\n    beans: false,\n    getSubCanvas: function () {\n      var rect = Rectangle.read(arguments),\n          ctx = CanvasProvider.getContext(rect.getSize());\n      ctx.drawImage(this.getCanvas(), rect.x, rect.y, rect.width, rect.height, 0, 0, rect.width, rect.height);\n      return ctx.canvas;\n    },\n    getSubRaster: function () {\n      var rect = Rectangle.read(arguments),\n          raster = new Raster(Item.NO_INSERT);\n\n      raster._setImage(this.getSubCanvas(rect));\n\n      raster.translate(rect.getCenter().subtract(this.getSize().divide(2)));\n\n      raster._matrix.prepend(this._matrix);\n\n      raster.insertAbove(this);\n      return raster;\n    },\n    toDataURL: function () {\n      var image = this._image,\n          src = image && image.src;\n      if (/^data:/.test(src)) return src;\n      var canvas = this.getCanvas();\n      return canvas ? canvas.toDataURL.apply(canvas, arguments) : null;\n    },\n    drawImage: function (image) {\n      var point = Point.read(arguments, 1);\n      this.getContext(true).drawImage(image, point.x, point.y);\n    },\n    getAverageColor: function (object) {\n      var bounds, path;\n\n      if (!object) {\n        bounds = this.getBounds();\n      } else if (object instanceof PathItem) {\n        path = object;\n        bounds = object.getBounds();\n      } else if (typeof object === 'object') {\n        if ('width' in object) {\n          bounds = new Rectangle(object);\n        } else if ('x' in object) {\n          bounds = new Rectangle(object.x - 0.5, object.y - 0.5, 1, 1);\n        }\n      }\n\n      if (!bounds) return null;\n      var sampleSize = 32,\n          width = Math.min(bounds.width, sampleSize),\n          height = Math.min(bounds.height, sampleSize);\n      var ctx = Raster._sampleContext;\n\n      if (!ctx) {\n        ctx = Raster._sampleContext = CanvasProvider.getContext(new Size(sampleSize));\n      } else {\n        ctx.clearRect(0, 0, sampleSize + 1, sampleSize + 1);\n      }\n\n      ctx.save();\n      var matrix = new Matrix().scale(width / bounds.width, height / bounds.height).translate(-bounds.x, -bounds.y);\n      matrix.applyToContext(ctx);\n      if (path) path.draw(ctx, new Base({\n        clip: true,\n        matrices: [matrix]\n      }));\n\n      this._matrix.applyToContext(ctx);\n\n      var element = this.getElement(),\n          size = this._size;\n      if (element) ctx.drawImage(element, -size.width / 2, -size.height / 2);\n      ctx.restore();\n      var pixels = ctx.getImageData(0.5, 0.5, Math.ceil(width), Math.ceil(height)).data,\n          channels = [0, 0, 0],\n          total = 0;\n\n      for (var i = 0, l = pixels.length; i < l; i += 4) {\n        var alpha = pixels[i + 3];\n        total += alpha;\n        alpha /= 255;\n        channels[0] += pixels[i] * alpha;\n        channels[1] += pixels[i + 1] * alpha;\n        channels[2] += pixels[i + 2] * alpha;\n      }\n\n      for (var i = 0; i < 3; i++) channels[i] /= total;\n\n      return total ? Color.read(channels) : null;\n    },\n    getPixel: function () {\n      var point = Point.read(arguments);\n      var data = this.getContext().getImageData(point.x, point.y, 1, 1).data;\n      return new Color('rgb', [data[0] / 255, data[1] / 255, data[2] / 255], data[3] / 255);\n    },\n    setPixel: function () {\n      var args = arguments,\n          point = Point.read(args),\n          color = Color.read(args),\n          components = color._convert('rgb'),\n          alpha = color._alpha,\n          ctx = this.getContext(true),\n          imageData = ctx.createImageData(1, 1),\n          data = imageData.data;\n\n      data[0] = components[0] * 255;\n      data[1] = components[1] * 255;\n      data[2] = components[2] * 255;\n      data[3] = alpha != null ? alpha * 255 : 255;\n      ctx.putImageData(imageData, point.x, point.y);\n    },\n    clear: function () {\n      var size = this._size;\n      this.getContext(true).clearRect(0, 0, size.width + 1, size.height + 1);\n    },\n    createImageData: function () {\n      var size = Size.read(arguments);\n      return this.getContext().createImageData(size.width, size.height);\n    },\n    getImageData: function () {\n      var rect = Rectangle.read(arguments);\n      if (rect.isEmpty()) rect = new Rectangle(this._size);\n      return this.getContext().getImageData(rect.x, rect.y, rect.width, rect.height);\n    },\n    setImageData: function (data) {\n      var point = Point.read(arguments, 1);\n      this.getContext(true).putImageData(data, point.x, point.y);\n    },\n    _getBounds: function (matrix, options) {\n      var rect = new Rectangle(this._size).setCenter(0, 0);\n      return matrix ? matrix._transformBounds(rect) : rect;\n    },\n    _hitTestSelf: function (point) {\n      if (this._contains(point)) {\n        var that = this;\n        return new HitResult('pixel', that, {\n          offset: point.add(that._size.divide(2)).round(),\n          color: {\n            get: function () {\n              return that.getPixel(this.offset);\n            }\n          }\n        });\n      }\n    },\n    _draw: function (ctx, param, viewMatrix) {\n      var element = this.getElement();\n\n      if (element && element.width > 0 && element.height > 0) {\n        ctx.globalAlpha = Numerical.clamp(this._opacity, 0, 1);\n\n        this._setStyles(ctx, param, viewMatrix);\n\n        var smoothing = this._smoothing,\n            disabled = smoothing === 'off';\n        DomElement.setPrefixed(ctx, disabled ? 'imageSmoothingEnabled' : 'imageSmoothingQuality', disabled ? false : smoothing);\n        ctx.drawImage(element, -this._size.width / 2, -this._size.height / 2);\n      }\n    },\n    _canComposite: function () {\n      return true;\n    }\n  });\n  var SymbolItem = Item.extend({\n    _class: 'SymbolItem',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _boundsOptions: {\n      stroke: true\n    },\n    _serializeFields: {\n      symbol: null\n    },\n    initialize: function SymbolItem(arg0, arg1) {\n      if (!this._initialize(arg0, arg1 !== undefined && Point.read(arguments, 1))) this.setDefinition(arg0 instanceof SymbolDefinition ? arg0 : new SymbolDefinition(arg0));\n    },\n    _equals: function (item) {\n      return this._definition === item._definition;\n    },\n    copyContent: function (source) {\n      this.setDefinition(source._definition);\n    },\n    getDefinition: function () {\n      return this._definition;\n    },\n    setDefinition: function (definition) {\n      this._definition = definition;\n\n      this._changed(9);\n    },\n    getSymbol: '#getDefinition',\n    setSymbol: '#setDefinition',\n    isEmpty: function () {\n      return this._definition._item.isEmpty();\n    },\n    _getBounds: function (matrix, options) {\n      var item = this._definition._item;\n      return item._getCachedBounds(item._matrix.prepended(matrix), options);\n    },\n    _hitTestSelf: function (point, options, viewMatrix) {\n      var opts = options.extend({\n        all: false\n      });\n\n      var res = this._definition._item._hitTest(point, opts, viewMatrix);\n\n      if (res) res.item = this;\n      return res;\n    },\n    _draw: function (ctx, param) {\n      this._definition._item.draw(ctx, param);\n    }\n  });\n  var SymbolDefinition = Base.extend({\n    _class: 'SymbolDefinition',\n    initialize: function SymbolDefinition(item, dontCenter) {\n      this._id = UID.get();\n      this.project = paper.project;\n      if (item) this.setItem(item, dontCenter);\n    },\n    _serialize: function (options, dictionary) {\n      return dictionary.add(this, function () {\n        return Base.serialize([this._class, this._item], options, false, dictionary);\n      });\n    },\n    _changed: function (flags) {\n      if (flags & 8) Item._clearBoundsCache(this);\n      if (flags & 1) this.project._changed(flags);\n    },\n    getItem: function () {\n      return this._item;\n    },\n    setItem: function (item, _dontCenter) {\n      if (item._symbol) item = item.clone();\n      if (this._item) this._item._symbol = null;\n      this._item = item;\n      item.remove();\n      item.setSelected(false);\n      if (!_dontCenter) item.setPosition(new Point());\n      item._symbol = this;\n\n      this._changed(9);\n    },\n    getDefinition: '#getItem',\n    setDefinition: '#setItem',\n    place: function (position) {\n      return new SymbolItem(this, position);\n    },\n    clone: function () {\n      return new SymbolDefinition(this._item.clone(false));\n    },\n    equals: function (symbol) {\n      return symbol === this || symbol && this._item.equals(symbol._item) || false;\n    }\n  });\n  var HitResult = Base.extend({\n    _class: 'HitResult',\n    initialize: function HitResult(type, item, values) {\n      this.type = type;\n      this.item = item;\n      if (values) this.inject(values);\n    },\n    statics: {\n      getOptions: function (args) {\n        var options = args && Base.read(args);\n        return new Base({\n          type: null,\n          tolerance: paper.settings.hitTolerance,\n          fill: !options,\n          stroke: !options,\n          segments: !options,\n          handles: false,\n          ends: false,\n          position: false,\n          center: false,\n          bounds: false,\n          guides: false,\n          selected: false\n        }, options);\n      }\n    }\n  });\n  var Segment = Base.extend({\n    _class: 'Segment',\n    beans: true,\n    _selection: 0,\n    initialize: function Segment(arg0, arg1, arg2, arg3, arg4, arg5) {\n      var count = arguments.length,\n          point,\n          handleIn,\n          handleOut,\n          selection;\n\n      if (count > 0) {\n        if (arg0 == null || typeof arg0 === 'object') {\n          if (count === 1 && arg0 && 'point' in arg0) {\n            point = arg0.point;\n            handleIn = arg0.handleIn;\n            handleOut = arg0.handleOut;\n            selection = arg0.selection;\n          } else {\n            point = arg0;\n            handleIn = arg1;\n            handleOut = arg2;\n            selection = arg3;\n          }\n        } else {\n          point = [arg0, arg1];\n          handleIn = arg2 !== undefined ? [arg2, arg3] : null;\n          handleOut = arg4 !== undefined ? [arg4, arg5] : null;\n        }\n      }\n\n      new SegmentPoint(point, this, '_point');\n      new SegmentPoint(handleIn, this, '_handleIn');\n      new SegmentPoint(handleOut, this, '_handleOut');\n      if (selection) this.setSelection(selection);\n    },\n    _serialize: function (options, dictionary) {\n      var point = this._point,\n          selection = this._selection,\n          obj = selection || this.hasHandles() ? [point, this._handleIn, this._handleOut] : point;\n      if (selection) obj.push(selection);\n      return Base.serialize(obj, options, true, dictionary);\n    },\n    _changed: function (point) {\n      var path = this._path;\n      if (!path) return;\n      var curves = path._curves,\n          index = this._index,\n          curve;\n\n      if (curves) {\n        if ((!point || point === this._point || point === this._handleIn) && (curve = index > 0 ? curves[index - 1] : path._closed ? curves[curves.length - 1] : null)) curve._changed();\n        if ((!point || point === this._point || point === this._handleOut) && (curve = curves[index])) curve._changed();\n      }\n\n      path._changed(41);\n    },\n    getPoint: function () {\n      return this._point;\n    },\n    setPoint: function () {\n      this._point.set(Point.read(arguments));\n    },\n    getHandleIn: function () {\n      return this._handleIn;\n    },\n    setHandleIn: function () {\n      this._handleIn.set(Point.read(arguments));\n    },\n    getHandleOut: function () {\n      return this._handleOut;\n    },\n    setHandleOut: function () {\n      this._handleOut.set(Point.read(arguments));\n    },\n    hasHandles: function () {\n      return !this._handleIn.isZero() || !this._handleOut.isZero();\n    },\n    isSmooth: function () {\n      var handleIn = this._handleIn,\n          handleOut = this._handleOut;\n      return !handleIn.isZero() && !handleOut.isZero() && handleIn.isCollinear(handleOut);\n    },\n    clearHandles: function () {\n      this._handleIn._set(0, 0);\n\n      this._handleOut._set(0, 0);\n    },\n    getSelection: function () {\n      return this._selection;\n    },\n    setSelection: function (selection) {\n      var oldSelection = this._selection,\n          path = this._path;\n      this._selection = selection = selection || 0;\n\n      if (path && selection !== oldSelection) {\n        path._updateSelection(this, oldSelection, selection);\n\n        path._changed(257);\n      }\n    },\n    _changeSelection: function (flag, selected) {\n      var selection = this._selection;\n      this.setSelection(selected ? selection | flag : selection & ~flag);\n    },\n    isSelected: function () {\n      return !!(this._selection & 7);\n    },\n    setSelected: function (selected) {\n      this._changeSelection(7, selected);\n    },\n    getIndex: function () {\n      return this._index !== undefined ? this._index : null;\n    },\n    getPath: function () {\n      return this._path || null;\n    },\n    getCurve: function () {\n      var path = this._path,\n          index = this._index;\n\n      if (path) {\n        if (index > 0 && !path._closed && index === path._segments.length - 1) index--;\n        return path.getCurves()[index] || null;\n      }\n\n      return null;\n    },\n    getLocation: function () {\n      var curve = this.getCurve();\n      return curve ? new CurveLocation(curve, this === curve._segment1 ? 0 : 1) : null;\n    },\n    getNext: function () {\n      var segments = this._path && this._path._segments;\n      return segments && (segments[this._index + 1] || this._path._closed && segments[0]) || null;\n    },\n    smooth: function (options, _first, _last) {\n      var opts = options || {},\n          type = opts.type,\n          factor = opts.factor,\n          prev = this.getPrevious(),\n          next = this.getNext(),\n          p0 = (prev || this)._point,\n          p1 = this._point,\n          p2 = (next || this)._point,\n          d1 = p0.getDistance(p1),\n          d2 = p1.getDistance(p2);\n\n      if (!type || type === 'catmull-rom') {\n        var a = factor === undefined ? 0.5 : factor,\n            d1_a = Math.pow(d1, a),\n            d1_2a = d1_a * d1_a,\n            d2_a = Math.pow(d2, a),\n            d2_2a = d2_a * d2_a;\n\n        if (!_first && prev) {\n          var A = 2 * d2_2a + 3 * d2_a * d1_a + d1_2a,\n              N = 3 * d2_a * (d2_a + d1_a);\n          this.setHandleIn(N !== 0 ? new Point((d2_2a * p0._x + A * p1._x - d1_2a * p2._x) / N - p1._x, (d2_2a * p0._y + A * p1._y - d1_2a * p2._y) / N - p1._y) : new Point());\n        }\n\n        if (!_last && next) {\n          var A = 2 * d1_2a + 3 * d1_a * d2_a + d2_2a,\n              N = 3 * d1_a * (d1_a + d2_a);\n          this.setHandleOut(N !== 0 ? new Point((d1_2a * p2._x + A * p1._x - d2_2a * p0._x) / N - p1._x, (d1_2a * p2._y + A * p1._y - d2_2a * p0._y) / N - p1._y) : new Point());\n        }\n      } else if (type === 'geometric') {\n        if (prev && next) {\n          var vector = p0.subtract(p2),\n              t = factor === undefined ? 0.4 : factor,\n              k = t * d1 / (d1 + d2);\n          if (!_first) this.setHandleIn(vector.multiply(k));\n          if (!_last) this.setHandleOut(vector.multiply(k - t));\n        }\n      } else {\n        throw new Error('Smoothing method \\'' + type + '\\' not supported.');\n      }\n    },\n    getPrevious: function () {\n      var segments = this._path && this._path._segments;\n      return segments && (segments[this._index - 1] || this._path._closed && segments[segments.length - 1]) || null;\n    },\n    isFirst: function () {\n      return !this._index;\n    },\n    isLast: function () {\n      var path = this._path;\n      return path && this._index === path._segments.length - 1 || false;\n    },\n    reverse: function () {\n      var handleIn = this._handleIn,\n          handleOut = this._handleOut,\n          tmp = handleIn.clone();\n      handleIn.set(handleOut);\n      handleOut.set(tmp);\n    },\n    reversed: function () {\n      return new Segment(this._point, this._handleOut, this._handleIn);\n    },\n    remove: function () {\n      return this._path ? !!this._path.removeSegment(this._index) : false;\n    },\n    clone: function () {\n      return new Segment(this._point, this._handleIn, this._handleOut);\n    },\n    equals: function (segment) {\n      return segment === this || segment && this._class === segment._class && this._point.equals(segment._point) && this._handleIn.equals(segment._handleIn) && this._handleOut.equals(segment._handleOut) || false;\n    },\n    toString: function () {\n      var parts = ['point: ' + this._point];\n      if (!this._handleIn.isZero()) parts.push('handleIn: ' + this._handleIn);\n      if (!this._handleOut.isZero()) parts.push('handleOut: ' + this._handleOut);\n      return '{ ' + parts.join(', ') + ' }';\n    },\n    transform: function (matrix) {\n      this._transformCoordinates(matrix, new Array(6), true);\n\n      this._changed();\n    },\n    interpolate: function (from, to, factor) {\n      var u = 1 - factor,\n          v = factor,\n          point1 = from._point,\n          point2 = to._point,\n          handleIn1 = from._handleIn,\n          handleIn2 = to._handleIn,\n          handleOut2 = to._handleOut,\n          handleOut1 = from._handleOut;\n\n      this._point._set(u * point1._x + v * point2._x, u * point1._y + v * point2._y, true);\n\n      this._handleIn._set(u * handleIn1._x + v * handleIn2._x, u * handleIn1._y + v * handleIn2._y, true);\n\n      this._handleOut._set(u * handleOut1._x + v * handleOut2._x, u * handleOut1._y + v * handleOut2._y, true);\n\n      this._changed();\n    },\n    _transformCoordinates: function (matrix, coords, change) {\n      var point = this._point,\n          handleIn = !change || !this._handleIn.isZero() ? this._handleIn : null,\n          handleOut = !change || !this._handleOut.isZero() ? this._handleOut : null,\n          x = point._x,\n          y = point._y,\n          i = 2;\n      coords[0] = x;\n      coords[1] = y;\n\n      if (handleIn) {\n        coords[i++] = handleIn._x + x;\n        coords[i++] = handleIn._y + y;\n      }\n\n      if (handleOut) {\n        coords[i++] = handleOut._x + x;\n        coords[i++] = handleOut._y + y;\n      }\n\n      if (matrix) {\n        matrix._transformCoordinates(coords, coords, i / 2);\n\n        x = coords[0];\n        y = coords[1];\n\n        if (change) {\n          point._x = x;\n          point._y = y;\n          i = 2;\n\n          if (handleIn) {\n            handleIn._x = coords[i++] - x;\n            handleIn._y = coords[i++] - y;\n          }\n\n          if (handleOut) {\n            handleOut._x = coords[i++] - x;\n            handleOut._y = coords[i++] - y;\n          }\n        } else {\n          if (!handleIn) {\n            coords[i++] = x;\n            coords[i++] = y;\n          }\n\n          if (!handleOut) {\n            coords[i++] = x;\n            coords[i++] = y;\n          }\n        }\n      }\n\n      return coords;\n    }\n  });\n  var SegmentPoint = Point.extend({\n    initialize: function SegmentPoint(point, owner, key) {\n      var x, y, selected;\n\n      if (!point) {\n        x = y = 0;\n      } else if ((x = point[0]) !== undefined) {\n        y = point[1];\n      } else {\n        var pt = point;\n\n        if ((x = pt.x) === undefined) {\n          pt = Point.read(arguments);\n          x = pt.x;\n        }\n\n        y = pt.y;\n        selected = pt.selected;\n      }\n\n      this._x = x;\n      this._y = y;\n      this._owner = owner;\n      owner[key] = this;\n      if (selected) this.setSelected(true);\n    },\n    _set: function (x, y) {\n      this._x = x;\n      this._y = y;\n\n      this._owner._changed(this);\n\n      return this;\n    },\n    getX: function () {\n      return this._x;\n    },\n    setX: function (x) {\n      this._x = x;\n\n      this._owner._changed(this);\n    },\n    getY: function () {\n      return this._y;\n    },\n    setY: function (y) {\n      this._y = y;\n\n      this._owner._changed(this);\n    },\n    isZero: function () {\n      var isZero = Numerical.isZero;\n      return isZero(this._x) && isZero(this._y);\n    },\n    isSelected: function () {\n      return !!(this._owner._selection & this._getSelection());\n    },\n    setSelected: function (selected) {\n      this._owner._changeSelection(this._getSelection(), selected);\n    },\n    _getSelection: function () {\n      var owner = this._owner;\n      return this === owner._point ? 1 : this === owner._handleIn ? 2 : this === owner._handleOut ? 4 : 0;\n    }\n  });\n  var Curve = Base.extend({\n    _class: 'Curve',\n    beans: true,\n    initialize: function Curve(arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7) {\n      var count = arguments.length,\n          seg1,\n          seg2,\n          point1,\n          point2,\n          handle1,\n          handle2;\n\n      if (count === 3) {\n        this._path = arg0;\n        seg1 = arg1;\n        seg2 = arg2;\n      } else if (!count) {\n        seg1 = new Segment();\n        seg2 = new Segment();\n      } else if (count === 1) {\n        if ('segment1' in arg0) {\n          seg1 = new Segment(arg0.segment1);\n          seg2 = new Segment(arg0.segment2);\n        } else if ('point1' in arg0) {\n          point1 = arg0.point1;\n          handle1 = arg0.handle1;\n          handle2 = arg0.handle2;\n          point2 = arg0.point2;\n        } else if (Array.isArray(arg0)) {\n          point1 = [arg0[0], arg0[1]];\n          point2 = [arg0[6], arg0[7]];\n          handle1 = [arg0[2] - arg0[0], arg0[3] - arg0[1]];\n          handle2 = [arg0[4] - arg0[6], arg0[5] - arg0[7]];\n        }\n      } else if (count === 2) {\n        seg1 = new Segment(arg0);\n        seg2 = new Segment(arg1);\n      } else if (count === 4) {\n        point1 = arg0;\n        handle1 = arg1;\n        handle2 = arg2;\n        point2 = arg3;\n      } else if (count === 8) {\n        point1 = [arg0, arg1];\n        point2 = [arg6, arg7];\n        handle1 = [arg2 - arg0, arg3 - arg1];\n        handle2 = [arg4 - arg6, arg5 - arg7];\n      }\n\n      this._segment1 = seg1 || new Segment(point1, null, handle1);\n      this._segment2 = seg2 || new Segment(point2, handle2, null);\n    },\n    _serialize: function (options, dictionary) {\n      return Base.serialize(this.hasHandles() ? [this.getPoint1(), this.getHandle1(), this.getHandle2(), this.getPoint2()] : [this.getPoint1(), this.getPoint2()], options, true, dictionary);\n    },\n    _changed: function () {\n      this._length = this._bounds = undefined;\n    },\n    clone: function () {\n      return new Curve(this._segment1, this._segment2);\n    },\n    toString: function () {\n      var parts = ['point1: ' + this._segment1._point];\n      if (!this._segment1._handleOut.isZero()) parts.push('handle1: ' + this._segment1._handleOut);\n      if (!this._segment2._handleIn.isZero()) parts.push('handle2: ' + this._segment2._handleIn);\n      parts.push('point2: ' + this._segment2._point);\n      return '{ ' + parts.join(', ') + ' }';\n    },\n    classify: function () {\n      return Curve.classify(this.getValues());\n    },\n    remove: function () {\n      var removed = false;\n\n      if (this._path) {\n        var segment2 = this._segment2,\n            handleOut = segment2._handleOut;\n        removed = segment2.remove();\n        if (removed) this._segment1._handleOut.set(handleOut);\n      }\n\n      return removed;\n    },\n    getPoint1: function () {\n      return this._segment1._point;\n    },\n    setPoint1: function () {\n      this._segment1._point.set(Point.read(arguments));\n    },\n    getPoint2: function () {\n      return this._segment2._point;\n    },\n    setPoint2: function () {\n      this._segment2._point.set(Point.read(arguments));\n    },\n    getHandle1: function () {\n      return this._segment1._handleOut;\n    },\n    setHandle1: function () {\n      this._segment1._handleOut.set(Point.read(arguments));\n    },\n    getHandle2: function () {\n      return this._segment2._handleIn;\n    },\n    setHandle2: function () {\n      this._segment2._handleIn.set(Point.read(arguments));\n    },\n    getSegment1: function () {\n      return this._segment1;\n    },\n    getSegment2: function () {\n      return this._segment2;\n    },\n    getPath: function () {\n      return this._path;\n    },\n    getIndex: function () {\n      return this._segment1._index;\n    },\n    getNext: function () {\n      var curves = this._path && this._path._curves;\n      return curves && (curves[this._segment1._index + 1] || this._path._closed && curves[0]) || null;\n    },\n    getPrevious: function () {\n      var curves = this._path && this._path._curves;\n      return curves && (curves[this._segment1._index - 1] || this._path._closed && curves[curves.length - 1]) || null;\n    },\n    isFirst: function () {\n      return !this._segment1._index;\n    },\n    isLast: function () {\n      var path = this._path;\n      return path && this._segment1._index === path._curves.length - 1 || false;\n    },\n    isSelected: function () {\n      return this.getPoint1().isSelected() && this.getHandle1().isSelected() && this.getHandle2().isSelected() && this.getPoint2().isSelected();\n    },\n    setSelected: function (selected) {\n      this.getPoint1().setSelected(selected);\n      this.getHandle1().setSelected(selected);\n      this.getHandle2().setSelected(selected);\n      this.getPoint2().setSelected(selected);\n    },\n    getValues: function (matrix) {\n      return Curve.getValues(this._segment1, this._segment2, matrix);\n    },\n    getPoints: function () {\n      var coords = this.getValues(),\n          points = [];\n\n      for (var i = 0; i < 8; i += 2) points.push(new Point(coords[i], coords[i + 1]));\n\n      return points;\n    }\n  }, {\n    getLength: function () {\n      if (this._length == null) this._length = Curve.getLength(this.getValues(), 0, 1);\n      return this._length;\n    },\n    getArea: function () {\n      return Curve.getArea(this.getValues());\n    },\n    getLine: function () {\n      return new Line(this._segment1._point, this._segment2._point);\n    },\n    getPart: function (from, to) {\n      return new Curve(Curve.getPart(this.getValues(), from, to));\n    },\n    getPartLength: function (from, to) {\n      return Curve.getLength(this.getValues(), from, to);\n    },\n    divideAt: function (location) {\n      return this.divideAtTime(location && location.curve === this ? location.time : this.getTimeAt(location));\n    },\n    divideAtTime: function (time, _setHandles) {\n      var tMin = 1e-8,\n          tMax = 1 - tMin,\n          res = null;\n\n      if (time >= tMin && time <= tMax) {\n        var parts = Curve.subdivide(this.getValues(), time),\n            left = parts[0],\n            right = parts[1],\n            setHandles = _setHandles || this.hasHandles(),\n            seg1 = this._segment1,\n            seg2 = this._segment2,\n            path = this._path;\n\n        if (setHandles) {\n          seg1._handleOut._set(left[2] - left[0], left[3] - left[1]);\n\n          seg2._handleIn._set(right[4] - right[6], right[5] - right[7]);\n        }\n\n        var x = left[6],\n            y = left[7],\n            segment = new Segment(new Point(x, y), setHandles && new Point(left[4] - x, left[5] - y), setHandles && new Point(right[2] - x, right[3] - y));\n\n        if (path) {\n          path.insert(seg1._index + 1, segment);\n          res = this.getNext();\n        } else {\n          this._segment2 = segment;\n\n          this._changed();\n\n          res = new Curve(segment, seg2);\n        }\n      }\n\n      return res;\n    },\n    splitAt: function (location) {\n      var path = this._path;\n      return path ? path.splitAt(location) : null;\n    },\n    splitAtTime: function (time) {\n      return this.splitAt(this.getLocationAtTime(time));\n    },\n    divide: function (offset, isTime) {\n      return this.divideAtTime(offset === undefined ? 0.5 : isTime ? offset : this.getTimeAt(offset));\n    },\n    split: function (offset, isTime) {\n      return this.splitAtTime(offset === undefined ? 0.5 : isTime ? offset : this.getTimeAt(offset));\n    },\n    reversed: function () {\n      return new Curve(this._segment2.reversed(), this._segment1.reversed());\n    },\n    clearHandles: function () {\n      this._segment1._handleOut._set(0, 0);\n\n      this._segment2._handleIn._set(0, 0);\n    },\n    statics: {\n      getValues: function (segment1, segment2, matrix, straight) {\n        var p1 = segment1._point,\n            h1 = segment1._handleOut,\n            h2 = segment2._handleIn,\n            p2 = segment2._point,\n            x1 = p1.x,\n            y1 = p1.y,\n            x2 = p2.x,\n            y2 = p2.y,\n            values = straight ? [x1, y1, x1, y1, x2, y2, x2, y2] : [x1, y1, x1 + h1._x, y1 + h1._y, x2 + h2._x, y2 + h2._y, x2, y2];\n        if (matrix) matrix._transformCoordinates(values, values, 4);\n        return values;\n      },\n      subdivide: function (v, t) {\n        var x0 = v[0],\n            y0 = v[1],\n            x1 = v[2],\n            y1 = v[3],\n            x2 = v[4],\n            y2 = v[5],\n            x3 = v[6],\n            y3 = v[7];\n        if (t === undefined) t = 0.5;\n        var u = 1 - t,\n            x4 = u * x0 + t * x1,\n            y4 = u * y0 + t * y1,\n            x5 = u * x1 + t * x2,\n            y5 = u * y1 + t * y2,\n            x6 = u * x2 + t * x3,\n            y6 = u * y2 + t * y3,\n            x7 = u * x4 + t * x5,\n            y7 = u * y4 + t * y5,\n            x8 = u * x5 + t * x6,\n            y8 = u * y5 + t * y6,\n            x9 = u * x7 + t * x8,\n            y9 = u * y7 + t * y8;\n        return [[x0, y0, x4, y4, x7, y7, x9, y9], [x9, y9, x8, y8, x6, y6, x3, y3]];\n      },\n      getMonoCurves: function (v, dir) {\n        var curves = [],\n            io = dir ? 0 : 1,\n            o0 = v[io + 0],\n            o1 = v[io + 2],\n            o2 = v[io + 4],\n            o3 = v[io + 6];\n\n        if (o0 >= o1 === o1 >= o2 && o1 >= o2 === o2 >= o3 || Curve.isStraight(v)) {\n          curves.push(v);\n        } else {\n          var a = 3 * (o1 - o2) - o0 + o3,\n              b = 2 * (o0 + o2) - 4 * o1,\n              c = o1 - o0,\n              tMin = 1e-8,\n              tMax = 1 - tMin,\n              roots = [],\n              n = Numerical.solveQuadratic(a, b, c, roots, tMin, tMax);\n\n          if (!n) {\n            curves.push(v);\n          } else {\n            roots.sort();\n            var t = roots[0],\n                parts = Curve.subdivide(v, t);\n            curves.push(parts[0]);\n\n            if (n > 1) {\n              t = (roots[1] - t) / (1 - t);\n              parts = Curve.subdivide(parts[1], t);\n              curves.push(parts[0]);\n            }\n\n            curves.push(parts[1]);\n          }\n        }\n\n        return curves;\n      },\n      solveCubic: function (v, coord, val, roots, min, max) {\n        var v0 = v[coord],\n            v1 = v[coord + 2],\n            v2 = v[coord + 4],\n            v3 = v[coord + 6],\n            res = 0;\n\n        if (!(v0 < val && v3 < val && v1 < val && v2 < val || v0 > val && v3 > val && v1 > val && v2 > val)) {\n          var c = 3 * (v1 - v0),\n              b = 3 * (v2 - v1) - c,\n              a = v3 - v0 - c - b;\n          res = Numerical.solveCubic(a, b, c, v0 - val, roots, min, max);\n        }\n\n        return res;\n      },\n      getTimeOf: function (v, point) {\n        var p0 = new Point(v[0], v[1]),\n            p3 = new Point(v[6], v[7]),\n            epsilon = 1e-12,\n            geomEpsilon = 1e-7,\n            t = point.isClose(p0, epsilon) ? 0 : point.isClose(p3, epsilon) ? 1 : null;\n\n        if (t === null) {\n          var coords = [point.x, point.y],\n              roots = [];\n\n          for (var c = 0; c < 2; c++) {\n            var count = Curve.solveCubic(v, c, coords[c], roots, 0, 1);\n\n            for (var i = 0; i < count; i++) {\n              var u = roots[i];\n              if (point.isClose(Curve.getPoint(v, u), geomEpsilon)) return u;\n            }\n          }\n        }\n\n        return point.isClose(p0, geomEpsilon) ? 0 : point.isClose(p3, geomEpsilon) ? 1 : null;\n      },\n      getNearestTime: function (v, point) {\n        if (Curve.isStraight(v)) {\n          var x0 = v[0],\n              y0 = v[1],\n              x3 = v[6],\n              y3 = v[7],\n              vx = x3 - x0,\n              vy = y3 - y0,\n              det = vx * vx + vy * vy;\n          if (det === 0) return 0;\n          var u = ((point.x - x0) * vx + (point.y - y0) * vy) / det;\n          return u < 1e-12 ? 0 : u > 0.999999999999 ? 1 : Curve.getTimeOf(v, new Point(x0 + u * vx, y0 + u * vy));\n        }\n\n        var count = 100,\n            minDist = Infinity,\n            minT = 0;\n\n        function refine(t) {\n          if (t >= 0 && t <= 1) {\n            var dist = point.getDistance(Curve.getPoint(v, t), true);\n\n            if (dist < minDist) {\n              minDist = dist;\n              minT = t;\n              return true;\n            }\n          }\n        }\n\n        for (var i = 0; i <= count; i++) refine(i / count);\n\n        var step = 1 / (count * 2);\n\n        while (step > 1e-8) {\n          if (!refine(minT - step) && !refine(minT + step)) step /= 2;\n        }\n\n        return minT;\n      },\n      getPart: function (v, from, to) {\n        var flip = from > to;\n\n        if (flip) {\n          var tmp = from;\n          from = to;\n          to = tmp;\n        }\n\n        if (from > 0) v = Curve.subdivide(v, from)[1];\n        if (to < 1) v = Curve.subdivide(v, (to - from) / (1 - from))[0];\n        return flip ? [v[6], v[7], v[4], v[5], v[2], v[3], v[0], v[1]] : v;\n      },\n      isFlatEnough: function (v, flatness) {\n        var x0 = v[0],\n            y0 = v[1],\n            x1 = v[2],\n            y1 = v[3],\n            x2 = v[4],\n            y2 = v[5],\n            x3 = v[6],\n            y3 = v[7],\n            ux = 3 * x1 - 2 * x0 - x3,\n            uy = 3 * y1 - 2 * y0 - y3,\n            vx = 3 * x2 - 2 * x3 - x0,\n            vy = 3 * y2 - 2 * y3 - y0;\n        return Math.max(ux * ux, vx * vx) + Math.max(uy * uy, vy * vy) <= 16 * flatness * flatness;\n      },\n      getArea: function (v) {\n        var x0 = v[0],\n            y0 = v[1],\n            x1 = v[2],\n            y1 = v[3],\n            x2 = v[4],\n            y2 = v[5],\n            x3 = v[6],\n            y3 = v[7];\n        return 3 * ((y3 - y0) * (x1 + x2) - (x3 - x0) * (y1 + y2) + y1 * (x0 - x2) - x1 * (y0 - y2) + y3 * (x2 + x0 / 3) - x3 * (y2 + y0 / 3)) / 20;\n      },\n      getBounds: function (v) {\n        var min = v.slice(0, 2),\n            max = min.slice(),\n            roots = [0, 0];\n\n        for (var i = 0; i < 2; i++) Curve._addBounds(v[i], v[i + 2], v[i + 4], v[i + 6], i, 0, min, max, roots);\n\n        return new Rectangle(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n      },\n      _addBounds: function (v0, v1, v2, v3, coord, padding, min, max, roots) {\n        function add(value, padding) {\n          var left = value - padding,\n              right = value + padding;\n          if (left < min[coord]) min[coord] = left;\n          if (right > max[coord]) max[coord] = right;\n        }\n\n        padding /= 2;\n        var minPad = min[coord] + padding,\n            maxPad = max[coord] - padding;\n\n        if (v0 < minPad || v1 < minPad || v2 < minPad || v3 < minPad || v0 > maxPad || v1 > maxPad || v2 > maxPad || v3 > maxPad) {\n          if (v1 < v0 != v1 < v3 && v2 < v0 != v2 < v3) {\n            add(v0, 0);\n            add(v3, 0);\n          } else {\n            var a = 3 * (v1 - v2) - v0 + v3,\n                b = 2 * (v0 + v2) - 4 * v1,\n                c = v1 - v0,\n                count = Numerical.solveQuadratic(a, b, c, roots),\n                tMin = 1e-8,\n                tMax = 1 - tMin;\n            add(v3, 0);\n\n            for (var i = 0; i < count; i++) {\n              var t = roots[i],\n                  u = 1 - t;\n              if (tMin <= t && t <= tMax) add(u * u * u * v0 + 3 * u * u * t * v1 + 3 * u * t * t * v2 + t * t * t * v3, padding);\n            }\n          }\n        }\n      }\n    }\n  }, Base.each(['getBounds', 'getStrokeBounds', 'getHandleBounds'], function (name) {\n    this[name] = function () {\n      if (!this._bounds) this._bounds = {};\n      var bounds = this._bounds[name];\n\n      if (!bounds) {\n        bounds = this._bounds[name] = Path[name]([this._segment1, this._segment2], false, this._path);\n      }\n\n      return bounds.clone();\n    };\n  }, {}), Base.each({\n    isStraight: function (p1, h1, h2, p2) {\n      if (h1.isZero() && h2.isZero()) {\n        return true;\n      } else {\n        var v = p2.subtract(p1);\n\n        if (v.isZero()) {\n          return false;\n        } else if (v.isCollinear(h1) && v.isCollinear(h2)) {\n          var l = new Line(p1, p2),\n              epsilon = 1e-7;\n\n          if (l.getDistance(p1.add(h1)) < epsilon && l.getDistance(p2.add(h2)) < epsilon) {\n            var div = v.dot(v),\n                s1 = v.dot(h1) / div,\n                s2 = v.dot(h2) / div;\n            return s1 >= 0 && s1 <= 1 && s2 <= 0 && s2 >= -1;\n          }\n        }\n      }\n\n      return false;\n    },\n    isLinear: function (p1, h1, h2, p2) {\n      var third = p2.subtract(p1).divide(3);\n      return h1.equals(third) && h2.negate().equals(third);\n    }\n  }, function (test, name) {\n    this[name] = function (epsilon) {\n      var seg1 = this._segment1,\n          seg2 = this._segment2;\n      return test(seg1._point, seg1._handleOut, seg2._handleIn, seg2._point, epsilon);\n    };\n\n    this.statics[name] = function (v, epsilon) {\n      var x0 = v[0],\n          y0 = v[1],\n          x3 = v[6],\n          y3 = v[7];\n      return test(new Point(x0, y0), new Point(v[2] - x0, v[3] - y0), new Point(v[4] - x3, v[5] - y3), new Point(x3, y3), epsilon);\n    };\n  }, {\n    statics: {},\n    hasHandles: function () {\n      return !this._segment1._handleOut.isZero() || !this._segment2._handleIn.isZero();\n    },\n    hasLength: function (epsilon) {\n      return (!this.getPoint1().equals(this.getPoint2()) || this.hasHandles()) && this.getLength() > (epsilon || 0);\n    },\n    isCollinear: function (curve) {\n      return curve && this.isStraight() && curve.isStraight() && this.getLine().isCollinear(curve.getLine());\n    },\n    isHorizontal: function () {\n      return this.isStraight() && Math.abs(this.getTangentAtTime(0.5).y) < 1e-8;\n    },\n    isVertical: function () {\n      return this.isStraight() && Math.abs(this.getTangentAtTime(0.5).x) < 1e-8;\n    }\n  }), {\n    beans: false,\n    getLocationAt: function (offset, _isTime) {\n      return this.getLocationAtTime(_isTime ? offset : this.getTimeAt(offset));\n    },\n    getLocationAtTime: function (t) {\n      return t != null && t >= 0 && t <= 1 ? new CurveLocation(this, t) : null;\n    },\n    getTimeAt: function (offset, start) {\n      return Curve.getTimeAt(this.getValues(), offset, start);\n    },\n    getParameterAt: '#getTimeAt',\n    getTimesWithTangent: function () {\n      var tangent = Point.read(arguments);\n      return tangent.isZero() ? [] : Curve.getTimesWithTangent(this.getValues(), tangent);\n    },\n    getOffsetAtTime: function (t) {\n      return this.getPartLength(0, t);\n    },\n    getLocationOf: function () {\n      return this.getLocationAtTime(this.getTimeOf(Point.read(arguments)));\n    },\n    getOffsetOf: function () {\n      var loc = this.getLocationOf.apply(this, arguments);\n      return loc ? loc.getOffset() : null;\n    },\n    getTimeOf: function () {\n      return Curve.getTimeOf(this.getValues(), Point.read(arguments));\n    },\n    getParameterOf: '#getTimeOf',\n    getNearestLocation: function () {\n      var point = Point.read(arguments),\n          values = this.getValues(),\n          t = Curve.getNearestTime(values, point),\n          pt = Curve.getPoint(values, t);\n      return new CurveLocation(this, t, pt, null, point.getDistance(pt));\n    },\n    getNearestPoint: function () {\n      var loc = this.getNearestLocation.apply(this, arguments);\n      return loc ? loc.getPoint() : loc;\n    }\n  }, new function () {\n    var methods = ['getPoint', 'getTangent', 'getNormal', 'getWeightedTangent', 'getWeightedNormal', 'getCurvature'];\n    return Base.each(methods, function (name) {\n      this[name + 'At'] = function (location, _isTime) {\n        var values = this.getValues();\n        return Curve[name](values, _isTime ? location : Curve.getTimeAt(values, location));\n      };\n\n      this[name + 'AtTime'] = function (time) {\n        return Curve[name](this.getValues(), time);\n      };\n    }, {\n      statics: {\n        _evaluateMethods: methods\n      }\n    });\n  }(), new function () {\n    function getLengthIntegrand(v) {\n      var x0 = v[0],\n          y0 = v[1],\n          x1 = v[2],\n          y1 = v[3],\n          x2 = v[4],\n          y2 = v[5],\n          x3 = v[6],\n          y3 = v[7],\n          ax = 9 * (x1 - x2) + 3 * (x3 - x0),\n          bx = 6 * (x0 + x2) - 12 * x1,\n          cx = 3 * (x1 - x0),\n          ay = 9 * (y1 - y2) + 3 * (y3 - y0),\n          by = 6 * (y0 + y2) - 12 * y1,\n          cy = 3 * (y1 - y0);\n      return function (t) {\n        var dx = (ax * t + bx) * t + cx,\n            dy = (ay * t + by) * t + cy;\n        return Math.sqrt(dx * dx + dy * dy);\n      };\n    }\n\n    function getIterations(a, b) {\n      return Math.max(2, Math.min(16, Math.ceil(Math.abs(b - a) * 32)));\n    }\n\n    function evaluate(v, t, type, normalized) {\n      if (t == null || t < 0 || t > 1) return null;\n      var x0 = v[0],\n          y0 = v[1],\n          x1 = v[2],\n          y1 = v[3],\n          x2 = v[4],\n          y2 = v[5],\n          x3 = v[6],\n          y3 = v[7],\n          isZero = Numerical.isZero;\n\n      if (isZero(x1 - x0) && isZero(y1 - y0)) {\n        x1 = x0;\n        y1 = y0;\n      }\n\n      if (isZero(x2 - x3) && isZero(y2 - y3)) {\n        x2 = x3;\n        y2 = y3;\n      }\n\n      var cx = 3 * (x1 - x0),\n          bx = 3 * (x2 - x1) - cx,\n          ax = x3 - x0 - cx - bx,\n          cy = 3 * (y1 - y0),\n          by = 3 * (y2 - y1) - cy,\n          ay = y3 - y0 - cy - by,\n          x,\n          y;\n\n      if (type === 0) {\n        x = t === 0 ? x0 : t === 1 ? x3 : ((ax * t + bx) * t + cx) * t + x0;\n        y = t === 0 ? y0 : t === 1 ? y3 : ((ay * t + by) * t + cy) * t + y0;\n      } else {\n        var tMin = 1e-8,\n            tMax = 1 - tMin;\n\n        if (t < tMin) {\n          x = cx;\n          y = cy;\n        } else if (t > tMax) {\n          x = 3 * (x3 - x2);\n          y = 3 * (y3 - y2);\n        } else {\n          x = (3 * ax * t + 2 * bx) * t + cx;\n          y = (3 * ay * t + 2 * by) * t + cy;\n        }\n\n        if (normalized) {\n          if (x === 0 && y === 0 && (t < tMin || t > tMax)) {\n            x = x2 - x1;\n            y = y2 - y1;\n          }\n\n          var len = Math.sqrt(x * x + y * y);\n\n          if (len) {\n            x /= len;\n            y /= len;\n          }\n        }\n\n        if (type === 3) {\n          var x2 = 6 * ax * t + 2 * bx,\n              y2 = 6 * ay * t + 2 * by,\n              d = Math.pow(x * x + y * y, 3 / 2);\n          x = d !== 0 ? (x * y2 - y * x2) / d : 0;\n          y = 0;\n        }\n      }\n\n      return type === 2 ? new Point(y, -x) : new Point(x, y);\n    }\n\n    return {\n      statics: {\n        classify: function (v) {\n          var x0 = v[0],\n              y0 = v[1],\n              x1 = v[2],\n              y1 = v[3],\n              x2 = v[4],\n              y2 = v[5],\n              x3 = v[6],\n              y3 = v[7],\n              a1 = x0 * (y3 - y2) + y0 * (x2 - x3) + x3 * y2 - y3 * x2,\n              a2 = x1 * (y0 - y3) + y1 * (x3 - x0) + x0 * y3 - y0 * x3,\n              a3 = x2 * (y1 - y0) + y2 * (x0 - x1) + x1 * y0 - y1 * x0,\n              d3 = 3 * a3,\n              d2 = d3 - a2,\n              d1 = d2 - a2 + a1,\n              l = Math.sqrt(d1 * d1 + d2 * d2 + d3 * d3),\n              s = l !== 0 ? 1 / l : 0,\n              isZero = Numerical.isZero,\n              serpentine = 'serpentine';\n          d1 *= s;\n          d2 *= s;\n          d3 *= s;\n\n          function type(type, t1, t2) {\n            var hasRoots = t1 !== undefined,\n                t1Ok = hasRoots && t1 > 0 && t1 < 1,\n                t2Ok = hasRoots && t2 > 0 && t2 < 1;\n\n            if (hasRoots && (!(t1Ok || t2Ok) || type === 'loop' && !(t1Ok && t2Ok))) {\n              type = 'arch';\n              t1Ok = t2Ok = false;\n            }\n\n            return {\n              type: type,\n              roots: t1Ok || t2Ok ? t1Ok && t2Ok ? t1 < t2 ? [t1, t2] : [t2, t1] : [t1Ok ? t1 : t2] : null\n            };\n          }\n\n          if (isZero(d1)) {\n            return isZero(d2) ? type(isZero(d3) ? 'line' : 'quadratic') : type(serpentine, d3 / (3 * d2));\n          }\n\n          var d = 3 * d2 * d2 - 4 * d1 * d3;\n\n          if (isZero(d)) {\n            return type('cusp', d2 / (2 * d1));\n          }\n\n          var f1 = d > 0 ? Math.sqrt(d / 3) : Math.sqrt(-d),\n              f2 = 2 * d1;\n          return type(d > 0 ? serpentine : 'loop', (d2 + f1) / f2, (d2 - f1) / f2);\n        },\n        getLength: function (v, a, b, ds) {\n          if (a === undefined) a = 0;\n          if (b === undefined) b = 1;\n\n          if (Curve.isStraight(v)) {\n            var c = v;\n\n            if (b < 1) {\n              c = Curve.subdivide(c, b)[0];\n              a /= b;\n            }\n\n            if (a > 0) {\n              c = Curve.subdivide(c, a)[1];\n            }\n\n            var dx = c[6] - c[0],\n                dy = c[7] - c[1];\n            return Math.sqrt(dx * dx + dy * dy);\n          }\n\n          return Numerical.integrate(ds || getLengthIntegrand(v), a, b, getIterations(a, b));\n        },\n        getTimeAt: function (v, offset, start) {\n          if (start === undefined) start = offset < 0 ? 1 : 0;\n          if (offset === 0) return start;\n          var abs = Math.abs,\n              epsilon = 1e-12,\n              forward = offset > 0,\n              a = forward ? start : 0,\n              b = forward ? 1 : start,\n              ds = getLengthIntegrand(v),\n              rangeLength = Curve.getLength(v, a, b, ds),\n              diff = abs(offset) - rangeLength;\n\n          if (abs(diff) < epsilon) {\n            return forward ? b : a;\n          } else if (diff > epsilon) {\n            return null;\n          }\n\n          var guess = offset / rangeLength,\n              length = 0;\n\n          function f(t) {\n            length += Numerical.integrate(ds, start, t, getIterations(start, t));\n            start = t;\n            return length - offset;\n          }\n\n          return Numerical.findRoot(f, ds, start + guess, a, b, 32, 1e-12);\n        },\n        getPoint: function (v, t) {\n          return evaluate(v, t, 0, false);\n        },\n        getTangent: function (v, t) {\n          return evaluate(v, t, 1, true);\n        },\n        getWeightedTangent: function (v, t) {\n          return evaluate(v, t, 1, false);\n        },\n        getNormal: function (v, t) {\n          return evaluate(v, t, 2, true);\n        },\n        getWeightedNormal: function (v, t) {\n          return evaluate(v, t, 2, false);\n        },\n        getCurvature: function (v, t) {\n          return evaluate(v, t, 3, false).x;\n        },\n        getPeaks: function (v) {\n          var x0 = v[0],\n              y0 = v[1],\n              x1 = v[2],\n              y1 = v[3],\n              x2 = v[4],\n              y2 = v[5],\n              x3 = v[6],\n              y3 = v[7],\n              ax = -x0 + 3 * x1 - 3 * x2 + x3,\n              bx = 3 * x0 - 6 * x1 + 3 * x2,\n              cx = -3 * x0 + 3 * x1,\n              ay = -y0 + 3 * y1 - 3 * y2 + y3,\n              by = 3 * y0 - 6 * y1 + 3 * y2,\n              cy = -3 * y0 + 3 * y1,\n              tMin = 1e-8,\n              tMax = 1 - tMin,\n              roots = [];\n          Numerical.solveCubic(9 * (ax * ax + ay * ay), 9 * (ax * bx + by * ay), 2 * (bx * bx + by * by) + 3 * (cx * ax + cy * ay), cx * bx + by * cy, roots, tMin, tMax);\n          return roots.sort();\n        }\n      }\n    };\n  }(), new function () {\n    function addLocation(locations, include, c1, t1, c2, t2, overlap) {\n      var excludeStart = !overlap && c1.getPrevious() === c2,\n          excludeEnd = !overlap && c1 !== c2 && c1.getNext() === c2,\n          tMin = 1e-8,\n          tMax = 1 - tMin;\n\n      if (t1 !== null && t1 >= (excludeStart ? tMin : 0) && t1 <= (excludeEnd ? tMax : 1)) {\n        if (t2 !== null && t2 >= (excludeEnd ? tMin : 0) && t2 <= (excludeStart ? tMax : 1)) {\n          var loc1 = new CurveLocation(c1, t1, null, overlap),\n              loc2 = new CurveLocation(c2, t2, null, overlap);\n          loc1._intersection = loc2;\n          loc2._intersection = loc1;\n\n          if (!include || include(loc1)) {\n            CurveLocation.insert(locations, loc1, true);\n          }\n        }\n      }\n    }\n\n    function addCurveIntersections(v1, v2, c1, c2, locations, include, flip, recursion, calls, tMin, tMax, uMin, uMax) {\n      if (++calls >= 4096 || ++recursion >= 40) return calls;\n      var fatLineEpsilon = 1e-9,\n          q0x = v2[0],\n          q0y = v2[1],\n          q3x = v2[6],\n          q3y = v2[7],\n          getSignedDistance = Line.getSignedDistance,\n          d1 = getSignedDistance(q0x, q0y, q3x, q3y, v2[2], v2[3]),\n          d2 = getSignedDistance(q0x, q0y, q3x, q3y, v2[4], v2[5]),\n          factor = d1 * d2 > 0 ? 3 / 4 : 4 / 9,\n          dMin = factor * Math.min(0, d1, d2),\n          dMax = factor * Math.max(0, d1, d2),\n          dp0 = getSignedDistance(q0x, q0y, q3x, q3y, v1[0], v1[1]),\n          dp1 = getSignedDistance(q0x, q0y, q3x, q3y, v1[2], v1[3]),\n          dp2 = getSignedDistance(q0x, q0y, q3x, q3y, v1[4], v1[5]),\n          dp3 = getSignedDistance(q0x, q0y, q3x, q3y, v1[6], v1[7]),\n          hull = getConvexHull(dp0, dp1, dp2, dp3),\n          top = hull[0],\n          bottom = hull[1],\n          tMinClip,\n          tMaxClip;\n      if (d1 === 0 && d2 === 0 && dp0 === 0 && dp1 === 0 && dp2 === 0 && dp3 === 0 || (tMinClip = clipConvexHull(top, bottom, dMin, dMax)) == null || (tMaxClip = clipConvexHull(top.reverse(), bottom.reverse(), dMin, dMax)) == null) return calls;\n      var tMinNew = tMin + (tMax - tMin) * tMinClip,\n          tMaxNew = tMin + (tMax - tMin) * tMaxClip;\n\n      if (Math.max(uMax - uMin, tMaxNew - tMinNew) < fatLineEpsilon) {\n        var t = (tMinNew + tMaxNew) / 2,\n            u = (uMin + uMax) / 2;\n        addLocation(locations, include, flip ? c2 : c1, flip ? u : t, flip ? c1 : c2, flip ? t : u);\n      } else {\n        v1 = Curve.getPart(v1, tMinClip, tMaxClip);\n        var uDiff = uMax - uMin;\n\n        if (tMaxClip - tMinClip > 0.8) {\n          if (tMaxNew - tMinNew > uDiff) {\n            var parts = Curve.subdivide(v1, 0.5),\n                t = (tMinNew + tMaxNew) / 2;\n            calls = addCurveIntersections(v2, parts[0], c2, c1, locations, include, !flip, recursion, calls, uMin, uMax, tMinNew, t);\n            calls = addCurveIntersections(v2, parts[1], c2, c1, locations, include, !flip, recursion, calls, uMin, uMax, t, tMaxNew);\n          } else {\n            var parts = Curve.subdivide(v2, 0.5),\n                u = (uMin + uMax) / 2;\n            calls = addCurveIntersections(parts[0], v1, c2, c1, locations, include, !flip, recursion, calls, uMin, u, tMinNew, tMaxNew);\n            calls = addCurveIntersections(parts[1], v1, c2, c1, locations, include, !flip, recursion, calls, u, uMax, tMinNew, tMaxNew);\n          }\n        } else {\n          if (uDiff === 0 || uDiff >= fatLineEpsilon) {\n            calls = addCurveIntersections(v2, v1, c2, c1, locations, include, !flip, recursion, calls, uMin, uMax, tMinNew, tMaxNew);\n          } else {\n            calls = addCurveIntersections(v1, v2, c1, c2, locations, include, flip, recursion, calls, tMinNew, tMaxNew, uMin, uMax);\n          }\n        }\n      }\n\n      return calls;\n    }\n\n    function getConvexHull(dq0, dq1, dq2, dq3) {\n      var p0 = [0, dq0],\n          p1 = [1 / 3, dq1],\n          p2 = [2 / 3, dq2],\n          p3 = [1, dq3],\n          dist1 = dq1 - (2 * dq0 + dq3) / 3,\n          dist2 = dq2 - (dq0 + 2 * dq3) / 3,\n          hull;\n\n      if (dist1 * dist2 < 0) {\n        hull = [[p0, p1, p3], [p0, p2, p3]];\n      } else {\n        var distRatio = dist1 / dist2;\n        hull = [distRatio >= 2 ? [p0, p1, p3] : distRatio <= 0.5 ? [p0, p2, p3] : [p0, p1, p2, p3], [p0, p3]];\n      }\n\n      return (dist1 || dist2) < 0 ? hull.reverse() : hull;\n    }\n\n    function clipConvexHull(hullTop, hullBottom, dMin, dMax) {\n      if (hullTop[0][1] < dMin) {\n        return clipConvexHullPart(hullTop, true, dMin);\n      } else if (hullBottom[0][1] > dMax) {\n        return clipConvexHullPart(hullBottom, false, dMax);\n      } else {\n        return hullTop[0][0];\n      }\n    }\n\n    function clipConvexHullPart(part, top, threshold) {\n      var px = part[0][0],\n          py = part[0][1];\n\n      for (var i = 1, l = part.length; i < l; i++) {\n        var qx = part[i][0],\n            qy = part[i][1];\n\n        if (top ? qy >= threshold : qy <= threshold) {\n          return qy === threshold ? qx : px + (threshold - py) * (qx - px) / (qy - py);\n        }\n\n        px = qx;\n        py = qy;\n      }\n\n      return null;\n    }\n\n    function getCurveLineIntersections(v, px, py, vx, vy) {\n      var isZero = Numerical.isZero;\n\n      if (isZero(vx) && isZero(vy)) {\n        var t = Curve.getTimeOf(v, new Point(px, py));\n        return t === null ? [] : [t];\n      }\n\n      var angle = Math.atan2(-vy, vx),\n          sin = Math.sin(angle),\n          cos = Math.cos(angle),\n          rv = [],\n          roots = [];\n\n      for (var i = 0; i < 8; i += 2) {\n        var x = v[i] - px,\n            y = v[i + 1] - py;\n        rv.push(x * cos - y * sin, x * sin + y * cos);\n      }\n\n      Curve.solveCubic(rv, 1, 0, roots, 0, 1);\n      return roots;\n    }\n\n    function addCurveLineIntersections(v1, v2, c1, c2, locations, include, flip) {\n      var x1 = v2[0],\n          y1 = v2[1],\n          x2 = v2[6],\n          y2 = v2[7],\n          roots = getCurveLineIntersections(v1, x1, y1, x2 - x1, y2 - y1);\n\n      for (var i = 0, l = roots.length; i < l; i++) {\n        var t1 = roots[i],\n            p1 = Curve.getPoint(v1, t1),\n            t2 = Curve.getTimeOf(v2, p1);\n\n        if (t2 !== null) {\n          addLocation(locations, include, flip ? c2 : c1, flip ? t2 : t1, flip ? c1 : c2, flip ? t1 : t2);\n        }\n      }\n    }\n\n    function addLineIntersection(v1, v2, c1, c2, locations, include) {\n      var pt = Line.intersect(v1[0], v1[1], v1[6], v1[7], v2[0], v2[1], v2[6], v2[7]);\n\n      if (pt) {\n        addLocation(locations, include, c1, Curve.getTimeOf(v1, pt), c2, Curve.getTimeOf(v2, pt));\n      }\n    }\n\n    function getCurveIntersections(v1, v2, c1, c2, locations, include) {\n      var epsilon = 1e-12,\n          min = Math.min,\n          max = Math.max;\n\n      if (max(v1[0], v1[2], v1[4], v1[6]) + epsilon > min(v2[0], v2[2], v2[4], v2[6]) && min(v1[0], v1[2], v1[4], v1[6]) - epsilon < max(v2[0], v2[2], v2[4], v2[6]) && max(v1[1], v1[3], v1[5], v1[7]) + epsilon > min(v2[1], v2[3], v2[5], v2[7]) && min(v1[1], v1[3], v1[5], v1[7]) - epsilon < max(v2[1], v2[3], v2[5], v2[7])) {\n        var overlaps = getOverlaps(v1, v2);\n\n        if (overlaps) {\n          for (var i = 0; i < 2; i++) {\n            var overlap = overlaps[i];\n            addLocation(locations, include, c1, overlap[0], c2, overlap[1], true);\n          }\n        } else {\n          var straight1 = Curve.isStraight(v1),\n              straight2 = Curve.isStraight(v2),\n              straight = straight1 && straight2,\n              flip = straight1 && !straight2,\n              before = locations.length;\n          (straight ? addLineIntersection : straight1 || straight2 ? addCurveLineIntersections : addCurveIntersections)(flip ? v2 : v1, flip ? v1 : v2, flip ? c2 : c1, flip ? c1 : c2, locations, include, flip, 0, 0, 0, 1, 0, 1);\n\n          if (!straight || locations.length === before) {\n            for (var i = 0; i < 4; i++) {\n              var t1 = i >> 1,\n                  t2 = i & 1,\n                  i1 = t1 * 6,\n                  i2 = t2 * 6,\n                  p1 = new Point(v1[i1], v1[i1 + 1]),\n                  p2 = new Point(v2[i2], v2[i2 + 1]);\n\n              if (p1.isClose(p2, epsilon)) {\n                addLocation(locations, include, c1, t1, c2, t2);\n              }\n            }\n          }\n        }\n      }\n\n      return locations;\n    }\n\n    function getSelfIntersection(v1, c1, locations, include) {\n      var info = Curve.classify(v1);\n\n      if (info.type === 'loop') {\n        var roots = info.roots;\n        addLocation(locations, include, c1, roots[0], c1, roots[1]);\n      }\n\n      return locations;\n    }\n\n    function getIntersections(curves1, curves2, include, matrix1, matrix2, _returnFirst) {\n      var epsilon = 1e-7,\n          self = !curves2;\n      if (self) curves2 = curves1;\n      var length1 = curves1.length,\n          length2 = curves2.length,\n          values1 = new Array(length1),\n          values2 = self ? values1 : new Array(length2),\n          locations = [];\n\n      for (var i = 0; i < length1; i++) {\n        values1[i] = curves1[i].getValues(matrix1);\n      }\n\n      if (!self) {\n        for (var i = 0; i < length2; i++) {\n          values2[i] = curves2[i].getValues(matrix2);\n        }\n      }\n\n      var boundsCollisions = CollisionDetection.findCurveBoundsCollisions(values1, values2, epsilon);\n\n      for (var index1 = 0; index1 < length1; index1++) {\n        var curve1 = curves1[index1],\n            v1 = values1[index1];\n\n        if (self) {\n          getSelfIntersection(v1, curve1, locations, include);\n        }\n\n        var collisions1 = boundsCollisions[index1];\n\n        if (collisions1) {\n          for (var j = 0; j < collisions1.length; j++) {\n            if (_returnFirst && locations.length) return locations;\n            var index2 = collisions1[j];\n\n            if (!self || index2 > index1) {\n              var curve2 = curves2[index2],\n                  v2 = values2[index2];\n              getCurveIntersections(v1, v2, curve1, curve2, locations, include);\n            }\n          }\n        }\n      }\n\n      return locations;\n    }\n\n    function getOverlaps(v1, v2) {\n      function getSquaredLineLength(v) {\n        var x = v[6] - v[0],\n            y = v[7] - v[1];\n        return x * x + y * y;\n      }\n\n      var abs = Math.abs,\n          getDistance = Line.getDistance,\n          timeEpsilon = 1e-8,\n          geomEpsilon = 1e-7,\n          straight1 = Curve.isStraight(v1),\n          straight2 = Curve.isStraight(v2),\n          straightBoth = straight1 && straight2,\n          flip = getSquaredLineLength(v1) < getSquaredLineLength(v2),\n          l1 = flip ? v2 : v1,\n          l2 = flip ? v1 : v2,\n          px = l1[0],\n          py = l1[1],\n          vx = l1[6] - px,\n          vy = l1[7] - py;\n\n      if (getDistance(px, py, vx, vy, l2[0], l2[1], true) < geomEpsilon && getDistance(px, py, vx, vy, l2[6], l2[7], true) < geomEpsilon) {\n        if (!straightBoth && getDistance(px, py, vx, vy, l1[2], l1[3], true) < geomEpsilon && getDistance(px, py, vx, vy, l1[4], l1[5], true) < geomEpsilon && getDistance(px, py, vx, vy, l2[2], l2[3], true) < geomEpsilon && getDistance(px, py, vx, vy, l2[4], l2[5], true) < geomEpsilon) {\n          straight1 = straight2 = straightBoth = true;\n        }\n      } else if (straightBoth) {\n        return null;\n      }\n\n      if (straight1 ^ straight2) {\n        return null;\n      }\n\n      var v = [v1, v2],\n          pairs = [];\n\n      for (var i = 0; i < 4 && pairs.length < 2; i++) {\n        var i1 = i & 1,\n            i2 = i1 ^ 1,\n            t1 = i >> 1,\n            t2 = Curve.getTimeOf(v[i1], new Point(v[i2][t1 ? 6 : 0], v[i2][t1 ? 7 : 1]));\n\n        if (t2 != null) {\n          var pair = i1 ? [t1, t2] : [t2, t1];\n\n          if (!pairs.length || abs(pair[0] - pairs[0][0]) > timeEpsilon && abs(pair[1] - pairs[0][1]) > timeEpsilon) {\n            pairs.push(pair);\n          }\n        }\n\n        if (i > 2 && !pairs.length) break;\n      }\n\n      if (pairs.length !== 2) {\n        pairs = null;\n      } else if (!straightBoth) {\n        var o1 = Curve.getPart(v1, pairs[0][0], pairs[1][0]),\n            o2 = Curve.getPart(v2, pairs[0][1], pairs[1][1]);\n        if (abs(o2[2] - o1[2]) > geomEpsilon || abs(o2[3] - o1[3]) > geomEpsilon || abs(o2[4] - o1[4]) > geomEpsilon || abs(o2[5] - o1[5]) > geomEpsilon) pairs = null;\n      }\n\n      return pairs;\n    }\n\n    function getTimesWithTangent(v, tangent) {\n      var x0 = v[0],\n          y0 = v[1],\n          x1 = v[2],\n          y1 = v[3],\n          x2 = v[4],\n          y2 = v[5],\n          x3 = v[6],\n          y3 = v[7],\n          normalized = tangent.normalize(),\n          tx = normalized.x,\n          ty = normalized.y,\n          ax = 3 * x3 - 9 * x2 + 9 * x1 - 3 * x0,\n          ay = 3 * y3 - 9 * y2 + 9 * y1 - 3 * y0,\n          bx = 6 * x2 - 12 * x1 + 6 * x0,\n          by = 6 * y2 - 12 * y1 + 6 * y0,\n          cx = 3 * x1 - 3 * x0,\n          cy = 3 * y1 - 3 * y0,\n          den = 2 * ax * ty - 2 * ay * tx,\n          times = [];\n\n      if (Math.abs(den) < Numerical.CURVETIME_EPSILON) {\n        var num = ax * cy - ay * cx,\n            den = ax * by - ay * bx;\n\n        if (den != 0) {\n          var t = -num / den;\n          if (t >= 0 && t <= 1) times.push(t);\n        }\n      } else {\n        var delta = (bx * bx - 4 * ax * cx) * ty * ty + (-2 * bx * by + 4 * ay * cx + 4 * ax * cy) * tx * ty + (by * by - 4 * ay * cy) * tx * tx,\n            k = bx * ty - by * tx;\n\n        if (delta >= 0 && den != 0) {\n          var d = Math.sqrt(delta),\n              t0 = -(k + d) / den,\n              t1 = (-k + d) / den;\n          if (t0 >= 0 && t0 <= 1) times.push(t0);\n          if (t1 >= 0 && t1 <= 1) times.push(t1);\n        }\n      }\n\n      return times;\n    }\n\n    return {\n      getIntersections: function (curve) {\n        var v1 = this.getValues(),\n            v2 = curve && curve !== this && curve.getValues();\n        return v2 ? getCurveIntersections(v1, v2, this, curve, []) : getSelfIntersection(v1, this, []);\n      },\n      statics: {\n        getOverlaps: getOverlaps,\n        getIntersections: getIntersections,\n        getCurveLineIntersections: getCurveLineIntersections,\n        getTimesWithTangent: getTimesWithTangent\n      }\n    };\n  }());\n  var CurveLocation = Base.extend({\n    _class: 'CurveLocation',\n    initialize: function CurveLocation(curve, time, point, _overlap, _distance) {\n      if (time >= 0.99999999) {\n        var next = curve.getNext();\n\n        if (next) {\n          time = 0;\n          curve = next;\n        }\n      }\n\n      this._setCurve(curve);\n\n      this._time = time;\n      this._point = point || curve.getPointAtTime(time);\n      this._overlap = _overlap;\n      this._distance = _distance;\n      this._intersection = this._next = this._previous = null;\n    },\n    _setPath: function (path) {\n      this._path = path;\n      this._version = path ? path._version : 0;\n    },\n    _setCurve: function (curve) {\n      this._setPath(curve._path);\n\n      this._curve = curve;\n      this._segment = null;\n      this._segment1 = curve._segment1;\n      this._segment2 = curve._segment2;\n    },\n    _setSegment: function (segment) {\n      var curve = segment.getCurve();\n\n      if (curve) {\n        this._setCurve(curve);\n      } else {\n        this._setPath(segment._path);\n\n        this._segment1 = segment;\n        this._segment2 = null;\n      }\n\n      this._segment = segment;\n      this._time = segment === this._segment1 ? 0 : 1;\n      this._point = segment._point.clone();\n    },\n    getSegment: function () {\n      var segment = this._segment;\n\n      if (!segment) {\n        var curve = this.getCurve(),\n            time = this.getTime();\n\n        if (time === 0) {\n          segment = curve._segment1;\n        } else if (time === 1) {\n          segment = curve._segment2;\n        } else if (time != null) {\n          segment = curve.getPartLength(0, time) < curve.getPartLength(time, 1) ? curve._segment1 : curve._segment2;\n        }\n\n        this._segment = segment;\n      }\n\n      return segment;\n    },\n    getCurve: function () {\n      var path = this._path,\n          that = this;\n\n      if (path && path._version !== this._version) {\n        this._time = this._offset = this._curveOffset = this._curve = null;\n      }\n\n      function trySegment(segment) {\n        var curve = segment && segment.getCurve();\n\n        if (curve && (that._time = curve.getTimeOf(that._point)) != null) {\n          that._setCurve(curve);\n\n          return curve;\n        }\n      }\n\n      return this._curve || trySegment(this._segment) || trySegment(this._segment1) || trySegment(this._segment2.getPrevious());\n    },\n    getPath: function () {\n      var curve = this.getCurve();\n      return curve && curve._path;\n    },\n    getIndex: function () {\n      var curve = this.getCurve();\n      return curve && curve.getIndex();\n    },\n    getTime: function () {\n      var curve = this.getCurve(),\n          time = this._time;\n      return curve && time == null ? this._time = curve.getTimeOf(this._point) : time;\n    },\n    getParameter: '#getTime',\n    getPoint: function () {\n      return this._point;\n    },\n    getOffset: function () {\n      var offset = this._offset;\n\n      if (offset == null) {\n        offset = 0;\n        var path = this.getPath(),\n            index = this.getIndex();\n\n        if (path && index != null) {\n          var curves = path.getCurves();\n\n          for (var i = 0; i < index; i++) offset += curves[i].getLength();\n        }\n\n        this._offset = offset += this.getCurveOffset();\n      }\n\n      return offset;\n    },\n    getCurveOffset: function () {\n      var offset = this._curveOffset;\n\n      if (offset == null) {\n        var curve = this.getCurve(),\n            time = this.getTime();\n        this._curveOffset = offset = time != null && curve && curve.getPartLength(0, time);\n      }\n\n      return offset;\n    },\n    getIntersection: function () {\n      return this._intersection;\n    },\n    getDistance: function () {\n      return this._distance;\n    },\n    divide: function () {\n      var curve = this.getCurve(),\n          res = curve && curve.divideAtTime(this.getTime());\n\n      if (res) {\n        this._setSegment(res._segment1);\n      }\n\n      return res;\n    },\n    split: function () {\n      var curve = this.getCurve(),\n          path = curve._path,\n          res = curve && curve.splitAtTime(this.getTime());\n\n      if (res) {\n        this._setSegment(path.getLastSegment());\n      }\n\n      return res;\n    },\n    equals: function (loc, _ignoreOther) {\n      var res = this === loc;\n\n      if (!res && loc instanceof CurveLocation) {\n        var c1 = this.getCurve(),\n            c2 = loc.getCurve(),\n            p1 = c1._path,\n            p2 = c2._path;\n\n        if (p1 === p2) {\n          var abs = Math.abs,\n              epsilon = 1e-7,\n              diff = abs(this.getOffset() - loc.getOffset()),\n              i1 = !_ignoreOther && this._intersection,\n              i2 = !_ignoreOther && loc._intersection;\n          res = (diff < epsilon || p1 && abs(p1.getLength() - diff) < epsilon) && (!i1 && !i2 || i1 && i2 && i1.equals(i2, true));\n        }\n      }\n\n      return res;\n    },\n    toString: function () {\n      var parts = [],\n          point = this.getPoint(),\n          f = Formatter.instance;\n      if (point) parts.push('point: ' + point);\n      var index = this.getIndex();\n      if (index != null) parts.push('index: ' + index);\n      var time = this.getTime();\n      if (time != null) parts.push('time: ' + f.number(time));\n      if (this._distance != null) parts.push('distance: ' + f.number(this._distance));\n      return '{ ' + parts.join(', ') + ' }';\n    },\n    isTouching: function () {\n      var inter = this._intersection;\n\n      if (inter && this.getTangent().isCollinear(inter.getTangent())) {\n        var curve1 = this.getCurve(),\n            curve2 = inter.getCurve();\n        return !(curve1.isStraight() && curve2.isStraight() && curve1.getLine().intersect(curve2.getLine()));\n      }\n\n      return false;\n    },\n    isCrossing: function () {\n      var inter = this._intersection;\n      if (!inter) return false;\n      var t1 = this.getTime(),\n          t2 = inter.getTime(),\n          tMin = 1e-8,\n          tMax = 1 - tMin,\n          t1Inside = t1 >= tMin && t1 <= tMax,\n          t2Inside = t2 >= tMin && t2 <= tMax;\n      if (t1Inside && t2Inside) return !this.isTouching();\n      var c2 = this.getCurve(),\n          c1 = c2 && t1 < tMin ? c2.getPrevious() : c2,\n          c4 = inter.getCurve(),\n          c3 = c4 && t2 < tMin ? c4.getPrevious() : c4;\n      if (t1 > tMax) c2 = c2.getNext();\n      if (t2 > tMax) c4 = c4.getNext();\n      if (!c1 || !c2 || !c3 || !c4) return false;\n      var offsets = [];\n\n      function addOffsets(curve, end) {\n        var v = curve.getValues(),\n            roots = Curve.classify(v).roots || Curve.getPeaks(v),\n            count = roots.length,\n            offset = Curve.getLength(v, end && count ? roots[count - 1] : 0, !end && count ? roots[0] : 1);\n        offsets.push(count ? offset : offset / 32);\n      }\n\n      function isInRange(angle, min, max) {\n        return min < max ? angle > min && angle < max : angle > min || angle < max;\n      }\n\n      if (!t1Inside) {\n        addOffsets(c1, true);\n        addOffsets(c2, false);\n      }\n\n      if (!t2Inside) {\n        addOffsets(c3, true);\n        addOffsets(c4, false);\n      }\n\n      var pt = this.getPoint(),\n          offset = Math.min.apply(Math, offsets),\n          v2 = t1Inside ? c2.getTangentAtTime(t1) : c2.getPointAt(offset).subtract(pt),\n          v1 = t1Inside ? v2.negate() : c1.getPointAt(-offset).subtract(pt),\n          v4 = t2Inside ? c4.getTangentAtTime(t2) : c4.getPointAt(offset).subtract(pt),\n          v3 = t2Inside ? v4.negate() : c3.getPointAt(-offset).subtract(pt),\n          a1 = v1.getAngle(),\n          a2 = v2.getAngle(),\n          a3 = v3.getAngle(),\n          a4 = v4.getAngle();\n      return !!(t1Inside ? isInRange(a1, a3, a4) ^ isInRange(a2, a3, a4) && isInRange(a1, a4, a3) ^ isInRange(a2, a4, a3) : isInRange(a3, a1, a2) ^ isInRange(a4, a1, a2) && isInRange(a3, a2, a1) ^ isInRange(a4, a2, a1));\n    },\n    hasOverlap: function () {\n      return !!this._overlap;\n    }\n  }, Base.each(Curve._evaluateMethods, function (name) {\n    var get = name + 'At';\n\n    this[name] = function () {\n      var curve = this.getCurve(),\n          time = this.getTime();\n      return time != null && curve && curve[get](time, true);\n    };\n  }, {\n    preserve: true\n  }), new function () {\n    function insert(locations, loc, merge) {\n      var length = locations.length,\n          l = 0,\n          r = length - 1;\n\n      function search(index, dir) {\n        for (var i = index + dir; i >= -1 && i <= length; i += dir) {\n          var loc2 = locations[(i % length + length) % length];\n          if (!loc.getPoint().isClose(loc2.getPoint(), 1e-7)) break;\n          if (loc.equals(loc2)) return loc2;\n        }\n\n        return null;\n      }\n\n      while (l <= r) {\n        var m = l + r >>> 1,\n            loc2 = locations[m],\n            found;\n\n        if (merge && (found = loc.equals(loc2) ? loc2 : search(m, -1) || search(m, 1))) {\n          if (loc._overlap) {\n            found._overlap = found._intersection._overlap = true;\n          }\n\n          return found;\n        }\n\n        var path1 = loc.getPath(),\n            path2 = loc2.getPath(),\n            diff = path1 !== path2 ? path1._id - path2._id : loc.getIndex() + loc.getTime() - (loc2.getIndex() + loc2.getTime());\n\n        if (diff < 0) {\n          r = m - 1;\n        } else {\n          l = m + 1;\n        }\n      }\n\n      locations.splice(l, 0, loc);\n      return loc;\n    }\n\n    return {\n      statics: {\n        insert: insert,\n        expand: function (locations) {\n          var expanded = locations.slice();\n\n          for (var i = locations.length - 1; i >= 0; i--) {\n            insert(expanded, locations[i]._intersection, false);\n          }\n\n          return expanded;\n        }\n      }\n    };\n  }());\n  var PathItem = Item.extend({\n    _class: 'PathItem',\n    _selectBounds: false,\n    _canScaleStroke: true,\n    beans: true,\n    initialize: function PathItem() {},\n    statics: {\n      create: function (arg) {\n        var data, segments, compound;\n\n        if (Base.isPlainObject(arg)) {\n          segments = arg.segments;\n          data = arg.pathData;\n        } else if (Array.isArray(arg)) {\n          segments = arg;\n        } else if (typeof arg === 'string') {\n          data = arg;\n        }\n\n        if (segments) {\n          var first = segments[0];\n          compound = first && Array.isArray(first[0]);\n        } else if (data) {\n          compound = (data.match(/m/gi) || []).length > 1 || /z\\s*\\S+/i.test(data);\n        }\n\n        var ctor = compound ? CompoundPath : Path;\n        return new ctor(arg);\n      }\n    },\n    _asPathItem: function () {\n      return this;\n    },\n    isClockwise: function () {\n      return this.getArea() >= 0;\n    },\n    setClockwise: function (clockwise) {\n      if (this.isClockwise() != (clockwise = !!clockwise)) this.reverse();\n    },\n    setPathData: function (data) {\n      var parts = data && data.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),\n          coords,\n          relative = false,\n          previous,\n          control,\n          current = new Point(),\n          start = new Point();\n\n      function getCoord(index, coord) {\n        var val = +coords[index];\n        if (relative) val += current[coord];\n        return val;\n      }\n\n      function getPoint(index) {\n        return new Point(getCoord(index, 'x'), getCoord(index + 1, 'y'));\n      }\n\n      this.clear();\n\n      for (var i = 0, l = parts && parts.length; i < l; i++) {\n        var part = parts[i],\n            command = part[0],\n            lower = command.toLowerCase();\n        coords = part.match(/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g);\n        var length = coords && coords.length;\n        relative = command === lower;\n        if (previous === 'z' && !/[mz]/.test(lower)) this.moveTo(current);\n\n        switch (lower) {\n          case 'm':\n          case 'l':\n            var move = lower === 'm';\n\n            for (var j = 0; j < length; j += 2) {\n              this[move ? 'moveTo' : 'lineTo'](current = getPoint(j));\n\n              if (move) {\n                start = current;\n                move = false;\n              }\n            }\n\n            control = current;\n            break;\n\n          case 'h':\n          case 'v':\n            var coord = lower === 'h' ? 'x' : 'y';\n            current = current.clone();\n\n            for (var j = 0; j < length; j++) {\n              current[coord] = getCoord(j, coord);\n              this.lineTo(current);\n            }\n\n            control = current;\n            break;\n\n          case 'c':\n            for (var j = 0; j < length; j += 6) {\n              this.cubicCurveTo(getPoint(j), control = getPoint(j + 2), current = getPoint(j + 4));\n            }\n\n            break;\n\n          case 's':\n            for (var j = 0; j < length; j += 4) {\n              this.cubicCurveTo(/[cs]/.test(previous) ? current.multiply(2).subtract(control) : current, control = getPoint(j), current = getPoint(j + 2));\n              previous = lower;\n            }\n\n            break;\n\n          case 'q':\n            for (var j = 0; j < length; j += 4) {\n              this.quadraticCurveTo(control = getPoint(j), current = getPoint(j + 2));\n            }\n\n            break;\n\n          case 't':\n            for (var j = 0; j < length; j += 2) {\n              this.quadraticCurveTo(control = /[qt]/.test(previous) ? current.multiply(2).subtract(control) : current, current = getPoint(j));\n              previous = lower;\n            }\n\n            break;\n\n          case 'a':\n            for (var j = 0; j < length; j += 7) {\n              this.arcTo(current = getPoint(j + 5), new Size(+coords[j], +coords[j + 1]), +coords[j + 2], +coords[j + 4], +coords[j + 3]);\n            }\n\n            break;\n\n          case 'z':\n            this.closePath(1e-12);\n            current = start;\n            break;\n        }\n\n        previous = lower;\n      }\n    },\n    _canComposite: function () {\n      return !(this.hasFill() && this.hasStroke());\n    },\n    _contains: function (point) {\n      var winding = point.isInside(this.getBounds({\n        internal: true,\n        handle: true\n      })) ? this._getWinding(point) : {};\n      return winding.onPath || !!(this.getFillRule() === 'evenodd' ? winding.windingL & 1 || winding.windingR & 1 : winding.winding);\n    },\n    getIntersections: function (path, include, _matrix, _returnFirst) {\n      var self = this === path || !path,\n          matrix1 = this._matrix._orNullIfIdentity(),\n          matrix2 = self ? matrix1 : (_matrix || path._matrix)._orNullIfIdentity();\n\n      return self || this.getBounds(matrix1).intersects(path.getBounds(matrix2), 1e-12) ? Curve.getIntersections(this.getCurves(), !self && path.getCurves(), include, matrix1, matrix2, _returnFirst) : [];\n    },\n    getCrossings: function (path) {\n      return this.getIntersections(path, function (inter) {\n        return inter.isCrossing();\n      });\n    },\n    getNearestLocation: function () {\n      var point = Point.read(arguments),\n          curves = this.getCurves(),\n          minDist = Infinity,\n          minLoc = null;\n\n      for (var i = 0, l = curves.length; i < l; i++) {\n        var loc = curves[i].getNearestLocation(point);\n\n        if (loc._distance < minDist) {\n          minDist = loc._distance;\n          minLoc = loc;\n        }\n      }\n\n      return minLoc;\n    },\n    getNearestPoint: function () {\n      var loc = this.getNearestLocation.apply(this, arguments);\n      return loc ? loc.getPoint() : loc;\n    },\n    interpolate: function (from, to, factor) {\n      var isPath = !this._children,\n          name = isPath ? '_segments' : '_children',\n          itemsFrom = from[name],\n          itemsTo = to[name],\n          items = this[name];\n\n      if (!itemsFrom || !itemsTo || itemsFrom.length !== itemsTo.length) {\n        throw new Error('Invalid operands in interpolate() call: ' + from + ', ' + to);\n      }\n\n      var current = items.length,\n          length = itemsTo.length;\n\n      if (current < length) {\n        var ctor = isPath ? Segment : Path;\n\n        for (var i = current; i < length; i++) {\n          this.add(new ctor());\n        }\n      } else if (current > length) {\n        this[isPath ? 'removeSegments' : 'removeChildren'](length, current);\n      }\n\n      for (var i = 0; i < length; i++) {\n        items[i].interpolate(itemsFrom[i], itemsTo[i], factor);\n      }\n\n      if (isPath) {\n        this.setClosed(from._closed);\n\n        this._changed(9);\n      }\n    },\n    compare: function (path) {\n      var ok = false;\n\n      if (path) {\n        var paths1 = this._children || [this],\n            paths2 = path._children ? path._children.slice() : [path],\n            length1 = paths1.length,\n            length2 = paths2.length,\n            matched = [],\n            count = 0;\n        ok = true;\n        var boundsOverlaps = CollisionDetection.findItemBoundsCollisions(paths1, paths2, Numerical.GEOMETRIC_EPSILON);\n\n        for (var i1 = length1 - 1; i1 >= 0 && ok; i1--) {\n          var path1 = paths1[i1];\n          ok = false;\n          var pathBoundsOverlaps = boundsOverlaps[i1];\n\n          if (pathBoundsOverlaps) {\n            for (var i2 = pathBoundsOverlaps.length - 1; i2 >= 0 && !ok; i2--) {\n              if (path1.compare(paths2[pathBoundsOverlaps[i2]])) {\n                if (!matched[pathBoundsOverlaps[i2]]) {\n                  matched[pathBoundsOverlaps[i2]] = true;\n                  count++;\n                }\n\n                ok = true;\n              }\n            }\n          }\n        }\n\n        ok = ok && count === length2;\n      }\n\n      return ok;\n    }\n  });\n  var Path = PathItem.extend({\n    _class: 'Path',\n    _serializeFields: {\n      segments: [],\n      closed: false\n    },\n    initialize: function Path(arg) {\n      this._closed = false;\n      this._segments = [];\n      this._version = 0;\n      var args = arguments,\n          segments = Array.isArray(arg) ? typeof arg[0] === 'object' ? arg : args : arg && arg.size === undefined && (arg.x !== undefined || arg.point !== undefined) ? args : null;\n\n      if (segments && segments.length > 0) {\n        this.setSegments(segments);\n      } else {\n        this._curves = undefined;\n        this._segmentSelection = 0;\n\n        if (!segments && typeof arg === 'string') {\n          this.setPathData(arg);\n          arg = null;\n        }\n      }\n\n      this._initialize(!segments && arg);\n    },\n    _equals: function (item) {\n      return this._closed === item._closed && Base.equals(this._segments, item._segments);\n    },\n    copyContent: function (source) {\n      this.setSegments(source._segments);\n      this._closed = source._closed;\n    },\n    _changed: function _changed(flags) {\n      _changed.base.call(this, flags);\n\n      if (flags & 8) {\n        this._length = this._area = undefined;\n\n        if (flags & 32) {\n          this._version++;\n        } else if (this._curves) {\n          for (var i = 0, l = this._curves.length; i < l; i++) this._curves[i]._changed();\n        }\n      } else if (flags & 64) {\n        this._bounds = undefined;\n      }\n    },\n    getStyle: function () {\n      var parent = this._parent;\n      return (parent instanceof CompoundPath ? parent : this)._style;\n    },\n    getSegments: function () {\n      return this._segments;\n    },\n    setSegments: function (segments) {\n      var fullySelected = this.isFullySelected(),\n          length = segments && segments.length;\n      this._segments.length = 0;\n      this._segmentSelection = 0;\n      this._curves = undefined;\n\n      if (length) {\n        var last = segments[length - 1];\n\n        if (typeof last === 'boolean') {\n          this.setClosed(last);\n          length--;\n        }\n\n        this._add(Segment.readList(segments, 0, {}, length));\n      }\n\n      if (fullySelected) this.setFullySelected(true);\n    },\n    getFirstSegment: function () {\n      return this._segments[0];\n    },\n    getLastSegment: function () {\n      return this._segments[this._segments.length - 1];\n    },\n    getCurves: function () {\n      var curves = this._curves,\n          segments = this._segments;\n\n      if (!curves) {\n        var length = this._countCurves();\n\n        curves = this._curves = new Array(length);\n\n        for (var i = 0; i < length; i++) curves[i] = new Curve(this, segments[i], segments[i + 1] || segments[0]);\n      }\n\n      return curves;\n    },\n    getFirstCurve: function () {\n      return this.getCurves()[0];\n    },\n    getLastCurve: function () {\n      var curves = this.getCurves();\n      return curves[curves.length - 1];\n    },\n    isClosed: function () {\n      return this._closed;\n    },\n    setClosed: function (closed) {\n      if (this._closed != (closed = !!closed)) {\n        this._closed = closed;\n\n        if (this._curves) {\n          var length = this._curves.length = this._countCurves();\n\n          if (closed) this._curves[length - 1] = new Curve(this, this._segments[length - 1], this._segments[0]);\n        }\n\n        this._changed(41);\n      }\n    }\n  }, {\n    beans: true,\n    getPathData: function (_matrix, _precision) {\n      var segments = this._segments,\n          length = segments.length,\n          f = new Formatter(_precision),\n          coords = new Array(6),\n          first = true,\n          curX,\n          curY,\n          prevX,\n          prevY,\n          inX,\n          inY,\n          outX,\n          outY,\n          parts = [];\n\n      function addSegment(segment, skipLine) {\n        segment._transformCoordinates(_matrix, coords);\n\n        curX = coords[0];\n        curY = coords[1];\n\n        if (first) {\n          parts.push('M' + f.pair(curX, curY));\n          first = false;\n        } else {\n          inX = coords[2];\n          inY = coords[3];\n\n          if (inX === curX && inY === curY && outX === prevX && outY === prevY) {\n            if (!skipLine) {\n              var dx = curX - prevX,\n                  dy = curY - prevY;\n              parts.push(dx === 0 ? 'v' + f.number(dy) : dy === 0 ? 'h' + f.number(dx) : 'l' + f.pair(dx, dy));\n            }\n          } else {\n            parts.push('c' + f.pair(outX - prevX, outY - prevY) + ' ' + f.pair(inX - prevX, inY - prevY) + ' ' + f.pair(curX - prevX, curY - prevY));\n          }\n        }\n\n        prevX = curX;\n        prevY = curY;\n        outX = coords[4];\n        outY = coords[5];\n      }\n\n      if (!length) return '';\n\n      for (var i = 0; i < length; i++) addSegment(segments[i]);\n\n      if (this._closed && length > 0) {\n        addSegment(segments[0], true);\n        parts.push('z');\n      }\n\n      return parts.join('');\n    },\n    isEmpty: function () {\n      return !this._segments.length;\n    },\n    _transformContent: function (matrix) {\n      var segments = this._segments,\n          coords = new Array(6);\n\n      for (var i = 0, l = segments.length; i < l; i++) segments[i]._transformCoordinates(matrix, coords, true);\n\n      return true;\n    },\n    _add: function (segs, index) {\n      var segments = this._segments,\n          curves = this._curves,\n          amount = segs.length,\n          append = index == null,\n          index = append ? segments.length : index;\n\n      for (var i = 0; i < amount; i++) {\n        var segment = segs[i];\n        if (segment._path) segment = segs[i] = segment.clone();\n        segment._path = this;\n        segment._index = index + i;\n        if (segment._selection) this._updateSelection(segment, 0, segment._selection);\n      }\n\n      if (append) {\n        Base.push(segments, segs);\n      } else {\n        segments.splice.apply(segments, [index, 0].concat(segs));\n\n        for (var i = index + amount, l = segments.length; i < l; i++) segments[i]._index = i;\n      }\n\n      if (curves) {\n        var total = this._countCurves(),\n            start = index > 0 && index + amount - 1 === total ? index - 1 : index,\n            insert = start,\n            end = Math.min(start + amount, total);\n\n        if (segs._curves) {\n          curves.splice.apply(curves, [start, 0].concat(segs._curves));\n          insert += segs._curves.length;\n        }\n\n        for (var i = insert; i < end; i++) curves.splice(i, 0, new Curve(this, null, null));\n\n        this._adjustCurves(start, end);\n      }\n\n      this._changed(41);\n\n      return segs;\n    },\n    _adjustCurves: function (start, end) {\n      var segments = this._segments,\n          curves = this._curves,\n          curve;\n\n      for (var i = start; i < end; i++) {\n        curve = curves[i];\n        curve._path = this;\n        curve._segment1 = segments[i];\n        curve._segment2 = segments[i + 1] || segments[0];\n\n        curve._changed();\n      }\n\n      if (curve = curves[this._closed && !start ? segments.length - 1 : start - 1]) {\n        curve._segment2 = segments[start] || segments[0];\n\n        curve._changed();\n      }\n\n      if (curve = curves[end]) {\n        curve._segment1 = segments[end];\n\n        curve._changed();\n      }\n    },\n    _countCurves: function () {\n      var length = this._segments.length;\n      return !this._closed && length > 0 ? length - 1 : length;\n    },\n    add: function (segment1) {\n      var args = arguments;\n      return args.length > 1 && typeof segment1 !== 'number' ? this._add(Segment.readList(args)) : this._add([Segment.read(args)])[0];\n    },\n    insert: function (index, segment1) {\n      var args = arguments;\n      return args.length > 2 && typeof segment1 !== 'number' ? this._add(Segment.readList(args, 1), index) : this._add([Segment.read(args, 1)], index)[0];\n    },\n    addSegment: function () {\n      return this._add([Segment.read(arguments)])[0];\n    },\n    insertSegment: function (index) {\n      return this._add([Segment.read(arguments, 1)], index)[0];\n    },\n    addSegments: function (segments) {\n      return this._add(Segment.readList(segments));\n    },\n    insertSegments: function (index, segments) {\n      return this._add(Segment.readList(segments), index);\n    },\n    removeSegment: function (index) {\n      return this.removeSegments(index, index + 1)[0] || null;\n    },\n    removeSegments: function (start, end, _includeCurves) {\n      start = start || 0;\n      end = Base.pick(end, this._segments.length);\n      var segments = this._segments,\n          curves = this._curves,\n          count = segments.length,\n          removed = segments.splice(start, end - start),\n          amount = removed.length;\n      if (!amount) return removed;\n\n      for (var i = 0; i < amount; i++) {\n        var segment = removed[i];\n        if (segment._selection) this._updateSelection(segment, segment._selection, 0);\n        segment._index = segment._path = null;\n      }\n\n      for (var i = start, l = segments.length; i < l; i++) segments[i]._index = i;\n\n      if (curves) {\n        var index = start > 0 && end === count + (this._closed ? 1 : 0) ? start - 1 : start,\n            curves = curves.splice(index, amount);\n\n        for (var i = curves.length - 1; i >= 0; i--) curves[i]._path = null;\n\n        if (_includeCurves) removed._curves = curves.slice(1);\n\n        this._adjustCurves(index, index);\n      }\n\n      this._changed(41);\n\n      return removed;\n    },\n    clear: '#removeSegments',\n    hasHandles: function () {\n      var segments = this._segments;\n\n      for (var i = 0, l = segments.length; i < l; i++) {\n        if (segments[i].hasHandles()) return true;\n      }\n\n      return false;\n    },\n    clearHandles: function () {\n      var segments = this._segments;\n\n      for (var i = 0, l = segments.length; i < l; i++) segments[i].clearHandles();\n    },\n    getLength: function () {\n      if (this._length == null) {\n        var curves = this.getCurves(),\n            length = 0;\n\n        for (var i = 0, l = curves.length; i < l; i++) length += curves[i].getLength();\n\n        this._length = length;\n      }\n\n      return this._length;\n    },\n    getArea: function () {\n      var area = this._area;\n\n      if (area == null) {\n        var segments = this._segments,\n            closed = this._closed;\n        area = 0;\n\n        for (var i = 0, l = segments.length; i < l; i++) {\n          var last = i + 1 === l;\n          area += Curve.getArea(Curve.getValues(segments[i], segments[last ? 0 : i + 1], null, last && !closed));\n        }\n\n        this._area = area;\n      }\n\n      return area;\n    },\n    isFullySelected: function () {\n      var length = this._segments.length;\n      return this.isSelected() && length > 0 && this._segmentSelection === length * 7;\n    },\n    setFullySelected: function (selected) {\n      if (selected) this._selectSegments(true);\n      this.setSelected(selected);\n    },\n    setSelection: function setSelection(selection) {\n      if (!(selection & 1)) this._selectSegments(false);\n      setSelection.base.call(this, selection);\n    },\n    _selectSegments: function (selected) {\n      var segments = this._segments,\n          length = segments.length,\n          selection = selected ? 7 : 0;\n      this._segmentSelection = selection * length;\n\n      for (var i = 0; i < length; i++) segments[i]._selection = selection;\n    },\n    _updateSelection: function (segment, oldSelection, newSelection) {\n      segment._selection = newSelection;\n      var selection = this._segmentSelection += newSelection - oldSelection;\n      if (selection > 0) this.setSelected(true);\n    },\n    divideAt: function (location) {\n      var loc = this.getLocationAt(location),\n          curve;\n      return loc && (curve = loc.getCurve().divideAt(loc.getCurveOffset())) ? curve._segment1 : null;\n    },\n    splitAt: function (location) {\n      var loc = this.getLocationAt(location),\n          index = loc && loc.index,\n          time = loc && loc.time,\n          tMin = 1e-8,\n          tMax = 1 - tMin;\n\n      if (time > tMax) {\n        index++;\n        time = 0;\n      }\n\n      var curves = this.getCurves();\n\n      if (index >= 0 && index < curves.length) {\n        if (time >= tMin) {\n          curves[index++].divideAtTime(time);\n        }\n\n        var segs = this.removeSegments(index, this._segments.length, true),\n            path;\n\n        if (this._closed) {\n          this.setClosed(false);\n          path = this;\n        } else {\n          path = new Path(Item.NO_INSERT);\n          path.insertAbove(this);\n          path.copyAttributes(this);\n        }\n\n        path._add(segs, 0);\n\n        this.addSegment(segs[0]);\n        return path;\n      }\n\n      return null;\n    },\n    split: function (index, time) {\n      var curve,\n          location = time === undefined ? index : (curve = this.getCurves()[index]) && curve.getLocationAtTime(time);\n      return location != null ? this.splitAt(location) : null;\n    },\n    join: function (path, tolerance) {\n      var epsilon = tolerance || 0;\n\n      if (path && path !== this) {\n        var segments = path._segments,\n            last1 = this.getLastSegment(),\n            last2 = path.getLastSegment();\n        if (!last2) return this;\n        if (last1 && last1._point.isClose(last2._point, epsilon)) path.reverse();\n        var first2 = path.getFirstSegment();\n\n        if (last1 && last1._point.isClose(first2._point, epsilon)) {\n          last1.setHandleOut(first2._handleOut);\n\n          this._add(segments.slice(1));\n        } else {\n          var first1 = this.getFirstSegment();\n          if (first1 && first1._point.isClose(first2._point, epsilon)) path.reverse();\n          last2 = path.getLastSegment();\n\n          if (first1 && first1._point.isClose(last2._point, epsilon)) {\n            first1.setHandleIn(last2._handleIn);\n\n            this._add(segments.slice(0, segments.length - 1), 0);\n          } else {\n            this._add(segments.slice());\n          }\n        }\n\n        if (path._closed) this._add([segments[0]]);\n        path.remove();\n      }\n\n      var first = this.getFirstSegment(),\n          last = this.getLastSegment();\n\n      if (first !== last && first._point.isClose(last._point, epsilon)) {\n        first.setHandleIn(last._handleIn);\n        last.remove();\n        this.setClosed(true);\n      }\n\n      return this;\n    },\n    reduce: function (options) {\n      var curves = this.getCurves(),\n          simplify = options && options.simplify,\n          tolerance = simplify ? 1e-7 : 0;\n\n      for (var i = curves.length - 1; i >= 0; i--) {\n        var curve = curves[i];\n        if (!curve.hasHandles() && (!curve.hasLength(tolerance) || simplify && curve.isCollinear(curve.getNext()))) curve.remove();\n      }\n\n      return this;\n    },\n    reverse: function () {\n      this._segments.reverse();\n\n      for (var i = 0, l = this._segments.length; i < l; i++) {\n        var segment = this._segments[i];\n        var handleIn = segment._handleIn;\n        segment._handleIn = segment._handleOut;\n        segment._handleOut = handleIn;\n        segment._index = i;\n      }\n\n      this._curves = null;\n\n      this._changed(9);\n    },\n    flatten: function (flatness) {\n      var flattener = new PathFlattener(this, flatness || 0.25, 256, true),\n          parts = flattener.parts,\n          length = parts.length,\n          segments = [];\n\n      for (var i = 0; i < length; i++) {\n        segments.push(new Segment(parts[i].curve.slice(0, 2)));\n      }\n\n      if (!this._closed && length > 0) {\n        segments.push(new Segment(parts[length - 1].curve.slice(6)));\n      }\n\n      this.setSegments(segments);\n    },\n    simplify: function (tolerance) {\n      var segments = new PathFitter(this).fit(tolerance || 2.5);\n      if (segments) this.setSegments(segments);\n      return !!segments;\n    },\n    smooth: function (options) {\n      var that = this,\n          opts = options || {},\n          type = opts.type || 'asymmetric',\n          segments = this._segments,\n          length = segments.length,\n          closed = this._closed;\n\n      function getIndex(value, _default) {\n        var index = value && value.index;\n\n        if (index != null) {\n          var path = value.path;\n          if (path && path !== that) throw new Error(value._class + ' ' + index + ' of ' + path + ' is not part of ' + that);\n          if (_default && value instanceof Curve) index++;\n        } else {\n          index = typeof value === 'number' ? value : _default;\n        }\n\n        return Math.min(index < 0 && closed ? index % length : index < 0 ? index + length : index, length - 1);\n      }\n\n      var loop = closed && opts.from === undefined && opts.to === undefined,\n          from = getIndex(opts.from, 0),\n          to = getIndex(opts.to, length - 1);\n\n      if (from > to) {\n        if (closed) {\n          from -= length;\n        } else {\n          var tmp = from;\n          from = to;\n          to = tmp;\n        }\n      }\n\n      if (/^(?:asymmetric|continuous)$/.test(type)) {\n        var asymmetric = type === 'asymmetric',\n            min = Math.min,\n            amount = to - from + 1,\n            n = amount - 1,\n            padding = loop ? min(amount, 4) : 1,\n            paddingLeft = padding,\n            paddingRight = padding,\n            knots = [];\n\n        if (!closed) {\n          paddingLeft = min(1, from);\n          paddingRight = min(1, length - to - 1);\n        }\n\n        n += paddingLeft + paddingRight;\n        if (n <= 1) return;\n\n        for (var i = 0, j = from - paddingLeft; i <= n; i++, j++) {\n          knots[i] = segments[(j < 0 ? j + length : j) % length]._point;\n        }\n\n        var x = knots[0]._x + 2 * knots[1]._x,\n            y = knots[0]._y + 2 * knots[1]._y,\n            f = 2,\n            n_1 = n - 1,\n            rx = [x],\n            ry = [y],\n            rf = [f],\n            px = [],\n            py = [];\n\n        for (var i = 1; i < n; i++) {\n          var internal = i < n_1,\n              a = internal ? 1 : asymmetric ? 1 : 2,\n              b = internal ? 4 : asymmetric ? 2 : 7,\n              u = internal ? 4 : asymmetric ? 3 : 8,\n              v = internal ? 2 : asymmetric ? 0 : 1,\n              m = a / f;\n          f = rf[i] = b - m;\n          x = rx[i] = u * knots[i]._x + v * knots[i + 1]._x - m * x;\n          y = ry[i] = u * knots[i]._y + v * knots[i + 1]._y - m * y;\n        }\n\n        px[n_1] = rx[n_1] / rf[n_1];\n        py[n_1] = ry[n_1] / rf[n_1];\n\n        for (var i = n - 2; i >= 0; i--) {\n          px[i] = (rx[i] - px[i + 1]) / rf[i];\n          py[i] = (ry[i] - py[i + 1]) / rf[i];\n        }\n\n        px[n] = (3 * knots[n]._x - px[n_1]) / 2;\n        py[n] = (3 * knots[n]._y - py[n_1]) / 2;\n\n        for (var i = paddingLeft, max = n - paddingRight, j = from; i <= max; i++, j++) {\n          var segment = segments[j < 0 ? j + length : j],\n              pt = segment._point,\n              hx = px[i] - pt._x,\n              hy = py[i] - pt._y;\n          if (loop || i < max) segment.setHandleOut(hx, hy);\n          if (loop || i > paddingLeft) segment.setHandleIn(-hx, -hy);\n        }\n      } else {\n        for (var i = from; i <= to; i++) {\n          segments[i < 0 ? i + length : i].smooth(opts, !loop && i === from, !loop && i === to);\n        }\n      }\n    },\n    toShape: function (insert) {\n      if (!this._closed) return null;\n      var segments = this._segments,\n          type,\n          size,\n          radius,\n          topCenter;\n\n      function isCollinear(i, j) {\n        var seg1 = segments[i],\n            seg2 = seg1.getNext(),\n            seg3 = segments[j],\n            seg4 = seg3.getNext();\n        return seg1._handleOut.isZero() && seg2._handleIn.isZero() && seg3._handleOut.isZero() && seg4._handleIn.isZero() && seg2._point.subtract(seg1._point).isCollinear(seg4._point.subtract(seg3._point));\n      }\n\n      function isOrthogonal(i) {\n        var seg2 = segments[i],\n            seg1 = seg2.getPrevious(),\n            seg3 = seg2.getNext();\n        return seg1._handleOut.isZero() && seg2._handleIn.isZero() && seg2._handleOut.isZero() && seg3._handleIn.isZero() && seg2._point.subtract(seg1._point).isOrthogonal(seg3._point.subtract(seg2._point));\n      }\n\n      function isArc(i) {\n        var seg1 = segments[i],\n            seg2 = seg1.getNext(),\n            handle1 = seg1._handleOut,\n            handle2 = seg2._handleIn,\n            kappa = 0.5522847498307936;\n\n        if (handle1.isOrthogonal(handle2)) {\n          var pt1 = seg1._point,\n              pt2 = seg2._point,\n              corner = new Line(pt1, handle1, true).intersect(new Line(pt2, handle2, true), true);\n          return corner && Numerical.isZero(handle1.getLength() / corner.subtract(pt1).getLength() - kappa) && Numerical.isZero(handle2.getLength() / corner.subtract(pt2).getLength() - kappa);\n        }\n\n        return false;\n      }\n\n      function getDistance(i, j) {\n        return segments[i]._point.getDistance(segments[j]._point);\n      }\n\n      if (!this.hasHandles() && segments.length === 4 && isCollinear(0, 2) && isCollinear(1, 3) && isOrthogonal(1)) {\n        type = Shape.Rectangle;\n        size = new Size(getDistance(0, 3), getDistance(0, 1));\n        topCenter = segments[1]._point.add(segments[2]._point).divide(2);\n      } else if (segments.length === 8 && isArc(0) && isArc(2) && isArc(4) && isArc(6) && isCollinear(1, 5) && isCollinear(3, 7)) {\n        type = Shape.Rectangle;\n        size = new Size(getDistance(1, 6), getDistance(0, 3));\n        radius = size.subtract(new Size(getDistance(0, 7), getDistance(1, 2))).divide(2);\n        topCenter = segments[3]._point.add(segments[4]._point).divide(2);\n      } else if (segments.length === 4 && isArc(0) && isArc(1) && isArc(2) && isArc(3)) {\n        if (Numerical.isZero(getDistance(0, 2) - getDistance(1, 3))) {\n          type = Shape.Circle;\n          radius = getDistance(0, 2) / 2;\n        } else {\n          type = Shape.Ellipse;\n          radius = new Size(getDistance(2, 0) / 2, getDistance(3, 1) / 2);\n        }\n\n        topCenter = segments[1]._point;\n      }\n\n      if (type) {\n        var center = this.getPosition(true),\n            shape = new type({\n          center: center,\n          size: size,\n          radius: radius,\n          insert: false\n        });\n        shape.copyAttributes(this, true);\n\n        shape._matrix.prepend(this._matrix);\n\n        shape.rotate(topCenter.subtract(center).getAngle() + 90);\n        if (insert === undefined || insert) shape.insertAbove(this);\n        return shape;\n      }\n\n      return null;\n    },\n    toPath: '#clone',\n    compare: function compare(path) {\n      if (!path || path instanceof CompoundPath) return compare.base.call(this, path);\n      var curves1 = this.getCurves(),\n          curves2 = path.getCurves(),\n          length1 = curves1.length,\n          length2 = curves2.length;\n\n      if (!length1 || !length2) {\n        return length1 == length2;\n      }\n\n      var v1 = curves1[0].getValues(),\n          values2 = [],\n          pos1 = 0,\n          pos2,\n          end1 = 0,\n          end2;\n\n      for (var i = 0; i < length2; i++) {\n        var v2 = curves2[i].getValues();\n        values2.push(v2);\n        var overlaps = Curve.getOverlaps(v1, v2);\n\n        if (overlaps) {\n          pos2 = !i && overlaps[0][0] > 0 ? length2 - 1 : i;\n          end2 = overlaps[0][1];\n          break;\n        }\n      }\n\n      var abs = Math.abs,\n          epsilon = 1e-8,\n          v2 = values2[pos2],\n          start2;\n\n      while (v1 && v2) {\n        var overlaps = Curve.getOverlaps(v1, v2);\n\n        if (overlaps) {\n          var t1 = overlaps[0][0];\n\n          if (abs(t1 - end1) < epsilon) {\n            end1 = overlaps[1][0];\n\n            if (end1 === 1) {\n              v1 = ++pos1 < length1 ? curves1[pos1].getValues() : null;\n              end1 = 0;\n            }\n\n            var t2 = overlaps[0][1];\n\n            if (abs(t2 - end2) < epsilon) {\n              if (!start2) start2 = [pos2, t2];\n              end2 = overlaps[1][1];\n\n              if (end2 === 1) {\n                if (++pos2 >= length2) pos2 = 0;\n                v2 = values2[pos2] || curves2[pos2].getValues();\n                end2 = 0;\n              }\n\n              if (!v1) {\n                return start2[0] === pos2 && start2[1] === end2;\n              }\n\n              continue;\n            }\n          }\n        }\n\n        break;\n      }\n\n      return false;\n    },\n    _hitTestSelf: function (point, options, viewMatrix, strokeMatrix) {\n      var that = this,\n          style = this.getStyle(),\n          segments = this._segments,\n          numSegments = segments.length,\n          closed = this._closed,\n          tolerancePadding = options._tolerancePadding,\n          strokePadding = tolerancePadding,\n          join,\n          cap,\n          miterLimit,\n          area,\n          loc,\n          res,\n          hitStroke = options.stroke && style.hasStroke(),\n          hitFill = options.fill && style.hasFill(),\n          hitCurves = options.curves,\n          strokeRadius = hitStroke ? style.getStrokeWidth() / 2 : hitFill && options.tolerance > 0 || hitCurves ? 0 : null;\n\n      if (strokeRadius !== null) {\n        if (strokeRadius > 0) {\n          join = style.getStrokeJoin();\n          cap = style.getStrokeCap();\n          miterLimit = style.getMiterLimit();\n          strokePadding = strokePadding.add(Path._getStrokePadding(strokeRadius, strokeMatrix));\n        } else {\n          join = cap = 'round';\n        }\n      }\n\n      function isCloseEnough(pt, padding) {\n        return point.subtract(pt).divide(padding).length <= 1;\n      }\n\n      function checkSegmentPoint(seg, pt, name) {\n        if (!options.selected || pt.isSelected()) {\n          var anchor = seg._point;\n          if (pt !== anchor) pt = pt.add(anchor);\n\n          if (isCloseEnough(pt, strokePadding)) {\n            return new HitResult(name, that, {\n              segment: seg,\n              point: pt\n            });\n          }\n        }\n      }\n\n      function checkSegmentPoints(seg, ends) {\n        return (ends || options.segments) && checkSegmentPoint(seg, seg._point, 'segment') || !ends && options.handles && (checkSegmentPoint(seg, seg._handleIn, 'handle-in') || checkSegmentPoint(seg, seg._handleOut, 'handle-out'));\n      }\n\n      function addToArea(point) {\n        area.add(point);\n      }\n\n      function checkSegmentStroke(segment) {\n        var isJoin = closed || segment._index > 0 && segment._index < numSegments - 1;\n\n        if ((isJoin ? join : cap) === 'round') {\n          return isCloseEnough(segment._point, strokePadding);\n        } else {\n          area = new Path({\n            internal: true,\n            closed: true\n          });\n\n          if (isJoin) {\n            if (!segment.isSmooth()) {\n              Path._addBevelJoin(segment, join, strokeRadius, miterLimit, null, strokeMatrix, addToArea, true);\n            }\n          } else if (cap === 'square') {\n            Path._addSquareCap(segment, cap, strokeRadius, null, strokeMatrix, addToArea, true);\n          }\n\n          if (!area.isEmpty()) {\n            var loc;\n            return area.contains(point) || (loc = area.getNearestLocation(point)) && isCloseEnough(loc.getPoint(), tolerancePadding);\n          }\n        }\n      }\n\n      if (options.ends && !options.segments && !closed) {\n        if (res = checkSegmentPoints(segments[0], true) || checkSegmentPoints(segments[numSegments - 1], true)) return res;\n      } else if (options.segments || options.handles) {\n        for (var i = 0; i < numSegments; i++) if (res = checkSegmentPoints(segments[i])) return res;\n      }\n\n      if (strokeRadius !== null) {\n        loc = this.getNearestLocation(point);\n\n        if (loc) {\n          var time = loc.getTime();\n\n          if (time === 0 || time === 1 && numSegments > 1) {\n            if (!checkSegmentStroke(loc.getSegment())) loc = null;\n          } else if (!isCloseEnough(loc.getPoint(), strokePadding)) {\n            loc = null;\n          }\n        }\n\n        if (!loc && join === 'miter' && numSegments > 1) {\n          for (var i = 0; i < numSegments; i++) {\n            var segment = segments[i];\n\n            if (point.getDistance(segment._point) <= miterLimit * strokeRadius && checkSegmentStroke(segment)) {\n              loc = segment.getLocation();\n              break;\n            }\n          }\n        }\n      }\n\n      return !loc && hitFill && this._contains(point) || loc && !hitStroke && !hitCurves ? new HitResult('fill', this) : loc ? new HitResult(hitStroke ? 'stroke' : 'curve', this, {\n        location: loc,\n        point: loc.getPoint()\n      }) : null;\n    }\n  }, Base.each(Curve._evaluateMethods, function (name) {\n    this[name + 'At'] = function (offset) {\n      var loc = this.getLocationAt(offset);\n      return loc && loc[name]();\n    };\n  }, {\n    beans: false,\n    getLocationOf: function () {\n      var point = Point.read(arguments),\n          curves = this.getCurves();\n\n      for (var i = 0, l = curves.length; i < l; i++) {\n        var loc = curves[i].getLocationOf(point);\n        if (loc) return loc;\n      }\n\n      return null;\n    },\n    getOffsetOf: function () {\n      var loc = this.getLocationOf.apply(this, arguments);\n      return loc ? loc.getOffset() : null;\n    },\n    getLocationAt: function (offset) {\n      if (typeof offset === 'number') {\n        var curves = this.getCurves(),\n            length = 0;\n\n        for (var i = 0, l = curves.length; i < l; i++) {\n          var start = length,\n              curve = curves[i];\n          length += curve.getLength();\n\n          if (length > offset) {\n            return curve.getLocationAt(offset - start);\n          }\n        }\n\n        if (curves.length > 0 && offset <= this.getLength()) {\n          return new CurveLocation(curves[curves.length - 1], 1);\n        }\n      } else if (offset && offset.getPath && offset.getPath() === this) {\n        return offset;\n      }\n\n      return null;\n    },\n    getOffsetsWithTangent: function () {\n      var tangent = Point.read(arguments);\n\n      if (tangent.isZero()) {\n        return [];\n      }\n\n      var offsets = [];\n      var curveStart = 0;\n      var curves = this.getCurves();\n\n      for (var i = 0, l = curves.length; i < l; i++) {\n        var curve = curves[i];\n        var curveTimes = curve.getTimesWithTangent(tangent);\n\n        for (var j = 0, m = curveTimes.length; j < m; j++) {\n          var offset = curveStart + curve.getOffsetAtTime(curveTimes[j]);\n\n          if (offsets.indexOf(offset) < 0) {\n            offsets.push(offset);\n          }\n        }\n\n        curveStart += curve.length;\n      }\n\n      return offsets;\n    }\n  }), new function () {\n    function drawHandles(ctx, segments, matrix, size) {\n      if (size <= 0) return;\n      var half = size / 2,\n          miniSize = size - 2,\n          miniHalf = half - 1,\n          coords = new Array(6),\n          pX,\n          pY;\n\n      function drawHandle(index) {\n        var hX = coords[index],\n            hY = coords[index + 1];\n\n        if (pX != hX || pY != hY) {\n          ctx.beginPath();\n          ctx.moveTo(pX, pY);\n          ctx.lineTo(hX, hY);\n          ctx.stroke();\n          ctx.beginPath();\n          ctx.arc(hX, hY, half, 0, Math.PI * 2, true);\n          ctx.fill();\n        }\n      }\n\n      for (var i = 0, l = segments.length; i < l; i++) {\n        var segment = segments[i],\n            selection = segment._selection;\n\n        segment._transformCoordinates(matrix, coords);\n\n        pX = coords[0];\n        pY = coords[1];\n        if (selection & 2) drawHandle(2);\n        if (selection & 4) drawHandle(4);\n        ctx.fillRect(pX - half, pY - half, size, size);\n\n        if (miniSize > 0 && !(selection & 1)) {\n          var fillStyle = ctx.fillStyle;\n          ctx.fillStyle = '#ffffff';\n          ctx.fillRect(pX - miniHalf, pY - miniHalf, miniSize, miniSize);\n          ctx.fillStyle = fillStyle;\n        }\n      }\n    }\n\n    function drawSegments(ctx, path, matrix) {\n      var segments = path._segments,\n          length = segments.length,\n          coords = new Array(6),\n          first = true,\n          curX,\n          curY,\n          prevX,\n          prevY,\n          inX,\n          inY,\n          outX,\n          outY;\n\n      function drawSegment(segment) {\n        if (matrix) {\n          segment._transformCoordinates(matrix, coords);\n\n          curX = coords[0];\n          curY = coords[1];\n        } else {\n          var point = segment._point;\n          curX = point._x;\n          curY = point._y;\n        }\n\n        if (first) {\n          ctx.moveTo(curX, curY);\n          first = false;\n        } else {\n          if (matrix) {\n            inX = coords[2];\n            inY = coords[3];\n          } else {\n            var handle = segment._handleIn;\n            inX = curX + handle._x;\n            inY = curY + handle._y;\n          }\n\n          if (inX === curX && inY === curY && outX === prevX && outY === prevY) {\n            ctx.lineTo(curX, curY);\n          } else {\n            ctx.bezierCurveTo(outX, outY, inX, inY, curX, curY);\n          }\n        }\n\n        prevX = curX;\n        prevY = curY;\n\n        if (matrix) {\n          outX = coords[4];\n          outY = coords[5];\n        } else {\n          var handle = segment._handleOut;\n          outX = prevX + handle._x;\n          outY = prevY + handle._y;\n        }\n      }\n\n      for (var i = 0; i < length; i++) drawSegment(segments[i]);\n\n      if (path._closed && length > 0) drawSegment(segments[0]);\n    }\n\n    return {\n      _draw: function (ctx, param, viewMatrix, strokeMatrix) {\n        var dontStart = param.dontStart,\n            dontPaint = param.dontFinish || param.clip,\n            style = this.getStyle(),\n            hasFill = style.hasFill(),\n            hasStroke = style.hasStroke(),\n            dashArray = style.getDashArray(),\n            dashLength = !paper.support.nativeDash && hasStroke && dashArray && dashArray.length;\n        if (!dontStart) ctx.beginPath();\n\n        if (hasFill || hasStroke && !dashLength || dontPaint) {\n          drawSegments(ctx, this, strokeMatrix);\n          if (this._closed) ctx.closePath();\n        }\n\n        function getOffset(i) {\n          return dashArray[(i % dashLength + dashLength) % dashLength];\n        }\n\n        if (!dontPaint && (hasFill || hasStroke)) {\n          this._setStyles(ctx, param, viewMatrix);\n\n          if (hasFill) {\n            ctx.fill(style.getFillRule());\n            ctx.shadowColor = 'rgba(0,0,0,0)';\n          }\n\n          if (hasStroke) {\n            if (dashLength) {\n              if (!dontStart) ctx.beginPath();\n              var flattener = new PathFlattener(this, 0.25, 32, false, strokeMatrix),\n                  length = flattener.length,\n                  from = -style.getDashOffset(),\n                  to,\n                  i = 0;\n\n              while (from > 0) {\n                from -= getOffset(i--) + getOffset(i--);\n              }\n\n              while (from < length) {\n                to = from + getOffset(i++);\n                if (from > 0 || to > 0) flattener.drawPart(ctx, Math.max(from, 0), Math.max(to, 0));\n                from = to + getOffset(i++);\n              }\n            }\n\n            ctx.stroke();\n          }\n        }\n      },\n      _drawSelected: function (ctx, matrix) {\n        ctx.beginPath();\n        drawSegments(ctx, this, matrix);\n        ctx.stroke();\n        drawHandles(ctx, this._segments, matrix, paper.settings.handleSize);\n      }\n    };\n  }(), new function () {\n    function getCurrentSegment(that) {\n      var segments = that._segments;\n      if (!segments.length) throw new Error('Use a moveTo() command first');\n      return segments[segments.length - 1];\n    }\n\n    return {\n      moveTo: function () {\n        var segments = this._segments;\n        if (segments.length === 1) this.removeSegment(0);\n        if (!segments.length) this._add([new Segment(Point.read(arguments))]);\n      },\n      moveBy: function () {\n        throw new Error('moveBy() is unsupported on Path items.');\n      },\n      lineTo: function () {\n        this._add([new Segment(Point.read(arguments))]);\n      },\n      cubicCurveTo: function () {\n        var args = arguments,\n            handle1 = Point.read(args),\n            handle2 = Point.read(args),\n            to = Point.read(args),\n            current = getCurrentSegment(this);\n        current.setHandleOut(handle1.subtract(current._point));\n\n        this._add([new Segment(to, handle2.subtract(to))]);\n      },\n      quadraticCurveTo: function () {\n        var args = arguments,\n            handle = Point.read(args),\n            to = Point.read(args),\n            current = getCurrentSegment(this)._point;\n\n        this.cubicCurveTo(handle.add(current.subtract(handle).multiply(1 / 3)), handle.add(to.subtract(handle).multiply(1 / 3)), to);\n      },\n      curveTo: function () {\n        var args = arguments,\n            through = Point.read(args),\n            to = Point.read(args),\n            t = Base.pick(Base.read(args), 0.5),\n            t1 = 1 - t,\n            current = getCurrentSegment(this)._point,\n            handle = through.subtract(current.multiply(t1 * t1)).subtract(to.multiply(t * t)).divide(2 * t * t1);\n\n        if (handle.isNaN()) throw new Error('Cannot put a curve through points with parameter = ' + t);\n        this.quadraticCurveTo(handle, to);\n      },\n      arcTo: function () {\n        var args = arguments,\n            abs = Math.abs,\n            sqrt = Math.sqrt,\n            current = getCurrentSegment(this),\n            from = current._point,\n            to = Point.read(args),\n            through,\n            peek = Base.peek(args),\n            clockwise = Base.pick(peek, true),\n            center,\n            extent,\n            vector,\n            matrix;\n\n        if (typeof clockwise === 'boolean') {\n          var middle = from.add(to).divide(2),\n              through = middle.add(middle.subtract(from).rotate(clockwise ? -90 : 90));\n        } else if (Base.remain(args) <= 2) {\n          through = to;\n          to = Point.read(args);\n        } else if (!from.equals(to)) {\n          var radius = Size.read(args),\n              isZero = Numerical.isZero;\n          if (isZero(radius.width) || isZero(radius.height)) return this.lineTo(to);\n          var rotation = Base.read(args),\n              clockwise = !!Base.read(args),\n              large = !!Base.read(args),\n              middle = from.add(to).divide(2),\n              pt = from.subtract(middle).rotate(-rotation),\n              x = pt.x,\n              y = pt.y,\n              rx = abs(radius.width),\n              ry = abs(radius.height),\n              rxSq = rx * rx,\n              rySq = ry * ry,\n              xSq = x * x,\n              ySq = y * y;\n          var factor = sqrt(xSq / rxSq + ySq / rySq);\n\n          if (factor > 1) {\n            rx *= factor;\n            ry *= factor;\n            rxSq = rx * rx;\n            rySq = ry * ry;\n          }\n\n          factor = (rxSq * rySq - rxSq * ySq - rySq * xSq) / (rxSq * ySq + rySq * xSq);\n          if (abs(factor) < 1e-12) factor = 0;\n          if (factor < 0) throw new Error('Cannot create an arc with the given arguments');\n          center = new Point(rx * y / ry, -ry * x / rx).multiply((large === clockwise ? -1 : 1) * sqrt(factor)).rotate(rotation).add(middle);\n          matrix = new Matrix().translate(center).rotate(rotation).scale(rx, ry);\n          vector = matrix._inverseTransform(from);\n          extent = vector.getDirectedAngle(matrix._inverseTransform(to));\n          if (!clockwise && extent > 0) extent -= 360;else if (clockwise && extent < 0) extent += 360;\n        }\n\n        if (through) {\n          var l1 = new Line(from.add(through).divide(2), through.subtract(from).rotate(90), true),\n              l2 = new Line(through.add(to).divide(2), to.subtract(through).rotate(90), true),\n              line = new Line(from, to),\n              throughSide = line.getSide(through);\n          center = l1.intersect(l2, true);\n\n          if (!center) {\n            if (!throughSide) return this.lineTo(to);\n            throw new Error('Cannot create an arc with the given arguments');\n          }\n\n          vector = from.subtract(center);\n          extent = vector.getDirectedAngle(to.subtract(center));\n          var centerSide = line.getSide(center, true);\n\n          if (centerSide === 0) {\n            extent = throughSide * abs(extent);\n          } else if (throughSide === centerSide) {\n            extent += extent < 0 ? 360 : -360;\n          }\n        }\n\n        if (extent) {\n          var epsilon = 1e-7,\n              ext = abs(extent),\n              count = ext >= 360 ? 4 : Math.ceil((ext - epsilon) / 90),\n              inc = extent / count,\n              half = inc * Math.PI / 360,\n              z = 4 / 3 * Math.sin(half) / (1 + Math.cos(half)),\n              segments = [];\n\n          for (var i = 0; i <= count; i++) {\n            var pt = to,\n                out = null;\n\n            if (i < count) {\n              out = vector.rotate(90).multiply(z);\n\n              if (matrix) {\n                pt = matrix._transformPoint(vector);\n                out = matrix._transformPoint(vector.add(out)).subtract(pt);\n              } else {\n                pt = center.add(vector);\n              }\n            }\n\n            if (!i) {\n              current.setHandleOut(out);\n            } else {\n              var _in = vector.rotate(-90).multiply(z);\n\n              if (matrix) {\n                _in = matrix._transformPoint(vector.add(_in)).subtract(pt);\n              }\n\n              segments.push(new Segment(pt, _in, out));\n            }\n\n            vector = vector.rotate(inc);\n          }\n\n          this._add(segments);\n        }\n      },\n      lineBy: function () {\n        var to = Point.read(arguments),\n            current = getCurrentSegment(this)._point;\n\n        this.lineTo(current.add(to));\n      },\n      curveBy: function () {\n        var args = arguments,\n            through = Point.read(args),\n            to = Point.read(args),\n            parameter = Base.read(args),\n            current = getCurrentSegment(this)._point;\n\n        this.curveTo(current.add(through), current.add(to), parameter);\n      },\n      cubicCurveBy: function () {\n        var args = arguments,\n            handle1 = Point.read(args),\n            handle2 = Point.read(args),\n            to = Point.read(args),\n            current = getCurrentSegment(this)._point;\n\n        this.cubicCurveTo(current.add(handle1), current.add(handle2), current.add(to));\n      },\n      quadraticCurveBy: function () {\n        var args = arguments,\n            handle = Point.read(args),\n            to = Point.read(args),\n            current = getCurrentSegment(this)._point;\n\n        this.quadraticCurveTo(current.add(handle), current.add(to));\n      },\n      arcBy: function () {\n        var args = arguments,\n            current = getCurrentSegment(this)._point,\n            point = current.add(Point.read(args)),\n            clockwise = Base.pick(Base.peek(args), true);\n\n        if (typeof clockwise === 'boolean') {\n          this.arcTo(point, clockwise);\n        } else {\n          this.arcTo(point, current.add(Point.read(args)));\n        }\n      },\n      closePath: function (tolerance) {\n        this.setClosed(true);\n        this.join(this, tolerance);\n      }\n    };\n  }(), {\n    _getBounds: function (matrix, options) {\n      var method = options.handle ? 'getHandleBounds' : options.stroke ? 'getStrokeBounds' : 'getBounds';\n      return Path[method](this._segments, this._closed, this, matrix, options);\n    },\n    statics: {\n      getBounds: function (segments, closed, path, matrix, options, strokePadding) {\n        var first = segments[0];\n        if (!first) return new Rectangle();\n\n        var coords = new Array(6),\n            prevCoords = first._transformCoordinates(matrix, new Array(6)),\n            min = prevCoords.slice(0, 2),\n            max = min.slice(),\n            roots = new Array(2);\n\n        function processSegment(segment) {\n          segment._transformCoordinates(matrix, coords);\n\n          for (var i = 0; i < 2; i++) {\n            Curve._addBounds(prevCoords[i], prevCoords[i + 4], coords[i + 2], coords[i], i, strokePadding ? strokePadding[i] : 0, min, max, roots);\n          }\n\n          var tmp = prevCoords;\n          prevCoords = coords;\n          coords = tmp;\n        }\n\n        for (var i = 1, l = segments.length; i < l; i++) processSegment(segments[i]);\n\n        if (closed) processSegment(first);\n        return new Rectangle(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n      },\n      getStrokeBounds: function (segments, closed, path, matrix, options) {\n        var style = path.getStyle(),\n            stroke = style.hasStroke(),\n            strokeWidth = style.getStrokeWidth(),\n            strokeMatrix = stroke && path._getStrokeMatrix(matrix, options),\n            strokePadding = stroke && Path._getStrokePadding(strokeWidth, strokeMatrix),\n            bounds = Path.getBounds(segments, closed, path, matrix, options, strokePadding);\n\n        if (!stroke) return bounds;\n        var strokeRadius = strokeWidth / 2,\n            join = style.getStrokeJoin(),\n            cap = style.getStrokeCap(),\n            miterLimit = style.getMiterLimit(),\n            joinBounds = new Rectangle(new Size(strokePadding));\n\n        function addPoint(point) {\n          bounds = bounds.include(point);\n        }\n\n        function addRound(segment) {\n          bounds = bounds.unite(joinBounds.setCenter(segment._point.transform(matrix)));\n        }\n\n        function addJoin(segment, join) {\n          if (join === 'round' || segment.isSmooth()) {\n            addRound(segment);\n          } else {\n            Path._addBevelJoin(segment, join, strokeRadius, miterLimit, matrix, strokeMatrix, addPoint);\n          }\n        }\n\n        function addCap(segment, cap) {\n          if (cap === 'round') {\n            addRound(segment);\n          } else {\n            Path._addSquareCap(segment, cap, strokeRadius, matrix, strokeMatrix, addPoint);\n          }\n        }\n\n        var length = segments.length - (closed ? 0 : 1);\n\n        if (length > 0) {\n          for (var i = 1; i < length; i++) {\n            addJoin(segments[i], join);\n          }\n\n          if (closed) {\n            addJoin(segments[0], join);\n          } else {\n            addCap(segments[0], cap);\n            addCap(segments[segments.length - 1], cap);\n          }\n        }\n\n        return bounds;\n      },\n      _getStrokePadding: function (radius, matrix) {\n        if (!matrix) return [radius, radius];\n        var hor = new Point(radius, 0).transform(matrix),\n            ver = new Point(0, radius).transform(matrix),\n            phi = hor.getAngleInRadians(),\n            a = hor.getLength(),\n            b = ver.getLength();\n        var sin = Math.sin(phi),\n            cos = Math.cos(phi),\n            tan = Math.tan(phi),\n            tx = Math.atan2(b * tan, a),\n            ty = Math.atan2(b, tan * a);\n        return [Math.abs(a * Math.cos(tx) * cos + b * Math.sin(tx) * sin), Math.abs(b * Math.sin(ty) * cos + a * Math.cos(ty) * sin)];\n      },\n      _addBevelJoin: function (segment, join, radius, miterLimit, matrix, strokeMatrix, addPoint, isArea) {\n        var curve2 = segment.getCurve(),\n            curve1 = curve2.getPrevious(),\n            point = curve2.getPoint1().transform(matrix),\n            normal1 = curve1.getNormalAtTime(1).multiply(radius).transform(strokeMatrix),\n            normal2 = curve2.getNormalAtTime(0).multiply(radius).transform(strokeMatrix),\n            angle = normal1.getDirectedAngle(normal2);\n\n        if (angle < 0 || angle >= 180) {\n          normal1 = normal1.negate();\n          normal2 = normal2.negate();\n        }\n\n        if (isArea) addPoint(point);\n        addPoint(point.add(normal1));\n\n        if (join === 'miter') {\n          var corner = new Line(point.add(normal1), new Point(-normal1.y, normal1.x), true).intersect(new Line(point.add(normal2), new Point(-normal2.y, normal2.x), true), true);\n\n          if (corner && point.getDistance(corner) <= miterLimit * radius) {\n            addPoint(corner);\n          }\n        }\n\n        addPoint(point.add(normal2));\n      },\n      _addSquareCap: function (segment, cap, radius, matrix, strokeMatrix, addPoint, isArea) {\n        var point = segment._point.transform(matrix),\n            loc = segment.getLocation(),\n            normal = loc.getNormal().multiply(loc.getTime() === 0 ? radius : -radius).transform(strokeMatrix);\n\n        if (cap === 'square') {\n          if (isArea) {\n            addPoint(point.subtract(normal));\n            addPoint(point.add(normal));\n          }\n\n          point = point.add(normal.rotate(-90));\n        }\n\n        addPoint(point.add(normal));\n        addPoint(point.subtract(normal));\n      },\n      getHandleBounds: function (segments, closed, path, matrix, options) {\n        var style = path.getStyle(),\n            stroke = options.stroke && style.hasStroke(),\n            strokePadding,\n            joinPadding;\n\n        if (stroke) {\n          var strokeMatrix = path._getStrokeMatrix(matrix, options),\n              strokeRadius = style.getStrokeWidth() / 2,\n              joinRadius = strokeRadius;\n\n          if (style.getStrokeJoin() === 'miter') joinRadius = strokeRadius * style.getMiterLimit();\n          if (style.getStrokeCap() === 'square') joinRadius = Math.max(joinRadius, strokeRadius * Math.SQRT2);\n          strokePadding = Path._getStrokePadding(strokeRadius, strokeMatrix);\n          joinPadding = Path._getStrokePadding(joinRadius, strokeMatrix);\n        }\n\n        var coords = new Array(6),\n            x1 = Infinity,\n            x2 = -x1,\n            y1 = x1,\n            y2 = x2;\n\n        for (var i = 0, l = segments.length; i < l; i++) {\n          var segment = segments[i];\n\n          segment._transformCoordinates(matrix, coords);\n\n          for (var j = 0; j < 6; j += 2) {\n            var padding = !j ? joinPadding : strokePadding,\n                paddingX = padding ? padding[0] : 0,\n                paddingY = padding ? padding[1] : 0,\n                x = coords[j],\n                y = coords[j + 1],\n                xn = x - paddingX,\n                xx = x + paddingX,\n                yn = y - paddingY,\n                yx = y + paddingY;\n            if (xn < x1) x1 = xn;\n            if (xx > x2) x2 = xx;\n            if (yn < y1) y1 = yn;\n            if (yx > y2) y2 = yx;\n          }\n        }\n\n        return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n      }\n    }\n  });\n  Path.inject({\n    statics: new function () {\n      var kappa = 0.5522847498307936,\n          ellipseSegments = [new Segment([-1, 0], [0, kappa], [0, -kappa]), new Segment([0, -1], [-kappa, 0], [kappa, 0]), new Segment([1, 0], [0, -kappa], [0, kappa]), new Segment([0, 1], [kappa, 0], [-kappa, 0])];\n\n      function createPath(segments, closed, args) {\n        var props = Base.getNamed(args),\n            path = new Path(props && props.insert == false && Item.NO_INSERT);\n\n        path._add(segments);\n\n        path._closed = closed;\n        return path.set(props, {\n          insert: true\n        });\n      }\n\n      function createEllipse(center, radius, args) {\n        var segments = new Array(4);\n\n        for (var i = 0; i < 4; i++) {\n          var segment = ellipseSegments[i];\n          segments[i] = new Segment(segment._point.multiply(radius).add(center), segment._handleIn.multiply(radius), segment._handleOut.multiply(radius));\n        }\n\n        return createPath(segments, true, args);\n      }\n\n      return {\n        Line: function () {\n          var args = arguments;\n          return createPath([new Segment(Point.readNamed(args, 'from')), new Segment(Point.readNamed(args, 'to'))], false, args);\n        },\n        Circle: function () {\n          var args = arguments,\n              center = Point.readNamed(args, 'center'),\n              radius = Base.readNamed(args, 'radius');\n          return createEllipse(center, new Size(radius), args);\n        },\n        Rectangle: function () {\n          var args = arguments,\n              rect = Rectangle.readNamed(args, 'rectangle'),\n              radius = Size.readNamed(args, 'radius', 0, {\n            readNull: true\n          }),\n              bl = rect.getBottomLeft(true),\n              tl = rect.getTopLeft(true),\n              tr = rect.getTopRight(true),\n              br = rect.getBottomRight(true),\n              segments;\n\n          if (!radius || radius.isZero()) {\n            segments = [new Segment(bl), new Segment(tl), new Segment(tr), new Segment(br)];\n          } else {\n            radius = Size.min(radius, rect.getSize(true).divide(2));\n            var rx = radius.width,\n                ry = radius.height,\n                hx = rx * kappa,\n                hy = ry * kappa;\n            segments = [new Segment(bl.add(rx, 0), null, [-hx, 0]), new Segment(bl.subtract(0, ry), [0, hy]), new Segment(tl.add(0, ry), null, [0, -hy]), new Segment(tl.add(rx, 0), [-hx, 0], null), new Segment(tr.subtract(rx, 0), null, [hx, 0]), new Segment(tr.add(0, ry), [0, -hy], null), new Segment(br.subtract(0, ry), null, [0, hy]), new Segment(br.subtract(rx, 0), [hx, 0])];\n          }\n\n          return createPath(segments, true, args);\n        },\n        RoundRectangle: '#Rectangle',\n        Ellipse: function () {\n          var args = arguments,\n              ellipse = Shape._readEllipse(args);\n\n          return createEllipse(ellipse.center, ellipse.radius, args);\n        },\n        Oval: '#Ellipse',\n        Arc: function () {\n          var args = arguments,\n              from = Point.readNamed(args, 'from'),\n              through = Point.readNamed(args, 'through'),\n              to = Point.readNamed(args, 'to'),\n              props = Base.getNamed(args),\n              path = new Path(props && props.insert == false && Item.NO_INSERT);\n          path.moveTo(from);\n          path.arcTo(through, to);\n          return path.set(props);\n        },\n        RegularPolygon: function () {\n          var args = arguments,\n              center = Point.readNamed(args, 'center'),\n              sides = Base.readNamed(args, 'sides'),\n              radius = Base.readNamed(args, 'radius'),\n              step = 360 / sides,\n              three = sides % 3 === 0,\n              vector = new Point(0, three ? -radius : radius),\n              offset = three ? -1 : 0.5,\n              segments = new Array(sides);\n\n          for (var i = 0; i < sides; i++) segments[i] = new Segment(center.add(vector.rotate((i + offset) * step)));\n\n          return createPath(segments, true, args);\n        },\n        Star: function () {\n          var args = arguments,\n              center = Point.readNamed(args, 'center'),\n              points = Base.readNamed(args, 'points') * 2,\n              radius1 = Base.readNamed(args, 'radius1'),\n              radius2 = Base.readNamed(args, 'radius2'),\n              step = 360 / points,\n              vector = new Point(0, -1),\n              segments = new Array(points);\n\n          for (var i = 0; i < points; i++) segments[i] = new Segment(center.add(vector.rotate(step * i).multiply(i % 2 ? radius2 : radius1)));\n\n          return createPath(segments, true, args);\n        }\n      };\n    }()\n  });\n  var CompoundPath = PathItem.extend({\n    _class: 'CompoundPath',\n    _serializeFields: {\n      children: []\n    },\n    beans: true,\n    initialize: function CompoundPath(arg) {\n      this._children = [];\n      this._namedChildren = {};\n\n      if (!this._initialize(arg)) {\n        if (typeof arg === 'string') {\n          this.setPathData(arg);\n        } else {\n          this.addChildren(Array.isArray(arg) ? arg : arguments);\n        }\n      }\n    },\n    insertChildren: function insertChildren(index, items) {\n      var list = items,\n          first = list[0];\n      if (first && typeof first[0] === 'number') list = [list];\n\n      for (var i = items.length - 1; i >= 0; i--) {\n        var item = list[i];\n        if (list === items && !(item instanceof Path)) list = Base.slice(list);\n\n        if (Array.isArray(item)) {\n          list[i] = new Path({\n            segments: item,\n            insert: false\n          });\n        } else if (item instanceof CompoundPath) {\n          list.splice.apply(list, [i, 1].concat(item.removeChildren()));\n          item.remove();\n        }\n      }\n\n      return insertChildren.base.call(this, index, list);\n    },\n    reduce: function reduce(options) {\n      var children = this._children;\n\n      for (var i = children.length - 1; i >= 0; i--) {\n        var path = children[i].reduce(options);\n        if (path.isEmpty()) path.remove();\n      }\n\n      if (!children.length) {\n        var path = new Path(Item.NO_INSERT);\n        path.copyAttributes(this);\n        path.insertAbove(this);\n        this.remove();\n        return path;\n      }\n\n      return reduce.base.call(this);\n    },\n    isClosed: function () {\n      var children = this._children;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        if (!children[i]._closed) return false;\n      }\n\n      return true;\n    },\n    setClosed: function (closed) {\n      var children = this._children;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        children[i].setClosed(closed);\n      }\n    },\n    getFirstSegment: function () {\n      var first = this.getFirstChild();\n      return first && first.getFirstSegment();\n    },\n    getLastSegment: function () {\n      var last = this.getLastChild();\n      return last && last.getLastSegment();\n    },\n    getCurves: function () {\n      var children = this._children,\n          curves = [];\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        Base.push(curves, children[i].getCurves());\n      }\n\n      return curves;\n    },\n    getFirstCurve: function () {\n      var first = this.getFirstChild();\n      return first && first.getFirstCurve();\n    },\n    getLastCurve: function () {\n      var last = this.getLastChild();\n      return last && last.getLastCurve();\n    },\n    getArea: function () {\n      var children = this._children,\n          area = 0;\n\n      for (var i = 0, l = children.length; i < l; i++) area += children[i].getArea();\n\n      return area;\n    },\n    getLength: function () {\n      var children = this._children,\n          length = 0;\n\n      for (var i = 0, l = children.length; i < l; i++) length += children[i].getLength();\n\n      return length;\n    },\n    getPathData: function (_matrix, _precision) {\n      var children = this._children,\n          paths = [];\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        var child = children[i],\n            mx = child._matrix;\n        paths.push(child.getPathData(_matrix && !mx.isIdentity() ? _matrix.appended(mx) : _matrix, _precision));\n      }\n\n      return paths.join('');\n    },\n    _hitTestChildren: function _hitTestChildren(point, options, viewMatrix) {\n      return _hitTestChildren.base.call(this, point, options.class === Path || options.type === 'path' ? options : Base.set({}, options, {\n        fill: false\n      }), viewMatrix);\n    },\n    _draw: function (ctx, param, viewMatrix, strokeMatrix) {\n      var children = this._children;\n      if (!children.length) return;\n      param = param.extend({\n        dontStart: true,\n        dontFinish: true\n      });\n      ctx.beginPath();\n\n      for (var i = 0, l = children.length; i < l; i++) children[i].draw(ctx, param, strokeMatrix);\n\n      if (!param.clip) {\n        this._setStyles(ctx, param, viewMatrix);\n\n        var style = this._style;\n\n        if (style.hasFill()) {\n          ctx.fill(style.getFillRule());\n          ctx.shadowColor = 'rgba(0,0,0,0)';\n        }\n\n        if (style.hasStroke()) ctx.stroke();\n      }\n    },\n    _drawSelected: function (ctx, matrix, selectionItems) {\n      var children = this._children;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        var child = children[i],\n            mx = child._matrix;\n\n        if (!selectionItems[child._id]) {\n          child._drawSelected(ctx, mx.isIdentity() ? matrix : matrix.appended(mx));\n        }\n      }\n    }\n  }, new function () {\n    function getCurrentPath(that, check) {\n      var children = that._children;\n      if (check && !children.length) throw new Error('Use a moveTo() command first');\n      return children[children.length - 1];\n    }\n\n    return Base.each(['lineTo', 'cubicCurveTo', 'quadraticCurveTo', 'curveTo', 'arcTo', 'lineBy', 'cubicCurveBy', 'quadraticCurveBy', 'curveBy', 'arcBy'], function (key) {\n      this[key] = function () {\n        var path = getCurrentPath(this, true);\n        path[key].apply(path, arguments);\n      };\n    }, {\n      moveTo: function () {\n        var current = getCurrentPath(this),\n            path = current && current.isEmpty() ? current : new Path(Item.NO_INSERT);\n        if (path !== current) this.addChild(path);\n        path.moveTo.apply(path, arguments);\n      },\n      moveBy: function () {\n        var current = getCurrentPath(this, true),\n            last = current && current.getLastSegment(),\n            point = Point.read(arguments);\n        this.moveTo(last ? point.add(last._point) : point);\n      },\n      closePath: function (tolerance) {\n        getCurrentPath(this, true).closePath(tolerance);\n      }\n    });\n  }(), Base.each(['reverse', 'flatten', 'simplify', 'smooth'], function (key) {\n    this[key] = function (param) {\n      var children = this._children,\n          res;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        res = children[i][key](param) || res;\n      }\n\n      return res;\n    };\n  }, {}));\n  PathItem.inject(new function () {\n    var min = Math.min,\n        max = Math.max,\n        abs = Math.abs,\n        operators = {\n      unite: {\n        '1': true,\n        '2': true\n      },\n      intersect: {\n        '2': true\n      },\n      subtract: {\n        '1': true\n      },\n      exclude: {\n        '1': true,\n        '-1': true\n      }\n    };\n\n    function getPaths(path) {\n      return path._children || [path];\n    }\n\n    function preparePath(path, resolve) {\n      var res = path.clone(false).reduce({\n        simplify: true\n      }).transform(null, true, true);\n\n      if (resolve) {\n        var paths = getPaths(res);\n\n        for (var i = 0, l = paths.length; i < l; i++) {\n          var path = paths[i];\n\n          if (!path._closed && !path.isEmpty()) {\n            path.closePath(1e-12);\n            path.getFirstSegment().setHandleIn(0, 0);\n            path.getLastSegment().setHandleOut(0, 0);\n          }\n        }\n\n        res = res.resolveCrossings().reorient(res.getFillRule() === 'nonzero', true);\n      }\n\n      return res;\n    }\n\n    function createResult(paths, simplify, path1, path2, options) {\n      var result = new CompoundPath(Item.NO_INSERT);\n      result.addChildren(paths, true);\n      result = result.reduce({\n        simplify: simplify\n      });\n\n      if (!(options && options.insert == false)) {\n        result.insertAbove(path2 && path1.isSibling(path2) && path1.getIndex() < path2.getIndex() ? path2 : path1);\n      }\n\n      result.copyAttributes(path1, true);\n      return result;\n    }\n\n    function filterIntersection(inter) {\n      return inter.hasOverlap() || inter.isCrossing();\n    }\n\n    function traceBoolean(path1, path2, operation, options) {\n      if (options && (options.trace == false || options.stroke) && /^(subtract|intersect)$/.test(operation)) return splitBoolean(path1, path2, operation);\n\n      var _path1 = preparePath(path1, true),\n          _path2 = path2 && path1 !== path2 && preparePath(path2, true),\n          operator = operators[operation];\n\n      operator[operation] = true;\n      if (_path2 && (operator.subtract || operator.exclude) ^ (_path2.isClockwise() ^ _path1.isClockwise())) _path2.reverse();\n\n      var crossings = divideLocations(CurveLocation.expand(_path1.getIntersections(_path2, filterIntersection))),\n          paths1 = getPaths(_path1),\n          paths2 = _path2 && getPaths(_path2),\n          segments = [],\n          curves = [],\n          paths;\n\n      function collectPaths(paths) {\n        for (var i = 0, l = paths.length; i < l; i++) {\n          var path = paths[i];\n          Base.push(segments, path._segments);\n          Base.push(curves, path.getCurves());\n          path._overlapsOnly = true;\n        }\n      }\n\n      function getCurves(indices) {\n        var list = [];\n\n        for (var i = 0, l = indices && indices.length; i < l; i++) {\n          list.push(curves[indices[i]]);\n        }\n\n        return list;\n      }\n\n      if (crossings.length) {\n        collectPaths(paths1);\n        if (paths2) collectPaths(paths2);\n        var curvesValues = new Array(curves.length);\n\n        for (var i = 0, l = curves.length; i < l; i++) {\n          curvesValues[i] = curves[i].getValues();\n        }\n\n        var curveCollisions = CollisionDetection.findCurveBoundsCollisions(curvesValues, curvesValues, 0, true);\n        var curveCollisionsMap = {};\n\n        for (var i = 0; i < curves.length; i++) {\n          var curve = curves[i],\n              id = curve._path._id,\n              map = curveCollisionsMap[id] = curveCollisionsMap[id] || {};\n          map[curve.getIndex()] = {\n            hor: getCurves(curveCollisions[i].hor),\n            ver: getCurves(curveCollisions[i].ver)\n          };\n        }\n\n        for (var i = 0, l = crossings.length; i < l; i++) {\n          propagateWinding(crossings[i]._segment, _path1, _path2, curveCollisionsMap, operator);\n        }\n\n        for (var i = 0, l = segments.length; i < l; i++) {\n          var segment = segments[i],\n              inter = segment._intersection;\n\n          if (!segment._winding) {\n            propagateWinding(segment, _path1, _path2, curveCollisionsMap, operator);\n          }\n\n          if (!(inter && inter._overlap)) segment._path._overlapsOnly = false;\n        }\n\n        paths = tracePaths(segments, operator);\n      } else {\n        paths = reorientPaths(paths2 ? paths1.concat(paths2) : paths1.slice(), function (w) {\n          return !!operator[w];\n        });\n      }\n\n      return createResult(paths, true, path1, path2, options);\n    }\n\n    function splitBoolean(path1, path2, operation) {\n      var _path1 = preparePath(path1),\n          _path2 = preparePath(path2),\n          crossings = _path1.getIntersections(_path2, filterIntersection),\n          subtract = operation === 'subtract',\n          divide = operation === 'divide',\n          added = {},\n          paths = [];\n\n      function addPath(path) {\n        if (!added[path._id] && (divide || _path2.contains(path.getPointAt(path.getLength() / 2)) ^ subtract)) {\n          paths.unshift(path);\n          return added[path._id] = true;\n        }\n      }\n\n      for (var i = crossings.length - 1; i >= 0; i--) {\n        var path = crossings[i].split();\n\n        if (path) {\n          if (addPath(path)) path.getFirstSegment().setHandleIn(0, 0);\n\n          _path1.getLastSegment().setHandleOut(0, 0);\n        }\n      }\n\n      addPath(_path1);\n      return createResult(paths, false, path1, path2);\n    }\n\n    function linkIntersections(from, to) {\n      var prev = from;\n\n      while (prev) {\n        if (prev === to) return;\n        prev = prev._previous;\n      }\n\n      while (from._next && from._next !== to) from = from._next;\n\n      if (!from._next) {\n        while (to._previous) to = to._previous;\n\n        from._next = to;\n        to._previous = from;\n      }\n    }\n\n    function clearCurveHandles(curves) {\n      for (var i = curves.length - 1; i >= 0; i--) curves[i].clearHandles();\n    }\n\n    function reorientPaths(paths, isInside, clockwise) {\n      var length = paths && paths.length;\n\n      if (length) {\n        var lookup = Base.each(paths, function (path, i) {\n          this[path._id] = {\n            container: null,\n            winding: path.isClockwise() ? 1 : -1,\n            index: i\n          };\n        }, {}),\n            sorted = paths.slice().sort(function (a, b) {\n          return abs(b.getArea()) - abs(a.getArea());\n        }),\n            first = sorted[0];\n        var collisions = CollisionDetection.findItemBoundsCollisions(sorted, null, Numerical.GEOMETRIC_EPSILON);\n        if (clockwise == null) clockwise = first.isClockwise();\n\n        for (var i = 0; i < length; i++) {\n          var path1 = sorted[i],\n              entry1 = lookup[path1._id],\n              containerWinding = 0,\n              indices = collisions[i];\n\n          if (indices) {\n            var point = null;\n\n            for (var j = indices.length - 1; j >= 0; j--) {\n              if (indices[j] < i) {\n                point = point || path1.getInteriorPoint();\n                var path2 = sorted[indices[j]];\n\n                if (path2.contains(point)) {\n                  var entry2 = lookup[path2._id];\n                  containerWinding = entry2.winding;\n                  entry1.winding += containerWinding;\n                  entry1.container = entry2.exclude ? entry2.container : path2;\n                  break;\n                }\n              }\n            }\n          }\n\n          if (isInside(entry1.winding) === isInside(containerWinding)) {\n            entry1.exclude = true;\n            paths[entry1.index] = null;\n          } else {\n            var container = entry1.container;\n            path1.setClockwise(container ? !container.isClockwise() : clockwise);\n          }\n        }\n      }\n\n      return paths;\n    }\n\n    function divideLocations(locations, include, clearLater) {\n      var results = include && [],\n          tMin = 1e-8,\n          tMax = 1 - tMin,\n          clearHandles = false,\n          clearCurves = clearLater || [],\n          clearLookup = clearLater && {},\n          renormalizeLocs,\n          prevCurve,\n          prevTime;\n\n      function getId(curve) {\n        return curve._path._id + '.' + curve._segment1._index;\n      }\n\n      for (var i = (clearLater && clearLater.length) - 1; i >= 0; i--) {\n        var curve = clearLater[i];\n        if (curve._path) clearLookup[getId(curve)] = true;\n      }\n\n      for (var i = locations.length - 1; i >= 0; i--) {\n        var loc = locations[i],\n            time = loc._time,\n            origTime = time,\n            exclude = include && !include(loc),\n            curve = loc._curve,\n            segment;\n\n        if (curve) {\n          if (curve !== prevCurve) {\n            clearHandles = !curve.hasHandles() || clearLookup && clearLookup[getId(curve)];\n            renormalizeLocs = [];\n            prevTime = null;\n            prevCurve = curve;\n          } else if (prevTime >= tMin) {\n            time /= prevTime;\n          }\n        }\n\n        if (exclude) {\n          if (renormalizeLocs) renormalizeLocs.push(loc);\n          continue;\n        } else if (include) {\n          results.unshift(loc);\n        }\n\n        prevTime = origTime;\n\n        if (time < tMin) {\n          segment = curve._segment1;\n        } else if (time > tMax) {\n          segment = curve._segment2;\n        } else {\n          var newCurve = curve.divideAtTime(time, true);\n          if (clearHandles) clearCurves.push(curve, newCurve);\n          segment = newCurve._segment1;\n\n          for (var j = renormalizeLocs.length - 1; j >= 0; j--) {\n            var l = renormalizeLocs[j];\n            l._time = (l._time - time) / (1 - time);\n          }\n        }\n\n        loc._setSegment(segment);\n\n        var inter = segment._intersection,\n            dest = loc._intersection;\n\n        if (inter) {\n          linkIntersections(inter, dest);\n          var other = inter;\n\n          while (other) {\n            linkIntersections(other._intersection, inter);\n            other = other._next;\n          }\n        } else {\n          segment._intersection = dest;\n        }\n      }\n\n      if (!clearLater) clearCurveHandles(clearCurves);\n      return results || locations;\n    }\n\n    function getWinding(point, curves, dir, closed, dontFlip) {\n      var curvesList = Array.isArray(curves) ? curves : curves[dir ? 'hor' : 'ver'];\n      var ia = dir ? 1 : 0,\n          io = ia ^ 1,\n          pv = [point.x, point.y],\n          pa = pv[ia],\n          po = pv[io],\n          windingEpsilon = 1e-9,\n          qualityEpsilon = 1e-6,\n          paL = pa - windingEpsilon,\n          paR = pa + windingEpsilon,\n          windingL = 0,\n          windingR = 0,\n          pathWindingL = 0,\n          pathWindingR = 0,\n          onPath = false,\n          onAnyPath = false,\n          quality = 1,\n          roots = [],\n          vPrev,\n          vClose;\n\n      function addWinding(v) {\n        var o0 = v[io + 0],\n            o3 = v[io + 6];\n\n        if (po < min(o0, o3) || po > max(o0, o3)) {\n          return;\n        }\n\n        var a0 = v[ia + 0],\n            a1 = v[ia + 2],\n            a2 = v[ia + 4],\n            a3 = v[ia + 6];\n\n        if (o0 === o3) {\n          if (a0 < paR && a3 > paL || a3 < paR && a0 > paL) {\n            onPath = true;\n          }\n\n          return;\n        }\n\n        var t = po === o0 ? 0 : po === o3 ? 1 : paL > max(a0, a1, a2, a3) || paR < min(a0, a1, a2, a3) ? 1 : Curve.solveCubic(v, io, po, roots, 0, 1) > 0 ? roots[0] : 1,\n            a = t === 0 ? a0 : t === 1 ? a3 : Curve.getPoint(v, t)[dir ? 'y' : 'x'],\n            winding = o0 > o3 ? 1 : -1,\n            windingPrev = vPrev[io] > vPrev[io + 6] ? 1 : -1,\n            a3Prev = vPrev[ia + 6];\n\n        if (po !== o0) {\n          if (a < paL) {\n            pathWindingL += winding;\n          } else if (a > paR) {\n            pathWindingR += winding;\n          } else {\n            onPath = true;\n          }\n\n          if (a > pa - qualityEpsilon && a < pa + qualityEpsilon) quality /= 2;\n        } else {\n          if (winding !== windingPrev) {\n            if (a0 < paL) {\n              pathWindingL += winding;\n            } else if (a0 > paR) {\n              pathWindingR += winding;\n            }\n          } else if (a0 != a3Prev) {\n            if (a3Prev < paR && a > paR) {\n              pathWindingR += winding;\n              onPath = true;\n            } else if (a3Prev > paL && a < paL) {\n              pathWindingL += winding;\n              onPath = true;\n            }\n          }\n\n          quality /= 4;\n        }\n\n        vPrev = v;\n        return !dontFlip && a > paL && a < paR && Curve.getTangent(v, t)[dir ? 'x' : 'y'] === 0 && getWinding(point, curves, !dir, closed, true);\n      }\n\n      function handleCurve(v) {\n        var o0 = v[io + 0],\n            o1 = v[io + 2],\n            o2 = v[io + 4],\n            o3 = v[io + 6];\n\n        if (po <= max(o0, o1, o2, o3) && po >= min(o0, o1, o2, o3)) {\n          var a0 = v[ia + 0],\n              a1 = v[ia + 2],\n              a2 = v[ia + 4],\n              a3 = v[ia + 6],\n              monoCurves = paL > max(a0, a1, a2, a3) || paR < min(a0, a1, a2, a3) ? [v] : Curve.getMonoCurves(v, dir),\n              res;\n\n          for (var i = 0, l = monoCurves.length; i < l; i++) {\n            if (res = addWinding(monoCurves[i])) return res;\n          }\n        }\n      }\n\n      for (var i = 0, l = curvesList.length; i < l; i++) {\n        var curve = curvesList[i],\n            path = curve._path,\n            v = curve.getValues(),\n            res;\n\n        if (!i || curvesList[i - 1]._path !== path) {\n          vPrev = null;\n\n          if (!path._closed) {\n            vClose = Curve.getValues(path.getLastCurve().getSegment2(), curve.getSegment1(), null, !closed);\n\n            if (vClose[io] !== vClose[io + 6]) {\n              vPrev = vClose;\n            }\n          }\n\n          if (!vPrev) {\n            vPrev = v;\n            var prev = path.getLastCurve();\n\n            while (prev && prev !== curve) {\n              var v2 = prev.getValues();\n\n              if (v2[io] !== v2[io + 6]) {\n                vPrev = v2;\n                break;\n              }\n\n              prev = prev.getPrevious();\n            }\n          }\n        }\n\n        if (res = handleCurve(v)) return res;\n\n        if (i + 1 === l || curvesList[i + 1]._path !== path) {\n          if (vClose && (res = handleCurve(vClose))) return res;\n\n          if (onPath && !pathWindingL && !pathWindingR) {\n            pathWindingL = pathWindingR = path.isClockwise(closed) ^ dir ? 1 : -1;\n          }\n\n          windingL += pathWindingL;\n          windingR += pathWindingR;\n          pathWindingL = pathWindingR = 0;\n\n          if (onPath) {\n            onAnyPath = true;\n            onPath = false;\n          }\n\n          vClose = null;\n        }\n      }\n\n      windingL = abs(windingL);\n      windingR = abs(windingR);\n      return {\n        winding: max(windingL, windingR),\n        windingL: windingL,\n        windingR: windingR,\n        quality: quality,\n        onPath: onAnyPath\n      };\n    }\n\n    function propagateWinding(segment, path1, path2, curveCollisionsMap, operator) {\n      var chain = [],\n          start = segment,\n          totalLength = 0,\n          winding;\n\n      do {\n        var curve = segment.getCurve();\n\n        if (curve) {\n          var length = curve.getLength();\n          chain.push({\n            segment: segment,\n            curve: curve,\n            length: length\n          });\n          totalLength += length;\n        }\n\n        segment = segment.getNext();\n      } while (segment && !segment._intersection && segment !== start);\n\n      var offsets = [0.5, 0.25, 0.75],\n          winding = {\n        winding: 0,\n        quality: -1\n      },\n          tMin = 1e-3,\n          tMax = 1 - tMin;\n\n      for (var i = 0; i < offsets.length && winding.quality < 0.5; i++) {\n        var length = totalLength * offsets[i];\n\n        for (var j = 0, l = chain.length; j < l; j++) {\n          var entry = chain[j],\n              curveLength = entry.length;\n\n          if (length <= curveLength) {\n            var curve = entry.curve,\n                path = curve._path,\n                parent = path._parent,\n                operand = parent instanceof CompoundPath ? parent : path,\n                t = Numerical.clamp(curve.getTimeAt(length), tMin, tMax),\n                pt = curve.getPointAtTime(t),\n                dir = abs(curve.getTangentAtTime(t).y) < Math.SQRT1_2;\n            var wind = null;\n\n            if (operator.subtract && path2) {\n              var otherPath = operand === path1 ? path2 : path1,\n                  pathWinding = otherPath._getWinding(pt, dir, true);\n\n              if (operand === path1 && pathWinding.winding || operand === path2 && !pathWinding.winding) {\n                if (pathWinding.quality < 1) {\n                  continue;\n                } else {\n                  wind = {\n                    winding: 0,\n                    quality: 1\n                  };\n                }\n              }\n            }\n\n            wind = wind || getWinding(pt, curveCollisionsMap[path._id][curve.getIndex()], dir, true);\n            if (wind.quality > winding.quality) winding = wind;\n            break;\n          }\n\n          length -= curveLength;\n        }\n      }\n\n      for (var j = chain.length - 1; j >= 0; j--) {\n        chain[j].segment._winding = winding;\n      }\n    }\n\n    function tracePaths(segments, operator) {\n      var paths = [],\n          starts;\n\n      function isValid(seg) {\n        var winding;\n        return !!(seg && !seg._visited && (!operator || operator[(winding = seg._winding || {}).winding] && !(operator.unite && winding.winding === 2 && winding.windingL && winding.windingR)));\n      }\n\n      function isStart(seg) {\n        if (seg) {\n          for (var i = 0, l = starts.length; i < l; i++) {\n            if (seg === starts[i]) return true;\n          }\n        }\n\n        return false;\n      }\n\n      function visitPath(path) {\n        var segments = path._segments;\n\n        for (var i = 0, l = segments.length; i < l; i++) {\n          segments[i]._visited = true;\n        }\n      }\n\n      function getCrossingSegments(segment, collectStarts) {\n        var inter = segment._intersection,\n            start = inter,\n            crossings = [];\n        if (collectStarts) starts = [segment];\n\n        function collect(inter, end) {\n          while (inter && inter !== end) {\n            var other = inter._segment,\n                path = other && other._path;\n\n            if (path) {\n              var next = other.getNext() || path.getFirstSegment(),\n                  nextInter = next._intersection;\n\n              if (other !== segment && (isStart(other) || isStart(next) || next && isValid(other) && (isValid(next) || nextInter && isValid(nextInter._segment)))) {\n                crossings.push(other);\n              }\n\n              if (collectStarts) starts.push(other);\n            }\n\n            inter = inter._next;\n          }\n        }\n\n        if (inter) {\n          collect(inter);\n\n          while (inter && inter._previous) inter = inter._previous;\n\n          collect(inter, start);\n        }\n\n        return crossings;\n      }\n\n      segments.sort(function (seg1, seg2) {\n        var inter1 = seg1._intersection,\n            inter2 = seg2._intersection,\n            over1 = !!(inter1 && inter1._overlap),\n            over2 = !!(inter2 && inter2._overlap),\n            path1 = seg1._path,\n            path2 = seg2._path;\n        return over1 ^ over2 ? over1 ? 1 : -1 : !inter1 ^ !inter2 ? inter1 ? 1 : -1 : path1 !== path2 ? path1._id - path2._id : seg1._index - seg2._index;\n      });\n\n      for (var i = 0, l = segments.length; i < l; i++) {\n        var seg = segments[i],\n            valid = isValid(seg),\n            path = null,\n            finished = false,\n            closed = true,\n            branches = [],\n            branch,\n            visited,\n            handleIn;\n\n        if (valid && seg._path._overlapsOnly) {\n          var path1 = seg._path,\n              path2 = seg._intersection._segment._path;\n\n          if (path1.compare(path2)) {\n            if (path1.getArea()) paths.push(path1.clone(false));\n            visitPath(path1);\n            visitPath(path2);\n            valid = false;\n          }\n        }\n\n        while (valid) {\n          var first = !path,\n              crossings = getCrossingSegments(seg, first),\n              other = crossings.shift(),\n              finished = !first && (isStart(seg) || isStart(other)),\n              cross = !finished && other;\n\n          if (first) {\n            path = new Path(Item.NO_INSERT);\n            branch = null;\n          }\n\n          if (finished) {\n            if (seg.isFirst() || seg.isLast()) closed = seg._path._closed;\n            seg._visited = true;\n            break;\n          }\n\n          if (cross && branch) {\n            branches.push(branch);\n            branch = null;\n          }\n\n          if (!branch) {\n            if (cross) crossings.push(seg);\n            branch = {\n              start: path._segments.length,\n              crossings: crossings,\n              visited: visited = [],\n              handleIn: handleIn\n            };\n          }\n\n          if (cross) seg = other;\n\n          if (!isValid(seg)) {\n            path.removeSegments(branch.start);\n\n            for (var j = 0, k = visited.length; j < k; j++) {\n              visited[j]._visited = false;\n            }\n\n            visited.length = 0;\n\n            do {\n              seg = branch && branch.crossings.shift();\n\n              if (!seg || !seg._path) {\n                seg = null;\n                branch = branches.pop();\n\n                if (branch) {\n                  visited = branch.visited;\n                  handleIn = branch.handleIn;\n                }\n              }\n            } while (branch && !isValid(seg));\n\n            if (!seg) break;\n          }\n\n          var next = seg.getNext();\n          path.add(new Segment(seg._point, handleIn, next && seg._handleOut));\n          seg._visited = true;\n          visited.push(seg);\n          seg = next || seg._path.getFirstSegment();\n          handleIn = next && next._handleIn;\n        }\n\n        if (finished) {\n          if (closed) {\n            path.getFirstSegment().setHandleIn(handleIn);\n            path.setClosed(closed);\n          }\n\n          if (path.getArea() !== 0) {\n            paths.push(path);\n          }\n        }\n      }\n\n      return paths;\n    }\n\n    return {\n      _getWinding: function (point, dir, closed) {\n        return getWinding(point, this.getCurves(), dir, closed);\n      },\n      unite: function (path, options) {\n        return traceBoolean(this, path, 'unite', options);\n      },\n      intersect: function (path, options) {\n        return traceBoolean(this, path, 'intersect', options);\n      },\n      subtract: function (path, options) {\n        return traceBoolean(this, path, 'subtract', options);\n      },\n      exclude: function (path, options) {\n        return traceBoolean(this, path, 'exclude', options);\n      },\n      divide: function (path, options) {\n        return options && (options.trace == false || options.stroke) ? splitBoolean(this, path, 'divide') : createResult([this.subtract(path, options), this.intersect(path, options)], true, this, path, options);\n      },\n      resolveCrossings: function () {\n        var children = this._children,\n            paths = children || [this];\n\n        function hasOverlap(seg, path) {\n          var inter = seg && seg._intersection;\n          return inter && inter._overlap && inter._path === path;\n        }\n\n        var hasOverlaps = false,\n            hasCrossings = false,\n            intersections = this.getIntersections(null, function (inter) {\n          return inter.hasOverlap() && (hasOverlaps = true) || inter.isCrossing() && (hasCrossings = true);\n        }),\n            clearCurves = hasOverlaps && hasCrossings && [];\n        intersections = CurveLocation.expand(intersections);\n\n        if (hasOverlaps) {\n          var overlaps = divideLocations(intersections, function (inter) {\n            return inter.hasOverlap();\n          }, clearCurves);\n\n          for (var i = overlaps.length - 1; i >= 0; i--) {\n            var overlap = overlaps[i],\n                path = overlap._path,\n                seg = overlap._segment,\n                prev = seg.getPrevious(),\n                next = seg.getNext();\n\n            if (hasOverlap(prev, path) && hasOverlap(next, path)) {\n              seg.remove();\n\n              prev._handleOut._set(0, 0);\n\n              next._handleIn._set(0, 0);\n\n              if (prev !== seg && !prev.getCurve().hasLength()) {\n                next._handleIn.set(prev._handleIn);\n\n                prev.remove();\n              }\n            }\n          }\n        }\n\n        if (hasCrossings) {\n          divideLocations(intersections, hasOverlaps && function (inter) {\n            var curve1 = inter.getCurve(),\n                seg1 = inter.getSegment(),\n                other = inter._intersection,\n                curve2 = other._curve,\n                seg2 = other._segment;\n            if (curve1 && curve2 && curve1._path && curve2._path) return true;\n            if (seg1) seg1._intersection = null;\n            if (seg2) seg2._intersection = null;\n          }, clearCurves);\n          if (clearCurves) clearCurveHandles(clearCurves);\n          paths = tracePaths(Base.each(paths, function (path) {\n            Base.push(this, path._segments);\n          }, []));\n        }\n\n        var length = paths.length,\n            item;\n\n        if (length > 1 && children) {\n          if (paths !== children) this.setChildren(paths);\n          item = this;\n        } else if (length === 1 && !children) {\n          if (paths[0] !== this) this.setSegments(paths[0].removeSegments());\n          item = this;\n        }\n\n        if (!item) {\n          item = new CompoundPath(Item.NO_INSERT);\n          item.addChildren(paths);\n          item = item.reduce();\n          item.copyAttributes(this);\n          this.replaceWith(item);\n        }\n\n        return item;\n      },\n      reorient: function (nonZero, clockwise) {\n        var children = this._children;\n\n        if (children && children.length) {\n          this.setChildren(reorientPaths(this.removeChildren(), function (w) {\n            return !!(nonZero ? w : w & 1);\n          }, clockwise));\n        } else if (clockwise !== undefined) {\n          this.setClockwise(clockwise);\n        }\n\n        return this;\n      },\n      getInteriorPoint: function () {\n        var bounds = this.getBounds(),\n            point = bounds.getCenter(true);\n\n        if (!this.contains(point)) {\n          var curves = this.getCurves(),\n              y = point.y,\n              intercepts = [],\n              roots = [];\n\n          for (var i = 0, l = curves.length; i < l; i++) {\n            var v = curves[i].getValues(),\n                o0 = v[1],\n                o1 = v[3],\n                o2 = v[5],\n                o3 = v[7];\n\n            if (y >= min(o0, o1, o2, o3) && y <= max(o0, o1, o2, o3)) {\n              var monoCurves = Curve.getMonoCurves(v);\n\n              for (var j = 0, m = monoCurves.length; j < m; j++) {\n                var mv = monoCurves[j],\n                    mo0 = mv[1],\n                    mo3 = mv[7];\n\n                if (mo0 !== mo3 && (y >= mo0 && y <= mo3 || y >= mo3 && y <= mo0)) {\n                  var x = y === mo0 ? mv[0] : y === mo3 ? mv[6] : Curve.solveCubic(mv, 1, y, roots, 0, 1) === 1 ? Curve.getPoint(mv, roots[0]).x : (mv[0] + mv[6]) / 2;\n                  intercepts.push(x);\n                }\n              }\n            }\n          }\n\n          if (intercepts.length > 1) {\n            intercepts.sort(function (a, b) {\n              return a - b;\n            });\n            point.x = (intercepts[0] + intercepts[1]) / 2;\n          }\n        }\n\n        return point;\n      }\n    };\n  }());\n  var PathFlattener = Base.extend({\n    _class: 'PathFlattener',\n    initialize: function (path, flatness, maxRecursion, ignoreStraight, matrix) {\n      var curves = [],\n          parts = [],\n          length = 0,\n          minSpan = 1 / (maxRecursion || 32),\n          segments = path._segments,\n          segment1 = segments[0],\n          segment2;\n\n      function addCurve(segment1, segment2) {\n        var curve = Curve.getValues(segment1, segment2, matrix);\n        curves.push(curve);\n        computeParts(curve, segment1._index, 0, 1);\n      }\n\n      function computeParts(curve, index, t1, t2) {\n        if (t2 - t1 > minSpan && !(ignoreStraight && Curve.isStraight(curve)) && !Curve.isFlatEnough(curve, flatness || 0.25)) {\n          var halves = Curve.subdivide(curve, 0.5),\n              tMid = (t1 + t2) / 2;\n          computeParts(halves[0], index, t1, tMid);\n          computeParts(halves[1], index, tMid, t2);\n        } else {\n          var dx = curve[6] - curve[0],\n              dy = curve[7] - curve[1],\n              dist = Math.sqrt(dx * dx + dy * dy);\n\n          if (dist > 0) {\n            length += dist;\n            parts.push({\n              offset: length,\n              curve: curve,\n              index: index,\n              time: t2\n            });\n          }\n        }\n      }\n\n      for (var i = 1, l = segments.length; i < l; i++) {\n        segment2 = segments[i];\n        addCurve(segment1, segment2);\n        segment1 = segment2;\n      }\n\n      if (path._closed) addCurve(segment2 || segment1, segments[0]);\n      this.curves = curves;\n      this.parts = parts;\n      this.length = length;\n      this.index = 0;\n    },\n    _get: function (offset) {\n      var parts = this.parts,\n          length = parts.length,\n          start,\n          i,\n          j = this.index;\n\n      for (;;) {\n        i = j;\n        if (!j || parts[--j].offset < offset) break;\n      }\n\n      for (; i < length; i++) {\n        var part = parts[i];\n\n        if (part.offset >= offset) {\n          this.index = i;\n          var prev = parts[i - 1],\n              prevTime = prev && prev.index === part.index ? prev.time : 0,\n              prevOffset = prev ? prev.offset : 0;\n          return {\n            index: part.index,\n            time: prevTime + (part.time - prevTime) * (offset - prevOffset) / (part.offset - prevOffset)\n          };\n        }\n      }\n\n      return {\n        index: parts[length - 1].index,\n        time: 1\n      };\n    },\n    drawPart: function (ctx, from, to) {\n      var start = this._get(from),\n          end = this._get(to);\n\n      for (var i = start.index, l = end.index; i <= l; i++) {\n        var curve = Curve.getPart(this.curves[i], i === start.index ? start.time : 0, i === end.index ? end.time : 1);\n        if (i === start.index) ctx.moveTo(curve[0], curve[1]);\n        ctx.bezierCurveTo.apply(ctx, curve.slice(2));\n      }\n    }\n  }, Base.each(Curve._evaluateMethods, function (name) {\n    this[name + 'At'] = function (offset) {\n      var param = this._get(offset);\n\n      return Curve[name](this.curves[param.index], param.time);\n    };\n  }, {}));\n  var PathFitter = Base.extend({\n    initialize: function (path) {\n      var points = this.points = [],\n          segments = path._segments,\n          closed = path._closed;\n\n      for (var i = 0, prev, l = segments.length; i < l; i++) {\n        var point = segments[i].point;\n\n        if (!prev || !prev.equals(point)) {\n          points.push(prev = point.clone());\n        }\n      }\n\n      if (closed) {\n        points.unshift(points[points.length - 1]);\n        points.push(points[1]);\n      }\n\n      this.closed = closed;\n    },\n    fit: function (error) {\n      var points = this.points,\n          length = points.length,\n          segments = null;\n\n      if (length > 0) {\n        segments = [new Segment(points[0])];\n\n        if (length > 1) {\n          this.fitCubic(segments, error, 0, length - 1, points[1].subtract(points[0]), points[length - 2].subtract(points[length - 1]));\n\n          if (this.closed) {\n            segments.shift();\n            segments.pop();\n          }\n        }\n      }\n\n      return segments;\n    },\n    fitCubic: function (segments, error, first, last, tan1, tan2) {\n      var points = this.points;\n\n      if (last - first === 1) {\n        var pt1 = points[first],\n            pt2 = points[last],\n            dist = pt1.getDistance(pt2) / 3;\n        this.addCurve(segments, [pt1, pt1.add(tan1.normalize(dist)), pt2.add(tan2.normalize(dist)), pt2]);\n        return;\n      }\n\n      var uPrime = this.chordLengthParameterize(first, last),\n          maxError = Math.max(error, error * error),\n          split,\n          parametersInOrder = true;\n\n      for (var i = 0; i <= 4; i++) {\n        var curve = this.generateBezier(first, last, uPrime, tan1, tan2);\n        var max = this.findMaxError(first, last, curve, uPrime);\n\n        if (max.error < error && parametersInOrder) {\n          this.addCurve(segments, curve);\n          return;\n        }\n\n        split = max.index;\n        if (max.error >= maxError) break;\n        parametersInOrder = this.reparameterize(first, last, uPrime, curve);\n        maxError = max.error;\n      }\n\n      var tanCenter = points[split - 1].subtract(points[split + 1]);\n      this.fitCubic(segments, error, first, split, tan1, tanCenter);\n      this.fitCubic(segments, error, split, last, tanCenter.negate(), tan2);\n    },\n    addCurve: function (segments, curve) {\n      var prev = segments[segments.length - 1];\n      prev.setHandleOut(curve[1].subtract(curve[0]));\n      segments.push(new Segment(curve[3], curve[2].subtract(curve[3])));\n    },\n    generateBezier: function (first, last, uPrime, tan1, tan2) {\n      var epsilon = 1e-12,\n          abs = Math.abs,\n          points = this.points,\n          pt1 = points[first],\n          pt2 = points[last],\n          C = [[0, 0], [0, 0]],\n          X = [0, 0];\n\n      for (var i = 0, l = last - first + 1; i < l; i++) {\n        var u = uPrime[i],\n            t = 1 - u,\n            b = 3 * u * t,\n            b0 = t * t * t,\n            b1 = b * t,\n            b2 = b * u,\n            b3 = u * u * u,\n            a1 = tan1.normalize(b1),\n            a2 = tan2.normalize(b2),\n            tmp = points[first + i].subtract(pt1.multiply(b0 + b1)).subtract(pt2.multiply(b2 + b3));\n        C[0][0] += a1.dot(a1);\n        C[0][1] += a1.dot(a2);\n        C[1][0] = C[0][1];\n        C[1][1] += a2.dot(a2);\n        X[0] += a1.dot(tmp);\n        X[1] += a2.dot(tmp);\n      }\n\n      var detC0C1 = C[0][0] * C[1][1] - C[1][0] * C[0][1],\n          alpha1,\n          alpha2;\n\n      if (abs(detC0C1) > epsilon) {\n        var detC0X = C[0][0] * X[1] - C[1][0] * X[0],\n            detXC1 = X[0] * C[1][1] - X[1] * C[0][1];\n        alpha1 = detXC1 / detC0C1;\n        alpha2 = detC0X / detC0C1;\n      } else {\n        var c0 = C[0][0] + C[0][1],\n            c1 = C[1][0] + C[1][1];\n        alpha1 = alpha2 = abs(c0) > epsilon ? X[0] / c0 : abs(c1) > epsilon ? X[1] / c1 : 0;\n      }\n\n      var segLength = pt2.getDistance(pt1),\n          eps = epsilon * segLength,\n          handle1,\n          handle2;\n\n      if (alpha1 < eps || alpha2 < eps) {\n        alpha1 = alpha2 = segLength / 3;\n      } else {\n        var line = pt2.subtract(pt1);\n        handle1 = tan1.normalize(alpha1);\n        handle2 = tan2.normalize(alpha2);\n\n        if (handle1.dot(line) - handle2.dot(line) > segLength * segLength) {\n          alpha1 = alpha2 = segLength / 3;\n          handle1 = handle2 = null;\n        }\n      }\n\n      return [pt1, pt1.add(handle1 || tan1.normalize(alpha1)), pt2.add(handle2 || tan2.normalize(alpha2)), pt2];\n    },\n    reparameterize: function (first, last, u, curve) {\n      for (var i = first; i <= last; i++) {\n        u[i - first] = this.findRoot(curve, this.points[i], u[i - first]);\n      }\n\n      for (var i = 1, l = u.length; i < l; i++) {\n        if (u[i] <= u[i - 1]) return false;\n      }\n\n      return true;\n    },\n    findRoot: function (curve, point, u) {\n      var curve1 = [],\n          curve2 = [];\n\n      for (var i = 0; i <= 2; i++) {\n        curve1[i] = curve[i + 1].subtract(curve[i]).multiply(3);\n      }\n\n      for (var i = 0; i <= 1; i++) {\n        curve2[i] = curve1[i + 1].subtract(curve1[i]).multiply(2);\n      }\n\n      var pt = this.evaluate(3, curve, u),\n          pt1 = this.evaluate(2, curve1, u),\n          pt2 = this.evaluate(1, curve2, u),\n          diff = pt.subtract(point),\n          df = pt1.dot(pt1) + diff.dot(pt2);\n      return Numerical.isMachineZero(df) ? u : u - diff.dot(pt1) / df;\n    },\n    evaluate: function (degree, curve, t) {\n      var tmp = curve.slice();\n\n      for (var i = 1; i <= degree; i++) {\n        for (var j = 0; j <= degree - i; j++) {\n          tmp[j] = tmp[j].multiply(1 - t).add(tmp[j + 1].multiply(t));\n        }\n      }\n\n      return tmp[0];\n    },\n    chordLengthParameterize: function (first, last) {\n      var u = [0];\n\n      for (var i = first + 1; i <= last; i++) {\n        u[i - first] = u[i - first - 1] + this.points[i].getDistance(this.points[i - 1]);\n      }\n\n      for (var i = 1, m = last - first; i <= m; i++) {\n        u[i] /= u[m];\n      }\n\n      return u;\n    },\n    findMaxError: function (first, last, curve, u) {\n      var index = Math.floor((last - first + 1) / 2),\n          maxDist = 0;\n\n      for (var i = first + 1; i < last; i++) {\n        var P = this.evaluate(3, curve, u[i - first]);\n        var v = P.subtract(this.points[i]);\n        var dist = v.x * v.x + v.y * v.y;\n\n        if (dist >= maxDist) {\n          maxDist = dist;\n          index = i;\n        }\n      }\n\n      return {\n        error: maxDist,\n        index: index\n      };\n    }\n  });\n  var TextItem = Item.extend({\n    _class: 'TextItem',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _serializeFields: {\n      content: null\n    },\n    _boundsOptions: {\n      stroke: false,\n      handle: false\n    },\n    initialize: function TextItem(arg) {\n      this._content = '';\n      this._lines = [];\n      var hasProps = arg && Base.isPlainObject(arg) && arg.x === undefined && arg.y === undefined;\n\n      this._initialize(hasProps && arg, !hasProps && Point.read(arguments));\n    },\n    _equals: function (item) {\n      return this._content === item._content;\n    },\n    copyContent: function (source) {\n      this.setContent(source._content);\n    },\n    getContent: function () {\n      return this._content;\n    },\n    setContent: function (content) {\n      this._content = '' + content;\n      this._lines = this._content.split(/\\r\\n|\\n|\\r/mg);\n\n      this._changed(521);\n    },\n    isEmpty: function () {\n      return !this._content;\n    },\n    getCharacterStyle: '#getStyle',\n    setCharacterStyle: '#setStyle',\n    getParagraphStyle: '#getStyle',\n    setParagraphStyle: '#setStyle'\n  });\n  var PointText = TextItem.extend({\n    _class: 'PointText',\n    initialize: function PointText() {\n      TextItem.apply(this, arguments);\n    },\n    getPoint: function () {\n      var point = this._matrix.getTranslation();\n\n      return new LinkedPoint(point.x, point.y, this, 'setPoint');\n    },\n    setPoint: function () {\n      var point = Point.read(arguments);\n      this.translate(point.subtract(this._matrix.getTranslation()));\n    },\n    _draw: function (ctx, param, viewMatrix) {\n      if (!this._content) return;\n\n      this._setStyles(ctx, param, viewMatrix);\n\n      var lines = this._lines,\n          style = this._style,\n          hasFill = style.hasFill(),\n          hasStroke = style.hasStroke(),\n          leading = style.getLeading(),\n          shadowColor = ctx.shadowColor;\n      ctx.font = style.getFontStyle();\n      ctx.textAlign = style.getJustification();\n\n      for (var i = 0, l = lines.length; i < l; i++) {\n        ctx.shadowColor = shadowColor;\n        var line = lines[i];\n\n        if (hasFill) {\n          ctx.fillText(line, 0, 0);\n          ctx.shadowColor = 'rgba(0,0,0,0)';\n        }\n\n        if (hasStroke) ctx.strokeText(line, 0, 0);\n        ctx.translate(0, leading);\n      }\n    },\n    _getBounds: function (matrix, options) {\n      var style = this._style,\n          lines = this._lines,\n          numLines = lines.length,\n          justification = style.getJustification(),\n          leading = style.getLeading(),\n          width = this.getView().getTextWidth(style.getFontStyle(), lines),\n          x = 0;\n      if (justification !== 'left') x -= width / (justification === 'center' ? 2 : 1);\n      var rect = new Rectangle(x, numLines ? -0.75 * leading : 0, width, numLines * leading);\n      return matrix ? matrix._transformBounds(rect, rect) : rect;\n    }\n  });\n  var Color = Base.extend(new function () {\n    var types = {\n      gray: ['gray'],\n      rgb: ['red', 'green', 'blue'],\n      hsb: ['hue', 'saturation', 'brightness'],\n      hsl: ['hue', 'saturation', 'lightness'],\n      gradient: ['gradient', 'origin', 'destination', 'highlight']\n    };\n    var componentParsers = {},\n        namedColors = {\n      transparent: [0, 0, 0, 0]\n    },\n        colorCtx;\n\n    function fromCSS(string) {\n      var match = string.match(/^#([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})?$/i) || string.match(/^#([\\da-f])([\\da-f])([\\da-f])([\\da-f])?$/i),\n          type = 'rgb',\n          components;\n\n      if (match) {\n        var amount = match[4] ? 4 : 3;\n        components = new Array(amount);\n\n        for (var i = 0; i < amount; i++) {\n          var value = match[i + 1];\n          components[i] = parseInt(value.length == 1 ? value + value : value, 16) / 255;\n        }\n      } else if (match = string.match(/^(rgb|hsl)a?\\((.*)\\)$/)) {\n        type = match[1];\n        components = match[2].trim().split(/[,\\s]+/g);\n        var isHSL = type === 'hsl';\n\n        for (var i = 0, l = Math.min(components.length, 4); i < l; i++) {\n          var component = components[i];\n          var value = parseFloat(component);\n\n          if (isHSL) {\n            if (i === 0) {\n              var unit = component.match(/([a-z]*)$/)[1];\n              value *= {\n                turn: 360,\n                rad: 180 / Math.PI,\n                grad: 0.9\n              }[unit] || 1;\n            } else if (i < 3) {\n              value /= 100;\n            }\n          } else if (i < 3) {\n            value /= /%$/.test(component) ? 100 : 255;\n          }\n\n          components[i] = value;\n        }\n      } else {\n        var color = namedColors[string];\n\n        if (!color) {\n          if (window) {\n            if (!colorCtx) {\n              colorCtx = CanvasProvider.getContext(1, 1);\n              colorCtx.globalCompositeOperation = 'copy';\n            }\n\n            colorCtx.fillStyle = 'rgba(0,0,0,0)';\n            colorCtx.fillStyle = string;\n            colorCtx.fillRect(0, 0, 1, 1);\n            var data = colorCtx.getImageData(0, 0, 1, 1).data;\n            color = namedColors[string] = [data[0] / 255, data[1] / 255, data[2] / 255];\n          } else {\n            color = [0, 0, 0];\n          }\n        }\n\n        components = color.slice();\n      }\n\n      return [type, components];\n    }\n\n    var hsbIndices = [[0, 3, 1], [2, 0, 1], [1, 0, 3], [1, 2, 0], [3, 1, 0], [0, 1, 2]];\n    var converters = {\n      'rgb-hsb': function (r, g, b) {\n        var max = Math.max(r, g, b),\n            min = Math.min(r, g, b),\n            delta = max - min,\n            h = delta === 0 ? 0 : (max == r ? (g - b) / delta + (g < b ? 6 : 0) : max == g ? (b - r) / delta + 2 : (r - g) / delta + 4) * 60;\n        return [h, max === 0 ? 0 : delta / max, max];\n      },\n      'hsb-rgb': function (h, s, b) {\n        h = (h / 60 % 6 + 6) % 6;\n        var i = Math.floor(h),\n            f = h - i,\n            i = hsbIndices[i],\n            v = [b, b * (1 - s), b * (1 - s * f), b * (1 - s * (1 - f))];\n        return [v[i[0]], v[i[1]], v[i[2]]];\n      },\n      'rgb-hsl': function (r, g, b) {\n        var max = Math.max(r, g, b),\n            min = Math.min(r, g, b),\n            delta = max - min,\n            achromatic = delta === 0,\n            h = achromatic ? 0 : (max == r ? (g - b) / delta + (g < b ? 6 : 0) : max == g ? (b - r) / delta + 2 : (r - g) / delta + 4) * 60,\n            l = (max + min) / 2,\n            s = achromatic ? 0 : l < 0.5 ? delta / (max + min) : delta / (2 - max - min);\n        return [h, s, l];\n      },\n      'hsl-rgb': function (h, s, l) {\n        h = (h / 360 % 1 + 1) % 1;\n        if (s === 0) return [l, l, l];\n        var t3s = [h + 1 / 3, h, h - 1 / 3],\n            t2 = l < 0.5 ? l * (1 + s) : l + s - l * s,\n            t1 = 2 * l - t2,\n            c = [];\n\n        for (var i = 0; i < 3; i++) {\n          var t3 = t3s[i];\n          if (t3 < 0) t3 += 1;\n          if (t3 > 1) t3 -= 1;\n          c[i] = 6 * t3 < 1 ? t1 + (t2 - t1) * 6 * t3 : 2 * t3 < 1 ? t2 : 3 * t3 < 2 ? t1 + (t2 - t1) * (2 / 3 - t3) * 6 : t1;\n        }\n\n        return c;\n      },\n      'rgb-gray': function (r, g, b) {\n        return [r * 0.2989 + g * 0.587 + b * 0.114];\n      },\n      'gray-rgb': function (g) {\n        return [g, g, g];\n      },\n      'gray-hsb': function (g) {\n        return [0, 0, g];\n      },\n      'gray-hsl': function (g) {\n        return [0, 0, g];\n      },\n      'gradient-rgb': function () {\n        return [];\n      },\n      'rgb-gradient': function () {\n        return [];\n      }\n    };\n    return Base.each(types, function (properties, type) {\n      componentParsers[type] = [];\n      Base.each(properties, function (name, index) {\n        var part = Base.capitalize(name),\n            hasOverlap = /^(hue|saturation)$/.test(name),\n            parser = componentParsers[type][index] = type === 'gradient' ? name === 'gradient' ? function (value) {\n          var current = this._components[0];\n          value = Gradient.read(Array.isArray(value) ? value : arguments, 0, {\n            readNull: true\n          });\n\n          if (current !== value) {\n            if (current) current._removeOwner(this);\n            if (value) value._addOwner(this);\n          }\n\n          return value;\n        } : function () {\n          return Point.read(arguments, 0, {\n            readNull: name === 'highlight',\n            clone: true\n          });\n        } : function (value) {\n          return value == null || isNaN(value) ? 0 : +value;\n        };\n\n        this['get' + part] = function () {\n          return this._type === type || hasOverlap && /^hs[bl]$/.test(this._type) ? this._components[index] : this._convert(type)[index];\n        };\n\n        this['set' + part] = function (value) {\n          if (this._type !== type && !(hasOverlap && /^hs[bl]$/.test(this._type))) {\n            this._components = this._convert(type);\n            this._properties = types[type];\n            this._type = type;\n          }\n\n          this._components[index] = parser.call(this, value);\n\n          this._changed();\n        };\n      }, this);\n    }, {\n      _class: 'Color',\n      _readIndex: true,\n      initialize: function Color(arg) {\n        var args = arguments,\n            reading = this.__read,\n            read = 0,\n            type,\n            components,\n            alpha,\n            values;\n\n        if (Array.isArray(arg)) {\n          args = arg;\n          arg = args[0];\n        }\n\n        var argType = arg != null && typeof arg;\n\n        if (argType === 'string' && arg in types) {\n          type = arg;\n          arg = args[1];\n\n          if (Array.isArray(arg)) {\n            components = arg;\n            alpha = args[2];\n          } else {\n            if (reading) read = 1;\n            args = Base.slice(args, 1);\n            argType = typeof arg;\n          }\n        }\n\n        if (!components) {\n          values = argType === 'number' ? args : argType === 'object' && arg.length != null ? arg : null;\n\n          if (values) {\n            if (!type) type = values.length >= 3 ? 'rgb' : 'gray';\n            var length = types[type].length;\n            alpha = values[length];\n\n            if (reading) {\n              read += values === arguments ? length + (alpha != null ? 1 : 0) : 1;\n            }\n\n            if (values.length > length) values = Base.slice(values, 0, length);\n          } else if (argType === 'string') {\n            var converted = fromCSS(arg);\n            type = converted[0];\n            components = converted[1];\n\n            if (components.length === 4) {\n              alpha = components[3];\n              components.length--;\n            }\n          } else if (argType === 'object') {\n            if (arg.constructor === Color) {\n              type = arg._type;\n              components = arg._components.slice();\n              alpha = arg._alpha;\n\n              if (type === 'gradient') {\n                for (var i = 1, l = components.length; i < l; i++) {\n                  var point = components[i];\n                  if (point) components[i] = point.clone();\n                }\n              }\n            } else if (arg.constructor === Gradient) {\n              type = 'gradient';\n              values = args;\n            } else {\n              type = 'hue' in arg ? 'lightness' in arg ? 'hsl' : 'hsb' : 'gradient' in arg || 'stops' in arg || 'radial' in arg ? 'gradient' : 'gray' in arg ? 'gray' : 'rgb';\n              var properties = types[type],\n                  parsers = componentParsers[type];\n              this._components = components = [];\n\n              for (var i = 0, l = properties.length; i < l; i++) {\n                var value = arg[properties[i]];\n\n                if (value == null && !i && type === 'gradient' && 'stops' in arg) {\n                  value = {\n                    stops: arg.stops,\n                    radial: arg.radial\n                  };\n                }\n\n                value = parsers[i].call(this, value);\n                if (value != null) components[i] = value;\n              }\n\n              alpha = arg.alpha;\n            }\n          }\n\n          if (reading && type) read = 1;\n        }\n\n        this._type = type || 'rgb';\n\n        if (!components) {\n          this._components = components = [];\n          var parsers = componentParsers[this._type];\n\n          for (var i = 0, l = parsers.length; i < l; i++) {\n            var value = parsers[i].call(this, values && values[i]);\n            if (value != null) components[i] = value;\n          }\n        }\n\n        this._components = components;\n        this._properties = types[this._type];\n        this._alpha = alpha;\n        if (reading) this.__read = read;\n        return this;\n      },\n      set: '#initialize',\n      _serialize: function (options, dictionary) {\n        var components = this.getComponents();\n        return Base.serialize(/^(gray|rgb)$/.test(this._type) ? components : [this._type].concat(components), options, true, dictionary);\n      },\n      _changed: function () {\n        this._canvasStyle = null;\n\n        if (this._owner) {\n          if (this._setter) {\n            this._owner[this._setter](this);\n          } else {\n            this._owner._changed(129);\n          }\n        }\n      },\n      _convert: function (type) {\n        var converter;\n        return this._type === type ? this._components.slice() : (converter = converters[this._type + '-' + type]) ? converter.apply(this, this._components) : converters['rgb-' + type].apply(this, converters[this._type + '-rgb'].apply(this, this._components));\n      },\n      convert: function (type) {\n        return new Color(type, this._convert(type), this._alpha);\n      },\n      getType: function () {\n        return this._type;\n      },\n      setType: function (type) {\n        this._components = this._convert(type);\n        this._properties = types[type];\n        this._type = type;\n      },\n      getComponents: function () {\n        var components = this._components.slice();\n\n        if (this._alpha != null) components.push(this._alpha);\n        return components;\n      },\n      getAlpha: function () {\n        return this._alpha != null ? this._alpha : 1;\n      },\n      setAlpha: function (alpha) {\n        this._alpha = alpha == null ? null : Math.min(Math.max(alpha, 0), 1);\n\n        this._changed();\n      },\n      hasAlpha: function () {\n        return this._alpha != null;\n      },\n      equals: function (color) {\n        var col = Base.isPlainValue(color, true) ? Color.read(arguments) : color;\n        return col === this || col && this._class === col._class && this._type === col._type && this.getAlpha() === col.getAlpha() && Base.equals(this._components, col._components) || false;\n      },\n      toString: function () {\n        var properties = this._properties,\n            parts = [],\n            isGradient = this._type === 'gradient',\n            f = Formatter.instance;\n\n        for (var i = 0, l = properties.length; i < l; i++) {\n          var value = this._components[i];\n          if (value != null) parts.push(properties[i] + ': ' + (isGradient ? value : f.number(value)));\n        }\n\n        if (this._alpha != null) parts.push('alpha: ' + f.number(this._alpha));\n        return '{ ' + parts.join(', ') + ' }';\n      },\n      toCSS: function (hex) {\n        var components = this._convert('rgb'),\n            alpha = hex || this._alpha == null ? 1 : this._alpha;\n\n        function convert(val) {\n          return Math.round((val < 0 ? 0 : val > 1 ? 1 : val) * 255);\n        }\n\n        components = [convert(components[0]), convert(components[1]), convert(components[2])];\n        if (alpha < 1) components.push(alpha < 0 ? 0 : alpha);\n        return hex ? '#' + ((1 << 24) + (components[0] << 16) + (components[1] << 8) + components[2]).toString(16).slice(1) : (components.length == 4 ? 'rgba(' : 'rgb(') + components.join(',') + ')';\n      },\n      toCanvasStyle: function (ctx, matrix) {\n        if (this._canvasStyle) return this._canvasStyle;\n        if (this._type !== 'gradient') return this._canvasStyle = this.toCSS();\n        var components = this._components,\n            gradient = components[0],\n            stops = gradient._stops,\n            origin = components[1],\n            destination = components[2],\n            highlight = components[3],\n            inverse = matrix && matrix.inverted(),\n            canvasGradient;\n\n        if (inverse) {\n          origin = inverse._transformPoint(origin);\n          destination = inverse._transformPoint(destination);\n          if (highlight) highlight = inverse._transformPoint(highlight);\n        }\n\n        if (gradient._radial) {\n          var radius = destination.getDistance(origin);\n\n          if (highlight) {\n            var vector = highlight.subtract(origin);\n            if (vector.getLength() > radius) highlight = origin.add(vector.normalize(radius - 0.1));\n          }\n\n          var start = highlight || origin;\n          canvasGradient = ctx.createRadialGradient(start.x, start.y, 0, origin.x, origin.y, radius);\n        } else {\n          canvasGradient = ctx.createLinearGradient(origin.x, origin.y, destination.x, destination.y);\n        }\n\n        for (var i = 0, l = stops.length; i < l; i++) {\n          var stop = stops[i],\n              offset = stop._offset;\n          canvasGradient.addColorStop(offset == null ? i / (l - 1) : offset, stop._color.toCanvasStyle());\n        }\n\n        return this._canvasStyle = canvasGradient;\n      },\n      transform: function (matrix) {\n        if (this._type === 'gradient') {\n          var components = this._components;\n\n          for (var i = 1, l = components.length; i < l; i++) {\n            var point = components[i];\n\n            matrix._transformPoint(point, point, true);\n          }\n\n          this._changed();\n        }\n      },\n      statics: {\n        _types: types,\n        random: function () {\n          var random = Math.random;\n          return new Color(random(), random(), random());\n        },\n        _setOwner: function (color, owner, setter) {\n          if (color) {\n            if (color._owner && owner && color._owner !== owner) {\n              color = color.clone();\n            }\n\n            if (!color._owner ^ !owner) {\n              color._owner = owner || null;\n              color._setter = setter || null;\n            }\n          }\n\n          return color;\n        }\n      }\n    });\n  }(), new function () {\n    var operators = {\n      add: function (a, b) {\n        return a + b;\n      },\n      subtract: function (a, b) {\n        return a - b;\n      },\n      multiply: function (a, b) {\n        return a * b;\n      },\n      divide: function (a, b) {\n        return a / b;\n      }\n    };\n    return Base.each(operators, function (operator, name) {\n      this[name] = function (color) {\n        color = Color.read(arguments);\n\n        var type = this._type,\n            components1 = this._components,\n            components2 = color._convert(type);\n\n        for (var i = 0, l = components1.length; i < l; i++) components2[i] = operator(components1[i], components2[i]);\n\n        return new Color(type, components2, this._alpha != null ? operator(this._alpha, color.getAlpha()) : null);\n      };\n    }, {});\n  }());\n  var Gradient = Base.extend({\n    _class: 'Gradient',\n    initialize: function Gradient(stops, radial) {\n      this._id = UID.get();\n\n      if (stops && Base.isPlainObject(stops)) {\n        this.set(stops);\n        stops = radial = null;\n      }\n\n      if (this._stops == null) {\n        this.setStops(stops || ['white', 'black']);\n      }\n\n      if (this._radial == null) {\n        this.setRadial(typeof radial === 'string' && radial === 'radial' || radial || false);\n      }\n    },\n    _serialize: function (options, dictionary) {\n      return dictionary.add(this, function () {\n        return Base.serialize([this._stops, this._radial], options, true, dictionary);\n      });\n    },\n    _changed: function () {\n      for (var i = 0, l = this._owners && this._owners.length; i < l; i++) {\n        this._owners[i]._changed();\n      }\n    },\n    _addOwner: function (color) {\n      if (!this._owners) this._owners = [];\n\n      this._owners.push(color);\n    },\n    _removeOwner: function (color) {\n      var index = this._owners ? this._owners.indexOf(color) : -1;\n\n      if (index != -1) {\n        this._owners.splice(index, 1);\n\n        if (!this._owners.length) this._owners = undefined;\n      }\n    },\n    clone: function () {\n      var stops = [];\n\n      for (var i = 0, l = this._stops.length; i < l; i++) {\n        stops[i] = this._stops[i].clone();\n      }\n\n      return new Gradient(stops, this._radial);\n    },\n    getStops: function () {\n      return this._stops;\n    },\n    setStops: function (stops) {\n      if (stops.length < 2) {\n        throw new Error('Gradient stop list needs to contain at least two stops.');\n      }\n\n      var _stops = this._stops;\n\n      if (_stops) {\n        for (var i = 0, l = _stops.length; i < l; i++) _stops[i]._owner = undefined;\n      }\n\n      _stops = this._stops = GradientStop.readList(stops, 0, {\n        clone: true\n      });\n\n      for (var i = 0, l = _stops.length; i < l; i++) _stops[i]._owner = this;\n\n      this._changed();\n    },\n    getRadial: function () {\n      return this._radial;\n    },\n    setRadial: function (radial) {\n      this._radial = radial;\n\n      this._changed();\n    },\n    equals: function (gradient) {\n      if (gradient === this) return true;\n\n      if (gradient && this._class === gradient._class) {\n        var stops1 = this._stops,\n            stops2 = gradient._stops,\n            length = stops1.length;\n\n        if (length === stops2.length) {\n          for (var i = 0; i < length; i++) {\n            if (!stops1[i].equals(stops2[i])) return false;\n          }\n\n          return true;\n        }\n      }\n\n      return false;\n    }\n  });\n  var GradientStop = Base.extend({\n    _class: 'GradientStop',\n    initialize: function GradientStop(arg0, arg1) {\n      var color = arg0,\n          offset = arg1;\n\n      if (typeof arg0 === 'object' && arg1 === undefined) {\n        if (Array.isArray(arg0) && typeof arg0[0] !== 'number') {\n          color = arg0[0];\n          offset = arg0[1];\n        } else if ('color' in arg0 || 'offset' in arg0 || 'rampPoint' in arg0) {\n          color = arg0.color;\n          offset = arg0.offset || arg0.rampPoint || 0;\n        }\n      }\n\n      this.setColor(color);\n      this.setOffset(offset);\n    },\n    clone: function () {\n      return new GradientStop(this._color.clone(), this._offset);\n    },\n    _serialize: function (options, dictionary) {\n      var color = this._color,\n          offset = this._offset;\n      return Base.serialize(offset == null ? [color] : [color, offset], options, true, dictionary);\n    },\n    _changed: function () {\n      if (this._owner) this._owner._changed(129);\n    },\n    getOffset: function () {\n      return this._offset;\n    },\n    setOffset: function (offset) {\n      this._offset = offset;\n\n      this._changed();\n    },\n    getRampPoint: '#getOffset',\n    setRampPoint: '#setOffset',\n    getColor: function () {\n      return this._color;\n    },\n    setColor: function () {\n      Color._setOwner(this._color, null);\n\n      this._color = Color._setOwner(Color.read(arguments, 0), this, 'setColor');\n\n      this._changed();\n    },\n    equals: function (stop) {\n      return stop === this || stop && this._class === stop._class && this._color.equals(stop._color) && this._offset == stop._offset || false;\n    }\n  });\n  var Style = Base.extend(new function () {\n    var itemDefaults = {\n      fillColor: null,\n      fillRule: 'nonzero',\n      strokeColor: null,\n      strokeWidth: 1,\n      strokeCap: 'butt',\n      strokeJoin: 'miter',\n      strokeScaling: true,\n      miterLimit: 10,\n      dashOffset: 0,\n      dashArray: [],\n      shadowColor: null,\n      shadowBlur: 0,\n      shadowOffset: new Point(),\n      selectedColor: null\n    },\n        groupDefaults = Base.set({}, itemDefaults, {\n      fontFamily: 'sans-serif',\n      fontWeight: 'normal',\n      fontSize: 12,\n      leading: null,\n      justification: 'left'\n    }),\n        textDefaults = Base.set({}, groupDefaults, {\n      fillColor: new Color()\n    }),\n        flags = {\n      strokeWidth: 193,\n      strokeCap: 193,\n      strokeJoin: 193,\n      strokeScaling: 201,\n      miterLimit: 193,\n      fontFamily: 9,\n      fontWeight: 9,\n      fontSize: 9,\n      font: 9,\n      leading: 9,\n      justification: 9\n    },\n        item = {\n      beans: true\n    },\n        fields = {\n      _class: 'Style',\n      beans: true,\n      initialize: function Style(style, _owner, _project) {\n        this._values = {};\n        this._owner = _owner;\n        this._project = _owner && _owner._project || _project || paper.project;\n        this._defaults = !_owner || _owner instanceof Group ? groupDefaults : _owner instanceof TextItem ? textDefaults : itemDefaults;\n        if (style) this.set(style);\n      }\n    };\n    Base.each(groupDefaults, function (value, key) {\n      var isColor = /Color$/.test(key),\n          isPoint = key === 'shadowOffset',\n          part = Base.capitalize(key),\n          flag = flags[key],\n          set = 'set' + part,\n          get = 'get' + part;\n\n      fields[set] = function (value) {\n        var owner = this._owner,\n            children = owner && owner._children,\n            applyToChildren = children && children.length > 0 && !(owner instanceof CompoundPath);\n\n        if (applyToChildren) {\n          for (var i = 0, l = children.length; i < l; i++) children[i]._style[set](value);\n        }\n\n        if ((key === 'selectedColor' || !applyToChildren) && key in this._defaults) {\n          var old = this._values[key];\n\n          if (old !== value) {\n            if (isColor) {\n              if (old) {\n                Color._setOwner(old, null);\n\n                old._canvasStyle = null;\n              }\n\n              if (value && value.constructor === Color) {\n                value = Color._setOwner(value, owner, applyToChildren && set);\n              }\n            }\n\n            this._values[key] = value;\n            if (owner) owner._changed(flag || 129);\n          }\n        }\n      };\n\n      fields[get] = function (_dontMerge) {\n        var owner = this._owner,\n            children = owner && owner._children,\n            applyToChildren = children && children.length > 0 && !(owner instanceof CompoundPath),\n            value;\n\n        if (applyToChildren && !_dontMerge) {\n          for (var i = 0, l = children.length; i < l; i++) {\n            var childValue = children[i]._style[get]();\n\n            if (!i) {\n              value = childValue;\n            } else if (!Base.equals(value, childValue)) {\n              return undefined;\n            }\n          }\n        } else if (key in this._defaults) {\n          var value = this._values[key];\n\n          if (value === undefined) {\n            value = this._defaults[key];\n\n            if (value && value.clone) {\n              value = value.clone();\n            }\n          } else {\n            var ctor = isColor ? Color : isPoint ? Point : null;\n\n            if (ctor && !(value && value.constructor === ctor)) {\n              this._values[key] = value = ctor.read([value], 0, {\n                readNull: true,\n                clone: true\n              });\n            }\n          }\n        }\n\n        if (value && isColor) {\n          value = Color._setOwner(value, owner, applyToChildren && set);\n        }\n\n        return value;\n      };\n\n      item[get] = function (_dontMerge) {\n        return this._style[get](_dontMerge);\n      };\n\n      item[set] = function (value) {\n        this._style[set](value);\n      };\n    });\n    Base.each({\n      Font: 'FontFamily',\n      WindingRule: 'FillRule'\n    }, function (value, key) {\n      var get = 'get' + key,\n          set = 'set' + key;\n      fields[get] = item[get] = '#get' + value;\n      fields[set] = item[set] = '#set' + value;\n    });\n    Item.inject(item);\n    return fields;\n  }(), {\n    set: function (style) {\n      var isStyle = style instanceof Style,\n          values = isStyle ? style._values : style;\n\n      if (values) {\n        for (var key in values) {\n          if (key in this._defaults) {\n            var value = values[key];\n            this[key] = value && isStyle && value.clone ? value.clone() : value;\n          }\n        }\n      }\n    },\n    equals: function (style) {\n      function compare(style1, style2, secondary) {\n        var values1 = style1._values,\n            values2 = style2._values,\n            defaults2 = style2._defaults;\n\n        for (var key in values1) {\n          var value1 = values1[key],\n              value2 = values2[key];\n          if (!(secondary && key in values2) && !Base.equals(value1, value2 === undefined ? defaults2[key] : value2)) return false;\n        }\n\n        return true;\n      }\n\n      return style === this || style && this._class === style._class && compare(this, style) && compare(style, this, true) || false;\n    },\n    _dispose: function () {\n      var color;\n      color = this.getFillColor();\n      if (color) color._canvasStyle = null;\n      color = this.getStrokeColor();\n      if (color) color._canvasStyle = null;\n      color = this.getShadowColor();\n      if (color) color._canvasStyle = null;\n    },\n    hasFill: function () {\n      var color = this.getFillColor();\n      return !!color && color.alpha > 0;\n    },\n    hasStroke: function () {\n      var color = this.getStrokeColor();\n      return !!color && color.alpha > 0 && this.getStrokeWidth() > 0;\n    },\n    hasShadow: function () {\n      var color = this.getShadowColor();\n      return !!color && color.alpha > 0 && (this.getShadowBlur() > 0 || !this.getShadowOffset().isZero());\n    },\n    getView: function () {\n      return this._project._view;\n    },\n    getFontStyle: function () {\n      var fontSize = this.getFontSize();\n      return this.getFontWeight() + ' ' + fontSize + (/[a-z]/i.test(fontSize + '') ? ' ' : 'px ') + this.getFontFamily();\n    },\n    getFont: '#getFontFamily',\n    setFont: '#setFontFamily',\n    getLeading: function getLeading() {\n      var leading = getLeading.base.call(this),\n          fontSize = this.getFontSize();\n      if (/pt|em|%|px/.test(fontSize)) fontSize = this.getView().getPixelSize(fontSize);\n      return leading != null ? leading : fontSize * 1.2;\n    }\n  });\n  var DomElement = new function () {\n    function handlePrefix(el, name, set, value) {\n      var prefixes = ['', 'webkit', 'moz', 'Moz', 'ms', 'o'],\n          suffix = name[0].toUpperCase() + name.substring(1);\n\n      for (var i = 0; i < 6; i++) {\n        var prefix = prefixes[i],\n            key = prefix ? prefix + suffix : name;\n\n        if (key in el) {\n          if (set) {\n            el[key] = value;\n          } else {\n            return el[key];\n          }\n\n          break;\n        }\n      }\n    }\n\n    return {\n      getStyles: function (el) {\n        var doc = el && el.nodeType !== 9 ? el.ownerDocument : el,\n            view = doc && doc.defaultView;\n        return view && view.getComputedStyle(el, '');\n      },\n      getBounds: function (el, viewport) {\n        var doc = el.ownerDocument,\n            body = doc.body,\n            html = doc.documentElement,\n            rect;\n\n        try {\n          rect = el.getBoundingClientRect();\n        } catch (e) {\n          rect = {\n            left: 0,\n            top: 0,\n            width: 0,\n            height: 0\n          };\n        }\n\n        var x = rect.left - (html.clientLeft || body.clientLeft || 0),\n            y = rect.top - (html.clientTop || body.clientTop || 0);\n\n        if (!viewport) {\n          var view = doc.defaultView;\n          x += view.pageXOffset || html.scrollLeft || body.scrollLeft;\n          y += view.pageYOffset || html.scrollTop || body.scrollTop;\n        }\n\n        return new Rectangle(x, y, rect.width, rect.height);\n      },\n      getViewportBounds: function (el) {\n        var doc = el.ownerDocument,\n            view = doc.defaultView,\n            html = doc.documentElement;\n        return new Rectangle(0, 0, view.innerWidth || html.clientWidth, view.innerHeight || html.clientHeight);\n      },\n      getOffset: function (el, viewport) {\n        return DomElement.getBounds(el, viewport).getPoint();\n      },\n      getSize: function (el) {\n        return DomElement.getBounds(el, true).getSize();\n      },\n      isInvisible: function (el) {\n        return DomElement.getSize(el).equals(new Size(0, 0));\n      },\n      isInView: function (el) {\n        return !DomElement.isInvisible(el) && DomElement.getViewportBounds(el).intersects(DomElement.getBounds(el, true));\n      },\n      isInserted: function (el) {\n        return document.body.contains(el);\n      },\n      getPrefixed: function (el, name) {\n        return el && handlePrefix(el, name);\n      },\n      setPrefixed: function (el, name, value) {\n        if (typeof name === 'object') {\n          for (var key in name) handlePrefix(el, key, true, name[key]);\n        } else {\n          handlePrefix(el, name, true, value);\n        }\n      }\n    };\n  }();\n  var DomEvent = {\n    add: function (el, events) {\n      if (el) {\n        for (var type in events) {\n          var func = events[type],\n              parts = type.split(/[\\s,]+/g);\n\n          for (var i = 0, l = parts.length; i < l; i++) {\n            var name = parts[i];\n            var options = el === document && (name === 'touchstart' || name === 'touchmove') ? {\n              passive: false\n            } : false;\n            el.addEventListener(name, func, options);\n          }\n        }\n      }\n    },\n    remove: function (el, events) {\n      if (el) {\n        for (var type in events) {\n          var func = events[type],\n              parts = type.split(/[\\s,]+/g);\n\n          for (var i = 0, l = parts.length; i < l; i++) el.removeEventListener(parts[i], func, false);\n        }\n      }\n    },\n    getPoint: function (event) {\n      var pos = event.targetTouches ? event.targetTouches.length ? event.targetTouches[0] : event.changedTouches[0] : event;\n      return new Point(pos.pageX || pos.clientX + document.documentElement.scrollLeft, pos.pageY || pos.clientY + document.documentElement.scrollTop);\n    },\n    getTarget: function (event) {\n      return event.target || event.srcElement;\n    },\n    getRelatedTarget: function (event) {\n      return event.relatedTarget || event.toElement;\n    },\n    getOffset: function (event, target) {\n      return DomEvent.getPoint(event).subtract(DomElement.getOffset(target || DomEvent.getTarget(event)));\n    }\n  };\n  DomEvent.requestAnimationFrame = new function () {\n    var nativeRequest = DomElement.getPrefixed(window, 'requestAnimationFrame'),\n        requested = false,\n        callbacks = [],\n        timer;\n\n    function handleCallbacks() {\n      var functions = callbacks;\n      callbacks = [];\n\n      for (var i = 0, l = functions.length; i < l; i++) functions[i]();\n\n      requested = nativeRequest && callbacks.length;\n      if (requested) nativeRequest(handleCallbacks);\n    }\n\n    return function (callback) {\n      callbacks.push(callback);\n\n      if (nativeRequest) {\n        if (!requested) {\n          nativeRequest(handleCallbacks);\n          requested = true;\n        }\n      } else if (!timer) {\n        timer = setInterval(handleCallbacks, 1000 / 60);\n      }\n    };\n  }();\n  var View = Base.extend(Emitter, {\n    _class: 'View',\n    initialize: function View(project, element) {\n      function getSize(name) {\n        return element[name] || parseInt(element.getAttribute(name), 10);\n      }\n\n      function getCanvasSize() {\n        var size = DomElement.getSize(element);\n        return size.isNaN() || size.isZero() ? new Size(getSize('width'), getSize('height')) : size;\n      }\n\n      var size;\n\n      if (window && element) {\n        this._id = element.getAttribute('id');\n        if (this._id == null) element.setAttribute('id', this._id = 'paper-view-' + View._id++);\n        DomEvent.add(element, this._viewEvents);\n        var none = 'none';\n        DomElement.setPrefixed(element.style, {\n          userDrag: none,\n          userSelect: none,\n          touchCallout: none,\n          contentZooming: none,\n          tapHighlightColor: 'rgba(0,0,0,0)'\n        });\n\n        if (PaperScope.hasAttribute(element, 'resize')) {\n          var that = this;\n          DomEvent.add(window, this._windowEvents = {\n            resize: function () {\n              that.setViewSize(getCanvasSize());\n            }\n          });\n        }\n\n        size = getCanvasSize();\n\n        if (PaperScope.hasAttribute(element, 'stats') && typeof Stats !== 'undefined') {\n          this._stats = new Stats();\n          var stats = this._stats.domElement,\n              style = stats.style,\n              offset = DomElement.getOffset(element);\n          style.position = 'absolute';\n          style.left = offset.x + 'px';\n          style.top = offset.y + 'px';\n          document.body.appendChild(stats);\n        }\n      } else {\n        size = new Size(element);\n        element = null;\n      }\n\n      this._project = project;\n      this._scope = project._scope;\n      this._element = element;\n      if (!this._pixelRatio) this._pixelRatio = window && window.devicePixelRatio || 1;\n\n      this._setElementSize(size.width, size.height);\n\n      this._viewSize = size;\n\n      View._views.push(this);\n\n      View._viewsById[this._id] = this;\n      (this._matrix = new Matrix())._owner = this;\n      if (!View._focused) View._focused = this;\n      this._frameItems = {};\n      this._frameItemCount = 0;\n      this._itemEvents = {\n        native: {},\n        virtual: {}\n      };\n      this._autoUpdate = !paper.agent.node;\n      this._needsUpdate = false;\n    },\n    remove: function () {\n      if (!this._project) return false;\n      if (View._focused === this) View._focused = null;\n\n      View._views.splice(View._views.indexOf(this), 1);\n\n      delete View._viewsById[this._id];\n      var project = this._project;\n      if (project._view === this) project._view = null;\n      DomEvent.remove(this._element, this._viewEvents);\n      DomEvent.remove(window, this._windowEvents);\n      this._element = this._project = null;\n      this.off('frame');\n      this._animate = false;\n      this._frameItems = {};\n      return true;\n    },\n    _events: Base.each(Item._itemHandlers.concat(['onResize', 'onKeyDown', 'onKeyUp']), function (name) {\n      this[name] = {};\n    }, {\n      onFrame: {\n        install: function () {\n          this.play();\n        },\n        uninstall: function () {\n          this.pause();\n        }\n      }\n    }),\n    _animate: false,\n    _time: 0,\n    _count: 0,\n    getAutoUpdate: function () {\n      return this._autoUpdate;\n    },\n    setAutoUpdate: function (autoUpdate) {\n      this._autoUpdate = autoUpdate;\n      if (autoUpdate) this.requestUpdate();\n    },\n    update: function () {},\n    draw: function () {\n      this.update();\n    },\n    requestUpdate: function () {\n      if (!this._requested) {\n        var that = this;\n        DomEvent.requestAnimationFrame(function () {\n          that._requested = false;\n\n          if (that._animate) {\n            that.requestUpdate();\n            var element = that._element;\n\n            if ((!DomElement.getPrefixed(document, 'hidden') || PaperScope.getAttribute(element, 'keepalive') === 'true') && DomElement.isInView(element)) {\n              that._handleFrame();\n            }\n          }\n\n          if (that._autoUpdate) that.update();\n        });\n        this._requested = true;\n      }\n    },\n    play: function () {\n      this._animate = true;\n      this.requestUpdate();\n    },\n    pause: function () {\n      this._animate = false;\n    },\n    _handleFrame: function () {\n      paper = this._scope;\n      var now = Date.now() / 1000,\n          delta = this._last ? now - this._last : 0;\n      this._last = now;\n      this.emit('frame', new Base({\n        delta: delta,\n        time: this._time += delta,\n        count: this._count++\n      }));\n      if (this._stats) this._stats.update();\n    },\n    _animateItem: function (item, animate) {\n      var items = this._frameItems;\n\n      if (animate) {\n        items[item._id] = {\n          item: item,\n          time: 0,\n          count: 0\n        };\n        if (++this._frameItemCount === 1) this.on('frame', this._handleFrameItems);\n      } else {\n        delete items[item._id];\n\n        if (--this._frameItemCount === 0) {\n          this.off('frame', this._handleFrameItems);\n        }\n      }\n    },\n    _handleFrameItems: function (event) {\n      for (var i in this._frameItems) {\n        var entry = this._frameItems[i];\n        entry.item.emit('frame', new Base(event, {\n          time: entry.time += event.delta,\n          count: entry.count++\n        }));\n      }\n    },\n    _changed: function () {\n      this._project._changed(4097);\n\n      this._bounds = this._decomposed = undefined;\n    },\n    getElement: function () {\n      return this._element;\n    },\n    getPixelRatio: function () {\n      return this._pixelRatio;\n    },\n    getResolution: function () {\n      return this._pixelRatio * 72;\n    },\n    getViewSize: function () {\n      var size = this._viewSize;\n      return new LinkedSize(size.width, size.height, this, 'setViewSize');\n    },\n    setViewSize: function () {\n      var size = Size.read(arguments),\n          delta = size.subtract(this._viewSize);\n      if (delta.isZero()) return;\n\n      this._setElementSize(size.width, size.height);\n\n      this._viewSize.set(size);\n\n      this._changed();\n\n      this.emit('resize', {\n        size: size,\n        delta: delta\n      });\n\n      if (this._autoUpdate) {\n        this.update();\n      }\n    },\n    _setElementSize: function (width, height) {\n      var element = this._element;\n\n      if (element) {\n        if (element.width !== width) element.width = width;\n        if (element.height !== height) element.height = height;\n      }\n    },\n    getBounds: function () {\n      if (!this._bounds) this._bounds = this._matrix.inverted()._transformBounds(new Rectangle(new Point(), this._viewSize));\n      return this._bounds;\n    },\n    getSize: function () {\n      return this.getBounds().getSize();\n    },\n    isVisible: function () {\n      return DomElement.isInView(this._element);\n    },\n    isInserted: function () {\n      return DomElement.isInserted(this._element);\n    },\n    getPixelSize: function (size) {\n      var element = this._element,\n          pixels;\n\n      if (element) {\n        var parent = element.parentNode,\n            temp = document.createElement('div');\n        temp.style.fontSize = size;\n        parent.appendChild(temp);\n        pixels = parseFloat(DomElement.getStyles(temp).fontSize);\n        parent.removeChild(temp);\n      } else {\n        pixels = parseFloat(pixels);\n      }\n\n      return pixels;\n    },\n    getTextWidth: function (font, lines) {\n      return 0;\n    }\n  }, Base.each(['rotate', 'scale', 'shear', 'skew'], function (key) {\n    var rotate = key === 'rotate';\n\n    this[key] = function () {\n      var args = arguments,\n          value = (rotate ? Base : Point).read(args),\n          center = Point.read(args, 0, {\n        readNull: true\n      });\n      return this.transform(new Matrix()[key](value, center || this.getCenter(true)));\n    };\n  }, {\n    _decompose: function () {\n      return this._decomposed || (this._decomposed = this._matrix.decompose());\n    },\n    translate: function () {\n      var mx = new Matrix();\n      return this.transform(mx.translate.apply(mx, arguments));\n    },\n    getCenter: function () {\n      return this.getBounds().getCenter();\n    },\n    setCenter: function () {\n      var center = Point.read(arguments);\n      this.translate(this.getCenter().subtract(center));\n    },\n    getZoom: function () {\n      var scaling = this._decompose().scaling;\n\n      return (scaling.x + scaling.y) / 2;\n    },\n    setZoom: function (zoom) {\n      this.transform(new Matrix().scale(zoom / this.getZoom(), this.getCenter()));\n    },\n    getRotation: function () {\n      return this._decompose().rotation;\n    },\n    setRotation: function (rotation) {\n      var current = this.getRotation();\n\n      if (current != null && rotation != null) {\n        this.rotate(rotation - current);\n      }\n    },\n    getScaling: function () {\n      var scaling = this._decompose().scaling;\n\n      return new LinkedPoint(scaling.x, scaling.y, this, 'setScaling');\n    },\n    setScaling: function () {\n      var current = this.getScaling(),\n          scaling = Point.read(arguments, 0, {\n        clone: true,\n        readNull: true\n      });\n\n      if (current && scaling) {\n        this.scale(scaling.x / current.x, scaling.y / current.y);\n      }\n    },\n    getMatrix: function () {\n      return this._matrix;\n    },\n    setMatrix: function () {\n      var matrix = this._matrix;\n      matrix.set.apply(matrix, arguments);\n    },\n    transform: function (matrix) {\n      this._matrix.append(matrix);\n    },\n    scrollBy: function () {\n      this.translate(Point.read(arguments).negate());\n    }\n  }), {\n    projectToView: function () {\n      return this._matrix._transformPoint(Point.read(arguments));\n    },\n    viewToProject: function () {\n      return this._matrix._inverseTransform(Point.read(arguments));\n    },\n    getEventPoint: function (event) {\n      return this.viewToProject(DomEvent.getOffset(event, this._element));\n    }\n  }, {\n    statics: {\n      _views: [],\n      _viewsById: {},\n      _id: 0,\n      create: function (project, element) {\n        if (document && typeof element === 'string') element = document.getElementById(element);\n        var ctor = window ? CanvasView : View;\n        return new ctor(project, element);\n      }\n    }\n  }, new function () {\n    if (!window) return;\n    var prevFocus,\n        tempFocus,\n        dragging = false,\n        mouseDown = false;\n\n    function getView(event) {\n      var target = DomEvent.getTarget(event);\n      return target.getAttribute && View._viewsById[target.getAttribute('id')];\n    }\n\n    function updateFocus() {\n      var view = View._focused;\n\n      if (!view || !view.isVisible()) {\n        for (var i = 0, l = View._views.length; i < l; i++) {\n          if ((view = View._views[i]).isVisible()) {\n            View._focused = tempFocus = view;\n            break;\n          }\n        }\n      }\n    }\n\n    function handleMouseMove(view, event, point) {\n      view._handleMouseEvent('mousemove', event, point);\n    }\n\n    var navigator = window.navigator,\n        mousedown,\n        mousemove,\n        mouseup;\n\n    if (navigator.pointerEnabled || navigator.msPointerEnabled) {\n      mousedown = 'pointerdown MSPointerDown';\n      mousemove = 'pointermove MSPointerMove';\n      mouseup = 'pointerup pointercancel MSPointerUp MSPointerCancel';\n    } else {\n      mousedown = 'touchstart';\n      mousemove = 'touchmove';\n      mouseup = 'touchend touchcancel';\n\n      if (!('ontouchstart' in window && navigator.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i))) {\n        mousedown += ' mousedown';\n        mousemove += ' mousemove';\n        mouseup += ' mouseup';\n      }\n    }\n\n    var viewEvents = {},\n        docEvents = {\n      mouseout: function (event) {\n        var view = View._focused,\n            target = DomEvent.getRelatedTarget(event);\n\n        if (view && (!target || target.nodeName === 'HTML')) {\n          var offset = DomEvent.getOffset(event, view._element),\n              x = offset.x,\n              abs = Math.abs,\n              ax = abs(x),\n              max = 1 << 25,\n              diff = ax - max;\n          offset.x = abs(diff) < ax ? diff * (x < 0 ? -1 : 1) : x;\n          handleMouseMove(view, event, view.viewToProject(offset));\n        }\n      },\n      scroll: updateFocus\n    };\n\n    viewEvents[mousedown] = function (event) {\n      var view = View._focused = getView(event);\n\n      if (!dragging) {\n        dragging = true;\n\n        view._handleMouseEvent('mousedown', event);\n      }\n    };\n\n    docEvents[mousemove] = function (event) {\n      var view = View._focused;\n\n      if (!mouseDown) {\n        var target = getView(event);\n\n        if (target) {\n          if (view !== target) {\n            if (view) handleMouseMove(view, event);\n            if (!prevFocus) prevFocus = view;\n            view = View._focused = tempFocus = target;\n          }\n        } else if (tempFocus && tempFocus === view) {\n          if (prevFocus && !prevFocus.isInserted()) prevFocus = null;\n          view = View._focused = prevFocus;\n          prevFocus = null;\n          updateFocus();\n        }\n      }\n\n      if (view) handleMouseMove(view, event);\n    };\n\n    docEvents[mousedown] = function () {\n      mouseDown = true;\n    };\n\n    docEvents[mouseup] = function (event) {\n      var view = View._focused;\n      if (view && dragging) view._handleMouseEvent('mouseup', event);\n      mouseDown = dragging = false;\n    };\n\n    DomEvent.add(document, docEvents);\n    DomEvent.add(window, {\n      load: updateFocus\n    });\n    var called = false,\n        prevented = false,\n        fallbacks = {\n      doubleclick: 'click',\n      mousedrag: 'mousemove'\n    },\n        wasInView = false,\n        overView,\n        downPoint,\n        lastPoint,\n        downItem,\n        overItem,\n        dragItem,\n        clickItem,\n        clickTime,\n        dblClick;\n\n    function emitMouseEvent(obj, target, type, event, point, prevPoint, stopItem) {\n      var stopped = false,\n          mouseEvent;\n\n      function emit(obj, type) {\n        if (obj.responds(type)) {\n          if (!mouseEvent) {\n            mouseEvent = new MouseEvent(type, event, point, target || obj, prevPoint ? point.subtract(prevPoint) : null);\n          }\n\n          if (obj.emit(type, mouseEvent)) {\n            called = true;\n            if (mouseEvent.prevented) prevented = true;\n            if (mouseEvent.stopped) return stopped = true;\n          }\n        } else {\n          var fallback = fallbacks[type];\n          if (fallback) return emit(obj, fallback);\n        }\n      }\n\n      while (obj && obj !== stopItem) {\n        if (emit(obj, type)) break;\n        obj = obj._parent;\n      }\n\n      return stopped;\n    }\n\n    function emitMouseEvents(view, hitItem, type, event, point, prevPoint) {\n      view._project.removeOn(type);\n\n      prevented = called = false;\n      return dragItem && emitMouseEvent(dragItem, null, type, event, point, prevPoint) || hitItem && hitItem !== dragItem && !hitItem.isDescendant(dragItem) && emitMouseEvent(hitItem, null, type === 'mousedrag' ? 'mousemove' : type, event, point, prevPoint, dragItem) || emitMouseEvent(view, dragItem || hitItem || view, type, event, point, prevPoint);\n    }\n\n    var itemEventsMap = {\n      mousedown: {\n        mousedown: 1,\n        mousedrag: 1,\n        click: 1,\n        doubleclick: 1\n      },\n      mouseup: {\n        mouseup: 1,\n        mousedrag: 1,\n        click: 1,\n        doubleclick: 1\n      },\n      mousemove: {\n        mousedrag: 1,\n        mousemove: 1,\n        mouseenter: 1,\n        mouseleave: 1\n      }\n    };\n    return {\n      _viewEvents: viewEvents,\n      _handleMouseEvent: function (type, event, point) {\n        var itemEvents = this._itemEvents,\n            hitItems = itemEvents.native[type],\n            nativeMove = type === 'mousemove',\n            tool = this._scope.tool,\n            view = this;\n\n        function responds(type) {\n          return itemEvents.virtual[type] || view.responds(type) || tool && tool.responds(type);\n        }\n\n        if (nativeMove && dragging && responds('mousedrag')) type = 'mousedrag';\n        if (!point) point = this.getEventPoint(event);\n\n        var inView = this.getBounds().contains(point),\n            hit = hitItems && inView && view._project.hitTest(point, {\n          tolerance: 0,\n          fill: true,\n          stroke: true\n        }),\n            hitItem = hit && hit.item || null,\n            handle = false,\n            mouse = {};\n\n        mouse[type.substr(5)] = true;\n\n        if (hitItems && hitItem !== overItem) {\n          if (overItem) {\n            emitMouseEvent(overItem, null, 'mouseleave', event, point);\n          }\n\n          if (hitItem) {\n            emitMouseEvent(hitItem, null, 'mouseenter', event, point);\n          }\n\n          overItem = hitItem;\n        }\n\n        if (wasInView ^ inView) {\n          emitMouseEvent(this, null, inView ? 'mouseenter' : 'mouseleave', event, point);\n          overView = inView ? this : null;\n          handle = true;\n        }\n\n        if ((inView || mouse.drag) && !point.equals(lastPoint)) {\n          emitMouseEvents(this, hitItem, nativeMove ? type : 'mousemove', event, point, lastPoint);\n          handle = true;\n        }\n\n        wasInView = inView;\n\n        if (mouse.down && inView || mouse.up && downPoint) {\n          emitMouseEvents(this, hitItem, type, event, point, downPoint);\n\n          if (mouse.down) {\n            dblClick = hitItem === clickItem && Date.now() - clickTime < 300;\n            downItem = clickItem = hitItem;\n\n            if (!prevented && hitItem) {\n              var item = hitItem;\n\n              while (item && !item.responds('mousedrag')) item = item._parent;\n\n              if (item) dragItem = hitItem;\n            }\n\n            downPoint = point;\n          } else if (mouse.up) {\n            if (!prevented && hitItem === downItem) {\n              clickTime = Date.now();\n              emitMouseEvents(this, hitItem, dblClick ? 'doubleclick' : 'click', event, point, downPoint);\n              dblClick = false;\n            }\n\n            downItem = dragItem = null;\n          }\n\n          wasInView = false;\n          handle = true;\n        }\n\n        lastPoint = point;\n\n        if (handle && tool) {\n          called = tool._handleMouseEvent(type, event, point, mouse) || called;\n        }\n\n        if (event.cancelable !== false && (called && !mouse.move || mouse.down && responds('mouseup'))) {\n          event.preventDefault();\n        }\n      },\n      _handleKeyEvent: function (type, event, key, character) {\n        var scope = this._scope,\n            tool = scope.tool,\n            keyEvent;\n\n        function emit(obj) {\n          if (obj.responds(type)) {\n            paper = scope;\n            obj.emit(type, keyEvent = keyEvent || new KeyEvent(type, event, key, character));\n          }\n        }\n\n        if (this.isVisible()) {\n          emit(this);\n          if (tool && tool.responds(type)) emit(tool);\n        }\n      },\n      _countItemEvent: function (type, sign) {\n        var itemEvents = this._itemEvents,\n            native = itemEvents.native,\n            virtual = itemEvents.virtual;\n\n        for (var key in itemEventsMap) {\n          native[key] = (native[key] || 0) + (itemEventsMap[key][type] || 0) * sign;\n        }\n\n        virtual[type] = (virtual[type] || 0) + sign;\n      },\n      statics: {\n        updateFocus: updateFocus,\n        _resetState: function () {\n          dragging = mouseDown = called = wasInView = false;\n          prevFocus = tempFocus = overView = downPoint = lastPoint = downItem = overItem = dragItem = clickItem = clickTime = dblClick = null;\n        }\n      }\n    };\n  }());\n  var CanvasView = View.extend({\n    _class: 'CanvasView',\n    initialize: function CanvasView(project, canvas) {\n      if (!(canvas instanceof window.HTMLCanvasElement)) {\n        var size = Size.read(arguments, 1);\n        if (size.isZero()) throw new Error('Cannot create CanvasView with the provided argument: ' + Base.slice(arguments, 1));\n        canvas = CanvasProvider.getCanvas(size);\n      }\n\n      var ctx = this._context = canvas.getContext('2d');\n      ctx.save();\n      this._pixelRatio = 1;\n\n      if (!/^off|false$/.test(PaperScope.getAttribute(canvas, 'hidpi'))) {\n        var deviceRatio = window.devicePixelRatio || 1,\n            backingStoreRatio = DomElement.getPrefixed(ctx, 'backingStorePixelRatio') || 1;\n        this._pixelRatio = deviceRatio / backingStoreRatio;\n      }\n\n      View.call(this, project, canvas);\n      this._needsUpdate = true;\n    },\n    remove: function remove() {\n      this._context.restore();\n\n      return remove.base.call(this);\n    },\n    _setElementSize: function _setElementSize(width, height) {\n      var pixelRatio = this._pixelRatio;\n\n      _setElementSize.base.call(this, width * pixelRatio, height * pixelRatio);\n\n      if (pixelRatio !== 1) {\n        var element = this._element,\n            ctx = this._context;\n\n        if (!PaperScope.hasAttribute(element, 'resize')) {\n          var style = element.style;\n          style.width = width + 'px';\n          style.height = height + 'px';\n        }\n\n        ctx.restore();\n        ctx.save();\n        ctx.scale(pixelRatio, pixelRatio);\n      }\n    },\n    getContext: function () {\n      return this._context;\n    },\n    getPixelSize: function getPixelSize(size) {\n      var agent = paper.agent,\n          pixels;\n\n      if (agent && agent.firefox) {\n        pixels = getPixelSize.base.call(this, size);\n      } else {\n        var ctx = this._context,\n            prevFont = ctx.font;\n        ctx.font = size + ' serif';\n        pixels = parseFloat(ctx.font);\n        ctx.font = prevFont;\n      }\n\n      return pixels;\n    },\n    getTextWidth: function (font, lines) {\n      var ctx = this._context,\n          prevFont = ctx.font,\n          width = 0;\n      ctx.font = font;\n\n      for (var i = 0, l = lines.length; i < l; i++) width = Math.max(width, ctx.measureText(lines[i]).width);\n\n      ctx.font = prevFont;\n      return width;\n    },\n    update: function () {\n      if (!this._needsUpdate) return false;\n      var project = this._project,\n          ctx = this._context,\n          size = this._viewSize;\n      ctx.clearRect(0, 0, size.width + 1, size.height + 1);\n      if (project) project.draw(ctx, this._matrix, this._pixelRatio);\n      this._needsUpdate = false;\n      return true;\n    }\n  });\n  var Event = Base.extend({\n    _class: 'Event',\n    initialize: function Event(event) {\n      this.event = event;\n      this.type = event && event.type;\n    },\n    prevented: false,\n    stopped: false,\n    preventDefault: function () {\n      this.prevented = true;\n      this.event.preventDefault();\n    },\n    stopPropagation: function () {\n      this.stopped = true;\n      this.event.stopPropagation();\n    },\n    stop: function () {\n      this.stopPropagation();\n      this.preventDefault();\n    },\n    getTimeStamp: function () {\n      return this.event.timeStamp;\n    },\n    getModifiers: function () {\n      return Key.modifiers;\n    }\n  });\n  var KeyEvent = Event.extend({\n    _class: 'KeyEvent',\n    initialize: function KeyEvent(type, event, key, character) {\n      this.type = type;\n      this.event = event;\n      this.key = key;\n      this.character = character;\n    },\n    toString: function () {\n      return \"{ type: '\" + this.type + \"', key: '\" + this.key + \"', character: '\" + this.character + \"', modifiers: \" + this.getModifiers() + \" }\";\n    }\n  });\n  var Key = new function () {\n    var keyLookup = {\n      '\\t': 'tab',\n      ' ': 'space',\n      '\\b': 'backspace',\n      '\\x7f': 'delete',\n      'Spacebar': 'space',\n      'Del': 'delete',\n      'Win': 'meta',\n      'Esc': 'escape'\n    },\n        charLookup = {\n      'tab': '\\t',\n      'space': ' ',\n      'enter': '\\r'\n    },\n        keyMap = {},\n        charMap = {},\n        metaFixMap,\n        downKey,\n        modifiers = new Base({\n      shift: false,\n      control: false,\n      alt: false,\n      meta: false,\n      capsLock: false,\n      space: false\n    }).inject({\n      option: {\n        get: function () {\n          return this.alt;\n        }\n      },\n      command: {\n        get: function () {\n          var agent = paper && paper.agent;\n          return agent && agent.mac ? this.meta : this.control;\n        }\n      }\n    });\n\n    function getKey(event) {\n      var key = event.key || event.keyIdentifier;\n      key = /^U\\+/.test(key) ? String.fromCharCode(parseInt(key.substr(2), 16)) : /^Arrow[A-Z]/.test(key) ? key.substr(5) : key === 'Unidentified' || key === undefined ? String.fromCharCode(event.keyCode) : key;\n      return keyLookup[key] || (key.length > 1 ? Base.hyphenate(key) : key.toLowerCase());\n    }\n\n    function handleKey(down, key, character, event) {\n      var type = down ? 'keydown' : 'keyup',\n          view = View._focused,\n          name;\n      keyMap[key] = down;\n\n      if (down) {\n        charMap[key] = character;\n      } else {\n        delete charMap[key];\n      }\n\n      if (key.length > 1 && (name = Base.camelize(key)) in modifiers) {\n        modifiers[name] = down;\n        var agent = paper && paper.agent;\n\n        if (name === 'meta' && agent && agent.mac) {\n          if (down) {\n            metaFixMap = {};\n          } else {\n            for (var k in metaFixMap) {\n              if (k in charMap) handleKey(false, k, metaFixMap[k], event);\n            }\n\n            metaFixMap = null;\n          }\n        }\n      } else if (down && metaFixMap) {\n        metaFixMap[key] = character;\n      }\n\n      if (view) {\n        view._handleKeyEvent(down ? 'keydown' : 'keyup', event, key, character);\n      }\n    }\n\n    DomEvent.add(document, {\n      keydown: function (event) {\n        var key = getKey(event),\n            agent = paper && paper.agent;\n\n        if (key.length > 1 || agent && agent.chrome && (event.altKey || agent.mac && event.metaKey || !agent.mac && event.ctrlKey)) {\n          handleKey(true, key, charLookup[key] || (key.length > 1 ? '' : key), event);\n        } else {\n          downKey = key;\n        }\n      },\n      keypress: function (event) {\n        if (downKey) {\n          var key = getKey(event),\n              code = event.charCode,\n              character = code >= 32 ? String.fromCharCode(code) : key.length > 1 ? '' : key;\n\n          if (key !== downKey) {\n            key = character.toLowerCase();\n          }\n\n          handleKey(true, key, character, event);\n          downKey = null;\n        }\n      },\n      keyup: function (event) {\n        var key = getKey(event);\n        if (key in charMap) handleKey(false, key, charMap[key], event);\n      }\n    });\n    DomEvent.add(window, {\n      blur: function (event) {\n        for (var key in charMap) handleKey(false, key, charMap[key], event);\n      }\n    });\n    return {\n      modifiers: modifiers,\n      isDown: function (key) {\n        return !!keyMap[key];\n      }\n    };\n  }();\n  var MouseEvent = Event.extend({\n    _class: 'MouseEvent',\n    initialize: function MouseEvent(type, event, point, target, delta) {\n      this.type = type;\n      this.event = event;\n      this.point = point;\n      this.target = target;\n      this.delta = delta;\n    },\n    toString: function () {\n      return \"{ type: '\" + this.type + \"', point: \" + this.point + ', target: ' + this.target + (this.delta ? ', delta: ' + this.delta : '') + ', modifiers: ' + this.getModifiers() + ' }';\n    }\n  });\n  var ToolEvent = Event.extend({\n    _class: 'ToolEvent',\n    _item: null,\n    initialize: function ToolEvent(tool, type, event) {\n      this.tool = tool;\n      this.type = type;\n      this.event = event;\n    },\n    _choosePoint: function (point, toolPoint) {\n      return point ? point : toolPoint ? toolPoint.clone() : null;\n    },\n    getPoint: function () {\n      return this._choosePoint(this._point, this.tool._point);\n    },\n    setPoint: function (point) {\n      this._point = point;\n    },\n    getLastPoint: function () {\n      return this._choosePoint(this._lastPoint, this.tool._lastPoint);\n    },\n    setLastPoint: function (lastPoint) {\n      this._lastPoint = lastPoint;\n    },\n    getDownPoint: function () {\n      return this._choosePoint(this._downPoint, this.tool._downPoint);\n    },\n    setDownPoint: function (downPoint) {\n      this._downPoint = downPoint;\n    },\n    getMiddlePoint: function () {\n      if (!this._middlePoint && this.tool._lastPoint) {\n        return this.tool._point.add(this.tool._lastPoint).divide(2);\n      }\n\n      return this._middlePoint;\n    },\n    setMiddlePoint: function (middlePoint) {\n      this._middlePoint = middlePoint;\n    },\n    getDelta: function () {\n      return !this._delta && this.tool._lastPoint ? this.tool._point.subtract(this.tool._lastPoint) : this._delta;\n    },\n    setDelta: function (delta) {\n      this._delta = delta;\n    },\n    getCount: function () {\n      return this.tool[/^mouse(down|up)$/.test(this.type) ? '_downCount' : '_moveCount'];\n    },\n    setCount: function (count) {\n      this.tool[/^mouse(down|up)$/.test(this.type) ? 'downCount' : 'count'] = count;\n    },\n    getItem: function () {\n      if (!this._item) {\n        var result = this.tool._scope.project.hitTest(this.getPoint());\n\n        if (result) {\n          var item = result.item,\n              parent = item._parent;\n\n          while (/^(Group|CompoundPath)$/.test(parent._class)) {\n            item = parent;\n            parent = parent._parent;\n          }\n\n          this._item = item;\n        }\n      }\n\n      return this._item;\n    },\n    setItem: function (item) {\n      this._item = item;\n    },\n    toString: function () {\n      return '{ type: ' + this.type + ', point: ' + this.getPoint() + ', count: ' + this.getCount() + ', modifiers: ' + this.getModifiers() + ' }';\n    }\n  });\n  var Tool = PaperScopeItem.extend({\n    _class: 'Tool',\n    _list: 'tools',\n    _reference: 'tool',\n    _events: ['onMouseDown', 'onMouseUp', 'onMouseDrag', 'onMouseMove', 'onActivate', 'onDeactivate', 'onEditOptions', 'onKeyDown', 'onKeyUp'],\n    initialize: function Tool(props) {\n      PaperScopeItem.call(this);\n      this._moveCount = -1;\n      this._downCount = -1;\n      this.set(props);\n    },\n    getMinDistance: function () {\n      return this._minDistance;\n    },\n    setMinDistance: function (minDistance) {\n      this._minDistance = minDistance;\n\n      if (minDistance != null && this._maxDistance != null && minDistance > this._maxDistance) {\n        this._maxDistance = minDistance;\n      }\n    },\n    getMaxDistance: function () {\n      return this._maxDistance;\n    },\n    setMaxDistance: function (maxDistance) {\n      this._maxDistance = maxDistance;\n\n      if (this._minDistance != null && maxDistance != null && maxDistance < this._minDistance) {\n        this._minDistance = maxDistance;\n      }\n    },\n    getFixedDistance: function () {\n      return this._minDistance == this._maxDistance ? this._minDistance : null;\n    },\n    setFixedDistance: function (distance) {\n      this._minDistance = this._maxDistance = distance;\n    },\n    _handleMouseEvent: function (type, event, point, mouse) {\n      paper = this._scope;\n      if (mouse.drag && !this.responds(type)) type = 'mousemove';\n      var move = mouse.move || mouse.drag,\n          responds = this.responds(type),\n          minDistance = this.minDistance,\n          maxDistance = this.maxDistance,\n          called = false,\n          tool = this;\n\n      function update(minDistance, maxDistance) {\n        var pt = point,\n            toolPoint = move ? tool._point : tool._downPoint || pt;\n\n        if (move) {\n          if (tool._moveCount >= 0 && pt.equals(toolPoint)) {\n            return false;\n          }\n\n          if (toolPoint && (minDistance != null || maxDistance != null)) {\n            var vector = pt.subtract(toolPoint),\n                distance = vector.getLength();\n            if (distance < (minDistance || 0)) return false;\n\n            if (maxDistance) {\n              pt = toolPoint.add(vector.normalize(Math.min(distance, maxDistance)));\n            }\n          }\n\n          tool._moveCount++;\n        }\n\n        tool._point = pt;\n        tool._lastPoint = toolPoint || pt;\n\n        if (mouse.down) {\n          tool._moveCount = -1;\n          tool._downPoint = pt;\n          tool._downCount++;\n        }\n\n        return true;\n      }\n\n      function emit() {\n        if (responds) {\n          called = tool.emit(type, new ToolEvent(tool, type, event)) || called;\n        }\n      }\n\n      if (mouse.down) {\n        update();\n        emit();\n      } else if (mouse.up) {\n        update(null, maxDistance);\n        emit();\n      } else if (responds) {\n        while (update(minDistance, maxDistance)) emit();\n      }\n\n      return called;\n    }\n  });\n  var Tween = Base.extend(Emitter, {\n    _class: 'Tween',\n    statics: {\n      easings: new Base({\n        linear: function (t) {\n          return t;\n        },\n        easeInQuad: function (t) {\n          return t * t;\n        },\n        easeOutQuad: function (t) {\n          return t * (2 - t);\n        },\n        easeInOutQuad: function (t) {\n          return t < 0.5 ? 2 * t * t : -1 + 2 * (2 - t) * t;\n        },\n        easeInCubic: function (t) {\n          return t * t * t;\n        },\n        easeOutCubic: function (t) {\n          return --t * t * t + 1;\n        },\n        easeInOutCubic: function (t) {\n          return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n        },\n        easeInQuart: function (t) {\n          return t * t * t * t;\n        },\n        easeOutQuart: function (t) {\n          return 1 - --t * t * t * t;\n        },\n        easeInOutQuart: function (t) {\n          return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n        },\n        easeInQuint: function (t) {\n          return t * t * t * t * t;\n        },\n        easeOutQuint: function (t) {\n          return 1 + --t * t * t * t * t;\n        },\n        easeInOutQuint: function (t) {\n          return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n        }\n      })\n    },\n    initialize: function Tween(object, from, to, duration, easing, start) {\n      this.object = object;\n      var type = typeof easing;\n      var isFunction = type === 'function';\n      this.type = isFunction ? type : type === 'string' ? easing : 'linear';\n      this.easing = isFunction ? easing : Tween.easings[this.type];\n      this.duration = duration;\n      this.running = false;\n      this._then = null;\n      this._startTime = null;\n      var state = from || to;\n      this._keys = state ? Object.keys(state) : [];\n      this._parsedKeys = this._parseKeys(this._keys);\n      this._from = state && this._getState(from);\n      this._to = state && this._getState(to);\n\n      if (start !== false) {\n        this.start();\n      }\n    },\n    then: function (then) {\n      this._then = then;\n      return this;\n    },\n    start: function () {\n      this._startTime = null;\n      this.running = true;\n      return this;\n    },\n    stop: function () {\n      this.running = false;\n      return this;\n    },\n    update: function (progress) {\n      if (this.running) {\n        if (progress >= 1) {\n          progress = 1;\n          this.running = false;\n        }\n\n        var factor = this.easing(progress),\n            keys = this._keys,\n            getValue = function (value) {\n          return typeof value === 'function' ? value(factor, progress) : value;\n        };\n\n        for (var i = 0, l = keys && keys.length; i < l; i++) {\n          var key = keys[i],\n              from = getValue(this._from[key]),\n              to = getValue(this._to[key]),\n              value = from && to && from.__add && to.__add ? to.__subtract(from).__multiply(factor).__add(from) : (to - from) * factor + from;\n\n          this._setProperty(this._parsedKeys[key], value);\n        }\n\n        if (this.responds('update')) {\n          this.emit('update', new Base({\n            progress: progress,\n            factor: factor\n          }));\n        }\n\n        if (!this.running && this._then) {\n          this._then(this.object);\n        }\n      }\n\n      return this;\n    },\n    _events: {\n      onUpdate: {}\n    },\n    _handleFrame: function (time) {\n      var startTime = this._startTime,\n          progress = startTime ? (time - startTime) / this.duration : 0;\n\n      if (!startTime) {\n        this._startTime = time;\n      }\n\n      this.update(progress);\n    },\n    _getState: function (state) {\n      var keys = this._keys,\n          result = {};\n\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var key = keys[i],\n            path = this._parsedKeys[key],\n            current = this._getProperty(path),\n            value;\n\n        if (state) {\n          var resolved = this._resolveValue(current, state[key]);\n\n          this._setProperty(path, resolved);\n\n          value = this._getProperty(path);\n          value = value && value.clone ? value.clone() : value;\n\n          this._setProperty(path, current);\n        } else {\n          value = current && current.clone ? current.clone() : current;\n        }\n\n        result[key] = value;\n      }\n\n      return result;\n    },\n    _resolveValue: function (current, value) {\n      if (value) {\n        if (Array.isArray(value) && value.length === 2) {\n          var operator = value[0];\n          return operator && operator.match && operator.match(/^[+\\-\\*\\/]=/) ? this._calculate(current, operator[0], value[1]) : value;\n        } else if (typeof value === 'string') {\n          var match = value.match(/^[+\\-*/]=(.*)/);\n\n          if (match) {\n            var parsed = JSON.parse(match[1].replace(/(['\"])?([a-zA-Z0-9_]+)(['\"])?:/g, '\"$2\": '));\n            return this._calculate(current, value[0], parsed);\n          }\n        }\n      }\n\n      return value;\n    },\n    _calculate: function (left, operator, right) {\n      return paper.PaperScript.calculateBinary(left, operator, right);\n    },\n    _parseKeys: function (keys) {\n      var parsed = {};\n\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var key = keys[i],\n            path = key.replace(/\\.([^.]*)/g, '/$1').replace(/\\[['\"]?([^'\"\\]]*)['\"]?\\]/g, '/$1');\n        parsed[key] = path.split('/');\n      }\n\n      return parsed;\n    },\n    _getProperty: function (path, offset) {\n      var obj = this.object;\n\n      for (var i = 0, l = path.length - (offset || 0); i < l && obj; i++) {\n        obj = obj[path[i]];\n      }\n\n      return obj;\n    },\n    _setProperty: function (path, value) {\n      var dest = this._getProperty(path, 1);\n\n      if (dest) {\n        dest[path[path.length - 1]] = value;\n      }\n    }\n  });\n  var Http = {\n    request: function (options) {\n      var xhr = new self.XMLHttpRequest();\n      xhr.open((options.method || 'get').toUpperCase(), options.url, Base.pick(options.async, true));\n      if (options.mimeType) xhr.overrideMimeType(options.mimeType);\n\n      xhr.onload = function () {\n        var status = xhr.status;\n\n        if (status === 0 || status === 200) {\n          if (options.onLoad) {\n            options.onLoad.call(xhr, xhr.responseText);\n          }\n        } else {\n          xhr.onerror();\n        }\n      };\n\n      xhr.onerror = function () {\n        var status = xhr.status,\n            message = 'Could not load \"' + options.url + '\" (Status: ' + status + ')';\n\n        if (options.onError) {\n          options.onError(message, status);\n        } else {\n          throw new Error(message);\n        }\n      };\n\n      return xhr.send(null);\n    }\n  };\n  var CanvasProvider = Base.exports.CanvasProvider = {\n    canvases: [],\n    getCanvas: function (width, height) {\n      if (!window) return null;\n      var canvas,\n          clear = true;\n\n      if (typeof width === 'object') {\n        height = width.height;\n        width = width.width;\n      }\n\n      if (this.canvases.length) {\n        canvas = this.canvases.pop();\n      } else {\n        canvas = document.createElement('canvas');\n        clear = false;\n      }\n\n      var ctx = canvas.getContext('2d');\n\n      if (!ctx) {\n        throw new Error('Canvas ' + canvas + ' is unable to provide a 2D context.');\n      }\n\n      if (canvas.width === width && canvas.height === height) {\n        if (clear) ctx.clearRect(0, 0, width + 1, height + 1);\n      } else {\n        canvas.width = width;\n        canvas.height = height;\n      }\n\n      ctx.save();\n      return canvas;\n    },\n    getContext: function (width, height) {\n      var canvas = this.getCanvas(width, height);\n      return canvas ? canvas.getContext('2d') : null;\n    },\n    release: function (obj) {\n      var canvas = obj && obj.canvas ? obj.canvas : obj;\n\n      if (canvas && canvas.getContext) {\n        canvas.getContext('2d').restore();\n        this.canvases.push(canvas);\n      }\n    }\n  };\n  var BlendMode = new function () {\n    var min = Math.min,\n        max = Math.max,\n        abs = Math.abs,\n        sr,\n        sg,\n        sb,\n        sa,\n        br,\n        bg,\n        bb,\n        ba,\n        dr,\n        dg,\n        db;\n\n    function getLum(r, g, b) {\n      return 0.2989 * r + 0.587 * g + 0.114 * b;\n    }\n\n    function setLum(r, g, b, l) {\n      var d = l - getLum(r, g, b);\n      dr = r + d;\n      dg = g + d;\n      db = b + d;\n      var l = getLum(dr, dg, db),\n          mn = min(dr, dg, db),\n          mx = max(dr, dg, db);\n\n      if (mn < 0) {\n        var lmn = l - mn;\n        dr = l + (dr - l) * l / lmn;\n        dg = l + (dg - l) * l / lmn;\n        db = l + (db - l) * l / lmn;\n      }\n\n      if (mx > 255) {\n        var ln = 255 - l,\n            mxl = mx - l;\n        dr = l + (dr - l) * ln / mxl;\n        dg = l + (dg - l) * ln / mxl;\n        db = l + (db - l) * ln / mxl;\n      }\n    }\n\n    function getSat(r, g, b) {\n      return max(r, g, b) - min(r, g, b);\n    }\n\n    function setSat(r, g, b, s) {\n      var col = [r, g, b],\n          mx = max(r, g, b),\n          mn = min(r, g, b),\n          md;\n      mn = mn === r ? 0 : mn === g ? 1 : 2;\n      mx = mx === r ? 0 : mx === g ? 1 : 2;\n      md = min(mn, mx) === 0 ? max(mn, mx) === 1 ? 2 : 1 : 0;\n\n      if (col[mx] > col[mn]) {\n        col[md] = (col[md] - col[mn]) * s / (col[mx] - col[mn]);\n        col[mx] = s;\n      } else {\n        col[md] = col[mx] = 0;\n      }\n\n      col[mn] = 0;\n      dr = col[0];\n      dg = col[1];\n      db = col[2];\n    }\n\n    var modes = {\n      multiply: function () {\n        dr = br * sr / 255;\n        dg = bg * sg / 255;\n        db = bb * sb / 255;\n      },\n      screen: function () {\n        dr = br + sr - br * sr / 255;\n        dg = bg + sg - bg * sg / 255;\n        db = bb + sb - bb * sb / 255;\n      },\n      overlay: function () {\n        dr = br < 128 ? 2 * br * sr / 255 : 255 - 2 * (255 - br) * (255 - sr) / 255;\n        dg = bg < 128 ? 2 * bg * sg / 255 : 255 - 2 * (255 - bg) * (255 - sg) / 255;\n        db = bb < 128 ? 2 * bb * sb / 255 : 255 - 2 * (255 - bb) * (255 - sb) / 255;\n      },\n      'soft-light': function () {\n        var t = sr * br / 255;\n        dr = t + br * (255 - (255 - br) * (255 - sr) / 255 - t) / 255;\n        t = sg * bg / 255;\n        dg = t + bg * (255 - (255 - bg) * (255 - sg) / 255 - t) / 255;\n        t = sb * bb / 255;\n        db = t + bb * (255 - (255 - bb) * (255 - sb) / 255 - t) / 255;\n      },\n      'hard-light': function () {\n        dr = sr < 128 ? 2 * sr * br / 255 : 255 - 2 * (255 - sr) * (255 - br) / 255;\n        dg = sg < 128 ? 2 * sg * bg / 255 : 255 - 2 * (255 - sg) * (255 - bg) / 255;\n        db = sb < 128 ? 2 * sb * bb / 255 : 255 - 2 * (255 - sb) * (255 - bb) / 255;\n      },\n      'color-dodge': function () {\n        dr = br === 0 ? 0 : sr === 255 ? 255 : min(255, 255 * br / (255 - sr));\n        dg = bg === 0 ? 0 : sg === 255 ? 255 : min(255, 255 * bg / (255 - sg));\n        db = bb === 0 ? 0 : sb === 255 ? 255 : min(255, 255 * bb / (255 - sb));\n      },\n      'color-burn': function () {\n        dr = br === 255 ? 255 : sr === 0 ? 0 : max(0, 255 - (255 - br) * 255 / sr);\n        dg = bg === 255 ? 255 : sg === 0 ? 0 : max(0, 255 - (255 - bg) * 255 / sg);\n        db = bb === 255 ? 255 : sb === 0 ? 0 : max(0, 255 - (255 - bb) * 255 / sb);\n      },\n      darken: function () {\n        dr = br < sr ? br : sr;\n        dg = bg < sg ? bg : sg;\n        db = bb < sb ? bb : sb;\n      },\n      lighten: function () {\n        dr = br > sr ? br : sr;\n        dg = bg > sg ? bg : sg;\n        db = bb > sb ? bb : sb;\n      },\n      difference: function () {\n        dr = br - sr;\n        if (dr < 0) dr = -dr;\n        dg = bg - sg;\n        if (dg < 0) dg = -dg;\n        db = bb - sb;\n        if (db < 0) db = -db;\n      },\n      exclusion: function () {\n        dr = br + sr * (255 - br - br) / 255;\n        dg = bg + sg * (255 - bg - bg) / 255;\n        db = bb + sb * (255 - bb - bb) / 255;\n      },\n      hue: function () {\n        setSat(sr, sg, sb, getSat(br, bg, bb));\n        setLum(dr, dg, db, getLum(br, bg, bb));\n      },\n      saturation: function () {\n        setSat(br, bg, bb, getSat(sr, sg, sb));\n        setLum(dr, dg, db, getLum(br, bg, bb));\n      },\n      luminosity: function () {\n        setLum(br, bg, bb, getLum(sr, sg, sb));\n      },\n      color: function () {\n        setLum(sr, sg, sb, getLum(br, bg, bb));\n      },\n      add: function () {\n        dr = min(br + sr, 255);\n        dg = min(bg + sg, 255);\n        db = min(bb + sb, 255);\n      },\n      subtract: function () {\n        dr = max(br - sr, 0);\n        dg = max(bg - sg, 0);\n        db = max(bb - sb, 0);\n      },\n      average: function () {\n        dr = (br + sr) / 2;\n        dg = (bg + sg) / 2;\n        db = (bb + sb) / 2;\n      },\n      negation: function () {\n        dr = 255 - abs(255 - sr - br);\n        dg = 255 - abs(255 - sg - bg);\n        db = 255 - abs(255 - sb - bb);\n      }\n    };\n    var nativeModes = this.nativeModes = Base.each(['source-over', 'source-in', 'source-out', 'source-atop', 'destination-over', 'destination-in', 'destination-out', 'destination-atop', 'lighter', 'darker', 'copy', 'xor'], function (mode) {\n      this[mode] = true;\n    }, {});\n    var ctx = CanvasProvider.getContext(1, 1);\n\n    if (ctx) {\n      Base.each(modes, function (func, mode) {\n        var darken = mode === 'darken',\n            ok = false;\n        ctx.save();\n\n        try {\n          ctx.fillStyle = darken ? '#300' : '#a00';\n          ctx.fillRect(0, 0, 1, 1);\n          ctx.globalCompositeOperation = mode;\n\n          if (ctx.globalCompositeOperation === mode) {\n            ctx.fillStyle = darken ? '#a00' : '#300';\n            ctx.fillRect(0, 0, 1, 1);\n            ok = ctx.getImageData(0, 0, 1, 1).data[0] !== darken ? 170 : 51;\n          }\n        } catch (e) {}\n\n        ctx.restore();\n        nativeModes[mode] = ok;\n      });\n      CanvasProvider.release(ctx);\n    }\n\n    this.process = function (mode, srcContext, dstContext, alpha, offset) {\n      var srcCanvas = srcContext.canvas,\n          normal = mode === 'normal';\n\n      if (normal || nativeModes[mode]) {\n        dstContext.save();\n        dstContext.setTransform(1, 0, 0, 1, 0, 0);\n        dstContext.globalAlpha = alpha;\n        if (!normal) dstContext.globalCompositeOperation = mode;\n        dstContext.drawImage(srcCanvas, offset.x, offset.y);\n        dstContext.restore();\n      } else {\n        var process = modes[mode];\n        if (!process) return;\n        var dstData = dstContext.getImageData(offset.x, offset.y, srcCanvas.width, srcCanvas.height),\n            dst = dstData.data,\n            src = srcContext.getImageData(0, 0, srcCanvas.width, srcCanvas.height).data;\n\n        for (var i = 0, l = dst.length; i < l; i += 4) {\n          sr = src[i];\n          br = dst[i];\n          sg = src[i + 1];\n          bg = dst[i + 1];\n          sb = src[i + 2];\n          bb = dst[i + 2];\n          sa = src[i + 3];\n          ba = dst[i + 3];\n          process();\n          var a1 = sa * alpha / 255,\n              a2 = 1 - a1;\n          dst[i] = a1 * dr + a2 * br;\n          dst[i + 1] = a1 * dg + a2 * bg;\n          dst[i + 2] = a1 * db + a2 * bb;\n          dst[i + 3] = sa * alpha + a2 * ba;\n        }\n\n        dstContext.putImageData(dstData, offset.x, offset.y);\n      }\n    };\n  }();\n  var SvgElement = new function () {\n    var svg = 'http://www.w3.org/2000/svg',\n        xmlns = 'http://www.w3.org/2000/xmlns',\n        xlink = 'http://www.w3.org/1999/xlink',\n        attributeNamespace = {\n      href: xlink,\n      xlink: xmlns,\n      xmlns: xmlns + '/',\n      'xmlns:xlink': xmlns + '/'\n    };\n\n    function create(tag, attributes, formatter) {\n      return set(document.createElementNS(svg, tag), attributes, formatter);\n    }\n\n    function get(node, name) {\n      var namespace = attributeNamespace[name],\n          value = namespace ? node.getAttributeNS(namespace, name) : node.getAttribute(name);\n      return value === 'null' ? null : value;\n    }\n\n    function set(node, attributes, formatter) {\n      for (var name in attributes) {\n        var value = attributes[name],\n            namespace = attributeNamespace[name];\n        if (typeof value === 'number' && formatter) value = formatter.number(value);\n\n        if (namespace) {\n          node.setAttributeNS(namespace, name, value);\n        } else {\n          node.setAttribute(name, value);\n        }\n      }\n\n      return node;\n    }\n\n    return {\n      svg: svg,\n      xmlns: xmlns,\n      xlink: xlink,\n      create: create,\n      get: get,\n      set: set\n    };\n  }();\n  var SvgStyles = Base.each({\n    fillColor: ['fill', 'color'],\n    fillRule: ['fill-rule', 'string'],\n    strokeColor: ['stroke', 'color'],\n    strokeWidth: ['stroke-width', 'number'],\n    strokeCap: ['stroke-linecap', 'string'],\n    strokeJoin: ['stroke-linejoin', 'string'],\n    strokeScaling: ['vector-effect', 'lookup', {\n      true: 'none',\n      false: 'non-scaling-stroke'\n    }, function (item, value) {\n      return !value && (item instanceof PathItem || item instanceof Shape || item instanceof TextItem);\n    }],\n    miterLimit: ['stroke-miterlimit', 'number'],\n    dashArray: ['stroke-dasharray', 'array'],\n    dashOffset: ['stroke-dashoffset', 'number'],\n    fontFamily: ['font-family', 'string'],\n    fontWeight: ['font-weight', 'string'],\n    fontSize: ['font-size', 'number'],\n    justification: ['text-anchor', 'lookup', {\n      left: 'start',\n      center: 'middle',\n      right: 'end'\n    }],\n    opacity: ['opacity', 'number'],\n    blendMode: ['mix-blend-mode', 'style']\n  }, function (entry, key) {\n    var part = Base.capitalize(key),\n        lookup = entry[2];\n    this[key] = {\n      type: entry[1],\n      property: key,\n      attribute: entry[0],\n      toSVG: lookup,\n      fromSVG: lookup && Base.each(lookup, function (value, name) {\n        this[value] = name;\n      }, {}),\n      exportFilter: entry[3],\n      get: 'get' + part,\n      set: 'set' + part\n    };\n  }, {});\n  new function () {\n    var formatter;\n\n    function getTransform(matrix, coordinates, center) {\n      var attrs = new Base(),\n          trans = matrix.getTranslation();\n\n      if (coordinates) {\n        var point;\n\n        if (matrix.isInvertible()) {\n          matrix = matrix._shiftless();\n          point = matrix._inverseTransform(trans);\n          trans = null;\n        } else {\n          point = new Point();\n        }\n\n        attrs[center ? 'cx' : 'x'] = point.x;\n        attrs[center ? 'cy' : 'y'] = point.y;\n      }\n\n      if (!matrix.isIdentity()) {\n        var decomposed = matrix.decompose();\n\n        if (decomposed) {\n          var parts = [],\n              angle = decomposed.rotation,\n              scale = decomposed.scaling,\n              skew = decomposed.skewing;\n          if (trans && !trans.isZero()) parts.push('translate(' + formatter.point(trans) + ')');\n          if (angle) parts.push('rotate(' + formatter.number(angle) + ')');\n          if (!Numerical.isZero(scale.x - 1) || !Numerical.isZero(scale.y - 1)) parts.push('scale(' + formatter.point(scale) + ')');\n          if (skew.x) parts.push('skewX(' + formatter.number(skew.x) + ')');\n          if (skew.y) parts.push('skewY(' + formatter.number(skew.y) + ')');\n          attrs.transform = parts.join(' ');\n        } else {\n          attrs.transform = 'matrix(' + matrix.getValues().join(',') + ')';\n        }\n      }\n\n      return attrs;\n    }\n\n    function exportGroup(item, options) {\n      var attrs = getTransform(item._matrix),\n          children = item._children;\n      var node = SvgElement.create('g', attrs, formatter);\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        var child = children[i];\n        var childNode = exportSVG(child, options);\n\n        if (childNode) {\n          if (child.isClipMask()) {\n            var clip = SvgElement.create('clipPath');\n            clip.appendChild(childNode);\n            setDefinition(child, clip, 'clip');\n            SvgElement.set(node, {\n              'clip-path': 'url(#' + clip.id + ')'\n            });\n          } else {\n            node.appendChild(childNode);\n          }\n        }\n      }\n\n      return node;\n    }\n\n    function exportRaster(item, options) {\n      var attrs = getTransform(item._matrix, true),\n          size = item.getSize(),\n          image = item.getImage();\n      attrs.x -= size.width / 2;\n      attrs.y -= size.height / 2;\n      attrs.width = size.width;\n      attrs.height = size.height;\n      attrs.href = options.embedImages == false && image && image.src || item.toDataURL();\n      return SvgElement.create('image', attrs, formatter);\n    }\n\n    function exportPath(item, options) {\n      var matchShapes = options.matchShapes;\n\n      if (matchShapes) {\n        var shape = item.toShape(false);\n        if (shape) return exportShape(shape, options);\n      }\n\n      var segments = item._segments,\n          length = segments.length,\n          type,\n          attrs = getTransform(item._matrix);\n\n      if (matchShapes && length >= 2 && !item.hasHandles()) {\n        if (length > 2) {\n          type = item._closed ? 'polygon' : 'polyline';\n          var parts = [];\n\n          for (var i = 0; i < length; i++) {\n            parts.push(formatter.point(segments[i]._point));\n          }\n\n          attrs.points = parts.join(' ');\n        } else {\n          type = 'line';\n          var start = segments[0]._point,\n              end = segments[1]._point;\n          attrs.set({\n            x1: start.x,\n            y1: start.y,\n            x2: end.x,\n            y2: end.y\n          });\n        }\n      } else {\n        type = 'path';\n        attrs.d = item.getPathData(null, options.precision);\n      }\n\n      return SvgElement.create(type, attrs, formatter);\n    }\n\n    function exportShape(item) {\n      var type = item._type,\n          radius = item._radius,\n          attrs = getTransform(item._matrix, true, type !== 'rectangle');\n\n      if (type === 'rectangle') {\n        type = 'rect';\n        var size = item._size,\n            width = size.width,\n            height = size.height;\n        attrs.x -= width / 2;\n        attrs.y -= height / 2;\n        attrs.width = width;\n        attrs.height = height;\n        if (radius.isZero()) radius = null;\n      }\n\n      if (radius) {\n        if (type === 'circle') {\n          attrs.r = radius;\n        } else {\n          attrs.rx = radius.width;\n          attrs.ry = radius.height;\n        }\n      }\n\n      return SvgElement.create(type, attrs, formatter);\n    }\n\n    function exportCompoundPath(item, options) {\n      var attrs = getTransform(item._matrix);\n      var data = item.getPathData(null, options.precision);\n      if (data) attrs.d = data;\n      return SvgElement.create('path', attrs, formatter);\n    }\n\n    function exportSymbolItem(item, options) {\n      var attrs = getTransform(item._matrix, true),\n          definition = item._definition,\n          node = getDefinition(definition, 'symbol'),\n          definitionItem = definition._item,\n          bounds = definitionItem.getStrokeBounds();\n\n      if (!node) {\n        node = SvgElement.create('symbol', {\n          viewBox: formatter.rectangle(bounds)\n        });\n        node.appendChild(exportSVG(definitionItem, options));\n        setDefinition(definition, node, 'symbol');\n      }\n\n      attrs.href = '#' + node.id;\n      attrs.x += bounds.x;\n      attrs.y += bounds.y;\n      attrs.width = bounds.width;\n      attrs.height = bounds.height;\n      attrs.overflow = 'visible';\n      return SvgElement.create('use', attrs, formatter);\n    }\n\n    function exportGradient(color) {\n      var gradientNode = getDefinition(color, 'color');\n\n      if (!gradientNode) {\n        var gradient = color.getGradient(),\n            radial = gradient._radial,\n            origin = color.getOrigin(),\n            destination = color.getDestination(),\n            attrs;\n\n        if (radial) {\n          attrs = {\n            cx: origin.x,\n            cy: origin.y,\n            r: origin.getDistance(destination)\n          };\n          var highlight = color.getHighlight();\n\n          if (highlight) {\n            attrs.fx = highlight.x;\n            attrs.fy = highlight.y;\n          }\n        } else {\n          attrs = {\n            x1: origin.x,\n            y1: origin.y,\n            x2: destination.x,\n            y2: destination.y\n          };\n        }\n\n        attrs.gradientUnits = 'userSpaceOnUse';\n        gradientNode = SvgElement.create((radial ? 'radial' : 'linear') + 'Gradient', attrs, formatter);\n        var stops = gradient._stops;\n\n        for (var i = 0, l = stops.length; i < l; i++) {\n          var stop = stops[i],\n              stopColor = stop._color,\n              alpha = stopColor.getAlpha(),\n              offset = stop._offset;\n          attrs = {\n            offset: offset == null ? i / (l - 1) : offset\n          };\n          if (stopColor) attrs['stop-color'] = stopColor.toCSS(true);\n          if (alpha < 1) attrs['stop-opacity'] = alpha;\n          gradientNode.appendChild(SvgElement.create('stop', attrs, formatter));\n        }\n\n        setDefinition(color, gradientNode, 'color');\n      }\n\n      return 'url(#' + gradientNode.id + ')';\n    }\n\n    function exportText(item) {\n      var node = SvgElement.create('text', getTransform(item._matrix, true), formatter);\n      node.textContent = item._content;\n      return node;\n    }\n\n    var exporters = {\n      Group: exportGroup,\n      Layer: exportGroup,\n      Raster: exportRaster,\n      Path: exportPath,\n      Shape: exportShape,\n      CompoundPath: exportCompoundPath,\n      SymbolItem: exportSymbolItem,\n      PointText: exportText\n    };\n\n    function applyStyle(item, node, isRoot) {\n      var attrs = {},\n          parent = !isRoot && item.getParent(),\n          style = [];\n      if (item._name != null) attrs.id = item._name;\n      Base.each(SvgStyles, function (entry) {\n        var get = entry.get,\n            type = entry.type,\n            value = item[get]();\n\n        if (entry.exportFilter ? entry.exportFilter(item, value) : !parent || !Base.equals(parent[get](), value)) {\n          if (type === 'color' && value != null) {\n            var alpha = value.getAlpha();\n            if (alpha < 1) attrs[entry.attribute + '-opacity'] = alpha;\n          }\n\n          if (type === 'style') {\n            style.push(entry.attribute + ': ' + value);\n          } else {\n            attrs[entry.attribute] = value == null ? 'none' : type === 'color' ? value.gradient ? exportGradient(value, item) : value.toCSS(true) : type === 'array' ? value.join(',') : type === 'lookup' ? entry.toSVG[value] : value;\n          }\n        }\n      });\n      if (style.length) attrs.style = style.join(';');\n      if (attrs.opacity === 1) delete attrs.opacity;\n      if (!item._visible) attrs.visibility = 'hidden';\n      return SvgElement.set(node, attrs, formatter);\n    }\n\n    var definitions;\n\n    function getDefinition(item, type) {\n      if (!definitions) definitions = {\n        ids: {},\n        svgs: {}\n      };\n      return item && definitions.svgs[type + '-' + (item._id || item.__id || (item.__id = UID.get('svg')))];\n    }\n\n    function setDefinition(item, node, type) {\n      if (!definitions) getDefinition();\n      var typeId = definitions.ids[type] = (definitions.ids[type] || 0) + 1;\n      node.id = type + '-' + typeId;\n      definitions.svgs[type + '-' + (item._id || item.__id)] = node;\n    }\n\n    function exportDefinitions(node, options) {\n      var svg = node,\n          defs = null;\n\n      if (definitions) {\n        svg = node.nodeName.toLowerCase() === 'svg' && node;\n\n        for (var i in definitions.svgs) {\n          if (!defs) {\n            if (!svg) {\n              svg = SvgElement.create('svg');\n              svg.appendChild(node);\n            }\n\n            defs = svg.insertBefore(SvgElement.create('defs'), svg.firstChild);\n          }\n\n          defs.appendChild(definitions.svgs[i]);\n        }\n\n        definitions = null;\n      }\n\n      return options.asString ? new self.XMLSerializer().serializeToString(svg) : svg;\n    }\n\n    function exportSVG(item, options, isRoot) {\n      var exporter = exporters[item._class],\n          node = exporter && exporter(item, options);\n\n      if (node) {\n        var onExport = options.onExport;\n        if (onExport) node = onExport(item, node, options) || node;\n        var data = JSON.stringify(item._data);\n        if (data && data !== '{}' && data !== 'null') node.setAttribute('data-paper-data', data);\n      }\n\n      return node && applyStyle(item, node, isRoot);\n    }\n\n    function setOptions(options) {\n      if (!options) options = {};\n      formatter = new Formatter(options.precision);\n      return options;\n    }\n\n    Item.inject({\n      exportSVG: function (options) {\n        options = setOptions(options);\n        return exportDefinitions(exportSVG(this, options, true), options);\n      }\n    });\n    Project.inject({\n      exportSVG: function (options) {\n        options = setOptions(options);\n        var children = this._children,\n            view = this.getView(),\n            bounds = Base.pick(options.bounds, 'view'),\n            mx = options.matrix || bounds === 'view' && view._matrix,\n            matrix = mx && Matrix.read([mx]),\n            rect = bounds === 'view' ? new Rectangle([0, 0], view.getViewSize()) : bounds === 'content' ? Item._getBounds(children, matrix, {\n          stroke: true\n        }).rect : Rectangle.read([bounds], 0, {\n          readNull: true\n        }),\n            attrs = {\n          version: '1.1',\n          xmlns: SvgElement.svg,\n          'xmlns:xlink': SvgElement.xlink\n        };\n\n        if (rect) {\n          attrs.width = rect.width;\n          attrs.height = rect.height;\n          if (rect.x || rect.x === 0 || rect.y || rect.y === 0) attrs.viewBox = formatter.rectangle(rect);\n        }\n\n        var node = SvgElement.create('svg', attrs, formatter),\n            parent = node;\n\n        if (matrix && !matrix.isIdentity()) {\n          parent = node.appendChild(SvgElement.create('g', getTransform(matrix), formatter));\n        }\n\n        for (var i = 0, l = children.length; i < l; i++) {\n          parent.appendChild(exportSVG(children[i], options, true));\n        }\n\n        return exportDefinitions(node, options);\n      }\n    });\n  }();\n  new function () {\n    var definitions = {},\n        rootSize;\n\n    function getValue(node, name, isString, allowNull, allowPercent, defaultValue) {\n      var value = SvgElement.get(node, name) || defaultValue,\n          res = value == null ? allowNull ? null : isString ? '' : 0 : isString ? value : parseFloat(value);\n      return /%\\s*$/.test(value) ? res / 100 * (allowPercent ? 1 : rootSize[/x|^width/.test(name) ? 'width' : 'height']) : res;\n    }\n\n    function getPoint(node, x, y, allowNull, allowPercent, defaultX, defaultY) {\n      x = getValue(node, x || 'x', false, allowNull, allowPercent, defaultX);\n      y = getValue(node, y || 'y', false, allowNull, allowPercent, defaultY);\n      return allowNull && (x == null || y == null) ? null : new Point(x, y);\n    }\n\n    function getSize(node, w, h, allowNull, allowPercent) {\n      w = getValue(node, w || 'width', false, allowNull, allowPercent);\n      h = getValue(node, h || 'height', false, allowNull, allowPercent);\n      return allowNull && (w == null || h == null) ? null : new Size(w, h);\n    }\n\n    function convertValue(value, type, lookup) {\n      return value === 'none' ? null : type === 'number' ? parseFloat(value) : type === 'array' ? value ? value.split(/[\\s,]+/g).map(parseFloat) : [] : type === 'color' ? getDefinition(value) || value : type === 'lookup' ? lookup[value] : value;\n    }\n\n    function importGroup(node, type, options, isRoot) {\n      var nodes = node.childNodes,\n          isClip = type === 'clippath',\n          isDefs = type === 'defs',\n          item = new Group(),\n          project = item._project,\n          currentStyle = project._currentStyle,\n          children = [];\n\n      if (!isClip && !isDefs) {\n        item = applyAttributes(item, node, isRoot);\n        project._currentStyle = item._style.clone();\n      }\n\n      if (isRoot) {\n        var defs = node.querySelectorAll('defs');\n\n        for (var i = 0, l = defs.length; i < l; i++) {\n          importNode(defs[i], options, false);\n        }\n      }\n\n      for (var i = 0, l = nodes.length; i < l; i++) {\n        var childNode = nodes[i],\n            child;\n        if (childNode.nodeType === 1 && !/^defs$/i.test(childNode.nodeName) && (child = importNode(childNode, options, false)) && !(child instanceof SymbolDefinition)) children.push(child);\n      }\n\n      item.addChildren(children);\n      if (isClip) item = applyAttributes(item.reduce(), node, isRoot);\n      project._currentStyle = currentStyle;\n\n      if (isClip || isDefs) {\n        item.remove();\n        item = null;\n      }\n\n      return item;\n    }\n\n    function importPoly(node, type) {\n      var coords = node.getAttribute('points').match(/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g),\n          points = [];\n\n      for (var i = 0, l = coords.length; i < l; i += 2) points.push(new Point(parseFloat(coords[i]), parseFloat(coords[i + 1])));\n\n      var path = new Path(points);\n      if (type === 'polygon') path.closePath();\n      return path;\n    }\n\n    function importPath(node) {\n      return PathItem.create(node.getAttribute('d'));\n    }\n\n    function importGradient(node, type) {\n      var id = (getValue(node, 'href', true) || '').substring(1),\n          radial = type === 'radialgradient',\n          gradient;\n\n      if (id) {\n        gradient = definitions[id].getGradient();\n\n        if (gradient._radial ^ radial) {\n          gradient = gradient.clone();\n          gradient._radial = radial;\n        }\n      } else {\n        var nodes = node.childNodes,\n            stops = [];\n\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          var child = nodes[i];\n          if (child.nodeType === 1) stops.push(applyAttributes(new GradientStop(), child));\n        }\n\n        gradient = new Gradient(stops, radial);\n      }\n\n      var origin,\n          destination,\n          highlight,\n          scaleToBounds = getValue(node, 'gradientUnits', true) !== 'userSpaceOnUse';\n\n      if (radial) {\n        origin = getPoint(node, 'cx', 'cy', false, scaleToBounds, '50%', '50%');\n        destination = origin.add(getValue(node, 'r', false, false, scaleToBounds, '50%'), 0);\n        highlight = getPoint(node, 'fx', 'fy', true, scaleToBounds);\n      } else {\n        origin = getPoint(node, 'x1', 'y1', false, scaleToBounds, '0%', '0%');\n        destination = getPoint(node, 'x2', 'y2', false, scaleToBounds, '100%', '0%');\n      }\n\n      var color = applyAttributes(new Color(gradient, origin, destination, highlight), node);\n      color._scaleToBounds = scaleToBounds;\n      return null;\n    }\n\n    var importers = {\n      '#document': function (node, type, options, isRoot) {\n        var nodes = node.childNodes;\n\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          var child = nodes[i];\n          if (child.nodeType === 1) return importNode(child, options, isRoot);\n        }\n      },\n      g: importGroup,\n      svg: importGroup,\n      clippath: importGroup,\n      polygon: importPoly,\n      polyline: importPoly,\n      path: importPath,\n      lineargradient: importGradient,\n      radialgradient: importGradient,\n      image: function (node) {\n        var raster = new Raster(getValue(node, 'href', true));\n        raster.on('load', function () {\n          var size = getSize(node);\n          this.setSize(size);\n          var center = getPoint(node).add(size.divide(2));\n\n          this._matrix.append(new Matrix().translate(center));\n        });\n        return raster;\n      },\n      symbol: function (node, type, options, isRoot) {\n        return new SymbolDefinition(importGroup(node, type, options, isRoot), true);\n      },\n      defs: importGroup,\n      use: function (node) {\n        var id = (getValue(node, 'href', true) || '').substring(1),\n            definition = definitions[id],\n            point = getPoint(node);\n        return definition ? definition instanceof SymbolDefinition ? definition.place(point) : definition.clone().translate(point) : null;\n      },\n      circle: function (node) {\n        return new Shape.Circle(getPoint(node, 'cx', 'cy'), getValue(node, 'r'));\n      },\n      ellipse: function (node) {\n        return new Shape.Ellipse({\n          center: getPoint(node, 'cx', 'cy'),\n          radius: getSize(node, 'rx', 'ry')\n        });\n      },\n      rect: function (node) {\n        return new Shape.Rectangle(new Rectangle(getPoint(node), getSize(node)), getSize(node, 'rx', 'ry'));\n      },\n      line: function (node) {\n        return new Path.Line(getPoint(node, 'x1', 'y1'), getPoint(node, 'x2', 'y2'));\n      },\n      text: function (node) {\n        var text = new PointText(getPoint(node).add(getPoint(node, 'dx', 'dy')));\n        text.setContent(node.textContent.trim() || '');\n        return text;\n      },\n      switch: importGroup\n    };\n\n    function applyTransform(item, value, name, node) {\n      if (item.transform) {\n        var transforms = (node.getAttribute(name) || '').split(/\\)\\s*/g),\n            matrix = new Matrix();\n\n        for (var i = 0, l = transforms.length; i < l; i++) {\n          var transform = transforms[i];\n          if (!transform) break;\n          var parts = transform.split(/\\(\\s*/),\n              command = parts[0],\n              v = parts[1].split(/[\\s,]+/g);\n\n          for (var j = 0, m = v.length; j < m; j++) v[j] = parseFloat(v[j]);\n\n          switch (command) {\n            case 'matrix':\n              matrix.append(new Matrix(v[0], v[1], v[2], v[3], v[4], v[5]));\n              break;\n\n            case 'rotate':\n              matrix.rotate(v[0], v[1] || 0, v[2] || 0);\n              break;\n\n            case 'translate':\n              matrix.translate(v[0], v[1] || 0);\n              break;\n\n            case 'scale':\n              matrix.scale(v);\n              break;\n\n            case 'skewX':\n              matrix.skew(v[0], 0);\n              break;\n\n            case 'skewY':\n              matrix.skew(0, v[0]);\n              break;\n          }\n        }\n\n        item.transform(matrix);\n      }\n    }\n\n    function applyOpacity(item, value, name) {\n      var key = name === 'fill-opacity' ? 'getFillColor' : 'getStrokeColor',\n          color = item[key] && item[key]();\n      if (color) color.setAlpha(parseFloat(value));\n    }\n\n    var attributes = Base.set(Base.each(SvgStyles, function (entry) {\n      this[entry.attribute] = function (item, value) {\n        if (item[entry.set]) {\n          item[entry.set](convertValue(value, entry.type, entry.fromSVG));\n\n          if (entry.type === 'color') {\n            var color = item[entry.get]();\n\n            if (color) {\n              if (color._scaleToBounds) {\n                var bounds = item.getBounds();\n                color.transform(new Matrix().translate(bounds.getPoint()).scale(bounds.getSize()));\n              }\n            }\n          }\n        }\n      };\n    }, {}), {\n      id: function (item, value) {\n        definitions[value] = item;\n        if (item.setName) item.setName(value);\n      },\n      'clip-path': function (item, value) {\n        var clip = getDefinition(value);\n\n        if (clip) {\n          clip = clip.clone();\n          clip.setClipMask(true);\n\n          if (item instanceof Group) {\n            item.insertChild(0, clip);\n          } else {\n            return new Group(clip, item);\n          }\n        }\n      },\n      gradientTransform: applyTransform,\n      transform: applyTransform,\n      'fill-opacity': applyOpacity,\n      'stroke-opacity': applyOpacity,\n      visibility: function (item, value) {\n        if (item.setVisible) item.setVisible(value === 'visible');\n      },\n      display: function (item, value) {\n        if (item.setVisible) item.setVisible(value !== null);\n      },\n      'stop-color': function (item, value) {\n        if (item.setColor) item.setColor(value);\n      },\n      'stop-opacity': function (item, value) {\n        if (item._color) item._color.setAlpha(parseFloat(value));\n      },\n      offset: function (item, value) {\n        if (item.setOffset) {\n          var percent = value.match(/(.*)%$/);\n          item.setOffset(percent ? percent[1] / 100 : parseFloat(value));\n        }\n      },\n      viewBox: function (item, value, name, node, styles) {\n        var rect = new Rectangle(convertValue(value, 'array')),\n            size = getSize(node, null, null, true),\n            group,\n            matrix;\n\n        if (item instanceof Group) {\n          var scale = size ? size.divide(rect.getSize()) : 1,\n              matrix = new Matrix().scale(scale).translate(rect.getPoint().negate());\n          group = item;\n        } else if (item instanceof SymbolDefinition) {\n          if (size) rect.setSize(size);\n          group = item._item;\n        }\n\n        if (group) {\n          if (getAttribute(node, 'overflow', styles) !== 'visible') {\n            var clip = new Shape.Rectangle(rect);\n            clip.setClipMask(true);\n            group.addChild(clip);\n          }\n\n          if (matrix) group.transform(matrix);\n        }\n      }\n    });\n\n    function getAttribute(node, name, styles) {\n      var attr = node.attributes[name],\n          value = attr && attr.value;\n\n      if (!value && node.style) {\n        var style = Base.camelize(name);\n        value = node.style[style];\n        if (!value && styles.node[style] !== styles.parent[style]) value = styles.node[style];\n      }\n\n      return !value ? undefined : value === 'none' ? null : value;\n    }\n\n    function applyAttributes(item, node, isRoot) {\n      var parent = node.parentNode,\n          styles = {\n        node: DomElement.getStyles(node) || {},\n        parent: !isRoot && !/^defs$/i.test(parent.tagName) && DomElement.getStyles(parent) || {}\n      };\n      Base.each(attributes, function (apply, name) {\n        var value = getAttribute(node, name, styles);\n        item = value !== undefined && apply(item, value, name, node, styles) || item;\n      });\n      return item;\n    }\n\n    function getDefinition(value) {\n      var match = value && value.match(/\\((?:[\"'#]*)([^\"')]+)/),\n          name = match && match[1],\n          res = name && definitions[window ? name.replace(window.location.href.split('#')[0] + '#', '') : name];\n\n      if (res && res._scaleToBounds) {\n        res = res.clone();\n        res._scaleToBounds = true;\n      }\n\n      return res;\n    }\n\n    function importNode(node, options, isRoot) {\n      var type = node.nodeName.toLowerCase(),\n          isElement = type !== '#document',\n          body = document.body,\n          container,\n          parent,\n          next;\n\n      if (isRoot && isElement) {\n        rootSize = paper.getView().getSize();\n        rootSize = getSize(node, null, null, true) || rootSize;\n        container = SvgElement.create('svg', {\n          style: 'stroke-width: 1px; stroke-miterlimit: 10'\n        });\n        parent = node.parentNode;\n        next = node.nextSibling;\n        container.appendChild(node);\n        body.appendChild(container);\n      }\n\n      var settings = paper.settings,\n          applyMatrix = settings.applyMatrix,\n          insertItems = settings.insertItems;\n      settings.applyMatrix = false;\n      settings.insertItems = false;\n      var importer = importers[type],\n          item = importer && importer(node, type, options, isRoot) || null;\n      settings.insertItems = insertItems;\n      settings.applyMatrix = applyMatrix;\n\n      if (item) {\n        if (isElement && !(item instanceof Group)) item = applyAttributes(item, node, isRoot);\n        var onImport = options.onImport,\n            data = isElement && node.getAttribute('data-paper-data');\n        if (onImport) item = onImport(node, item, options) || item;\n\n        if (options.expandShapes && item instanceof Shape) {\n          item.remove();\n          item = item.toPath();\n        }\n\n        if (data) item._data = JSON.parse(data);\n      }\n\n      if (container) {\n        body.removeChild(container);\n\n        if (parent) {\n          if (next) {\n            parent.insertBefore(node, next);\n          } else {\n            parent.appendChild(node);\n          }\n        }\n      }\n\n      if (isRoot) {\n        definitions = {};\n        if (item && Base.pick(options.applyMatrix, applyMatrix)) item.matrix.apply(true, true);\n      }\n\n      return item;\n    }\n\n    function importSVG(source, options, owner) {\n      if (!source) return null;\n      options = typeof options === 'function' ? {\n        onLoad: options\n      } : options || {};\n      var scope = paper,\n          item = null;\n\n      function onLoad(svg) {\n        try {\n          var node = typeof svg === 'object' ? svg : new self.DOMParser().parseFromString(svg.trim(), 'image/svg+xml');\n\n          if (!node.nodeName) {\n            node = null;\n            throw new Error('Unsupported SVG source: ' + source);\n          }\n\n          paper = scope;\n          item = importNode(node, options, true);\n\n          if (!options || options.insert !== false) {\n            owner._insertItem(undefined, item);\n          }\n\n          var onLoad = options.onLoad;\n          if (onLoad) onLoad(item, svg);\n        } catch (e) {\n          onError(e);\n        }\n      }\n\n      function onError(message, status) {\n        var onError = options.onError;\n\n        if (onError) {\n          onError(message, status);\n        } else {\n          throw new Error(message);\n        }\n      }\n\n      if (typeof source === 'string' && !/^[\\s\\S]*</.test(source)) {\n        var node = document.getElementById(source);\n\n        if (node) {\n          onLoad(node);\n        } else {\n          Http.request({\n            url: source,\n            async: true,\n            onLoad: onLoad,\n            onError: onError\n          });\n        }\n      } else if (typeof File !== 'undefined' && source instanceof File) {\n        var reader = new FileReader();\n\n        reader.onload = function () {\n          onLoad(reader.result);\n        };\n\n        reader.onerror = function () {\n          onError(reader.error);\n        };\n\n        return reader.readAsText(source);\n      } else {\n        onLoad(source);\n      }\n\n      return item;\n    }\n\n    Item.inject({\n      importSVG: function (node, options) {\n        return importSVG(node, options, this);\n      }\n    });\n    Project.inject({\n      importSVG: function (node, options) {\n        this.activate();\n        return importSVG(node, options, this);\n      }\n    });\n  }();\n\n  Base.exports.PaperScript = function () {\n    var global = this,\n        acorn = global.acorn;\n\n    if (!acorn && typeof require !== 'undefined') {\n      try {\n        acorn = require('acorn');\n      } catch (e) {}\n    }\n\n    if (!acorn) {\n      var exports, module;\n      acorn = exports = module = {};\n\n      (function (root, mod) {\n        if (typeof exports == \"object\" && typeof module == \"object\") return mod(exports);\n        if (typeof define == \"function\" && define.amd) return define([\"exports\"], mod);\n        mod(root.acorn || (root.acorn = {}));\n      })(this, function (exports) {\n        \"use strict\";\n\n        exports.version = \"0.5.0\";\n        var options, input, inputLen, sourceFile;\n\n        exports.parse = function (inpt, opts) {\n          input = String(inpt);\n          inputLen = input.length;\n          setOptions(opts);\n          initTokenState();\n          return parseTopLevel(options.program);\n        };\n\n        var defaultOptions = exports.defaultOptions = {\n          ecmaVersion: 5,\n          strictSemicolons: false,\n          allowTrailingCommas: true,\n          forbidReserved: false,\n          allowReturnOutsideFunction: false,\n          locations: false,\n          onComment: null,\n          ranges: false,\n          program: null,\n          sourceFile: null,\n          directSourceFile: null\n        };\n\n        function setOptions(opts) {\n          options = opts || {};\n\n          for (var opt in defaultOptions) if (!Object.prototype.hasOwnProperty.call(options, opt)) options[opt] = defaultOptions[opt];\n\n          sourceFile = options.sourceFile || null;\n        }\n\n        var getLineInfo = exports.getLineInfo = function (input, offset) {\n          for (var line = 1, cur = 0;;) {\n            lineBreak.lastIndex = cur;\n            var match = lineBreak.exec(input);\n\n            if (match && match.index < offset) {\n              ++line;\n              cur = match.index + match[0].length;\n            } else break;\n          }\n\n          return {\n            line: line,\n            column: offset - cur\n          };\n        };\n\n        exports.tokenize = function (inpt, opts) {\n          input = String(inpt);\n          inputLen = input.length;\n          setOptions(opts);\n          initTokenState();\n          var t = {};\n\n          function getToken(forceRegexp) {\n            lastEnd = tokEnd;\n            readToken(forceRegexp);\n            t.start = tokStart;\n            t.end = tokEnd;\n            t.startLoc = tokStartLoc;\n            t.endLoc = tokEndLoc;\n            t.type = tokType;\n            t.value = tokVal;\n            return t;\n          }\n\n          getToken.jumpTo = function (pos, reAllowed) {\n            tokPos = pos;\n\n            if (options.locations) {\n              tokCurLine = 1;\n              tokLineStart = lineBreak.lastIndex = 0;\n              var match;\n\n              while ((match = lineBreak.exec(input)) && match.index < pos) {\n                ++tokCurLine;\n                tokLineStart = match.index + match[0].length;\n              }\n            }\n\n            tokRegexpAllowed = reAllowed;\n            skipSpace();\n          };\n\n          return getToken;\n        };\n\n        var tokPos;\n        var tokStart, tokEnd;\n        var tokStartLoc, tokEndLoc;\n        var tokType, tokVal;\n        var tokRegexpAllowed;\n        var tokCurLine, tokLineStart;\n        var lastStart, lastEnd, lastEndLoc;\n        var inFunction, labels, strict;\n\n        function raise(pos, message) {\n          var loc = getLineInfo(input, pos);\n          message += \" (\" + loc.line + \":\" + loc.column + \")\";\n          var err = new SyntaxError(message);\n          err.pos = pos;\n          err.loc = loc;\n          err.raisedAt = tokPos;\n          throw err;\n        }\n\n        var empty = [];\n        var _num = {\n          type: \"num\"\n        },\n            _regexp = {\n          type: \"regexp\"\n        },\n            _string = {\n          type: \"string\"\n        };\n        var _name = {\n          type: \"name\"\n        },\n            _eof = {\n          type: \"eof\"\n        };\n        var _break = {\n          keyword: \"break\"\n        },\n            _case = {\n          keyword: \"case\",\n          beforeExpr: true\n        },\n            _catch = {\n          keyword: \"catch\"\n        };\n        var _continue = {\n          keyword: \"continue\"\n        },\n            _debugger = {\n          keyword: \"debugger\"\n        },\n            _default = {\n          keyword: \"default\"\n        };\n        var _do = {\n          keyword: \"do\",\n          isLoop: true\n        },\n            _else = {\n          keyword: \"else\",\n          beforeExpr: true\n        };\n        var _finally = {\n          keyword: \"finally\"\n        },\n            _for = {\n          keyword: \"for\",\n          isLoop: true\n        },\n            _function = {\n          keyword: \"function\"\n        };\n        var _if = {\n          keyword: \"if\"\n        },\n            _return = {\n          keyword: \"return\",\n          beforeExpr: true\n        },\n            _switch = {\n          keyword: \"switch\"\n        };\n        var _throw = {\n          keyword: \"throw\",\n          beforeExpr: true\n        },\n            _try = {\n          keyword: \"try\"\n        },\n            _var = {\n          keyword: \"var\"\n        };\n        var _while = {\n          keyword: \"while\",\n          isLoop: true\n        },\n            _with = {\n          keyword: \"with\"\n        },\n            _new = {\n          keyword: \"new\",\n          beforeExpr: true\n        };\n        var _this = {\n          keyword: \"this\"\n        };\n        var _null = {\n          keyword: \"null\",\n          atomValue: null\n        },\n            _true = {\n          keyword: \"true\",\n          atomValue: true\n        };\n        var _false = {\n          keyword: \"false\",\n          atomValue: false\n        };\n        var _in = {\n          keyword: \"in\",\n          binop: 7,\n          beforeExpr: true\n        };\n        var keywordTypes = {\n          \"break\": _break,\n          \"case\": _case,\n          \"catch\": _catch,\n          \"continue\": _continue,\n          \"debugger\": _debugger,\n          \"default\": _default,\n          \"do\": _do,\n          \"else\": _else,\n          \"finally\": _finally,\n          \"for\": _for,\n          \"function\": _function,\n          \"if\": _if,\n          \"return\": _return,\n          \"switch\": _switch,\n          \"throw\": _throw,\n          \"try\": _try,\n          \"var\": _var,\n          \"while\": _while,\n          \"with\": _with,\n          \"null\": _null,\n          \"true\": _true,\n          \"false\": _false,\n          \"new\": _new,\n          \"in\": _in,\n          \"instanceof\": {\n            keyword: \"instanceof\",\n            binop: 7,\n            beforeExpr: true\n          },\n          \"this\": _this,\n          \"typeof\": {\n            keyword: \"typeof\",\n            prefix: true,\n            beforeExpr: true\n          },\n          \"void\": {\n            keyword: \"void\",\n            prefix: true,\n            beforeExpr: true\n          },\n          \"delete\": {\n            keyword: \"delete\",\n            prefix: true,\n            beforeExpr: true\n          }\n        };\n        var _bracketL = {\n          type: \"[\",\n          beforeExpr: true\n        },\n            _bracketR = {\n          type: \"]\"\n        },\n            _braceL = {\n          type: \"{\",\n          beforeExpr: true\n        };\n        var _braceR = {\n          type: \"}\"\n        },\n            _parenL = {\n          type: \"(\",\n          beforeExpr: true\n        },\n            _parenR = {\n          type: \")\"\n        };\n        var _comma = {\n          type: \",\",\n          beforeExpr: true\n        },\n            _semi = {\n          type: \";\",\n          beforeExpr: true\n        };\n        var _colon = {\n          type: \":\",\n          beforeExpr: true\n        },\n            _dot = {\n          type: \".\"\n        },\n            _question = {\n          type: \"?\",\n          beforeExpr: true\n        };\n        var _slash = {\n          binop: 10,\n          beforeExpr: true\n        },\n            _eq = {\n          isAssign: true,\n          beforeExpr: true\n        };\n        var _assign = {\n          isAssign: true,\n          beforeExpr: true\n        };\n        var _incDec = {\n          postfix: true,\n          prefix: true,\n          isUpdate: true\n        },\n            _prefix = {\n          prefix: true,\n          beforeExpr: true\n        };\n        var _logicalOR = {\n          binop: 1,\n          beforeExpr: true\n        };\n        var _logicalAND = {\n          binop: 2,\n          beforeExpr: true\n        };\n        var _bitwiseOR = {\n          binop: 3,\n          beforeExpr: true\n        };\n        var _bitwiseXOR = {\n          binop: 4,\n          beforeExpr: true\n        };\n        var _bitwiseAND = {\n          binop: 5,\n          beforeExpr: true\n        };\n        var _equality = {\n          binop: 6,\n          beforeExpr: true\n        };\n        var _relational = {\n          binop: 7,\n          beforeExpr: true\n        };\n        var _bitShift = {\n          binop: 8,\n          beforeExpr: true\n        };\n        var _plusMin = {\n          binop: 9,\n          prefix: true,\n          beforeExpr: true\n        };\n        var _multiplyModulo = {\n          binop: 10,\n          beforeExpr: true\n        };\n        exports.tokTypes = {\n          bracketL: _bracketL,\n          bracketR: _bracketR,\n          braceL: _braceL,\n          braceR: _braceR,\n          parenL: _parenL,\n          parenR: _parenR,\n          comma: _comma,\n          semi: _semi,\n          colon: _colon,\n          dot: _dot,\n          question: _question,\n          slash: _slash,\n          eq: _eq,\n          name: _name,\n          eof: _eof,\n          num: _num,\n          regexp: _regexp,\n          string: _string\n        };\n\n        for (var kw in keywordTypes) exports.tokTypes[\"_\" + kw] = keywordTypes[kw];\n\n        function makePredicate(words) {\n          words = words.split(\" \");\n          var f = \"\",\n              cats = [];\n\n          out: for (var i = 0; i < words.length; ++i) {\n            for (var j = 0; j < cats.length; ++j) if (cats[j][0].length == words[i].length) {\n              cats[j].push(words[i]);\n              continue out;\n            }\n\n            cats.push([words[i]]);\n          }\n\n          function compareTo(arr) {\n            if (arr.length == 1) return f += \"return str === \" + JSON.stringify(arr[0]) + \";\";\n            f += \"switch(str){\";\n\n            for (var i = 0; i < arr.length; ++i) f += \"case \" + JSON.stringify(arr[i]) + \":\";\n\n            f += \"return true}return false;\";\n          }\n\n          if (cats.length > 3) {\n            cats.sort(function (a, b) {\n              return b.length - a.length;\n            });\n            f += \"switch(str.length){\";\n\n            for (var i = 0; i < cats.length; ++i) {\n              var cat = cats[i];\n              f += \"case \" + cat[0].length + \":\";\n              compareTo(cat);\n            }\n\n            f += \"}\";\n          } else {\n            compareTo(words);\n          }\n\n          return new Function(\"str\", f);\n        }\n\n        var isReservedWord3 = makePredicate(\"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile\");\n        var isReservedWord5 = makePredicate(\"class enum extends super const export import\");\n        var isStrictReservedWord = makePredicate(\"implements interface let package private protected public static yield\");\n        var isStrictBadIdWord = makePredicate(\"eval arguments\");\n        var isKeyword = makePredicate(\"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this\");\n        var nonASCIIwhitespace = /[\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/;\n        var nonASCIIidentifierStartChars = \"\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\";\n        var nonASCIIidentifierChars = \"\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f\";\n        var nonASCIIidentifierStart = new RegExp(\"[\" + nonASCIIidentifierStartChars + \"]\");\n        var nonASCIIidentifier = new RegExp(\"[\" + nonASCIIidentifierStartChars + nonASCIIidentifierChars + \"]\");\n        var newline = /[\\n\\r\\u2028\\u2029]/;\n        var lineBreak = /\\r\\n|[\\n\\r\\u2028\\u2029]/g;\n\n        var isIdentifierStart = exports.isIdentifierStart = function (code) {\n          if (code < 65) return code === 36;\n          if (code < 91) return true;\n          if (code < 97) return code === 95;\n          if (code < 123) return true;\n          return code >= 0xaa && nonASCIIidentifierStart.test(String.fromCharCode(code));\n        };\n\n        var isIdentifierChar = exports.isIdentifierChar = function (code) {\n          if (code < 48) return code === 36;\n          if (code < 58) return true;\n          if (code < 65) return false;\n          if (code < 91) return true;\n          if (code < 97) return code === 95;\n          if (code < 123) return true;\n          return code >= 0xaa && nonASCIIidentifier.test(String.fromCharCode(code));\n        };\n\n        function line_loc_t() {\n          this.line = tokCurLine;\n          this.column = tokPos - tokLineStart;\n        }\n\n        function initTokenState() {\n          tokCurLine = 1;\n          tokPos = tokLineStart = 0;\n          tokRegexpAllowed = true;\n          skipSpace();\n        }\n\n        function finishToken(type, val) {\n          tokEnd = tokPos;\n          if (options.locations) tokEndLoc = new line_loc_t();\n          tokType = type;\n          skipSpace();\n          tokVal = val;\n          tokRegexpAllowed = type.beforeExpr;\n        }\n\n        function skipBlockComment() {\n          var startLoc = options.onComment && options.locations && new line_loc_t();\n          var start = tokPos,\n              end = input.indexOf(\"*/\", tokPos += 2);\n          if (end === -1) raise(tokPos - 2, \"Unterminated comment\");\n          tokPos = end + 2;\n\n          if (options.locations) {\n            lineBreak.lastIndex = start;\n            var match;\n\n            while ((match = lineBreak.exec(input)) && match.index < tokPos) {\n              ++tokCurLine;\n              tokLineStart = match.index + match[0].length;\n            }\n          }\n\n          if (options.onComment) options.onComment(true, input.slice(start + 2, end), start, tokPos, startLoc, options.locations && new line_loc_t());\n        }\n\n        function skipLineComment() {\n          var start = tokPos;\n          var startLoc = options.onComment && options.locations && new line_loc_t();\n          var ch = input.charCodeAt(tokPos += 2);\n\n          while (tokPos < inputLen && ch !== 10 && ch !== 13 && ch !== 8232 && ch !== 8233) {\n            ++tokPos;\n            ch = input.charCodeAt(tokPos);\n          }\n\n          if (options.onComment) options.onComment(false, input.slice(start + 2, tokPos), start, tokPos, startLoc, options.locations && new line_loc_t());\n        }\n\n        function skipSpace() {\n          while (tokPos < inputLen) {\n            var ch = input.charCodeAt(tokPos);\n\n            if (ch === 32) {\n              ++tokPos;\n            } else if (ch === 13) {\n              ++tokPos;\n              var next = input.charCodeAt(tokPos);\n\n              if (next === 10) {\n                ++tokPos;\n              }\n\n              if (options.locations) {\n                ++tokCurLine;\n                tokLineStart = tokPos;\n              }\n            } else if (ch === 10 || ch === 8232 || ch === 8233) {\n              ++tokPos;\n\n              if (options.locations) {\n                ++tokCurLine;\n                tokLineStart = tokPos;\n              }\n            } else if (ch > 8 && ch < 14) {\n              ++tokPos;\n            } else if (ch === 47) {\n              var next = input.charCodeAt(tokPos + 1);\n\n              if (next === 42) {\n                skipBlockComment();\n              } else if (next === 47) {\n                skipLineComment();\n              } else break;\n            } else if (ch === 160) {\n              ++tokPos;\n            } else if (ch >= 5760 && nonASCIIwhitespace.test(String.fromCharCode(ch))) {\n              ++tokPos;\n            } else {\n              break;\n            }\n          }\n        }\n\n        function readToken_dot() {\n          var next = input.charCodeAt(tokPos + 1);\n          if (next >= 48 && next <= 57) return readNumber(true);\n          ++tokPos;\n          return finishToken(_dot);\n        }\n\n        function readToken_slash() {\n          var next = input.charCodeAt(tokPos + 1);\n\n          if (tokRegexpAllowed) {\n            ++tokPos;\n            return readRegexp();\n          }\n\n          if (next === 61) return finishOp(_assign, 2);\n          return finishOp(_slash, 1);\n        }\n\n        function readToken_mult_modulo() {\n          var next = input.charCodeAt(tokPos + 1);\n          if (next === 61) return finishOp(_assign, 2);\n          return finishOp(_multiplyModulo, 1);\n        }\n\n        function readToken_pipe_amp(code) {\n          var next = input.charCodeAt(tokPos + 1);\n          if (next === code) return finishOp(code === 124 ? _logicalOR : _logicalAND, 2);\n          if (next === 61) return finishOp(_assign, 2);\n          return finishOp(code === 124 ? _bitwiseOR : _bitwiseAND, 1);\n        }\n\n        function readToken_caret() {\n          var next = input.charCodeAt(tokPos + 1);\n          if (next === 61) return finishOp(_assign, 2);\n          return finishOp(_bitwiseXOR, 1);\n        }\n\n        function readToken_plus_min(code) {\n          var next = input.charCodeAt(tokPos + 1);\n\n          if (next === code) {\n            if (next == 45 && input.charCodeAt(tokPos + 2) == 62 && newline.test(input.slice(lastEnd, tokPos))) {\n              tokPos += 3;\n              skipLineComment();\n              skipSpace();\n              return readToken();\n            }\n\n            return finishOp(_incDec, 2);\n          }\n\n          if (next === 61) return finishOp(_assign, 2);\n          return finishOp(_plusMin, 1);\n        }\n\n        function readToken_lt_gt(code) {\n          var next = input.charCodeAt(tokPos + 1);\n          var size = 1;\n\n          if (next === code) {\n            size = code === 62 && input.charCodeAt(tokPos + 2) === 62 ? 3 : 2;\n            if (input.charCodeAt(tokPos + size) === 61) return finishOp(_assign, size + 1);\n            return finishOp(_bitShift, size);\n          }\n\n          if (next == 33 && code == 60 && input.charCodeAt(tokPos + 2) == 45 && input.charCodeAt(tokPos + 3) == 45) {\n            tokPos += 4;\n            skipLineComment();\n            skipSpace();\n            return readToken();\n          }\n\n          if (next === 61) size = input.charCodeAt(tokPos + 2) === 61 ? 3 : 2;\n          return finishOp(_relational, size);\n        }\n\n        function readToken_eq_excl(code) {\n          var next = input.charCodeAt(tokPos + 1);\n          if (next === 61) return finishOp(_equality, input.charCodeAt(tokPos + 2) === 61 ? 3 : 2);\n          return finishOp(code === 61 ? _eq : _prefix, 1);\n        }\n\n        function getTokenFromCode(code) {\n          switch (code) {\n            case 46:\n              return readToken_dot();\n\n            case 40:\n              ++tokPos;\n              return finishToken(_parenL);\n\n            case 41:\n              ++tokPos;\n              return finishToken(_parenR);\n\n            case 59:\n              ++tokPos;\n              return finishToken(_semi);\n\n            case 44:\n              ++tokPos;\n              return finishToken(_comma);\n\n            case 91:\n              ++tokPos;\n              return finishToken(_bracketL);\n\n            case 93:\n              ++tokPos;\n              return finishToken(_bracketR);\n\n            case 123:\n              ++tokPos;\n              return finishToken(_braceL);\n\n            case 125:\n              ++tokPos;\n              return finishToken(_braceR);\n\n            case 58:\n              ++tokPos;\n              return finishToken(_colon);\n\n            case 63:\n              ++tokPos;\n              return finishToken(_question);\n\n            case 48:\n              var next = input.charCodeAt(tokPos + 1);\n              if (next === 120 || next === 88) return readHexNumber();\n\n            case 49:\n            case 50:\n            case 51:\n            case 52:\n            case 53:\n            case 54:\n            case 55:\n            case 56:\n            case 57:\n              return readNumber(false);\n\n            case 34:\n            case 39:\n              return readString(code);\n\n            case 47:\n              return readToken_slash(code);\n\n            case 37:\n            case 42:\n              return readToken_mult_modulo();\n\n            case 124:\n            case 38:\n              return readToken_pipe_amp(code);\n\n            case 94:\n              return readToken_caret();\n\n            case 43:\n            case 45:\n              return readToken_plus_min(code);\n\n            case 60:\n            case 62:\n              return readToken_lt_gt(code);\n\n            case 61:\n            case 33:\n              return readToken_eq_excl(code);\n\n            case 126:\n              return finishOp(_prefix, 1);\n          }\n\n          return false;\n        }\n\n        function readToken(forceRegexp) {\n          if (!forceRegexp) tokStart = tokPos;else tokPos = tokStart + 1;\n          if (options.locations) tokStartLoc = new line_loc_t();\n          if (forceRegexp) return readRegexp();\n          if (tokPos >= inputLen) return finishToken(_eof);\n          var code = input.charCodeAt(tokPos);\n          if (isIdentifierStart(code) || code === 92) return readWord();\n          var tok = getTokenFromCode(code);\n\n          if (tok === false) {\n            var ch = String.fromCharCode(code);\n            if (ch === \"\\\\\" || nonASCIIidentifierStart.test(ch)) return readWord();\n            raise(tokPos, \"Unexpected character '\" + ch + \"'\");\n          }\n\n          return tok;\n        }\n\n        function finishOp(type, size) {\n          var str = input.slice(tokPos, tokPos + size);\n          tokPos += size;\n          finishToken(type, str);\n        }\n\n        function readRegexp() {\n          var content = \"\",\n              escaped,\n              inClass,\n              start = tokPos;\n\n          for (;;) {\n            if (tokPos >= inputLen) raise(start, \"Unterminated regular expression\");\n            var ch = input.charAt(tokPos);\n            if (newline.test(ch)) raise(start, \"Unterminated regular expression\");\n\n            if (!escaped) {\n              if (ch === \"[\") inClass = true;else if (ch === \"]\" && inClass) inClass = false;else if (ch === \"/\" && !inClass) break;\n              escaped = ch === \"\\\\\";\n            } else escaped = false;\n\n            ++tokPos;\n          }\n\n          var content = input.slice(start, tokPos);\n          ++tokPos;\n          var mods = readWord1();\n          if (mods && !/^[gmsiy]*$/.test(mods)) raise(start, \"Invalid regexp flag\");\n\n          try {\n            var value = new RegExp(content, mods);\n          } catch (e) {\n            if (e instanceof SyntaxError) raise(start, e.message);\n            raise(e);\n          }\n\n          return finishToken(_regexp, value);\n        }\n\n        function readInt(radix, len) {\n          var start = tokPos,\n              total = 0;\n\n          for (var i = 0, e = len == null ? Infinity : len; i < e; ++i) {\n            var code = input.charCodeAt(tokPos),\n                val;\n            if (code >= 97) val = code - 97 + 10;else if (code >= 65) val = code - 65 + 10;else if (code >= 48 && code <= 57) val = code - 48;else val = Infinity;\n            if (val >= radix) break;\n            ++tokPos;\n            total = total * radix + val;\n          }\n\n          if (tokPos === start || len != null && tokPos - start !== len) return null;\n          return total;\n        }\n\n        function readHexNumber() {\n          tokPos += 2;\n          var val = readInt(16);\n          if (val == null) raise(tokStart + 2, \"Expected hexadecimal number\");\n          if (isIdentifierStart(input.charCodeAt(tokPos))) raise(tokPos, \"Identifier directly after number\");\n          return finishToken(_num, val);\n        }\n\n        function readNumber(startsWithDot) {\n          var start = tokPos,\n              isFloat = false,\n              octal = input.charCodeAt(tokPos) === 48;\n          if (!startsWithDot && readInt(10) === null) raise(start, \"Invalid number\");\n\n          if (input.charCodeAt(tokPos) === 46) {\n            ++tokPos;\n            readInt(10);\n            isFloat = true;\n          }\n\n          var next = input.charCodeAt(tokPos);\n\n          if (next === 69 || next === 101) {\n            next = input.charCodeAt(++tokPos);\n            if (next === 43 || next === 45) ++tokPos;\n            if (readInt(10) === null) raise(start, \"Invalid number\");\n            isFloat = true;\n          }\n\n          if (isIdentifierStart(input.charCodeAt(tokPos))) raise(tokPos, \"Identifier directly after number\");\n          var str = input.slice(start, tokPos),\n              val;\n          if (isFloat) val = parseFloat(str);else if (!octal || str.length === 1) val = parseInt(str, 10);else if (/[89]/.test(str) || strict) raise(start, \"Invalid number\");else val = parseInt(str, 8);\n          return finishToken(_num, val);\n        }\n\n        function readString(quote) {\n          tokPos++;\n          var out = \"\";\n\n          for (;;) {\n            if (tokPos >= inputLen) raise(tokStart, \"Unterminated string constant\");\n            var ch = input.charCodeAt(tokPos);\n\n            if (ch === quote) {\n              ++tokPos;\n              return finishToken(_string, out);\n            }\n\n            if (ch === 92) {\n              ch = input.charCodeAt(++tokPos);\n              var octal = /^[0-7]+/.exec(input.slice(tokPos, tokPos + 3));\n              if (octal) octal = octal[0];\n\n              while (octal && parseInt(octal, 8) > 255) octal = octal.slice(0, -1);\n\n              if (octal === \"0\") octal = null;\n              ++tokPos;\n\n              if (octal) {\n                if (strict) raise(tokPos - 2, \"Octal literal in strict mode\");\n                out += String.fromCharCode(parseInt(octal, 8));\n                tokPos += octal.length - 1;\n              } else {\n                switch (ch) {\n                  case 110:\n                    out += \"\\n\";\n                    break;\n\n                  case 114:\n                    out += \"\\r\";\n                    break;\n\n                  case 120:\n                    out += String.fromCharCode(readHexChar(2));\n                    break;\n\n                  case 117:\n                    out += String.fromCharCode(readHexChar(4));\n                    break;\n\n                  case 85:\n                    out += String.fromCharCode(readHexChar(8));\n                    break;\n\n                  case 116:\n                    out += \"\\t\";\n                    break;\n\n                  case 98:\n                    out += \"\\b\";\n                    break;\n\n                  case 118:\n                    out += \"\\u000b\";\n                    break;\n\n                  case 102:\n                    out += \"\\f\";\n                    break;\n\n                  case 48:\n                    out += \"\\0\";\n                    break;\n\n                  case 13:\n                    if (input.charCodeAt(tokPos) === 10) ++tokPos;\n\n                  case 10:\n                    if (options.locations) {\n                      tokLineStart = tokPos;\n                      ++tokCurLine;\n                    }\n\n                    break;\n\n                  default:\n                    out += String.fromCharCode(ch);\n                    break;\n                }\n              }\n            } else {\n              if (ch === 13 || ch === 10 || ch === 8232 || ch === 8233) raise(tokStart, \"Unterminated string constant\");\n              out += String.fromCharCode(ch);\n              ++tokPos;\n            }\n          }\n        }\n\n        function readHexChar(len) {\n          var n = readInt(16, len);\n          if (n === null) raise(tokStart, \"Bad character escape sequence\");\n          return n;\n        }\n\n        var containsEsc;\n\n        function readWord1() {\n          containsEsc = false;\n          var word,\n              first = true,\n              start = tokPos;\n\n          for (;;) {\n            var ch = input.charCodeAt(tokPos);\n\n            if (isIdentifierChar(ch)) {\n              if (containsEsc) word += input.charAt(tokPos);\n              ++tokPos;\n            } else if (ch === 92) {\n              if (!containsEsc) word = input.slice(start, tokPos);\n              containsEsc = true;\n              if (input.charCodeAt(++tokPos) != 117) raise(tokPos, \"Expecting Unicode escape sequence \\\\uXXXX\");\n              ++tokPos;\n              var esc = readHexChar(4);\n              var escStr = String.fromCharCode(esc);\n              if (!escStr) raise(tokPos - 1, \"Invalid Unicode escape\");\n              if (!(first ? isIdentifierStart(esc) : isIdentifierChar(esc))) raise(tokPos - 4, \"Invalid Unicode escape\");\n              word += escStr;\n            } else {\n              break;\n            }\n\n            first = false;\n          }\n\n          return containsEsc ? word : input.slice(start, tokPos);\n        }\n\n        function readWord() {\n          var word = readWord1();\n          var type = _name;\n          if (!containsEsc && isKeyword(word)) type = keywordTypes[word];\n          return finishToken(type, word);\n        }\n\n        function next() {\n          lastStart = tokStart;\n          lastEnd = tokEnd;\n          lastEndLoc = tokEndLoc;\n          readToken();\n        }\n\n        function setStrict(strct) {\n          strict = strct;\n          tokPos = tokStart;\n\n          if (options.locations) {\n            while (tokPos < tokLineStart) {\n              tokLineStart = input.lastIndexOf(\"\\n\", tokLineStart - 2) + 1;\n              --tokCurLine;\n            }\n          }\n\n          skipSpace();\n          readToken();\n        }\n\n        function node_t() {\n          this.type = null;\n          this.start = tokStart;\n          this.end = null;\n        }\n\n        function node_loc_t() {\n          this.start = tokStartLoc;\n          this.end = null;\n          if (sourceFile !== null) this.source = sourceFile;\n        }\n\n        function startNode() {\n          var node = new node_t();\n          if (options.locations) node.loc = new node_loc_t();\n          if (options.directSourceFile) node.sourceFile = options.directSourceFile;\n          if (options.ranges) node.range = [tokStart, 0];\n          return node;\n        }\n\n        function startNodeFrom(other) {\n          var node = new node_t();\n          node.start = other.start;\n\n          if (options.locations) {\n            node.loc = new node_loc_t();\n            node.loc.start = other.loc.start;\n          }\n\n          if (options.ranges) node.range = [other.range[0], 0];\n          return node;\n        }\n\n        function finishNode(node, type) {\n          node.type = type;\n          node.end = lastEnd;\n          if (options.locations) node.loc.end = lastEndLoc;\n          if (options.ranges) node.range[1] = lastEnd;\n          return node;\n        }\n\n        function isUseStrict(stmt) {\n          return options.ecmaVersion >= 5 && stmt.type === \"ExpressionStatement\" && stmt.expression.type === \"Literal\" && stmt.expression.value === \"use strict\";\n        }\n\n        function eat(type) {\n          if (tokType === type) {\n            next();\n            return true;\n          }\n        }\n\n        function canInsertSemicolon() {\n          return !options.strictSemicolons && (tokType === _eof || tokType === _braceR || newline.test(input.slice(lastEnd, tokStart)));\n        }\n\n        function semicolon() {\n          if (!eat(_semi) && !canInsertSemicolon()) unexpected();\n        }\n\n        function expect(type) {\n          if (tokType === type) next();else unexpected();\n        }\n\n        function unexpected() {\n          raise(tokStart, \"Unexpected token\");\n        }\n\n        function checkLVal(expr) {\n          if (expr.type !== \"Identifier\" && expr.type !== \"MemberExpression\") raise(expr.start, \"Assigning to rvalue\");\n          if (strict && expr.type === \"Identifier\" && isStrictBadIdWord(expr.name)) raise(expr.start, \"Assigning to \" + expr.name + \" in strict mode\");\n        }\n\n        function parseTopLevel(program) {\n          lastStart = lastEnd = tokPos;\n          if (options.locations) lastEndLoc = new line_loc_t();\n          inFunction = strict = null;\n          labels = [];\n          readToken();\n          var node = program || startNode(),\n              first = true;\n          if (!program) node.body = [];\n\n          while (tokType !== _eof) {\n            var stmt = parseStatement();\n            node.body.push(stmt);\n            if (first && isUseStrict(stmt)) setStrict(true);\n            first = false;\n          }\n\n          return finishNode(node, \"Program\");\n        }\n\n        var loopLabel = {\n          kind: \"loop\"\n        },\n            switchLabel = {\n          kind: \"switch\"\n        };\n\n        function parseStatement() {\n          if (tokType === _slash || tokType === _assign && tokVal == \"/=\") readToken(true);\n          var starttype = tokType,\n              node = startNode();\n\n          switch (starttype) {\n            case _break:\n            case _continue:\n              next();\n              var isBreak = starttype === _break;\n              if (eat(_semi) || canInsertSemicolon()) node.label = null;else if (tokType !== _name) unexpected();else {\n                node.label = parseIdent();\n                semicolon();\n              }\n\n              for (var i = 0; i < labels.length; ++i) {\n                var lab = labels[i];\n\n                if (node.label == null || lab.name === node.label.name) {\n                  if (lab.kind != null && (isBreak || lab.kind === \"loop\")) break;\n                  if (node.label && isBreak) break;\n                }\n              }\n\n              if (i === labels.length) raise(node.start, \"Unsyntactic \" + starttype.keyword);\n              return finishNode(node, isBreak ? \"BreakStatement\" : \"ContinueStatement\");\n\n            case _debugger:\n              next();\n              semicolon();\n              return finishNode(node, \"DebuggerStatement\");\n\n            case _do:\n              next();\n              labels.push(loopLabel);\n              node.body = parseStatement();\n              labels.pop();\n              expect(_while);\n              node.test = parseParenExpression();\n              semicolon();\n              return finishNode(node, \"DoWhileStatement\");\n\n            case _for:\n              next();\n              labels.push(loopLabel);\n              expect(_parenL);\n              if (tokType === _semi) return parseFor(node, null);\n\n              if (tokType === _var) {\n                var init = startNode();\n                next();\n                parseVar(init, true);\n                finishNode(init, \"VariableDeclaration\");\n                if (init.declarations.length === 1 && eat(_in)) return parseForIn(node, init);\n                return parseFor(node, init);\n              }\n\n              var init = parseExpression(false, true);\n\n              if (eat(_in)) {\n                checkLVal(init);\n                return parseForIn(node, init);\n              }\n\n              return parseFor(node, init);\n\n            case _function:\n              next();\n              return parseFunction(node, true);\n\n            case _if:\n              next();\n              node.test = parseParenExpression();\n              node.consequent = parseStatement();\n              node.alternate = eat(_else) ? parseStatement() : null;\n              return finishNode(node, \"IfStatement\");\n\n            case _return:\n              if (!inFunction && !options.allowReturnOutsideFunction) raise(tokStart, \"'return' outside of function\");\n              next();\n              if (eat(_semi) || canInsertSemicolon()) node.argument = null;else {\n                node.argument = parseExpression();\n                semicolon();\n              }\n              return finishNode(node, \"ReturnStatement\");\n\n            case _switch:\n              next();\n              node.discriminant = parseParenExpression();\n              node.cases = [];\n              expect(_braceL);\n              labels.push(switchLabel);\n\n              for (var cur, sawDefault; tokType != _braceR;) {\n                if (tokType === _case || tokType === _default) {\n                  var isCase = tokType === _case;\n                  if (cur) finishNode(cur, \"SwitchCase\");\n                  node.cases.push(cur = startNode());\n                  cur.consequent = [];\n                  next();\n                  if (isCase) cur.test = parseExpression();else {\n                    if (sawDefault) raise(lastStart, \"Multiple default clauses\");\n                    sawDefault = true;\n                    cur.test = null;\n                  }\n                  expect(_colon);\n                } else {\n                  if (!cur) unexpected();\n                  cur.consequent.push(parseStatement());\n                }\n              }\n\n              if (cur) finishNode(cur, \"SwitchCase\");\n              next();\n              labels.pop();\n              return finishNode(node, \"SwitchStatement\");\n\n            case _throw:\n              next();\n              if (newline.test(input.slice(lastEnd, tokStart))) raise(lastEnd, \"Illegal newline after throw\");\n              node.argument = parseExpression();\n              semicolon();\n              return finishNode(node, \"ThrowStatement\");\n\n            case _try:\n              next();\n              node.block = parseBlock();\n              node.handler = null;\n\n              if (tokType === _catch) {\n                var clause = startNode();\n                next();\n                expect(_parenL);\n                clause.param = parseIdent();\n                if (strict && isStrictBadIdWord(clause.param.name)) raise(clause.param.start, \"Binding \" + clause.param.name + \" in strict mode\");\n                expect(_parenR);\n                clause.guard = null;\n                clause.body = parseBlock();\n                node.handler = finishNode(clause, \"CatchClause\");\n              }\n\n              node.guardedHandlers = empty;\n              node.finalizer = eat(_finally) ? parseBlock() : null;\n              if (!node.handler && !node.finalizer) raise(node.start, \"Missing catch or finally clause\");\n              return finishNode(node, \"TryStatement\");\n\n            case _var:\n              next();\n              parseVar(node);\n              semicolon();\n              return finishNode(node, \"VariableDeclaration\");\n\n            case _while:\n              next();\n              node.test = parseParenExpression();\n              labels.push(loopLabel);\n              node.body = parseStatement();\n              labels.pop();\n              return finishNode(node, \"WhileStatement\");\n\n            case _with:\n              if (strict) raise(tokStart, \"'with' in strict mode\");\n              next();\n              node.object = parseParenExpression();\n              node.body = parseStatement();\n              return finishNode(node, \"WithStatement\");\n\n            case _braceL:\n              return parseBlock();\n\n            case _semi:\n              next();\n              return finishNode(node, \"EmptyStatement\");\n\n            default:\n              var maybeName = tokVal,\n                  expr = parseExpression();\n\n              if (starttype === _name && expr.type === \"Identifier\" && eat(_colon)) {\n                for (var i = 0; i < labels.length; ++i) if (labels[i].name === maybeName) raise(expr.start, \"Label '\" + maybeName + \"' is already declared\");\n\n                var kind = tokType.isLoop ? \"loop\" : tokType === _switch ? \"switch\" : null;\n                labels.push({\n                  name: maybeName,\n                  kind: kind\n                });\n                node.body = parseStatement();\n                labels.pop();\n                node.label = expr;\n                return finishNode(node, \"LabeledStatement\");\n              } else {\n                node.expression = expr;\n                semicolon();\n                return finishNode(node, \"ExpressionStatement\");\n              }\n\n          }\n        }\n\n        function parseParenExpression() {\n          expect(_parenL);\n          var val = parseExpression();\n          expect(_parenR);\n          return val;\n        }\n\n        function parseBlock(allowStrict) {\n          var node = startNode(),\n              first = true,\n              strict = false,\n              oldStrict;\n          node.body = [];\n          expect(_braceL);\n\n          while (!eat(_braceR)) {\n            var stmt = parseStatement();\n            node.body.push(stmt);\n\n            if (first && allowStrict && isUseStrict(stmt)) {\n              oldStrict = strict;\n              setStrict(strict = true);\n            }\n\n            first = false;\n          }\n\n          if (strict && !oldStrict) setStrict(false);\n          return finishNode(node, \"BlockStatement\");\n        }\n\n        function parseFor(node, init) {\n          node.init = init;\n          expect(_semi);\n          node.test = tokType === _semi ? null : parseExpression();\n          expect(_semi);\n          node.update = tokType === _parenR ? null : parseExpression();\n          expect(_parenR);\n          node.body = parseStatement();\n          labels.pop();\n          return finishNode(node, \"ForStatement\");\n        }\n\n        function parseForIn(node, init) {\n          node.left = init;\n          node.right = parseExpression();\n          expect(_parenR);\n          node.body = parseStatement();\n          labels.pop();\n          return finishNode(node, \"ForInStatement\");\n        }\n\n        function parseVar(node, noIn) {\n          node.declarations = [];\n          node.kind = \"var\";\n\n          for (;;) {\n            var decl = startNode();\n            decl.id = parseIdent();\n            if (strict && isStrictBadIdWord(decl.id.name)) raise(decl.id.start, \"Binding \" + decl.id.name + \" in strict mode\");\n            decl.init = eat(_eq) ? parseExpression(true, noIn) : null;\n            node.declarations.push(finishNode(decl, \"VariableDeclarator\"));\n            if (!eat(_comma)) break;\n          }\n\n          return node;\n        }\n\n        function parseExpression(noComma, noIn) {\n          var expr = parseMaybeAssign(noIn);\n\n          if (!noComma && tokType === _comma) {\n            var node = startNodeFrom(expr);\n            node.expressions = [expr];\n\n            while (eat(_comma)) node.expressions.push(parseMaybeAssign(noIn));\n\n            return finishNode(node, \"SequenceExpression\");\n          }\n\n          return expr;\n        }\n\n        function parseMaybeAssign(noIn) {\n          var left = parseMaybeConditional(noIn);\n\n          if (tokType.isAssign) {\n            var node = startNodeFrom(left);\n            node.operator = tokVal;\n            node.left = left;\n            next();\n            node.right = parseMaybeAssign(noIn);\n            checkLVal(left);\n            return finishNode(node, \"AssignmentExpression\");\n          }\n\n          return left;\n        }\n\n        function parseMaybeConditional(noIn) {\n          var expr = parseExprOps(noIn);\n\n          if (eat(_question)) {\n            var node = startNodeFrom(expr);\n            node.test = expr;\n            node.consequent = parseExpression(true);\n            expect(_colon);\n            node.alternate = parseExpression(true, noIn);\n            return finishNode(node, \"ConditionalExpression\");\n          }\n\n          return expr;\n        }\n\n        function parseExprOps(noIn) {\n          return parseExprOp(parseMaybeUnary(), -1, noIn);\n        }\n\n        function parseExprOp(left, minPrec, noIn) {\n          var prec = tokType.binop;\n\n          if (prec != null && (!noIn || tokType !== _in)) {\n            if (prec > minPrec) {\n              var node = startNodeFrom(left);\n              node.left = left;\n              node.operator = tokVal;\n              var op = tokType;\n              next();\n              node.right = parseExprOp(parseMaybeUnary(), prec, noIn);\n              var exprNode = finishNode(node, op === _logicalOR || op === _logicalAND ? \"LogicalExpression\" : \"BinaryExpression\");\n              return parseExprOp(exprNode, minPrec, noIn);\n            }\n          }\n\n          return left;\n        }\n\n        function parseMaybeUnary() {\n          if (tokType.prefix) {\n            var node = startNode(),\n                update = tokType.isUpdate;\n            node.operator = tokVal;\n            node.prefix = true;\n            tokRegexpAllowed = true;\n            next();\n            node.argument = parseMaybeUnary();\n            if (update) checkLVal(node.argument);else if (strict && node.operator === \"delete\" && node.argument.type === \"Identifier\") raise(node.start, \"Deleting local variable in strict mode\");\n            return finishNode(node, update ? \"UpdateExpression\" : \"UnaryExpression\");\n          }\n\n          var expr = parseExprSubscripts();\n\n          while (tokType.postfix && !canInsertSemicolon()) {\n            var node = startNodeFrom(expr);\n            node.operator = tokVal;\n            node.prefix = false;\n            node.argument = expr;\n            checkLVal(expr);\n            next();\n            expr = finishNode(node, \"UpdateExpression\");\n          }\n\n          return expr;\n        }\n\n        function parseExprSubscripts() {\n          return parseSubscripts(parseExprAtom());\n        }\n\n        function parseSubscripts(base, noCalls) {\n          if (eat(_dot)) {\n            var node = startNodeFrom(base);\n            node.object = base;\n            node.property = parseIdent(true);\n            node.computed = false;\n            return parseSubscripts(finishNode(node, \"MemberExpression\"), noCalls);\n          } else if (eat(_bracketL)) {\n            var node = startNodeFrom(base);\n            node.object = base;\n            node.property = parseExpression();\n            node.computed = true;\n            expect(_bracketR);\n            return parseSubscripts(finishNode(node, \"MemberExpression\"), noCalls);\n          } else if (!noCalls && eat(_parenL)) {\n            var node = startNodeFrom(base);\n            node.callee = base;\n            node.arguments = parseExprList(_parenR, false);\n            return parseSubscripts(finishNode(node, \"CallExpression\"), noCalls);\n          } else return base;\n        }\n\n        function parseExprAtom() {\n          switch (tokType) {\n            case _this:\n              var node = startNode();\n              next();\n              return finishNode(node, \"ThisExpression\");\n\n            case _name:\n              return parseIdent();\n\n            case _num:\n            case _string:\n            case _regexp:\n              var node = startNode();\n              node.value = tokVal;\n              node.raw = input.slice(tokStart, tokEnd);\n              next();\n              return finishNode(node, \"Literal\");\n\n            case _null:\n            case _true:\n            case _false:\n              var node = startNode();\n              node.value = tokType.atomValue;\n              node.raw = tokType.keyword;\n              next();\n              return finishNode(node, \"Literal\");\n\n            case _parenL:\n              var tokStartLoc1 = tokStartLoc,\n                  tokStart1 = tokStart;\n              next();\n              var val = parseExpression();\n              val.start = tokStart1;\n              val.end = tokEnd;\n\n              if (options.locations) {\n                val.loc.start = tokStartLoc1;\n                val.loc.end = tokEndLoc;\n              }\n\n              if (options.ranges) val.range = [tokStart1, tokEnd];\n              expect(_parenR);\n              return val;\n\n            case _bracketL:\n              var node = startNode();\n              next();\n              node.elements = parseExprList(_bracketR, true, true);\n              return finishNode(node, \"ArrayExpression\");\n\n            case _braceL:\n              return parseObj();\n\n            case _function:\n              var node = startNode();\n              next();\n              return parseFunction(node, false);\n\n            case _new:\n              return parseNew();\n\n            default:\n              unexpected();\n          }\n        }\n\n        function parseNew() {\n          var node = startNode();\n          next();\n          node.callee = parseSubscripts(parseExprAtom(), true);\n          if (eat(_parenL)) node.arguments = parseExprList(_parenR, false);else node.arguments = empty;\n          return finishNode(node, \"NewExpression\");\n        }\n\n        function parseObj() {\n          var node = startNode(),\n              first = true,\n              sawGetSet = false;\n          node.properties = [];\n          next();\n\n          while (!eat(_braceR)) {\n            if (!first) {\n              expect(_comma);\n              if (options.allowTrailingCommas && eat(_braceR)) break;\n            } else first = false;\n\n            var prop = {\n              key: parsePropertyName()\n            },\n                isGetSet = false,\n                kind;\n\n            if (eat(_colon)) {\n              prop.value = parseExpression(true);\n              kind = prop.kind = \"init\";\n            } else if (options.ecmaVersion >= 5 && prop.key.type === \"Identifier\" && (prop.key.name === \"get\" || prop.key.name === \"set\")) {\n              isGetSet = sawGetSet = true;\n              kind = prop.kind = prop.key.name;\n              prop.key = parsePropertyName();\n              if (tokType !== _parenL) unexpected();\n              prop.value = parseFunction(startNode(), false);\n            } else unexpected();\n\n            if (prop.key.type === \"Identifier\" && (strict || sawGetSet)) {\n              for (var i = 0; i < node.properties.length; ++i) {\n                var other = node.properties[i];\n\n                if (other.key.name === prop.key.name) {\n                  var conflict = kind == other.kind || isGetSet && other.kind === \"init\" || kind === \"init\" && (other.kind === \"get\" || other.kind === \"set\");\n                  if (conflict && !strict && kind === \"init\" && other.kind === \"init\") conflict = false;\n                  if (conflict) raise(prop.key.start, \"Redefinition of property\");\n                }\n              }\n            }\n\n            node.properties.push(prop);\n          }\n\n          return finishNode(node, \"ObjectExpression\");\n        }\n\n        function parsePropertyName() {\n          if (tokType === _num || tokType === _string) return parseExprAtom();\n          return parseIdent(true);\n        }\n\n        function parseFunction(node, isStatement) {\n          if (tokType === _name) node.id = parseIdent();else if (isStatement) unexpected();else node.id = null;\n          node.params = [];\n          var first = true;\n          expect(_parenL);\n\n          while (!eat(_parenR)) {\n            if (!first) expect(_comma);else first = false;\n            node.params.push(parseIdent());\n          }\n\n          var oldInFunc = inFunction,\n              oldLabels = labels;\n          inFunction = true;\n          labels = [];\n          node.body = parseBlock(true);\n          inFunction = oldInFunc;\n          labels = oldLabels;\n\n          if (strict || node.body.body.length && isUseStrict(node.body.body[0])) {\n            for (var i = node.id ? -1 : 0; i < node.params.length; ++i) {\n              var id = i < 0 ? node.id : node.params[i];\n              if (isStrictReservedWord(id.name) || isStrictBadIdWord(id.name)) raise(id.start, \"Defining '\" + id.name + \"' in strict mode\");\n              if (i >= 0) for (var j = 0; j < i; ++j) if (id.name === node.params[j].name) raise(id.start, \"Argument name clash in strict mode\");\n            }\n          }\n\n          return finishNode(node, isStatement ? \"FunctionDeclaration\" : \"FunctionExpression\");\n        }\n\n        function parseExprList(close, allowTrailingComma, allowEmpty) {\n          var elts = [],\n              first = true;\n\n          while (!eat(close)) {\n            if (!first) {\n              expect(_comma);\n              if (allowTrailingComma && options.allowTrailingCommas && eat(close)) break;\n            } else first = false;\n\n            if (allowEmpty && tokType === _comma) elts.push(null);else elts.push(parseExpression(true));\n          }\n\n          return elts;\n        }\n\n        function parseIdent(liberal) {\n          var node = startNode();\n          if (liberal && options.forbidReserved == \"everywhere\") liberal = false;\n\n          if (tokType === _name) {\n            if (!liberal && (options.forbidReserved && (options.ecmaVersion === 3 ? isReservedWord3 : isReservedWord5)(tokVal) || strict && isStrictReservedWord(tokVal)) && input.slice(tokStart, tokEnd).indexOf(\"\\\\\") == -1) raise(tokStart, \"The keyword '\" + tokVal + \"' is reserved\");\n            node.name = tokVal;\n          } else if (liberal && tokType.keyword) {\n            node.name = tokType.keyword;\n          } else {\n            unexpected();\n          }\n\n          tokRegexpAllowed = false;\n          next();\n          return finishNode(node, \"Identifier\");\n        }\n      });\n\n      if (!acorn.version) acorn = null;\n    }\n\n    function parse(code, options) {\n      return (global.acorn || acorn).parse(code, options);\n    }\n\n    var binaryOperators = {\n      '+': '__add',\n      '-': '__subtract',\n      '*': '__multiply',\n      '/': '__divide',\n      '%': '__modulo',\n      '==': '__equals',\n      '!=': '__equals'\n    };\n    var unaryOperators = {\n      '-': '__negate',\n      '+': '__self'\n    };\n    var fields = Base.each(['add', 'subtract', 'multiply', 'divide', 'modulo', 'equals', 'negate'], function (name) {\n      this['__' + name] = '#' + name;\n    }, {\n      __self: function () {\n        return this;\n      }\n    });\n    Point.inject(fields);\n    Size.inject(fields);\n    Color.inject(fields);\n\n    function __$__(left, operator, right) {\n      var handler = binaryOperators[operator];\n\n      if (left && left[handler]) {\n        var res = left[handler](right);\n        return operator === '!=' ? !res : res;\n      }\n\n      switch (operator) {\n        case '+':\n          return left + right;\n\n        case '-':\n          return left - right;\n\n        case '*':\n          return left * right;\n\n        case '/':\n          return left / right;\n\n        case '%':\n          return left % right;\n\n        case '==':\n          return left == right;\n\n        case '!=':\n          return left != right;\n      }\n    }\n\n    function $__(operator, value) {\n      var handler = unaryOperators[operator];\n      if (value && value[handler]) return value[handler]();\n\n      switch (operator) {\n        case '+':\n          return +value;\n\n        case '-':\n          return -value;\n      }\n    }\n\n    function compile(code, options) {\n      if (!code) return '';\n      options = options || {};\n      var insertions = [];\n\n      function getOffset(offset) {\n        for (var i = 0, l = insertions.length; i < l; i++) {\n          var insertion = insertions[i];\n          if (insertion[0] >= offset) break;\n          offset += insertion[1];\n        }\n\n        return offset;\n      }\n\n      function getCode(node) {\n        return code.substring(getOffset(node.range[0]), getOffset(node.range[1]));\n      }\n\n      function getBetween(left, right) {\n        return code.substring(getOffset(left.range[1]), getOffset(right.range[0]));\n      }\n\n      function replaceCode(node, str) {\n        var start = getOffset(node.range[0]),\n            end = getOffset(node.range[1]),\n            insert = 0;\n\n        for (var i = insertions.length - 1; i >= 0; i--) {\n          if (start > insertions[i][0]) {\n            insert = i + 1;\n            break;\n          }\n        }\n\n        insertions.splice(insert, 0, [start, str.length - end + start]);\n        code = code.substring(0, start) + str + code.substring(end);\n      }\n\n      function handleOverloading(node, parent) {\n        switch (node.type) {\n          case 'UnaryExpression':\n            if (node.operator in unaryOperators && node.argument.type !== 'Literal') {\n              var arg = getCode(node.argument);\n              replaceCode(node, '$__(\"' + node.operator + '\", ' + arg + ')');\n            }\n\n            break;\n\n          case 'BinaryExpression':\n            if (node.operator in binaryOperators && node.left.type !== 'Literal') {\n              var left = getCode(node.left),\n                  right = getCode(node.right),\n                  between = getBetween(node.left, node.right),\n                  operator = node.operator;\n              replaceCode(node, '__$__(' + left + ',' + between.replace(new RegExp('\\\\' + operator), '\"' + operator + '\"') + ', ' + right + ')');\n            }\n\n            break;\n\n          case 'UpdateExpression':\n          case 'AssignmentExpression':\n            var parentType = parent && parent.type;\n\n            if (!(parentType === 'ForStatement' || parentType === 'BinaryExpression' && /^[=!<>]/.test(parent.operator) || parentType === 'MemberExpression' && parent.computed)) {\n              if (node.type === 'UpdateExpression') {\n                var arg = getCode(node.argument),\n                    exp = '__$__(' + arg + ', \"' + node.operator[0] + '\", 1)',\n                    str = arg + ' = ' + exp;\n\n                if (node.prefix) {\n                  str = '(' + str + ')';\n                } else if (parentType === 'AssignmentExpression' || parentType === 'VariableDeclarator' || parentType === 'BinaryExpression') {\n                  if (getCode(parent.left || parent.id) === arg) str = exp;\n                  str = arg + '; ' + str;\n                }\n\n                replaceCode(node, str);\n              } else {\n                if (/^.=$/.test(node.operator) && node.left.type !== 'Literal') {\n                  var left = getCode(node.left),\n                      right = getCode(node.right),\n                      exp = left + ' = __$__(' + left + ', \"' + node.operator[0] + '\", ' + right + ')';\n                  replaceCode(node, /^\\(.*\\)$/.test(getCode(node)) ? '(' + exp + ')' : exp);\n                }\n              }\n            }\n\n            break;\n        }\n      }\n\n      function handleExports(node) {\n        switch (node.type) {\n          case 'ExportDefaultDeclaration':\n            replaceCode({\n              range: [node.start, node.declaration.start]\n            }, 'module.exports = ');\n            break;\n\n          case 'ExportNamedDeclaration':\n            var declaration = node.declaration;\n            var specifiers = node.specifiers;\n\n            if (declaration) {\n              var declarations = declaration.declarations;\n\n              if (declarations) {\n                declarations.forEach(function (dec) {\n                  replaceCode(dec, 'module.exports.' + getCode(dec));\n                });\n                replaceCode({\n                  range: [node.start, declaration.start + declaration.kind.length]\n                }, '');\n              }\n            } else if (specifiers) {\n              var exports = specifiers.map(function (specifier) {\n                var name = getCode(specifier);\n                return 'module.exports.' + name + ' = ' + name + '; ';\n              }).join('');\n\n              if (exports) {\n                replaceCode(node, exports);\n              }\n            }\n\n            break;\n        }\n      }\n\n      function walkAST(node, parent, paperFeatures) {\n        if (node) {\n          for (var key in node) {\n            if (key !== 'range' && key !== 'loc') {\n              var value = node[key];\n\n              if (Array.isArray(value)) {\n                for (var i = 0, l = value.length; i < l; i++) {\n                  walkAST(value[i], node, paperFeatures);\n                }\n              } else if (value && typeof value === 'object') {\n                walkAST(value, node, paperFeatures);\n              }\n            }\n          }\n\n          if (paperFeatures.operatorOverloading !== false) {\n            handleOverloading(node, parent);\n          }\n\n          if (paperFeatures.moduleExports !== false) {\n            handleExports(node);\n          }\n        }\n      }\n\n      function encodeVLQ(value) {\n        var res = '',\n            base64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n        value = (Math.abs(value) << 1) + (value < 0 ? 1 : 0);\n\n        while (value || !res) {\n          var next = value & 32 - 1;\n          value >>= 5;\n          if (value) next |= 32;\n          res += base64[next];\n        }\n\n        return res;\n      }\n\n      var url = options.url || '',\n          sourceMaps = options.sourceMaps,\n          paperFeatures = options.paperFeatures || {},\n          source = options.source || code,\n          offset = options.offset || 0,\n          agent = paper.agent,\n          version = agent.versionNumber,\n          offsetCode = false,\n          lineBreaks = /\\r\\n|\\n|\\r/mg,\n          map;\n\n      if (sourceMaps && (agent.chrome && version >= 30 || agent.webkit && version >= 537.76 || agent.firefox && version >= 23 || agent.node)) {\n        if (agent.node) {\n          offset -= 2;\n        } else if (window && url && !window.location.href.indexOf(url)) {\n          var html = document.getElementsByTagName('html')[0].innerHTML;\n          offset = html.substr(0, html.indexOf(code) + 1).match(lineBreaks).length + 1;\n        }\n\n        offsetCode = offset > 0 && !(agent.chrome && version >= 36 || agent.safari && version >= 600 || agent.firefox && version >= 40 || agent.node);\n        var mappings = ['AA' + encodeVLQ(offsetCode ? 0 : offset) + 'A'];\n        mappings.length = (code.match(lineBreaks) || []).length + 1 + (offsetCode ? offset : 0);\n        map = {\n          version: 3,\n          file: url,\n          names: [],\n          mappings: mappings.join(';AACA'),\n          sourceRoot: '',\n          sources: [url],\n          sourcesContent: [source]\n        };\n      }\n\n      if (paperFeatures.operatorOverloading !== false || paperFeatures.moduleExports !== false) {\n        walkAST(parse(code, {\n          ranges: true,\n          preserveParens: true,\n          sourceType: 'module'\n        }), null, paperFeatures);\n      }\n\n      if (map) {\n        if (offsetCode) {\n          code = new Array(offset + 1).join('\\n') + code;\n        }\n\n        if (/^(inline|both)$/.test(sourceMaps)) {\n          code += \"\\n//# sourceMappingURL=data:application/json;base64,\" + self.btoa(unescape(encodeURIComponent(JSON.stringify(map))));\n        }\n\n        code += \"\\n//# sourceURL=\" + (url || 'paperscript');\n      }\n\n      return {\n        url: url,\n        source: source,\n        code: code,\n        map: map\n      };\n    }\n\n    function execute(code, scope, options) {\n      paper = scope;\n      var view = scope.getView(),\n          tool = /\\btool\\.\\w+|\\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\\b/.test(code) && !/\\bnew\\s+Tool\\b/.test(code) ? new Tool() : null,\n          toolHandlers = tool ? tool._events : [],\n          handlers = ['onFrame', 'onResize'].concat(toolHandlers),\n          params = [],\n          args = [],\n          func,\n          compiled = typeof code === 'object' ? code : compile(code, options);\n      code = compiled.code;\n\n      function expose(scope, hidden) {\n        for (var key in scope) {\n          if ((hidden || !/^_/.test(key)) && new RegExp('([\\\\b\\\\s\\\\W]|^)' + key.replace(/\\$/g, '\\\\$') + '\\\\b').test(code)) {\n            params.push(key);\n            args.push(scope[key]);\n          }\n        }\n      }\n\n      expose({\n        __$__: __$__,\n        $__: $__,\n        paper: scope,\n        tool: tool\n      }, true);\n      expose(scope);\n      code = 'var module = { exports: {} }; ' + code;\n      var exports = Base.each(handlers, function (key) {\n        if (new RegExp('\\\\s+' + key + '\\\\b').test(code)) {\n          params.push(key);\n          this.push('module.exports.' + key + ' = ' + key + ';');\n        }\n      }, []).join('\\n');\n\n      if (exports) {\n        code += '\\n' + exports;\n      }\n\n      code += '\\nreturn module.exports;';\n      var agent = paper.agent;\n\n      if (document && (agent.chrome || agent.firefox && agent.versionNumber < 40)) {\n        var script = document.createElement('script'),\n            head = document.head || document.getElementsByTagName('head')[0];\n        if (agent.firefox) code = '\\n' + code;\n        script.appendChild(document.createTextNode('document.__paperscript__ = function(' + params + ') {' + code + '\\n}'));\n        head.appendChild(script);\n        func = document.__paperscript__;\n        delete document.__paperscript__;\n        head.removeChild(script);\n      } else {\n        func = Function(params, code);\n      }\n\n      var exports = func && func.apply(scope, args);\n      var obj = exports || {};\n      Base.each(toolHandlers, function (key) {\n        var value = obj[key];\n        if (value) tool[key] = value;\n      });\n\n      if (view) {\n        if (obj.onResize) view.setOnResize(obj.onResize);\n        view.emit('resize', {\n          size: view.size,\n          delta: new Point()\n        });\n        if (obj.onFrame) view.setOnFrame(obj.onFrame);\n        view.requestUpdate();\n      }\n\n      return exports;\n    }\n\n    function loadScript(script) {\n      if (/^text\\/(?:x-|)paperscript$/.test(script.type) && PaperScope.getAttribute(script, 'ignore') !== 'true') {\n        var canvasId = PaperScope.getAttribute(script, 'canvas'),\n            canvas = document.getElementById(canvasId),\n            src = script.src || script.getAttribute('data-src'),\n            async = PaperScope.hasAttribute(script, 'async'),\n            scopeAttribute = 'data-paper-scope';\n        if (!canvas) throw new Error('Unable to find canvas with id \"' + canvasId + '\"');\n        var scope = PaperScope.get(canvas.getAttribute(scopeAttribute)) || new PaperScope().setup(canvas);\n        canvas.setAttribute(scopeAttribute, scope._id);\n\n        if (src) {\n          Http.request({\n            url: src,\n            async: async,\n            mimeType: 'text/plain',\n            onLoad: function (code) {\n              execute(code, scope, src);\n            }\n          });\n        } else {\n          execute(script.innerHTML, scope, script.baseURI);\n        }\n\n        script.setAttribute('data-paper-ignore', 'true');\n        return scope;\n      }\n    }\n\n    function loadAll() {\n      Base.each(document && document.getElementsByTagName('script'), loadScript);\n    }\n\n    function load(script) {\n      return script ? loadScript(script) : loadAll();\n    }\n\n    if (window) {\n      if (document.readyState === 'complete') {\n        setTimeout(loadAll);\n      } else {\n        DomEvent.add(window, {\n          load: loadAll\n        });\n      }\n    }\n\n    return {\n      compile: compile,\n      execute: execute,\n      load: load,\n      parse: parse,\n      calculateBinary: __$__,\n      calculateUnary: $__\n    };\n  }.call(this);\n\n  var paper = new (PaperScope.inject(Base.exports, {\n    Base: Base,\n    Numerical: Numerical,\n    Key: Key,\n    DomEvent: DomEvent,\n    DomElement: DomElement,\n    document: document,\n    window: window,\n    Symbol: SymbolDefinition,\n    PlacedSymbol: SymbolItem\n  }))();\n\n  if (paper.agent.node) {\n    require('./node/extend.js')(paper);\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define('paper', paper);\n  } else if (typeof module === 'object' && module) {\n    module.exports = paper;\n  }\n\n  return paper;\n}.call(this, typeof self === 'object' ? self : null);","map":{"version":3,"names":["paper","self","undefined","require","window","document","Base","hidden","array","slice","create","Object","describe","getOwnPropertyDescriptor","define","defineProperty","forEach","iter","bind","i","l","length","call","forIn","hasOwnProperty","set","assign","dst","arguments","src","key","each","obj","desc","value","inject","dest","enumerable","beans","preserve","beansNames","field","name","val","get","substring","isFunc","res","prev","base","bean","match","toLowerCase","isPlainObject","writable","configurable","test","part","statics","prototype","extend","ctor","proto","initialize","apply","clone","constructor","pick","a","b","list","begin","end","module","exports","toString","_id","_class","_name","type","push","Formatter","instance","number","join","getClassName","importJSON","json","exportJSON","options","toJSON","serialize","props","exclude","filter","_prioritize","equals","obj1","obj2","Array","isArray","keys","read","start","amount","peek","__index","readIndex","_readIndex","readNull","__read","filtered","__filtered","remain","readList","entry","readNamed","getNamed","hasValue","source","getSource","__unfiltered","readSupported","that","__source","arg","hasNamed","prioritize","processed","handleKey","isPlainValue","asString","compact","dictionary","isRoot","formatter","precision","definitions","references","add","item","id","ref","unshift","_serialize","_compactSerialize","deserialize","_data","_setDictionary","_isRoot","isFirst","hasDictionary","isDictionary","args","JSON","stringify","target","parse","useTarget","Item","Layer","insert","concat","items","itemsLength","startLength","splice","index","remove","append","_index","removed","capitalize","str","replace","toUpperCase","camelize","chr","hyphenate","Emitter","on","func","types","_eventTypes","handlers","_callbacks","indexOf","install","off","uninstall","once","handler","emit","event","setTarget","currentTarget","stop","responds","attach","detach","fire","_installEvents","events","_events","isString","PaperScope","settings","applyMatrix","insertItems","handleSize","hitTolerance","project","projects","tools","_scopes","support","ctx","CanvasProvider","getContext","nativeDash","nativeBlendModes","BlendMode","nativeModes","release","agent","user","navigator","userAgent","os","exec","platform","browser","n","v1","v2","rv","chrome","v","version","versionNumber","parseFloat","trident","jsdom","webkit","atom","getView","_view","getPaper","execute","code","PaperScript","View","updateFocus","scope","setup","element","Project","createCanvas","width","height","getCanvas","activate","clear","handleAttribute","el","attr","getAttribute","hasAttribute","PaperScopeItem","_scope","_list","_reference","isActive","CollisionDetection","findItemBoundsCollisions","items1","items2","tolerance","getBounds","bounds","rect","left","top","right","bottom","bounds1","bounds2","findBoundsCollisions","findCurveBoundsCollisions","curves1","curves2","bothAxis","curves","min","Math","max","hor","ver","boundsA","boundsB","sweepVertical","onlySweepAxisCollisions","allBounds","lengthA","lengthAll","binarySearch","indices","coord","lo","hi","mid","pri0","pri1","sec0","sec1","allIndicesByPri0","sort","i1","i2","activeIndicesByPri1","allCollisions","curIndex","curBounds","origIndex","isCurrentA","isCurrentB","curCollisions","pruneCount","j","activeIndex","curSec1","curSec0","activeBounds","isActiveA","isActiveB","curPri1","collisions","multiplier","pow","round","pair","val1","val2","separator","point","x","y","size","rectangle","Numerical","abscissas","weights","abs","sqrt","log2","log","LOG2E","EPSILON","MACHINE_EPSILON","clamp","getDiscriminant","c","split","D","E","ad","bd","cd","p","dp","q","dq","getNormalizationFactor","norm","CURVETIME_EPSILON","GEOMETRIC_EPSILON","TRIGONOMETRIC_EPSILON","KAPPA","isZero","isMachineZero","integrate","f","w","A","B","m","sum","Ax","findRoot","df","fx","dx","nx","solveQuadratic","roots","x1","x2","Infinity","Q","R","count","boundless","minB","maxB","isFinite","solveCubic","d","b1","c2","qd","evaluate","x0","tmp","t","r","s","td","rd","UID","_pools","pool","Point","arg0","arg1","reading","hasY","_set","setAngle","angle","getLength","setLength","_angle","cos","sin","scale","getAngle","getAngleInRadians","PI","setAngleInRadians","getAngleInDegrees","setAngleInDegrees","atan2","div","NaN","dot","acos","getQuadrant","getDirectedAngle","cross","getDistance","squared","normalize","current","rotate","center","subtract","transform","matrix","_transformPoint","multiply","divide","modulo","negate","isInside","Rectangle","contains","isClose","isCollinear","isColinear","isOrthogonal","isNaN","isInQuadrant","point1","point2","random","y1","y2","op","LinkedPoint","owner","setter","_x","_y","_owner","_setter","_dontNotify","getX","setX","getY","setY","isSelected","_selection","_getSelection","setSelected","selected","_changeSelection","Size","hasHeight","size1","size2","LinkedSize","_width","_height","getWidth","setWidth","getHeight","setHeight","arg2","arg3","from","to","frm","next","rt","getPoint","_dontLink","setPoint","getSize","_fw","_fh","setSize","sx","_sx","sy","_sy","h","getLeft","setLeft","getTop","setTop","getRight","setRight","getBottom","setBottom","getCenterX","setCenterX","getCenterY","setCenterY","getCenter","setCenter","getArea","isEmpty","_containsRectangle","_containsPoint","intersects","epsilon","intersect","unite","include","expand","parts","xFirst","LinkedRectangle","internal","Matrix","ok","_a","_b","_c","_d","_tx","_ty","reset","Error","tx","ty","_changed","getValues","_applyMatrix","mx","recursively","_setApplyMatrix","isIdentity","translate","shear","skew","toRadians","tan","a1","c1","d1","a2","b2","d2","tx2","ty2","prepend","tx1","ty1","appended","prepended","invert","det","inverted","concatenate","preConcatenate","chain","_shiftless","_orNullIfIdentity","isInvertible","isSingular","_transformCoordinates","_transformCorners","coords","_transformBounds","inverseTransform","_inverseTransform","decompose","degrees","asin","translation","getTranslation","rotation","scaling","skewing","getScaling","getRotation","applyToContext","prop","Line","arg4","asVector","_px","_py","_vx","_vy","getVector","line","isInfinite","getSide","getSignedDistance","p1x","p1y","v1x","v1y","p2x","p2y","v2x","v2y","dy","u1","u2","uMin","uMax","px","py","vx","vy","ccw","_children","_namedChildren","_activeLayer","_currentStyle","Style","_selectionItems","_selectionCount","_updateVersion","flags","view","_needsUpdate","_requested","_autoUpdate","requestUpdate","changes","_changes","changesById","_changesById","children","getCurrentStyle","setCurrentStyle","style","getIndex","getOptions","getLayers","getActiveLayer","getSymbolDefinitions","ids","getItems","class","SymbolItem","definition","_definition","getSymbols","getSelectedItems","selectionItems","selection","isInserted","_updateSelection","selectAll","setFullySelected","deselectAll","addLayer","layer","insertLayer","_remove","_setProject","setName","_insertItem","_created","NO_INSERT","insertChild","_getItems","getItem","removeOn","sets","_removeSets","mousedrag","other","draw","pixelRatio","save","param","offset","viewMatrix","matrices","updateMatrix","restore","strokeWidth","_drawSelection","_serializeFields","_canApplyMatrix","_canScaleStroke","_pivot","_visible","_blendMode","_opacity","_locked","_guide","_clipMask","_selectBounds","_selectChildren","pivot","visible","blendMode","opacity","locked","guide","clipMask","data","_countItemEvent","onFrame","_animateItem","onLoad","onError","_itemHandlers","_initialize","hasProps","_matrix","_parent","_style","parent","fields","fontSize","Group","_defaults","symbol","_symbol","cacheParent","_project","_bounds","_position","_decomposed","_globalMatrix","_clearBoundsCache","getId","getName","_removeNamed","_getOwner","namedChildren","getStyle","setStyle","getSelection","setSelection","flag","isFullySelected","isClipMask","setClipMask","setFillColor","setStrokeColor","getData","setData","getPosition","position","_getPositionFromBounds","setPosition","getPivot","setPivot","getStrokeBounds","stroke","getHandleBounds","handle","getInternalBounds","hasMatrix","opts","_boundsOptions","getStrokeScaling","cacheItem","_getCachedBounds","setBounds","_backup","_getBounds","_updateBoundsCache","_getBoundsCacheKey","noInternal","cacheKey","cached","nonscaling","hasStroke","_getStrokeMatrix","_item","getViewMatrix","_boundsCache","cache","_decompose","decomposed","setRotation","setScaling","getMatrix","setMatrix","getGlobalMatrix","_dontClone","parents","getApplyMatrix","setApplyMatrix","getTransformContent","setTransformContent","getProject","installEvents","getLayer","getParent","setParent","addChild","getChildren","setChildren","removeChildren","addChildren","getFirstChild","getLastChild","getNextSibling","getPreviousSibling","_equals","copy","deep","copyAttributes","copyContent","insertAbove","orig","excludeMatrix","rasterize","resolution","raster","Raster","getResolution","topLeft","getTopLeft","floor","bottomRight","getBottomRight","ceil","boundsSize","rasterSize","_contains","_asPathItem","Path","getIntersections","hitTest","_hitTest","HitResult","hitTestAll","all","hitTestChildren","_exclude","child","_hitTestChildren","parentViewMatrix","guides","tolerancePadding","_tolerancePadding","_getStrokePadding","checkSelf","hit","checkPoint","pt","checkPosition","checkCenter","checkBounds","points","_hitTestSelf","fill","hasFill","matches","compare","matchObject","firstOnly","overlapping","inside","recursive","path","childMatrix","insertChildren","inserted","notifySelf","_insertAt","insertBelow","sendToBack","bringToFront","appendTop","appendBottom","moveAbove","moveBelow","addTo","copyTo","reduce","namedArray","notifyParent","_dispose","replaceWith","reverseChildren","reverse","numChildren","isEditable","hasShadow","_getOrder","getList","list1","list2","hasChildren","isAbove","isBelow","isParent","isChild","isDescendant","isAncestor","isSibling","isGroupedWith","_applyRecursively","transformMatrix","fillColor","getFillColor","strokeColor","getStrokeColor","_transformContent","decomp","applyRecursively","globalToLocal","localToGlobal","parentToLocal","localToParent","fitBounds","itemRatio","rectRatio","newBounds","_setStyles","fillStyle","toCanvasStyle","strokeStyle","lineWidth","getStrokeWidth","strokeJoin","getStrokeJoin","strokeCap","getStrokeCap","miterLimit","getMiterLimit","lineJoin","lineCap","dashArray","getDashArray","dashOffset","getDashOffset","setLineDash","lineDashOffset","mozDash","mozDashOffset","blur","getShadowBlur","getShadowOffset","shadowColor","getShadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","parentStrokeMatrix","updateVersion","globalMatrix","normalBlend","nativeBlend","direct","dontStart","clip","_canComposite","mainCtx","itemOffset","prevOffset","pop","strokeMatrix","clipItem","globalAlpha","globalCompositeOperation","setTransform","_draw","dontFinish","getFillRule","process","_isUpdated","CompoundPath","updated","itemSelected","boundsSelected","positionSelected","_drawSelected","color","getSelectedColor","half","pos","beginPath","arc","deltas","delta","moveTo","lineTo","closePath","fillRect","hash","tween","easing","duration","Tween","_handleFrame","time","running","tweenTo","tweenFrom","_clipItem","_getClipItem","isClipped","setClipped","clipped","Shape","radius","_type","_size","_radius","setType","setRadius","getType","getShape","setShape","getRadius","rad","toPath","toShape","dontPaint","untransformed","isCircle","rx","ry","kappa","cx","cy","bezierCurveTo","getCornerCenter","halfSize","dir","corner","quadrant","isOnEllipseStroke","padding","vector","hitStroke","hitFill","strokeRadius","strokePadding","outer","inner","createShape","Circle","Ellipse","ellipse","_readEllipse","crossOrigin","_smoothing","image","object","getElementById","naturalHeight","setImage","setSource","_loaded","_image","canvas","_canvas","_setImage","copyCanvas","drawImage","_crossOrigin","_clear","getElement","getLoaded","u","getPpi","getImage","Event","setTimeout","DomEvent","load","error","complete","naturalWidth","_context","e","setCanvas","_change","setContext","context","toDataURL","Image","getCrossOrigin","setCrossOrigin","getSmoothing","setSmoothing","smoothing","getSubCanvas","getSubRaster","getAverageColor","PathItem","sampleSize","_sampleContext","clearRect","pixels","getImageData","channels","total","alpha","Color","getPixel","setPixel","components","_convert","_alpha","imageData","createImageData","putImageData","setImageData","disabled","DomElement","setPrefixed","setDefinition","SymbolDefinition","getDefinition","getSymbol","setSymbol","dontCenter","setItem","_dontCenter","place","values","segments","handles","ends","Segment","arg5","handleIn","handleOut","SegmentPoint","_point","hasHandles","_handleIn","_handleOut","_path","_curves","curve","_closed","getHandleIn","setHandleIn","getHandleOut","setHandleOut","isSmooth","clearHandles","oldSelection","getPath","getCurve","_segments","getCurves","getLocation","CurveLocation","_segment1","getNext","smooth","_first","_last","factor","getPrevious","p0","p1","p2","d1_a","d1_2a","d2_a","d2_2a","N","k","isLast","reversed","removeSegment","segment","interpolate","handleIn1","handleIn2","handleOut2","handleOut1","change","Curve","arg6","arg7","seg1","seg2","handle1","handle2","segment1","segment2","_segment2","getPoint1","getHandle1","getHandle2","getPoint2","_length","classify","setPoint1","setPoint2","setHandle1","setHandle2","getSegment1","getSegment2","getPoints","getLine","getPart","getPartLength","divideAt","location","divideAtTime","getTimeAt","_setHandles","tMin","tMax","subdivide","setHandles","splitAt","splitAtTime","getLocationAtTime","isTime","straight","h1","h2","y0","x3","y3","x4","y4","x5","y5","x6","y6","x7","y7","x8","y8","x9","y9","getMonoCurves","io","o0","o1","o2","o3","isStraight","v0","v3","getTimeOf","p3","geomEpsilon","getNearestTime","minDist","minT","refine","dist","step","flip","isFlatEnough","flatness","ux","uy","_addBounds","minPad","maxPad","s1","s2","isLinear","third","hasLength","isHorizontal","getTangentAtTime","isVertical","getLocationAt","_isTime","getParameterAt","getTimesWithTangent","tangent","getOffsetAtTime","getLocationOf","getOffsetOf","loc","getOffset","getParameterOf","getNearestLocation","getNearestPoint","methods","_evaluateMethods","getLengthIntegrand","ax","bx","ay","by","getIterations","normalized","len","a3","d3","serpentine","t1","t2","hasRoots","t1Ok","t2Ok","f1","f2","ds","forward","rangeLength","diff","guess","getTangent","getWeightedTangent","getNormal","getWeightedNormal","getCurvature","getPeaks","addLocation","locations","overlap","excludeStart","excludeEnd","loc1","loc2","_intersection","addCurveIntersections","recursion","calls","fatLineEpsilon","q0x","q0y","q3x","q3y","dMin","dMax","dp0","dp1","dp2","dp3","hull","getConvexHull","tMinClip","tMaxClip","clipConvexHull","tMinNew","tMaxNew","uDiff","dq0","dq1","dq2","dq3","dist1","dist2","distRatio","hullTop","hullBottom","clipConvexHullPart","threshold","qx","qy","getCurveLineIntersections","addCurveLineIntersections","addLineIntersection","getCurveIntersections","overlaps","getOverlaps","straight1","straight2","before","getSelfIntersection","info","matrix1","matrix2","_returnFirst","length1","length2","values1","values2","boundsCollisions","index1","curve1","collisions1","index2","curve2","getSquaredLineLength","timeEpsilon","straightBoth","l1","l2","pairs","den","times","num","t0","_overlap","_distance","_setCurve","_time","getPointAtTime","_next","_previous","_setPath","_version","_curve","_segment","_setSegment","getSegment","getTime","_offset","_curveOffset","trySegment","getParameter","getCurveOffset","getIntersection","getLastSegment","_ignoreOther","isTouching","inter","isCrossing","t1Inside","t2Inside","c4","c3","offsets","addOffsets","isInRange","getPointAt","v4","a4","hasOverlap","merge","search","found","path1","path2","expanded","compound","pathData","first","isClockwise","setClockwise","clockwise","setPathData","relative","previous","control","getCoord","command","lower","move","cubicCurveTo","quadraticCurveTo","arcTo","winding","_getWinding","onPath","windingL","windingR","getCrossings","minLoc","isPath","itemsFrom","itemsTo","setClosed","paths1","paths2","matched","boundsOverlaps","pathBoundsOverlaps","closed","setSegments","_segmentSelection","_area","getSegments","fullySelected","last","_add","getFirstSegment","_countCurves","getFirstCurve","getLastCurve","isClosed","getPathData","_precision","curX","curY","prevX","prevY","inX","inY","outX","outY","addSegment","skipLine","segs","_adjustCurves","insertSegment","addSegments","insertSegments","removeSegments","_includeCurves","area","_selectSegments","newSelection","last1","last2","first2","first1","simplify","flatten","flattener","PathFlattener","PathFitter","fit","_default","loop","asymmetric","paddingLeft","paddingRight","knots","n_1","rf","hx","hy","topCenter","seg3","seg4","isArc","pt1","pt2","shape","pos1","pos2","end1","end2","start2","numSegments","cap","hitCurves","isCloseEnough","checkSegmentPoint","seg","anchor","checkSegmentPoints","addToArea","checkSegmentStroke","isJoin","_addBevelJoin","_addSquareCap","getOffsetsWithTangent","curveStart","curveTimes","drawHandles","miniSize","miniHalf","pX","pY","drawHandle","hX","hY","drawSegments","drawSegment","dashLength","drawPart","getCurrentSegment","moveBy","curveTo","through","extent","middle","large","rxSq","rySq","xSq","ySq","throughSide","centerSide","ext","inc","z","out","_in","lineBy","curveBy","parameter","cubicCurveBy","quadraticCurveBy","arcBy","method","prevCoords","processSegment","joinBounds","addPoint","addRound","addJoin","addCap","phi","isArea","normal1","getNormalAtTime","normal2","normal","joinPadding","joinRadius","SQRT2","paddingX","paddingY","xn","xx","yn","yx","ellipseSegments","createPath","createEllipse","bl","getBottomLeft","tl","tr","getTopRight","br","RoundRectangle","Oval","Arc","RegularPolygon","sides","three","Star","radius1","radius2","paths","getCurrentPath","check","operators","getPaths","preparePath","resolve","resolveCrossings","reorient","createResult","result","filterIntersection","traceBoolean","operation","trace","splitBoolean","_path1","_path2","operator","crossings","divideLocations","collectPaths","_overlapsOnly","curvesValues","curveCollisions","curveCollisionsMap","map","propagateWinding","_winding","tracePaths","reorientPaths","added","addPath","linkIntersections","clearCurveHandles","lookup","container","sorted","entry1","containerWinding","getInteriorPoint","entry2","clearLater","results","clearCurves","clearLookup","renormalizeLocs","prevCurve","prevTime","origTime","newCurve","getWinding","dontFlip","curvesList","ia","pv","pa","po","windingEpsilon","qualityEpsilon","paL","paR","pathWindingL","pathWindingR","onAnyPath","quality","vPrev","vClose","addWinding","a0","windingPrev","a3Prev","handleCurve","monoCurves","totalLength","curveLength","operand","SQRT1_2","wind","otherPath","pathWinding","starts","isValid","_visited","isStart","visitPath","getCrossingSegments","collectStarts","collect","nextInter","inter1","inter2","over1","over2","valid","finished","branches","branch","visited","shift","hasOverlaps","hasCrossings","intersections","nonZero","intercepts","mv","mo0","mo3","maxRecursion","ignoreStraight","minSpan","addCurve","computeParts","halves","tMid","_get","fitCubic","tan1","tan2","uPrime","chordLengthParameterize","maxError","parametersInOrder","generateBezier","findMaxError","reparameterize","tanCenter","C","X","b0","b3","detC0C1","alpha1","alpha2","detC0X","detXC1","c0","segLength","eps","degree","maxDist","P","TextItem","content","_content","_lines","setContent","getContent","getCharacterStyle","setCharacterStyle","getParagraphStyle","setParagraphStyle","PointText","lines","leading","getLeading","font","getFontStyle","textAlign","getJustification","fillText","strokeText","numLines","justification","getTextWidth","gray","rgb","hsb","hsl","gradient","componentParsers","namedColors","transparent","colorCtx","fromCSS","string","parseInt","trim","isHSL","component","unit","turn","grad","hsbIndices","converters","g","achromatic","t3s","t3","properties","parser","_components","Gradient","_removeOwner","_addOwner","_properties","argType","converted","parsers","stops","radial","getComponents","_canvasStyle","converter","convert","getAlpha","setAlpha","hasAlpha","col","isGradient","toCSS","hex","_stops","origin","destination","highlight","inverse","canvasGradient","_radial","createRadialGradient","createLinearGradient","addColorStop","_color","_types","_setOwner","components1","components2","setStops","setRadial","_owners","getStops","GradientStop","getRadial","stops1","stops2","rampPoint","setColor","setOffset","getRampPoint","setRampPoint","getColor","itemDefaults","fillRule","strokeScaling","shadowOffset","selectedColor","groupDefaults","fontFamily","fontWeight","textDefaults","_values","isColor","isPoint","applyToChildren","old","_dontMerge","childValue","Font","WindingRule","isStyle","style1","style2","secondary","defaults2","value1","value2","getFontSize","getFontWeight","getFontFamily","getFont","setFont","getPixelSize","handlePrefix","prefixes","suffix","prefix","getStyles","doc","nodeType","ownerDocument","defaultView","getComputedStyle","viewport","body","html","documentElement","getBoundingClientRect","clientLeft","clientTop","pageXOffset","scrollLeft","pageYOffset","scrollTop","getViewportBounds","innerWidth","clientWidth","innerHeight","clientHeight","isInvisible","isInView","getPrefixed","passive","addEventListener","removeEventListener","targetTouches","changedTouches","pageX","clientX","pageY","clientY","getTarget","srcElement","getRelatedTarget","relatedTarget","toElement","requestAnimationFrame","nativeRequest","requested","callbacks","timer","handleCallbacks","functions","callback","setInterval","getCanvasSize","setAttribute","_viewEvents","none","userDrag","userSelect","touchCallout","contentZooming","tapHighlightColor","_windowEvents","resize","setViewSize","Stats","_stats","stats","domElement","appendChild","_element","_pixelRatio","devicePixelRatio","_setElementSize","_viewSize","_views","_viewsById","_focused","_frameItems","_frameItemCount","_itemEvents","native","virtual","node","_animate","play","pause","_count","getAutoUpdate","setAutoUpdate","autoUpdate","update","now","Date","animate","_handleFrameItems","getPixelRatio","getViewSize","isVisible","parentNode","temp","createElement","removeChild","getZoom","setZoom","zoom","scrollBy","projectToView","viewToProject","getEventPoint","CanvasView","prevFocus","tempFocus","dragging","mouseDown","handleMouseMove","_handleMouseEvent","mousedown","mousemove","mouseup","pointerEnabled","msPointerEnabled","viewEvents","docEvents","mouseout","nodeName","scroll","called","prevented","fallbacks","doubleclick","wasInView","overView","downPoint","lastPoint","downItem","overItem","dragItem","clickItem","clickTime","dblClick","emitMouseEvent","prevPoint","stopItem","stopped","mouseEvent","MouseEvent","fallback","emitMouseEvents","hitItem","itemEventsMap","click","mouseenter","mouseleave","itemEvents","hitItems","nativeMove","tool","inView","mouse","substr","drag","down","up","cancelable","preventDefault","_handleKeyEvent","character","keyEvent","KeyEvent","sign","_resetState","HTMLCanvasElement","deviceRatio","backingStoreRatio","firefox","prevFont","measureText","stopPropagation","getTimeStamp","timeStamp","getModifiers","Key","modifiers","keyLookup","charLookup","keyMap","charMap","metaFixMap","downKey","alt","meta","capsLock","space","option","mac","getKey","keyIdentifier","String","fromCharCode","keyCode","keydown","altKey","metaKey","ctrlKey","keypress","charCode","keyup","isDown","ToolEvent","_choosePoint","toolPoint","getLastPoint","_lastPoint","setLastPoint","getDownPoint","_downPoint","setDownPoint","getMiddlePoint","_middlePoint","setMiddlePoint","middlePoint","getDelta","_delta","setDelta","getCount","setCount","Tool","_moveCount","_downCount","getMinDistance","_minDistance","setMinDistance","minDistance","_maxDistance","getMaxDistance","setMaxDistance","maxDistance","getFixedDistance","setFixedDistance","distance","easings","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","isFunction","_then","_startTime","state","_keys","_parsedKeys","_parseKeys","_from","_getState","_to","then","progress","getValue","__add","__subtract","__multiply","_setProperty","onUpdate","startTime","_getProperty","resolved","_resolveValue","_calculate","parsed","calculateBinary","Http","request","xhr","XMLHttpRequest","open","url","async","mimeType","overrideMimeType","onload","status","responseText","onerror","message","send","canvases","sr","sg","sb","sa","bg","bb","ba","dr","dg","db","getLum","setLum","mn","lmn","ln","mxl","getSat","setSat","md","modes","screen","overlay","darken","lighten","difference","exclusion","hue","saturation","luminosity","average","negation","mode","srcContext","dstContext","srcCanvas","dstData","SvgElement","svg","xmlns","xlink","attributeNamespace","href","tag","attributes","createElementNS","namespace","getAttributeNS","setAttributeNS","SvgStyles","true","false","property","attribute","toSVG","fromSVG","exportFilter","getTransform","coordinates","attrs","trans","exportGroup","childNode","exportSVG","exportRaster","embedImages","exportPath","matchShapes","exportShape","exportCompoundPath","exportSymbolItem","definitionItem","viewBox","overflow","exportGradient","gradientNode","getGradient","getOrigin","getDestination","getHighlight","fy","gradientUnits","stopColor","exportText","textContent","exporters","applyStyle","visibility","svgs","__id","typeId","exportDefinitions","defs","insertBefore","firstChild","XMLSerializer","serializeToString","exporter","onExport","setOptions","rootSize","allowNull","allowPercent","defaultValue","defaultX","defaultY","convertValue","importGroup","nodes","childNodes","isClip","isDefs","currentStyle","applyAttributes","querySelectorAll","importNode","importPoly","importPath","importGradient","scaleToBounds","_scaleToBounds","importers","clippath","polygon","polyline","lineargradient","radialgradient","use","circle","text","switch","applyTransform","transforms","applyOpacity","gradientTransform","setVisible","display","percent","styles","group","tagName","isElement","nextSibling","importer","onImport","expandShapes","importSVG","DOMParser","parseFromString","File","reader","FileReader","readAsText","global","acorn","root","mod","amd","input","inputLen","sourceFile","inpt","initTokenState","parseTopLevel","program","defaultOptions","ecmaVersion","strictSemicolons","allowTrailingCommas","forbidReserved","allowReturnOutsideFunction","onComment","ranges","directSourceFile","opt","getLineInfo","cur","lineBreak","lastIndex","column","tokenize","getToken","forceRegexp","lastEnd","tokEnd","readToken","tokStart","startLoc","tokStartLoc","endLoc","tokEndLoc","tokType","tokVal","jumpTo","reAllowed","tokPos","tokCurLine","tokLineStart","tokRegexpAllowed","skipSpace","lastStart","lastEndLoc","inFunction","labels","strict","raise","err","SyntaxError","raisedAt","empty","_num","_regexp","_string","_eof","_break","keyword","_case","beforeExpr","_catch","_continue","_debugger","_do","isLoop","_else","_finally","_for","_function","_if","_return","_switch","_throw","_try","_var","_while","_with","_new","_this","_null","atomValue","_true","_false","binop","keywordTypes","_bracketL","_bracketR","_braceL","_braceR","_parenL","_parenR","_comma","_semi","_colon","_dot","_question","_slash","_eq","isAssign","_assign","_incDec","postfix","isUpdate","_prefix","_logicalOR","_logicalAND","_bitwiseOR","_bitwiseXOR","_bitwiseAND","_equality","_relational","_bitShift","_plusMin","_multiplyModulo","tokTypes","bracketL","bracketR","braceL","braceR","parenL","parenR","comma","semi","colon","question","slash","eq","eof","regexp","kw","makePredicate","words","cats","compareTo","arr","cat","Function","isReservedWord3","isReservedWord5","isStrictReservedWord","isStrictBadIdWord","isKeyword","nonASCIIwhitespace","nonASCIIidentifierStartChars","nonASCIIidentifierChars","nonASCIIidentifierStart","RegExp","nonASCIIidentifier","newline","isIdentifierStart","isIdentifierChar","line_loc_t","finishToken","skipBlockComment","skipLineComment","ch","charCodeAt","readToken_dot","readNumber","readToken_slash","readRegexp","finishOp","readToken_mult_modulo","readToken_pipe_amp","readToken_caret","readToken_plus_min","readToken_lt_gt","readToken_eq_excl","getTokenFromCode","readHexNumber","readString","readWord","tok","escaped","inClass","charAt","mods","readWord1","readInt","radix","startsWithDot","isFloat","octal","quote","readHexChar","containsEsc","word","esc","escStr","setStrict","strct","lastIndexOf","node_t","node_loc_t","startNode","range","startNodeFrom","finishNode","isUseStrict","stmt","expression","eat","canInsertSemicolon","semicolon","unexpected","expect","checkLVal","expr","parseStatement","loopLabel","kind","switchLabel","starttype","isBreak","label","parseIdent","lab","parseParenExpression","parseFor","init","parseVar","declarations","parseForIn","parseExpression","parseFunction","consequent","alternate","argument","discriminant","cases","sawDefault","isCase","block","parseBlock","clause","guard","guardedHandlers","finalizer","maybeName","allowStrict","oldStrict","noIn","decl","noComma","parseMaybeAssign","expressions","parseMaybeConditional","parseExprOps","parseExprOp","parseMaybeUnary","minPrec","prec","exprNode","parseExprSubscripts","parseSubscripts","parseExprAtom","noCalls","computed","callee","parseExprList","raw","tokStartLoc1","tokStart1","elements","parseObj","parseNew","sawGetSet","parsePropertyName","isGetSet","conflict","isStatement","params","oldInFunc","oldLabels","close","allowTrailingComma","allowEmpty","elts","liberal","binaryOperators","unaryOperators","__self","__$__","$__","compile","insertions","insertion","getCode","getBetween","replaceCode","handleOverloading","between","parentType","exp","handleExports","declaration","specifiers","dec","specifier","walkAST","paperFeatures","operatorOverloading","moduleExports","encodeVLQ","base64","sourceMaps","offsetCode","lineBreaks","getElementsByTagName","innerHTML","safari","mappings","file","names","sourceRoot","sources","sourcesContent","preserveParens","sourceType","btoa","unescape","encodeURIComponent","toolHandlers","compiled","expose","script","head","createTextNode","__paperscript__","onResize","setOnResize","setOnFrame","loadScript","canvasId","scopeAttribute","baseURI","loadAll","readyState","calculateUnary","Symbol","PlacedSymbol"],"sources":["C:/Users/Danil/Desktop/project1/node_modules/paper/dist/paper-full.js"],"sourcesContent":["/*!\n * Paper.js v0.12.15 - The Swiss Army Knife of Vector Graphics Scripting.\n * http://paperjs.org/\n *\n * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey\n * http://juerglehni.com/ & https://puckey.studio/\n *\n * Distributed under the MIT license. See LICENSE file for details.\n *\n * All rights reserved.\n *\n * Date: Wed Mar 17 10:49:48 2021 +0100\n *\n ***\n *\n * Straps.js - Class inheritance library with support for bean-style accessors\n *\n * Copyright (c) 2006 - 2020 Jürg Lehni\n * http://juerglehni.com/\n *\n * Distributed under the MIT license.\n *\n ***\n *\n * Acorn.js\n * https://marijnhaverbeke.nl/acorn/\n *\n * Acorn is a tiny, fast JavaScript parser written in JavaScript,\n * created by Marijn Haverbeke and released under an MIT license.\n *\n */\n\nvar paper = function(self, undefined) {\n\nself = self || require('./node/self.js');\nvar window = self.window,\n\tdocument = self.document;\n\nvar Base = new function() {\n\tvar hidden = /^(statics|enumerable|beans|preserve)$/,\n\t\tarray = [],\n\t\tslice = array.slice,\n\t\tcreate = Object.create,\n\t\tdescribe = Object.getOwnPropertyDescriptor,\n\t\tdefine = Object.defineProperty,\n\n\t\tforEach = array.forEach || function(iter, bind) {\n\t\t\tfor (var i = 0, l = this.length; i < l; i++) {\n\t\t\t\titer.call(bind, this[i], i, this);\n\t\t\t}\n\t\t},\n\n\t\tforIn = function(iter, bind) {\n\t\t\tfor (var i in this) {\n\t\t\t\tif (this.hasOwnProperty(i))\n\t\t\t\t\titer.call(bind, this[i], i, this);\n\t\t\t}\n\t\t},\n\n\t\tset = Object.assign || function(dst) {\n\t\t\tfor (var i = 1, l = arguments.length; i < l; i++) {\n\t\t\t\tvar src = arguments[i];\n\t\t\t\tfor (var key in src) {\n\t\t\t\t\tif (src.hasOwnProperty(key))\n\t\t\t\t\t\tdst[key] = src[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn dst;\n\t\t},\n\n\t\teach = function(obj, iter, bind) {\n\t\t\tif (obj) {\n\t\t\t\tvar desc = describe(obj, 'length');\n\t\t\t\t(desc && typeof desc.value === 'number' ? forEach : forIn)\n\t\t\t\t\t.call(obj, iter, bind = bind || obj);\n\t\t\t}\n\t\t\treturn bind;\n\t\t};\n\n\tfunction inject(dest, src, enumerable, beans, preserve) {\n\t\tvar beansNames = {};\n\n\t\tfunction field(name, val) {\n\t\t\tval = val || (val = describe(src, name))\n\t\t\t\t\t&& (val.get ? val : val.value);\n\t\t\tif (typeof val === 'string' && val[0] === '#')\n\t\t\t\tval = dest[val.substring(1)] || val;\n\t\t\tvar isFunc = typeof val === 'function',\n\t\t\t\tres = val,\n\t\t\t\tprev = preserve || isFunc && !val.base\n\t\t\t\t\t\t? (val && val.get ? name in dest : dest[name])\n\t\t\t\t\t\t: null,\n\t\t\t\tbean;\n\t\t\tif (!preserve || !prev) {\n\t\t\t\tif (isFunc && prev)\n\t\t\t\t\tval.base = prev;\n\t\t\t\tif (isFunc && beans !== false\n\t\t\t\t\t\t&& (bean = name.match(/^([gs]et|is)(([A-Z])(.*))$/)))\n\t\t\t\t\tbeansNames[bean[3].toLowerCase() + bean[4]] = bean[2];\n\t\t\t\tif (!res || isFunc || !res.get || typeof res.get !== 'function'\n\t\t\t\t\t\t|| !Base.isPlainObject(res)) {\n\t\t\t\t\tres = { value: res, writable: true };\n\t\t\t\t}\n\t\t\t\tif ((describe(dest, name)\n\t\t\t\t\t\t|| { configurable: true }).configurable) {\n\t\t\t\t\tres.configurable = true;\n\t\t\t\t\tres.enumerable = enumerable != null ? enumerable : !bean;\n\t\t\t\t}\n\t\t\t\tdefine(dest, name, res);\n\t\t\t}\n\t\t}\n\t\tif (src) {\n\t\t\tfor (var name in src) {\n\t\t\t\tif (src.hasOwnProperty(name) && !hidden.test(name))\n\t\t\t\t\tfield(name);\n\t\t\t}\n\t\t\tfor (var name in beansNames) {\n\t\t\t\tvar part = beansNames[name],\n\t\t\t\t\tset = dest['set' + part],\n\t\t\t\t\tget = dest['get' + part] || set && dest['is' + part];\n\t\t\t\tif (get && (beans === true || get.length === 0))\n\t\t\t\t\tfield(name, { get: get, set: set });\n\t\t\t}\n\t\t}\n\t\treturn dest;\n\t}\n\n\tfunction Base() {\n\t\tfor (var i = 0, l = arguments.length; i < l; i++) {\n\t\t\tvar src = arguments[i];\n\t\t\tif (src)\n\t\t\t\tset(this, src);\n\t\t}\n\t\treturn this;\n\t}\n\n\treturn inject(Base, {\n\t\tinject: function(src) {\n\t\t\tif (src) {\n\t\t\t\tvar statics = src.statics === true ? src : src.statics,\n\t\t\t\t\tbeans = src.beans,\n\t\t\t\t\tpreserve = src.preserve;\n\t\t\t\tif (statics !== src)\n\t\t\t\t\tinject(this.prototype, src, src.enumerable, beans, preserve);\n\t\t\t\tinject(this, statics, null, beans, preserve);\n\t\t\t}\n\t\t\tfor (var i = 1, l = arguments.length; i < l; i++)\n\t\t\t\tthis.inject(arguments[i]);\n\t\t\treturn this;\n\t\t},\n\n\t\textend: function() {\n\t\t\tvar base = this,\n\t\t\t\tctor,\n\t\t\t\tproto;\n\t\t\tfor (var i = 0, obj, l = arguments.length;\n\t\t\t\t\ti < l && !(ctor && proto); i++) {\n\t\t\t\tobj = arguments[i];\n\t\t\t\tctor = ctor || obj.initialize;\n\t\t\t\tproto = proto || obj.prototype;\n\t\t\t}\n\t\t\tctor = ctor || function() {\n\t\t\t\tbase.apply(this, arguments);\n\t\t\t};\n\t\t\tproto = ctor.prototype = proto || create(this.prototype);\n\t\t\tdefine(proto, 'constructor',\n\t\t\t\t\t{ value: ctor, writable: true, configurable: true });\n\t\t\tinject(ctor, this);\n\t\t\tif (arguments.length)\n\t\t\t\tthis.inject.apply(ctor, arguments);\n\t\t\tctor.base = base;\n\t\t\treturn ctor;\n\t\t}\n\t}).inject({\n\t\tenumerable: false,\n\n\t\tinitialize: Base,\n\n\t\tset: Base,\n\n\t\tinject: function() {\n\t\t\tfor (var i = 0, l = arguments.length; i < l; i++) {\n\t\t\t\tvar src = arguments[i];\n\t\t\t\tif (src) {\n\t\t\t\t\tinject(this, src, src.enumerable, src.beans, src.preserve);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\textend: function() {\n\t\t\tvar res = create(this);\n\t\t\treturn res.inject.apply(res, arguments);\n\t\t},\n\n\t\teach: function(iter, bind) {\n\t\t\treturn each(this, iter, bind);\n\t\t},\n\n\t\tclone: function() {\n\t\t\treturn new this.constructor(this);\n\t\t},\n\n\t\tstatics: {\n\t\t\tset: set,\n\t\t\teach: each,\n\t\t\tcreate: create,\n\t\t\tdefine: define,\n\t\t\tdescribe: describe,\n\n\t\t\tclone: function(obj) {\n\t\t\t\treturn set(new obj.constructor(), obj);\n\t\t\t},\n\n\t\t\tisPlainObject: function(obj) {\n\t\t\t\tvar ctor = obj != null && obj.constructor;\n\t\t\t\treturn ctor && (ctor === Object || ctor === Base\n\t\t\t\t\t\t|| ctor.name === 'Object');\n\t\t\t},\n\n\t\t\tpick: function(a, b) {\n\t\t\t\treturn a !== undefined ? a : b;\n\t\t\t},\n\n\t\t\tslice: function(list, begin, end) {\n\t\t\t\treturn slice.call(list, begin, end);\n\t\t\t}\n\t\t}\n\t});\n};\n\nif (typeof module !== 'undefined')\n\tmodule.exports = Base;\n\nBase.inject({\n\tenumerable: false,\n\n\ttoString: function() {\n\t\treturn this._id != null\n\t\t\t?  (this._class || 'Object') + (this._name\n\t\t\t\t? \" '\" + this._name + \"'\"\n\t\t\t\t: ' @' + this._id)\n\t\t\t: '{ ' + Base.each(this, function(value, key) {\n\t\t\t\tif (!/^_/.test(key)) {\n\t\t\t\t\tvar type = typeof value;\n\t\t\t\t\tthis.push(key + ': ' + (type === 'number'\n\t\t\t\t\t\t\t? Formatter.instance.number(value)\n\t\t\t\t\t\t\t: type === 'string' ? \"'\" + value + \"'\" : value));\n\t\t\t\t}\n\t\t\t}, []).join(', ') + ' }';\n\t},\n\n\tgetClassName: function() {\n\t\treturn this._class || '';\n\t},\n\n\timportJSON: function(json) {\n\t\treturn Base.importJSON(json, this);\n\t},\n\n\texportJSON: function(options) {\n\t\treturn Base.exportJSON(this, options);\n\t},\n\n\ttoJSON: function() {\n\t\treturn Base.serialize(this);\n\t},\n\n\tset: function(props, exclude) {\n\t\tif (props)\n\t\t\tBase.filter(this, props, exclude, this._prioritize);\n\t\treturn this;\n\t}\n}, {\n\nbeans: false,\nstatics: {\n\texports: {},\n\n\textend: function extend() {\n\t\tvar res = extend.base.apply(this, arguments),\n\t\t\tname = res.prototype._class;\n\t\tif (name && !Base.exports[name])\n\t\t\tBase.exports[name] = res;\n\t\treturn res;\n\t},\n\n\tequals: function(obj1, obj2) {\n\t\tif (obj1 === obj2)\n\t\t\treturn true;\n\t\tif (obj1 && obj1.equals)\n\t\t\treturn obj1.equals(obj2);\n\t\tif (obj2 && obj2.equals)\n\t\t\treturn obj2.equals(obj1);\n\t\tif (obj1 && obj2\n\t\t\t\t&& typeof obj1 === 'object' && typeof obj2 === 'object') {\n\t\t\tif (Array.isArray(obj1) && Array.isArray(obj2)) {\n\t\t\t\tvar length = obj1.length;\n\t\t\t\tif (length !== obj2.length)\n\t\t\t\t\treturn false;\n\t\t\t\twhile (length--) {\n\t\t\t\t\tif (!Base.equals(obj1[length], obj2[length]))\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar keys = Object.keys(obj1),\n\t\t\t\t\tlength = keys.length;\n\t\t\t\tif (length !== Object.keys(obj2).length)\n\t\t\t\t\treturn false;\n\t\t\t\twhile (length--) {\n\t\t\t\t\tvar key = keys[length];\n\t\t\t\t\tif (!(obj2.hasOwnProperty(key)\n\t\t\t\t\t\t\t&& Base.equals(obj1[key], obj2[key])))\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tread: function(list, start, options, amount) {\n\t\tif (this === Base) {\n\t\t\tvar value = this.peek(list, start);\n\t\t\tlist.__index++;\n\t\t\treturn value;\n\t\t}\n\t\tvar proto = this.prototype,\n\t\t\treadIndex = proto._readIndex,\n\t\t\tbegin = start || readIndex && list.__index || 0,\n\t\t\tlength = list.length,\n\t\t\tobj = list[begin];\n\t\tamount = amount || length - begin;\n\t\tif (obj instanceof this\n\t\t\t|| options && options.readNull && obj == null && amount <= 1) {\n\t\t\tif (readIndex)\n\t\t\t\tlist.__index = begin + 1;\n\t\t\treturn obj && options && options.clone ? obj.clone() : obj;\n\t\t}\n\t\tobj = Base.create(proto);\n\t\tif (readIndex)\n\t\t\tobj.__read = true;\n\t\tobj = obj.initialize.apply(obj, begin > 0 || begin + amount < length\n\t\t\t\t? Base.slice(list, begin, begin + amount)\n\t\t\t\t: list) || obj;\n\t\tif (readIndex) {\n\t\t\tlist.__index = begin + obj.__read;\n\t\t\tvar filtered = obj.__filtered;\n\t\t\tif (filtered) {\n\t\t\t\tlist.__filtered = filtered;\n\t\t\t\tobj.__filtered = undefined;\n\t\t\t}\n\t\t\tobj.__read = undefined;\n\t\t}\n\t\treturn obj;\n\t},\n\n\tpeek: function(list, start) {\n\t\treturn list[list.__index = start || list.__index || 0];\n\t},\n\n\tremain: function(list) {\n\t\treturn list.length - (list.__index || 0);\n\t},\n\n\treadList: function(list, start, options, amount) {\n\t\tvar res = [],\n\t\t\tentry,\n\t\t\tbegin = start || 0,\n\t\t\tend = amount ? begin + amount : list.length;\n\t\tfor (var i = begin; i < end; i++) {\n\t\t\tres.push(Array.isArray(entry = list[i])\n\t\t\t\t\t? this.read(entry, 0, options)\n\t\t\t\t\t: this.read(list, i, options, 1));\n\t\t}\n\t\treturn res;\n\t},\n\n\treadNamed: function(list, name, start, options, amount) {\n\t\tvar value = this.getNamed(list, name),\n\t\t\thasValue = value !== undefined;\n\t\tif (hasValue) {\n\t\t\tvar filtered = list.__filtered;\n\t\t\tif (!filtered) {\n\t\t\t\tvar source = this.getSource(list);\n\t\t\t\tfiltered = list.__filtered = Base.create(source);\n\t\t\t\tfiltered.__unfiltered = source;\n\t\t\t}\n\t\t\tfiltered[name] = undefined;\n\t\t}\n\t\treturn this.read(hasValue ? [value] : list, start, options, amount);\n\t},\n\n\treadSupported: function(list, dest) {\n\t\tvar source = this.getSource(list),\n\t\t\tthat = this,\n\t\t\tread = false;\n\t\tif (source) {\n\t\t\tObject.keys(source).forEach(function(key) {\n\t\t\t\tif (key in dest) {\n\t\t\t\t\tvar value = that.readNamed(list, key);\n\t\t\t\t\tif (value !== undefined) {\n\t\t\t\t\t\tdest[key] = value;\n\t\t\t\t\t}\n\t\t\t\t\tread = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn read;\n\t},\n\n\tgetSource: function(list) {\n\t\tvar source = list.__source;\n\t\tif (source === undefined) {\n\t\t\tvar arg = list.length === 1 && list[0];\n\t\t\tsource = list.__source = arg && Base.isPlainObject(arg)\n\t\t\t\t? arg : null;\n\t\t}\n\t\treturn source;\n\t},\n\n\tgetNamed: function(list, name) {\n\t\tvar source = this.getSource(list);\n\t\tif (source) {\n\t\t\treturn name ? source[name] : list.__filtered || source;\n\t\t}\n\t},\n\n\thasNamed: function(list, name) {\n\t\treturn !!this.getNamed(list, name);\n\t},\n\n\tfilter: function(dest, source, exclude, prioritize) {\n\t\tvar processed;\n\n\t\tfunction handleKey(key) {\n\t\t\tif (!(exclude && key in exclude) &&\n\t\t\t\t!(processed && key in processed)) {\n\t\t\t\tvar value = source[key];\n\t\t\t\tif (value !== undefined)\n\t\t\t\t\tdest[key] = value;\n\t\t\t}\n\t\t}\n\n\t\tif (prioritize) {\n\t\t\tvar keys = {};\n\t\t\tfor (var i = 0, key, l = prioritize.length; i < l; i++) {\n\t\t\t\tif ((key = prioritize[i]) in source) {\n\t\t\t\t\thandleKey(key);\n\t\t\t\t\tkeys[key] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tprocessed = keys;\n\t\t}\n\n\t\tObject.keys(source.__unfiltered || source).forEach(handleKey);\n\t\treturn dest;\n\t},\n\n\tisPlainValue: function(obj, asString) {\n\t\treturn Base.isPlainObject(obj) || Array.isArray(obj)\n\t\t\t\t|| asString && typeof obj === 'string';\n\t},\n\n\tserialize: function(obj, options, compact, dictionary) {\n\t\toptions = options || {};\n\n\t\tvar isRoot = !dictionary,\n\t\t\tres;\n\t\tif (isRoot) {\n\t\t\toptions.formatter = new Formatter(options.precision);\n\t\t\tdictionary = {\n\t\t\t\tlength: 0,\n\t\t\t\tdefinitions: {},\n\t\t\t\treferences: {},\n\t\t\t\tadd: function(item, create) {\n\t\t\t\t\tvar id = '#' + item._id,\n\t\t\t\t\t\tref = this.references[id];\n\t\t\t\t\tif (!ref) {\n\t\t\t\t\t\tthis.length++;\n\t\t\t\t\t\tvar res = create.call(item),\n\t\t\t\t\t\t\tname = item._class;\n\t\t\t\t\t\tif (name && res[0] !== name)\n\t\t\t\t\t\t\tres.unshift(name);\n\t\t\t\t\t\tthis.definitions[id] = res;\n\t\t\t\t\t\tref = this.references[id] = [id];\n\t\t\t\t\t}\n\t\t\t\t\treturn ref;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tif (obj && obj._serialize) {\n\t\t\tres = obj._serialize(options, dictionary);\n\t\t\tvar name = obj._class;\n\t\t\tif (name && !obj._compactSerialize && (isRoot || !compact)\n\t\t\t\t\t&& res[0] !== name) {\n\t\t\t\tres.unshift(name);\n\t\t\t}\n\t\t} else if (Array.isArray(obj)) {\n\t\t\tres = [];\n\t\t\tfor (var i = 0, l = obj.length; i < l; i++)\n\t\t\t\tres[i] = Base.serialize(obj[i], options, compact, dictionary);\n\t\t} else if (Base.isPlainObject(obj)) {\n\t\t\tres = {};\n\t\t\tvar keys = Object.keys(obj);\n\t\t\tfor (var i = 0, l = keys.length; i < l; i++) {\n\t\t\t\tvar key = keys[i];\n\t\t\t\tres[key] = Base.serialize(obj[key], options, compact,\n\t\t\t\t\t\tdictionary);\n\t\t\t}\n\t\t} else if (typeof obj === 'number') {\n\t\t\tres = options.formatter.number(obj, options.precision);\n\t\t} else {\n\t\t\tres = obj;\n\t\t}\n\t\treturn isRoot && dictionary.length > 0\n\t\t\t\t? [['dictionary', dictionary.definitions], res]\n\t\t\t\t: res;\n\t},\n\n\tdeserialize: function(json, create, _data, _setDictionary, _isRoot) {\n\t\tvar res = json,\n\t\t\tisFirst = !_data,\n\t\t\thasDictionary = isFirst && json && json.length\n\t\t\t\t&& json[0][0] === 'dictionary';\n\t\t_data = _data || {};\n\t\tif (Array.isArray(json)) {\n\t\t\tvar type = json[0],\n\t\t\t\tisDictionary = type === 'dictionary';\n\t\t\tif (json.length == 1 && /^#/.test(type)) {\n\t\t\t\treturn _data.dictionary[type];\n\t\t\t}\n\t\t\ttype = Base.exports[type];\n\t\t\tres = [];\n\t\t\tfor (var i = type ? 1 : 0, l = json.length; i < l; i++) {\n\t\t\t\tres.push(Base.deserialize(json[i], create, _data,\n\t\t\t\t\t\tisDictionary, hasDictionary));\n\t\t\t}\n\t\t\tif (type) {\n\t\t\t\tvar args = res;\n\t\t\t\tif (create) {\n\t\t\t\t\tres = create(type, args, isFirst || _isRoot);\n\t\t\t\t} else {\n\t\t\t\t\tres = new type(args);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (Base.isPlainObject(json)) {\n\t\t\tres = {};\n\t\t\tif (_setDictionary)\n\t\t\t\t_data.dictionary = res;\n\t\t\tfor (var key in json)\n\t\t\t\tres[key] = Base.deserialize(json[key], create, _data);\n\t\t}\n\t\treturn hasDictionary ? res[1] : res;\n\t},\n\n\texportJSON: function(obj, options) {\n\t\tvar json = Base.serialize(obj, options);\n\t\treturn options && options.asString == false\n\t\t\t\t? json\n\t\t\t\t: JSON.stringify(json);\n\t},\n\n\timportJSON: function(json, target) {\n\t\treturn Base.deserialize(\n\t\t\t\ttypeof json === 'string' ? JSON.parse(json) : json,\n\t\t\t\tfunction(ctor, args, isRoot) {\n\t\t\t\t\tvar useTarget = isRoot && target\n\t\t\t\t\t\t\t&& target.constructor === ctor,\n\t\t\t\t\t\tobj = useTarget ? target\n\t\t\t\t\t\t\t: Base.create(ctor.prototype);\n\t\t\t\t\tif (args.length === 1 && obj instanceof Item\n\t\t\t\t\t\t\t&& (useTarget || !(obj instanceof Layer))) {\n\t\t\t\t\t\tvar arg = args[0];\n\t\t\t\t\t\tif (Base.isPlainObject(arg)) {\n\t\t\t\t\t\t\targ.insert = false;\n\t\t\t\t\t\t\tif (useTarget) {\n\t\t\t\t\t\t\t\targs = args.concat([{ insert: true }]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t(useTarget ? obj.set : ctor).apply(obj, args);\n\t\t\t\t\tif (useTarget)\n\t\t\t\t\t\ttarget = null;\n\t\t\t\t\treturn obj;\n\t\t\t\t});\n\t},\n\n\tpush: function(list, items) {\n\t\tvar itemsLength = items.length;\n\t\tif (itemsLength < 4096) {\n\t\t\tlist.push.apply(list, items);\n\t\t} else {\n\t\t\tvar startLength = list.length;\n\t\t\tlist.length += itemsLength;\n\t\t\tfor (var i = 0; i < itemsLength; i++) {\n\t\t\t\tlist[startLength + i] = items[i];\n\t\t\t}\n\t\t}\n\t\treturn list;\n\t},\n\n\tsplice: function(list, items, index, remove) {\n\t\tvar amount = items && items.length,\n\t\t\tappend = index === undefined;\n\t\tindex = append ? list.length : index;\n\t\tif (index > list.length)\n\t\t\tindex = list.length;\n\t\tfor (var i = 0; i < amount; i++)\n\t\t\titems[i]._index = index + i;\n\t\tif (append) {\n\t\t\tBase.push(list, items);\n\t\t\treturn [];\n\t\t} else {\n\t\t\tvar args = [index, remove];\n\t\t\tif (items)\n\t\t\t\tBase.push(args, items);\n\t\t\tvar removed = list.splice.apply(list, args);\n\t\t\tfor (var i = 0, l = removed.length; i < l; i++)\n\t\t\t\tremoved[i]._index = undefined;\n\t\t\tfor (var i = index + amount, l = list.length; i < l; i++)\n\t\t\t\tlist[i]._index = i;\n\t\t\treturn removed;\n\t\t}\n\t},\n\n\tcapitalize: function(str) {\n\t\treturn str.replace(/\\b[a-z]/g, function(match) {\n\t\t\treturn match.toUpperCase();\n\t\t});\n\t},\n\n\tcamelize: function(str) {\n\t\treturn str.replace(/-(.)/g, function(match, chr) {\n\t\t\treturn chr.toUpperCase();\n\t\t});\n\t},\n\n\thyphenate: function(str) {\n\t\treturn str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n\t}\n}});\n\nvar Emitter = {\n\ton: function(type, func) {\n\t\tif (typeof type !== 'string') {\n\t\t\tBase.each(type, function(value, key) {\n\t\t\t\tthis.on(key, value);\n\t\t\t}, this);\n\t\t} else {\n\t\t\tvar types = this._eventTypes,\n\t\t\t\tentry = types && types[type],\n\t\t\t\thandlers = this._callbacks = this._callbacks || {};\n\t\t\thandlers = handlers[type] = handlers[type] || [];\n\t\t\tif (handlers.indexOf(func) === -1) {\n\t\t\t\thandlers.push(func);\n\t\t\t\tif (entry && entry.install && handlers.length === 1)\n\t\t\t\t\tentry.install.call(this, type);\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t},\n\n\toff: function(type, func) {\n\t\tif (typeof type !== 'string') {\n\t\t\tBase.each(type, function(value, key) {\n\t\t\t\tthis.off(key, value);\n\t\t\t}, this);\n\t\t\treturn;\n\t\t}\n\t\tvar types = this._eventTypes,\n\t\t\tentry = types && types[type],\n\t\t\thandlers = this._callbacks && this._callbacks[type],\n\t\t\tindex;\n\t\tif (handlers) {\n\t\t\tif (!func || (index = handlers.indexOf(func)) !== -1\n\t\t\t\t\t&& handlers.length === 1) {\n\t\t\t\tif (entry && entry.uninstall)\n\t\t\t\t\tentry.uninstall.call(this, type);\n\t\t\t\tdelete this._callbacks[type];\n\t\t\t} else if (index !== -1) {\n\t\t\t\thandlers.splice(index, 1);\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t},\n\n\tonce: function(type, func) {\n\t\treturn this.on(type, function handler() {\n\t\t\tfunc.apply(this, arguments);\n\t\t\tthis.off(type, handler);\n\t\t});\n\t},\n\n\temit: function(type, event) {\n\t\tvar handlers = this._callbacks && this._callbacks[type];\n\t\tif (!handlers)\n\t\t\treturn false;\n\t\tvar args = Base.slice(arguments, 1),\n\t\t\tsetTarget = event && event.target && !event.currentTarget;\n\t\thandlers = handlers.slice();\n\t\tif (setTarget)\n\t\t\tevent.currentTarget = this;\n\t\tfor (var i = 0, l = handlers.length; i < l; i++) {\n\t\t\tif (handlers[i].apply(this, args) == false) {\n\t\t\t\tif (event && event.stop)\n\t\t\t\t\tevent.stop();\n\t\t\t\tbreak;\n\t\t   }\n\t\t}\n\t\tif (setTarget)\n\t\t\tdelete event.currentTarget;\n\t\treturn true;\n\t},\n\n\tresponds: function(type) {\n\t\treturn !!(this._callbacks && this._callbacks[type]);\n\t},\n\n\tattach: '#on',\n\tdetach: '#off',\n\tfire: '#emit',\n\n\t_installEvents: function(install) {\n\t\tvar types = this._eventTypes,\n\t\t\thandlers = this._callbacks,\n\t\t\tkey = install ? 'install' : 'uninstall';\n\t\tif (types) {\n\t\t\tfor (var type in handlers) {\n\t\t\t\tif (handlers[type].length > 0) {\n\t\t\t\t\tvar entry = types[type],\n\t\t\t\t\t\tfunc = entry && entry[key];\n\t\t\t\t\tif (func)\n\t\t\t\t\t\tfunc.call(this, type);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tstatics: {\n\t\tinject: function inject(src) {\n\t\t\tvar events = src._events;\n\t\t\tif (events) {\n\t\t\t\tvar types = {};\n\t\t\t\tBase.each(events, function(entry, key) {\n\t\t\t\t\tvar isString = typeof entry === 'string',\n\t\t\t\t\t\tname = isString ? entry : key,\n\t\t\t\t\t\tpart = Base.capitalize(name),\n\t\t\t\t\t\ttype = name.substring(2).toLowerCase();\n\t\t\t\t\ttypes[type] = isString ? {} : entry;\n\t\t\t\t\tname = '_' + name;\n\t\t\t\t\tsrc['get' + part] = function() {\n\t\t\t\t\t\treturn this[name];\n\t\t\t\t\t};\n\t\t\t\t\tsrc['set' + part] = function(func) {\n\t\t\t\t\t\tvar prev = this[name];\n\t\t\t\t\t\tif (prev)\n\t\t\t\t\t\t\tthis.off(type, prev);\n\t\t\t\t\t\tif (func)\n\t\t\t\t\t\t\tthis.on(type, func);\n\t\t\t\t\t\tthis[name] = func;\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\tsrc._eventTypes = types;\n\t\t\t}\n\t\t\treturn inject.base.apply(this, arguments);\n\t\t}\n\t}\n};\n\nvar PaperScope = Base.extend({\n\t_class: 'PaperScope',\n\n\tinitialize: function PaperScope() {\n\t\tpaper = this;\n\t\tthis.settings = new Base({\n\t\t\tapplyMatrix: true,\n\t\t\tinsertItems: true,\n\t\t\thandleSize: 4,\n\t\t\thitTolerance: 0\n\t\t});\n\t\tthis.project = null;\n\t\tthis.projects = [];\n\t\tthis.tools = [];\n\t\tthis._id = PaperScope._id++;\n\t\tPaperScope._scopes[this._id] = this;\n\t\tvar proto = PaperScope.prototype;\n\t\tif (!this.support) {\n\t\t\tvar ctx = CanvasProvider.getContext(1, 1) || {};\n\t\t\tproto.support = {\n\t\t\t\tnativeDash: 'setLineDash' in ctx || 'mozDash' in ctx,\n\t\t\t\tnativeBlendModes: BlendMode.nativeModes\n\t\t\t};\n\t\t\tCanvasProvider.release(ctx);\n\t\t}\n\t\tif (!this.agent) {\n\t\t\tvar user = self.navigator.userAgent.toLowerCase(),\n\t\t\t\tos = (/(darwin|win|mac|linux|freebsd|sunos)/.exec(user)||[])[0],\n\t\t\t\tplatform = os === 'darwin' ? 'mac' : os,\n\t\t\t\tagent = proto.agent = proto.browser = { platform: platform };\n\t\t\tif (platform)\n\t\t\t\tagent[platform] = true;\n\t\t\tuser.replace(\n\t\t\t\t/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\\/?\\s*([.\\d]+)(?:.*version\\/([.\\d]+))?(?:.*rv\\:v?([.\\d]+))?/g,\n\t\t\t\tfunction(match, n, v1, v2, rv) {\n\t\t\t\t\tif (!agent.chrome) {\n\t\t\t\t\t\tvar v = n === 'opera' ? v2 :\n\t\t\t\t\t\t\t\t/^(node|trident)$/.test(n) ? rv : v1;\n\t\t\t\t\t\tagent.version = v;\n\t\t\t\t\t\tagent.versionNumber = parseFloat(v);\n\t\t\t\t\t\tn = { trident: 'msie', jsdom: 'node' }[n] || n;\n\t\t\t\t\t\tagent.name = n;\n\t\t\t\t\t\tagent[n] = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t\tif (agent.chrome)\n\t\t\t\tdelete agent.webkit;\n\t\t\tif (agent.atom)\n\t\t\t\tdelete agent.chrome;\n\t\t}\n\t},\n\n\tversion: \"0.12.15\",\n\n\tgetView: function() {\n\t\tvar project = this.project;\n\t\treturn project && project._view;\n\t},\n\n\tgetPaper: function() {\n\t\treturn this;\n\t},\n\n\texecute: function(code, options) {\n\t\t\tvar exports = paper.PaperScript.execute(code, this, options);\n\t\t\tView.updateFocus();\n\t\t\treturn exports;\n\t},\n\n\tinstall: function(scope) {\n\t\tvar that = this;\n\t\tBase.each(['project', 'view', 'tool'], function(key) {\n\t\t\tBase.define(scope, key, {\n\t\t\t\tconfigurable: true,\n\t\t\t\tget: function() {\n\t\t\t\t\treturn that[key];\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tfor (var key in this)\n\t\t\tif (!/^_/.test(key) && this[key])\n\t\t\t\tscope[key] = this[key];\n\t},\n\n\tsetup: function(element) {\n\t\tpaper = this;\n\t\tthis.project = new Project(element);\n\t\treturn this;\n\t},\n\n\tcreateCanvas: function(width, height) {\n\t\treturn CanvasProvider.getCanvas(width, height);\n\t},\n\n\tactivate: function() {\n\t\tpaper = this;\n\t},\n\n\tclear: function() {\n\t\tvar projects = this.projects,\n\t\t\ttools = this.tools;\n\t\tfor (var i = projects.length - 1; i >= 0; i--)\n\t\t\tprojects[i].remove();\n\t\tfor (var i = tools.length - 1; i >= 0; i--)\n\t\t\ttools[i].remove();\n\t},\n\n\tremove: function() {\n\t\tthis.clear();\n\t\tdelete PaperScope._scopes[this._id];\n\t},\n\n\tstatics: new function() {\n\t\tfunction handleAttribute(name) {\n\t\t\tname += 'Attribute';\n\t\t\treturn function(el, attr) {\n\t\t\t\treturn el[name](attr) || el[name]('data-paper-' + attr);\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\t_scopes: {},\n\t\t\t_id: 0,\n\n\t\t\tget: function(id) {\n\t\t\t\treturn this._scopes[id] || null;\n\t\t\t},\n\n\t\t\tgetAttribute: handleAttribute('get'),\n\t\t\thasAttribute: handleAttribute('has')\n\t\t};\n\t}\n});\n\nvar PaperScopeItem = Base.extend(Emitter, {\n\n\tinitialize: function(activate) {\n\t\tthis._scope = paper;\n\t\tthis._index = this._scope[this._list].push(this) - 1;\n\t\tif (activate || !this._scope[this._reference])\n\t\t\tthis.activate();\n\t},\n\n\tactivate: function() {\n\t\tif (!this._scope)\n\t\t\treturn false;\n\t\tvar prev = this._scope[this._reference];\n\t\tif (prev && prev !== this)\n\t\t\tprev.emit('deactivate');\n\t\tthis._scope[this._reference] = this;\n\t\tthis.emit('activate', prev);\n\t\treturn true;\n\t},\n\n\tisActive: function() {\n\t\treturn this._scope[this._reference] === this;\n\t},\n\n\tremove: function() {\n\t\tif (this._index == null)\n\t\t\treturn false;\n\t\tBase.splice(this._scope[this._list], null, this._index, 1);\n\t\tif (this._scope[this._reference] == this)\n\t\t\tthis._scope[this._reference] = null;\n\t\tthis._scope = null;\n\t\treturn true;\n\t},\n\n\tgetView: function() {\n\t\treturn this._scope.getView();\n\t}\n});\n\nvar CollisionDetection = {\n\tfindItemBoundsCollisions: function(items1, items2, tolerance) {\n\t\tfunction getBounds(items) {\n\t\t\tvar bounds = new Array(items.length);\n\t\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\t\tvar rect = items[i].getBounds();\n\t\t\t\tbounds[i] = [rect.left, rect.top, rect.right, rect.bottom];\n\t\t\t}\n\t\t\treturn bounds;\n\t\t}\n\n\t\tvar bounds1 = getBounds(items1),\n\t\t\tbounds2 = !items2 || items2 === items1\n\t\t\t\t? bounds1\n\t\t\t\t: getBounds(items2);\n\t\treturn this.findBoundsCollisions(bounds1, bounds2, tolerance || 0);\n\t},\n\n\tfindCurveBoundsCollisions: function(curves1, curves2, tolerance, bothAxis) {\n\t\tfunction getBounds(curves) {\n\t\t\tvar min = Math.min,\n\t\t\t\tmax = Math.max,\n\t\t\t\tbounds = new Array(curves.length);\n\t\t\tfor (var i = 0; i < curves.length; i++) {\n\t\t\t\tvar v = curves[i];\n\t\t\t\tbounds[i] = [\n\t\t\t\t\tmin(v[0], v[2], v[4], v[6]),\n\t\t\t\t\tmin(v[1], v[3], v[5], v[7]),\n\t\t\t\t\tmax(v[0], v[2], v[4], v[6]),\n\t\t\t\t\tmax(v[1], v[3], v[5], v[7])\n\t\t\t\t];\n\t\t\t}\n\t\t\treturn bounds;\n\t\t}\n\n\t\tvar bounds1 = getBounds(curves1),\n\t\t\tbounds2 = !curves2 || curves2 === curves1\n\t\t\t\t? bounds1\n\t\t\t\t: getBounds(curves2);\n\t\tif (bothAxis) {\n\t\t\tvar hor = this.findBoundsCollisions(\n\t\t\t\t\tbounds1, bounds2, tolerance || 0, false, true),\n\t\t\t\tver = this.findBoundsCollisions(\n\t\t\t\t\tbounds1, bounds2, tolerance || 0, true, true),\n\t\t\t\tlist = [];\n\t\t\tfor (var i = 0, l = hor.length; i < l; i++) {\n\t\t\t\tlist[i] = { hor: hor[i], ver: ver[i] };\n\t\t\t}\n\t\t\treturn list;\n\t\t}\n\t\treturn this.findBoundsCollisions(bounds1, bounds2, tolerance || 0);\n\t},\n\n\tfindBoundsCollisions: function(boundsA, boundsB, tolerance,\n\t\tsweepVertical, onlySweepAxisCollisions) {\n\t\tvar self = !boundsB || boundsA === boundsB,\n\t\t\tallBounds = self ? boundsA : boundsA.concat(boundsB),\n\t\t\tlengthA = boundsA.length,\n\t\t\tlengthAll = allBounds.length;\n\n\t\tfunction binarySearch(indices, coord, value) {\n\t\t\tvar lo = 0,\n\t\t\t\thi = indices.length;\n\t\t\twhile (lo < hi) {\n\t\t\t\tvar mid = (hi + lo) >>> 1;\n\t\t\t\tif (allBounds[indices[mid]][coord] < value) {\n\t\t\t\t\tlo = mid + 1;\n\t\t\t\t} else {\n\t\t\t\t\thi = mid;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn lo - 1;\n\t\t}\n\n\t\tvar pri0 = sweepVertical ? 1 : 0,\n\t\t\tpri1 = pri0 + 2,\n\t\t\tsec0 = sweepVertical ? 0 : 1,\n\t\t\tsec1 = sec0 + 2;\n\t\tvar allIndicesByPri0 = new Array(lengthAll);\n\t\tfor (var i = 0; i < lengthAll; i++) {\n\t\t\tallIndicesByPri0[i] = i;\n\t\t}\n\t\tallIndicesByPri0.sort(function(i1, i2) {\n\t\t\treturn allBounds[i1][pri0] - allBounds[i2][pri0];\n\t\t});\n\t\tvar activeIndicesByPri1 = [],\n\t\t\tallCollisions = new Array(lengthA);\n\t\tfor (var i = 0; i < lengthAll; i++) {\n\t\t\tvar curIndex = allIndicesByPri0[i],\n\t\t\t\tcurBounds = allBounds[curIndex],\n\t\t\t\torigIndex = self ? curIndex : curIndex - lengthA,\n\t\t\t\tisCurrentA = curIndex < lengthA,\n\t\t\t\tisCurrentB = self || !isCurrentA,\n\t\t\t\tcurCollisions = isCurrentA ? [] : null;\n\t\t\tif (activeIndicesByPri1.length) {\n\t\t\t\tvar pruneCount = binarySearch(activeIndicesByPri1, pri1,\n\t\t\t\t\t\tcurBounds[pri0] - tolerance) + 1;\n\t\t\t\tactiveIndicesByPri1.splice(0, pruneCount);\n\t\t\t\tif (self && onlySweepAxisCollisions) {\n\t\t\t\t\tcurCollisions = curCollisions.concat(activeIndicesByPri1);\n\t\t\t\t\tfor (var j = 0; j < activeIndicesByPri1.length; j++) {\n\t\t\t\t\t\tvar activeIndex = activeIndicesByPri1[j];\n\t\t\t\t\t\tallCollisions[activeIndex].push(origIndex);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar curSec1 = curBounds[sec1],\n\t\t\t\t\t\tcurSec0 = curBounds[sec0];\n\t\t\t\t\tfor (var j = 0; j < activeIndicesByPri1.length; j++) {\n\t\t\t\t\t\tvar activeIndex = activeIndicesByPri1[j],\n\t\t\t\t\t\t\tactiveBounds = allBounds[activeIndex],\n\t\t\t\t\t\t\tisActiveA = activeIndex < lengthA,\n\t\t\t\t\t\t\tisActiveB = self || activeIndex >= lengthA;\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tonlySweepAxisCollisions ||\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tisCurrentA && isActiveB ||\n\t\t\t\t\t\t\t\tisCurrentB && isActiveA\n\t\t\t\t\t\t\t) && (\n\t\t\t\t\t\t\t\tcurSec1 >= activeBounds[sec0] - tolerance &&\n\t\t\t\t\t\t\t\tcurSec0 <= activeBounds[sec1] + tolerance\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (isCurrentA && isActiveB) {\n\t\t\t\t\t\t\t\tcurCollisions.push(\n\t\t\t\t\t\t\t\t\tself ? activeIndex : activeIndex - lengthA);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (isCurrentB && isActiveA) {\n\t\t\t\t\t\t\t\tallCollisions[activeIndex].push(origIndex);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (isCurrentA) {\n\t\t\t\tif (boundsA === boundsB) {\n\t\t\t\t\tcurCollisions.push(curIndex);\n\t\t\t\t}\n\t\t\t\tallCollisions[curIndex] = curCollisions;\n\t\t\t}\n\t\t\tif (activeIndicesByPri1.length) {\n\t\t\t\tvar curPri1 = curBounds[pri1],\n\t\t\t\t\tindex = binarySearch(activeIndicesByPri1, pri1, curPri1);\n\t\t\t\tactiveIndicesByPri1.splice(index + 1, 0, curIndex);\n\t\t\t} else {\n\t\t\t\tactiveIndicesByPri1.push(curIndex);\n\t\t\t}\n\t\t}\n\t\tfor (var i = 0; i < allCollisions.length; i++) {\n\t\t\tvar collisions = allCollisions[i];\n\t\t\tif (collisions) {\n\t\t\t\tcollisions.sort(function(i1, i2) { return i1 - i2; });\n\t\t\t}\n\t\t}\n\t\treturn allCollisions;\n\t}\n};\n\nvar Formatter = Base.extend({\n\tinitialize: function(precision) {\n\t\tthis.precision = Base.pick(precision, 5);\n\t\tthis.multiplier = Math.pow(10, this.precision);\n\t},\n\n\tnumber: function(val) {\n\t\treturn this.precision < 16\n\t\t\t\t? Math.round(val * this.multiplier) / this.multiplier : val;\n\t},\n\n\tpair: function(val1, val2, separator) {\n\t\treturn this.number(val1) + (separator || ',') + this.number(val2);\n\t},\n\n\tpoint: function(val, separator) {\n\t\treturn this.number(val.x) + (separator || ',') + this.number(val.y);\n\t},\n\n\tsize: function(val, separator) {\n\t\treturn this.number(val.width) + (separator || ',')\n\t\t\t\t+ this.number(val.height);\n\t},\n\n\trectangle: function(val, separator) {\n\t\treturn this.point(val, separator) + (separator || ',')\n\t\t\t\t+ this.size(val, separator);\n\t}\n});\n\nFormatter.instance = new Formatter();\n\nvar Numerical = new function() {\n\n\tvar abscissas = [\n\t\t[  0.5773502691896257645091488],\n\t\t[0,0.7745966692414833770358531],\n\t\t[  0.3399810435848562648026658,0.8611363115940525752239465],\n\t\t[0,0.5384693101056830910363144,0.9061798459386639927976269],\n\t\t[  0.2386191860831969086305017,0.6612093864662645136613996,0.9324695142031520278123016],\n\t\t[0,0.4058451513773971669066064,0.7415311855993944398638648,0.9491079123427585245261897],\n\t\t[  0.1834346424956498049394761,0.5255324099163289858177390,0.7966664774136267395915539,0.9602898564975362316835609],\n\t\t[0,0.3242534234038089290385380,0.6133714327005903973087020,0.8360311073266357942994298,0.9681602395076260898355762],\n\t\t[  0.1488743389816312108848260,0.4333953941292471907992659,0.6794095682990244062343274,0.8650633666889845107320967,0.9739065285171717200779640],\n\t\t[0,0.2695431559523449723315320,0.5190961292068118159257257,0.7301520055740493240934163,0.8870625997680952990751578,0.9782286581460569928039380],\n\t\t[  0.1252334085114689154724414,0.3678314989981801937526915,0.5873179542866174472967024,0.7699026741943046870368938,0.9041172563704748566784659,0.9815606342467192506905491],\n\t\t[0,0.2304583159551347940655281,0.4484927510364468528779129,0.6423493394403402206439846,0.8015780907333099127942065,0.9175983992229779652065478,0.9841830547185881494728294],\n\t\t[  0.1080549487073436620662447,0.3191123689278897604356718,0.5152486363581540919652907,0.6872929048116854701480198,0.8272013150697649931897947,0.9284348836635735173363911,0.9862838086968123388415973],\n\t\t[0,0.2011940939974345223006283,0.3941513470775633698972074,0.5709721726085388475372267,0.7244177313601700474161861,0.8482065834104272162006483,0.9372733924007059043077589,0.9879925180204854284895657],\n\t\t[  0.0950125098376374401853193,0.2816035507792589132304605,0.4580167776572273863424194,0.6178762444026437484466718,0.7554044083550030338951012,0.8656312023878317438804679,0.9445750230732325760779884,0.9894009349916499325961542]\n\t];\n\n\tvar weights = [\n\t\t[1],\n\t\t[0.8888888888888888888888889,0.5555555555555555555555556],\n\t\t[0.6521451548625461426269361,0.3478548451374538573730639],\n\t\t[0.5688888888888888888888889,0.4786286704993664680412915,0.2369268850561890875142640],\n\t\t[0.4679139345726910473898703,0.3607615730481386075698335,0.1713244923791703450402961],\n\t\t[0.4179591836734693877551020,0.3818300505051189449503698,0.2797053914892766679014678,0.1294849661688696932706114],\n\t\t[0.3626837833783619829651504,0.3137066458778872873379622,0.2223810344533744705443560,0.1012285362903762591525314],\n\t\t[0.3302393550012597631645251,0.3123470770400028400686304,0.2606106964029354623187429,0.1806481606948574040584720,0.0812743883615744119718922],\n\t\t[0.2955242247147528701738930,0.2692667193099963550912269,0.2190863625159820439955349,0.1494513491505805931457763,0.0666713443086881375935688],\n\t\t[0.2729250867779006307144835,0.2628045445102466621806889,0.2331937645919904799185237,0.1862902109277342514260976,0.1255803694649046246346943,0.0556685671161736664827537],\n\t\t[0.2491470458134027850005624,0.2334925365383548087608499,0.2031674267230659217490645,0.1600783285433462263346525,0.1069393259953184309602547,0.0471753363865118271946160],\n\t\t[0.2325515532308739101945895,0.2262831802628972384120902,0.2078160475368885023125232,0.1781459807619457382800467,0.1388735102197872384636018,0.0921214998377284479144218,0.0404840047653158795200216],\n\t\t[0.2152638534631577901958764,0.2051984637212956039659241,0.1855383974779378137417166,0.1572031671581935345696019,0.1215185706879031846894148,0.0801580871597602098056333,0.0351194603317518630318329],\n\t\t[0.2025782419255612728806202,0.1984314853271115764561183,0.1861610000155622110268006,0.1662692058169939335532009,0.1395706779261543144478048,0.1071592204671719350118695,0.0703660474881081247092674,0.0307532419961172683546284],\n\t\t[0.1894506104550684962853967,0.1826034150449235888667637,0.1691565193950025381893121,0.1495959888165767320815017,0.1246289712555338720524763,0.0951585116824927848099251,0.0622535239386478928628438,0.0271524594117540948517806]\n\t];\n\n\tvar abs = Math.abs,\n\t\tsqrt = Math.sqrt,\n\t\tpow = Math.pow,\n\t\tlog2 = Math.log2 || function(x) {\n\t\t\treturn Math.log(x) * Math.LOG2E;\n\t\t},\n\t\tEPSILON = 1e-12,\n\t\tMACHINE_EPSILON = 1.12e-16;\n\n\tfunction clamp(value, min, max) {\n\t\treturn value < min ? min : value > max ? max : value;\n\t}\n\n\tfunction getDiscriminant(a, b, c) {\n\t\tfunction split(v) {\n\t\t\tvar x = v * 134217729,\n\t\t\t\ty = v - x,\n\t\t\t\thi = y + x,\n\t\t\t\tlo = v - hi;\n\t\t\treturn [hi, lo];\n\t\t}\n\n\t\tvar D = b * b - a * c,\n\t\t\tE = b * b + a * c;\n\t\tif (abs(D) * 3 < E) {\n\t\t\tvar ad = split(a),\n\t\t\t\tbd = split(b),\n\t\t\t\tcd = split(c),\n\t\t\t\tp = b * b,\n\t\t\t\tdp = (bd[0] * bd[0] - p + 2 * bd[0] * bd[1]) + bd[1] * bd[1],\n\t\t\t\tq = a * c,\n\t\t\t\tdq = (ad[0] * cd[0] - q + ad[0] * cd[1] + ad[1] * cd[0])\n\t\t\t\t\t\t+ ad[1] * cd[1];\n\t\t\tD = (p - q) + (dp - dq);\n\t\t}\n\t\treturn D;\n\t}\n\n\tfunction getNormalizationFactor() {\n\t\tvar norm = Math.max.apply(Math, arguments);\n\t\treturn norm && (norm < 1e-8 || norm > 1e8)\n\t\t\t\t? pow(2, -Math.round(log2(norm)))\n\t\t\t\t: 0;\n\t}\n\n\treturn {\n\t\tEPSILON: EPSILON,\n\t\tMACHINE_EPSILON: MACHINE_EPSILON,\n\t\tCURVETIME_EPSILON: 1e-8,\n\t\tGEOMETRIC_EPSILON: 1e-7,\n\t\tTRIGONOMETRIC_EPSILON: 1e-8,\n\t\tKAPPA: 4 * (sqrt(2) - 1) / 3,\n\n\t\tisZero: function(val) {\n\t\t\treturn val >= -EPSILON && val <= EPSILON;\n\t\t},\n\n\t\tisMachineZero: function(val) {\n\t\t\treturn val >= -MACHINE_EPSILON && val <= MACHINE_EPSILON;\n\t\t},\n\n\t\tclamp: clamp,\n\n\t\tintegrate: function(f, a, b, n) {\n\t\t\tvar x = abscissas[n - 2],\n\t\t\t\tw = weights[n - 2],\n\t\t\t\tA = (b - a) * 0.5,\n\t\t\t\tB = A + a,\n\t\t\t\ti = 0,\n\t\t\t\tm = (n + 1) >> 1,\n\t\t\t\tsum = n & 1 ? w[i++] * f(B) : 0;\n\t\t\twhile (i < m) {\n\t\t\t\tvar Ax = A * x[i];\n\t\t\t\tsum += w[i++] * (f(B + Ax) + f(B - Ax));\n\t\t\t}\n\t\t\treturn A * sum;\n\t\t},\n\n\t\tfindRoot: function(f, df, x, a, b, n, tolerance) {\n\t\t\tfor (var i = 0; i < n; i++) {\n\t\t\t\tvar fx = f(x),\n\t\t\t\t\tdx = fx / df(x),\n\t\t\t\t\tnx = x - dx;\n\t\t\t\tif (abs(dx) < tolerance) {\n\t\t\t\t\tx = nx;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (fx > 0) {\n\t\t\t\t\tb = x;\n\t\t\t\t\tx = nx <= a ? (a + b) * 0.5 : nx;\n\t\t\t\t} else {\n\t\t\t\t\ta = x;\n\t\t\t\t\tx = nx >= b ? (a + b) * 0.5 : nx;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn clamp(x, a, b);\n\t\t},\n\n\t\tsolveQuadratic: function(a, b, c, roots, min, max) {\n\t\t\tvar x1, x2 = Infinity;\n\t\t\tif (abs(a) < EPSILON) {\n\t\t\t\tif (abs(b) < EPSILON)\n\t\t\t\t\treturn abs(c) < EPSILON ? -1 : 0;\n\t\t\t\tx1 = -c / b;\n\t\t\t} else {\n\t\t\t\tb *= -0.5;\n\t\t\t\tvar D = getDiscriminant(a, b, c);\n\t\t\t\tif (D && abs(D) < MACHINE_EPSILON) {\n\t\t\t\t\tvar f = getNormalizationFactor(abs(a), abs(b), abs(c));\n\t\t\t\t\tif (f) {\n\t\t\t\t\t\ta *= f;\n\t\t\t\t\t\tb *= f;\n\t\t\t\t\t\tc *= f;\n\t\t\t\t\t\tD = getDiscriminant(a, b, c);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (D >= -MACHINE_EPSILON) {\n\t\t\t\t\tvar Q = D < 0 ? 0 : sqrt(D),\n\t\t\t\t\t\tR = b + (b < 0 ? -Q : Q);\n\t\t\t\t\tif (R === 0) {\n\t\t\t\t\t\tx1 = c / a;\n\t\t\t\t\t\tx2 = -x1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tx1 = R / a;\n\t\t\t\t\t\tx2 = c / R;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar count = 0,\n\t\t\t\tboundless = min == null,\n\t\t\t\tminB = min - EPSILON,\n\t\t\t\tmaxB = max + EPSILON;\n\t\t\tif (isFinite(x1) && (boundless || x1 > minB && x1 < maxB))\n\t\t\t\troots[count++] = boundless ? x1 : clamp(x1, min, max);\n\t\t\tif (x2 !== x1\n\t\t\t\t\t&& isFinite(x2) && (boundless || x2 > minB && x2 < maxB))\n\t\t\t\troots[count++] = boundless ? x2 : clamp(x2, min, max);\n\t\t\treturn count;\n\t\t},\n\n\t\tsolveCubic: function(a, b, c, d, roots, min, max) {\n\t\t\tvar f = getNormalizationFactor(abs(a), abs(b), abs(c), abs(d)),\n\t\t\t\tx, b1, c2, qd, q;\n\t\t\tif (f) {\n\t\t\t\ta *= f;\n\t\t\t\tb *= f;\n\t\t\t\tc *= f;\n\t\t\t\td *= f;\n\t\t\t}\n\n\t\t\tfunction evaluate(x0) {\n\t\t\t\tx = x0;\n\t\t\t\tvar tmp = a * x;\n\t\t\t\tb1 = tmp + b;\n\t\t\t\tc2 = b1 * x + c;\n\t\t\t\tqd = (tmp + b1) * x + c2;\n\t\t\t\tq = c2 * x + d;\n\t\t\t}\n\n\t\t\tif (abs(a) < EPSILON) {\n\t\t\t\ta = b;\n\t\t\t\tb1 = c;\n\t\t\t\tc2 = d;\n\t\t\t\tx = Infinity;\n\t\t\t} else if (abs(d) < EPSILON) {\n\t\t\t\tb1 = b;\n\t\t\t\tc2 = c;\n\t\t\t\tx = 0;\n\t\t\t} else {\n\t\t\t\tevaluate(-(b / a) / 3);\n\t\t\t\tvar t = q / a,\n\t\t\t\t\tr = pow(abs(t), 1/3),\n\t\t\t\t\ts = t < 0 ? -1 : 1,\n\t\t\t\t\ttd = -qd / a,\n\t\t\t\t\trd = td > 0 ? 1.324717957244746 * Math.max(r, sqrt(td)) : r,\n\t\t\t\t\tx0 = x - s * rd;\n\t\t\t\tif (x0 !== x) {\n\t\t\t\t\tdo {\n\t\t\t\t\t\tevaluate(x0);\n\t\t\t\t\t\tx0 = qd === 0 ? x : x - q / qd / (1 + MACHINE_EPSILON);\n\t\t\t\t\t} while (s * x0 > s * x);\n\t\t\t\t\tif (abs(a) * x * x > abs(d / x)) {\n\t\t\t\t\t\tc2 = -d / x;\n\t\t\t\t\t\tb1 = (c2 - c) / x;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar count = Numerical.solveQuadratic(a, b1, c2, roots, min, max),\n\t\t\t\tboundless = min == null;\n\t\t\tif (isFinite(x) && (count === 0\n\t\t\t\t\t|| count > 0 && x !== roots[0] && x !== roots[1])\n\t\t\t\t\t&& (boundless || x > min - EPSILON && x < max + EPSILON))\n\t\t\t\troots[count++] = boundless ? x : clamp(x, min, max);\n\t\t\treturn count;\n\t\t}\n\t};\n};\n\nvar UID = {\n\t_id: 1,\n\t_pools: {},\n\n\tget: function(name) {\n\t\tif (name) {\n\t\t\tvar pool = this._pools[name];\n\t\t\tif (!pool)\n\t\t\t\tpool = this._pools[name] = { _id: 1 };\n\t\t\treturn pool._id++;\n\t\t} else {\n\t\t\treturn this._id++;\n\t\t}\n\t}\n};\n\nvar Point = Base.extend({\n\t_class: 'Point',\n\t_readIndex: true,\n\n\tinitialize: function Point(arg0, arg1) {\n\t\tvar type = typeof arg0,\n\t\t\treading = this.__read,\n\t\t\tread = 0;\n\t\tif (type === 'number') {\n\t\t\tvar hasY = typeof arg1 === 'number';\n\t\t\tthis._set(arg0, hasY ? arg1 : arg0);\n\t\t\tif (reading)\n\t\t\t\tread = hasY ? 2 : 1;\n\t\t} else if (type === 'undefined' || arg0 === null) {\n\t\t\tthis._set(0, 0);\n\t\t\tif (reading)\n\t\t\t\tread = arg0 === null ? 1 : 0;\n\t\t} else {\n\t\t\tvar obj = type === 'string' ? arg0.split(/[\\s,]+/) || [] : arg0;\n\t\t\tread = 1;\n\t\t\tif (Array.isArray(obj)) {\n\t\t\t\tthis._set(+obj[0], +(obj.length > 1 ? obj[1] : obj[0]));\n\t\t\t} else if ('x' in obj) {\n\t\t\t\tthis._set(obj.x || 0, obj.y || 0);\n\t\t\t} else if ('width' in obj) {\n\t\t\t\tthis._set(obj.width || 0, obj.height || 0);\n\t\t\t} else if ('angle' in obj) {\n\t\t\t\tthis._set(obj.length || 0, 0);\n\t\t\t\tthis.setAngle(obj.angle || 0);\n\t\t\t} else {\n\t\t\t\tthis._set(0, 0);\n\t\t\t\tread = 0;\n\t\t\t}\n\t\t}\n\t\tif (reading)\n\t\t\tthis.__read = read;\n\t\treturn this;\n\t},\n\n\tset: '#initialize',\n\n\t_set: function(x, y) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\treturn this;\n\t},\n\n\tequals: function(point) {\n\t\treturn this === point || point\n\t\t\t\t&& (this.x === point.x && this.y === point.y\n\t\t\t\t\t|| Array.isArray(point)\n\t\t\t\t\t\t&& this.x === point[0] && this.y === point[1])\n\t\t\t\t|| false;\n\t},\n\n\tclone: function() {\n\t\treturn new Point(this.x, this.y);\n\t},\n\n\ttoString: function() {\n\t\tvar f = Formatter.instance;\n\t\treturn '{ x: ' + f.number(this.x) + ', y: ' + f.number(this.y) + ' }';\n\t},\n\n\t_serialize: function(options) {\n\t\tvar f = options.formatter;\n\t\treturn [f.number(this.x), f.number(this.y)];\n\t},\n\n\tgetLength: function() {\n\t\treturn Math.sqrt(this.x * this.x + this.y * this.y);\n\t},\n\n\tsetLength: function(length) {\n\t\tif (this.isZero()) {\n\t\t\tvar angle = this._angle || 0;\n\t\t\tthis._set(\n\t\t\t\tMath.cos(angle) * length,\n\t\t\t\tMath.sin(angle) * length\n\t\t\t);\n\t\t} else {\n\t\t\tvar scale = length / this.getLength();\n\t\t\tif (Numerical.isZero(scale))\n\t\t\t\tthis.getAngle();\n\t\t\tthis._set(\n\t\t\t\tthis.x * scale,\n\t\t\t\tthis.y * scale\n\t\t\t);\n\t\t}\n\t},\n\tgetAngle: function() {\n\t\treturn this.getAngleInRadians.apply(this, arguments) * 180 / Math.PI;\n\t},\n\n\tsetAngle: function(angle) {\n\t\tthis.setAngleInRadians.call(this, angle * Math.PI / 180);\n\t},\n\n\tgetAngleInDegrees: '#getAngle',\n\tsetAngleInDegrees: '#setAngle',\n\n\tgetAngleInRadians: function() {\n\t\tif (!arguments.length) {\n\t\t\treturn this.isZero()\n\t\t\t\t\t? this._angle || 0\n\t\t\t\t\t: this._angle = Math.atan2(this.y, this.x);\n\t\t} else {\n\t\t\tvar point = Point.read(arguments),\n\t\t\t\tdiv = this.getLength() * point.getLength();\n\t\t\tif (Numerical.isZero(div)) {\n\t\t\t\treturn NaN;\n\t\t\t} else {\n\t\t\t\tvar a = this.dot(point) / div;\n\t\t\t\treturn Math.acos(a < -1 ? -1 : a > 1 ? 1 : a);\n\t\t\t}\n\t\t}\n\t},\n\n\tsetAngleInRadians: function(angle) {\n\t\tthis._angle = angle;\n\t\tif (!this.isZero()) {\n\t\t\tvar length = this.getLength();\n\t\t\tthis._set(\n\t\t\t\tMath.cos(angle) * length,\n\t\t\t\tMath.sin(angle) * length\n\t\t\t);\n\t\t}\n\t},\n\n\tgetQuadrant: function() {\n\t\treturn this.x >= 0 ? this.y >= 0 ? 1 : 4 : this.y >= 0 ? 2 : 3;\n\t}\n}, {\n\tbeans: false,\n\n\tgetDirectedAngle: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn Math.atan2(this.cross(point), this.dot(point)) * 180 / Math.PI;\n\t},\n\n\tgetDistance: function() {\n\t\tvar args = arguments,\n\t\t\tpoint = Point.read(args),\n\t\t\tx = point.x - this.x,\n\t\t\ty = point.y - this.y,\n\t\t\td = x * x + y * y,\n\t\t\tsquared = Base.read(args);\n\t\treturn squared ? d : Math.sqrt(d);\n\t},\n\n\tnormalize: function(length) {\n\t\tif (length === undefined)\n\t\t\tlength = 1;\n\t\tvar current = this.getLength(),\n\t\t\tscale = current !== 0 ? length / current : 0,\n\t\t\tpoint = new Point(this.x * scale, this.y * scale);\n\t\tif (scale >= 0)\n\t\t\tpoint._angle = this._angle;\n\t\treturn point;\n\t},\n\n\trotate: function(angle, center) {\n\t\tif (angle === 0)\n\t\t\treturn this.clone();\n\t\tangle = angle * Math.PI / 180;\n\t\tvar point = center ? this.subtract(center) : this,\n\t\t\tsin = Math.sin(angle),\n\t\t\tcos = Math.cos(angle);\n\t\tpoint = new Point(\n\t\t\tpoint.x * cos - point.y * sin,\n\t\t\tpoint.x * sin + point.y * cos\n\t\t);\n\t\treturn center ? point.add(center) : point;\n\t},\n\n\ttransform: function(matrix) {\n\t\treturn matrix ? matrix._transformPoint(this) : this;\n\t},\n\n\tadd: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn new Point(this.x + point.x, this.y + point.y);\n\t},\n\n\tsubtract: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn new Point(this.x - point.x, this.y - point.y);\n\t},\n\n\tmultiply: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn new Point(this.x * point.x, this.y * point.y);\n\t},\n\n\tdivide: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn new Point(this.x / point.x, this.y / point.y);\n\t},\n\n\tmodulo: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn new Point(this.x % point.x, this.y % point.y);\n\t},\n\n\tnegate: function() {\n\t\treturn new Point(-this.x, -this.y);\n\t},\n\n\tisInside: function() {\n\t\treturn Rectangle.read(arguments).contains(this);\n\t},\n\n\tisClose: function() {\n\t\tvar args = arguments,\n\t\t\tpoint = Point.read(args),\n\t\t\ttolerance = Base.read(args);\n\t\treturn this.getDistance(point) <= tolerance;\n\t},\n\n\tisCollinear: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn Point.isCollinear(this.x, this.y, point.x, point.y);\n\t},\n\n\tisColinear: '#isCollinear',\n\n\tisOrthogonal: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn Point.isOrthogonal(this.x, this.y, point.x, point.y);\n\t},\n\n\tisZero: function() {\n\t\tvar isZero = Numerical.isZero;\n\t\treturn isZero(this.x) && isZero(this.y);\n\t},\n\n\tisNaN: function() {\n\t\treturn isNaN(this.x) || isNaN(this.y);\n\t},\n\n\tisInQuadrant: function(q) {\n\t\treturn this.x * (q > 1 && q < 4 ? -1 : 1) >= 0\n\t\t\t&& this.y * (q > 2 ? -1 : 1) >= 0;\n\t},\n\n\tdot: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn this.x * point.x + this.y * point.y;\n\t},\n\n\tcross: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn this.x * point.y - this.y * point.x;\n\t},\n\n\tproject: function() {\n\t\tvar point = Point.read(arguments),\n\t\t\tscale = point.isZero() ? 0 : this.dot(point) / point.dot(point);\n\t\treturn new Point(\n\t\t\tpoint.x * scale,\n\t\t\tpoint.y * scale\n\t\t);\n\t},\n\n\tstatics: {\n\t\tmin: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tpoint1 = Point.read(args),\n\t\t\t\tpoint2 = Point.read(args);\n\t\t\treturn new Point(\n\t\t\t\tMath.min(point1.x, point2.x),\n\t\t\t\tMath.min(point1.y, point2.y)\n\t\t\t);\n\t\t},\n\n\t\tmax: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tpoint1 = Point.read(args),\n\t\t\t\tpoint2 = Point.read(args);\n\t\t\treturn new Point(\n\t\t\t\tMath.max(point1.x, point2.x),\n\t\t\t\tMath.max(point1.y, point2.y)\n\t\t\t);\n\t\t},\n\n\t\trandom: function() {\n\t\t\treturn new Point(Math.random(), Math.random());\n\t\t},\n\n\t\tisCollinear: function(x1, y1, x2, y2) {\n\t\t\treturn Math.abs(x1 * y2 - y1 * x2)\n\t\t\t\t\t<= Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2))\n\t\t\t\t\t\t* 1e-8;\n\t\t},\n\n\t\tisOrthogonal: function(x1, y1, x2, y2) {\n\t\t\treturn Math.abs(x1 * x2 + y1 * y2)\n\t\t\t\t\t<= Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2))\n\t\t\t\t\t\t* 1e-8;\n\t\t}\n\t}\n}, Base.each(['round', 'ceil', 'floor', 'abs'], function(key) {\n\tvar op = Math[key];\n\tthis[key] = function() {\n\t\treturn new Point(op(this.x), op(this.y));\n\t};\n}, {}));\n\nvar LinkedPoint = Point.extend({\n\tinitialize: function Point(x, y, owner, setter) {\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._owner = owner;\n\t\tthis._setter = setter;\n\t},\n\n\t_set: function(x, y, _dontNotify) {\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tif (!_dontNotify)\n\t\t\tthis._owner[this._setter](this);\n\t\treturn this;\n\t},\n\n\tgetX: function() {\n\t\treturn this._x;\n\t},\n\n\tsetX: function(x) {\n\t\tthis._x = x;\n\t\tthis._owner[this._setter](this);\n\t},\n\n\tgetY: function() {\n\t\treturn this._y;\n\t},\n\n\tsetY: function(y) {\n\t\tthis._y = y;\n\t\tthis._owner[this._setter](this);\n\t},\n\n\tisSelected: function() {\n\t\treturn !!(this._owner._selection & this._getSelection());\n\t},\n\n\tsetSelected: function(selected) {\n\t\tthis._owner._changeSelection(this._getSelection(), selected);\n\t},\n\n\t_getSelection: function() {\n\t\treturn this._setter === 'setPosition' ? 4 : 0;\n\t}\n});\n\nvar Size = Base.extend({\n\t_class: 'Size',\n\t_readIndex: true,\n\n\tinitialize: function Size(arg0, arg1) {\n\t\tvar type = typeof arg0,\n\t\t\treading = this.__read,\n\t\t\tread = 0;\n\t\tif (type === 'number') {\n\t\t\tvar hasHeight = typeof arg1 === 'number';\n\t\t\tthis._set(arg0, hasHeight ? arg1 : arg0);\n\t\t\tif (reading)\n\t\t\t\tread = hasHeight ? 2 : 1;\n\t\t} else if (type === 'undefined' || arg0 === null) {\n\t\t\tthis._set(0, 0);\n\t\t\tif (reading)\n\t\t\t\tread = arg0 === null ? 1 : 0;\n\t\t} else {\n\t\t\tvar obj = type === 'string' ? arg0.split(/[\\s,]+/) || [] : arg0;\n\t\t\tread = 1;\n\t\t\tif (Array.isArray(obj)) {\n\t\t\t\tthis._set(+obj[0], +(obj.length > 1 ? obj[1] : obj[0]));\n\t\t\t} else if ('width' in obj) {\n\t\t\t\tthis._set(obj.width || 0, obj.height || 0);\n\t\t\t} else if ('x' in obj) {\n\t\t\t\tthis._set(obj.x || 0, obj.y || 0);\n\t\t\t} else {\n\t\t\t\tthis._set(0, 0);\n\t\t\t\tread = 0;\n\t\t\t}\n\t\t}\n\t\tif (reading)\n\t\t\tthis.__read = read;\n\t\treturn this;\n\t},\n\n\tset: '#initialize',\n\n\t_set: function(width, height) {\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\treturn this;\n\t},\n\n\tequals: function(size) {\n\t\treturn size === this || size && (this.width === size.width\n\t\t\t\t&& this.height === size.height\n\t\t\t\t|| Array.isArray(size) && this.width === size[0]\n\t\t\t\t\t&& this.height === size[1]) || false;\n\t},\n\n\tclone: function() {\n\t\treturn new Size(this.width, this.height);\n\t},\n\n\ttoString: function() {\n\t\tvar f = Formatter.instance;\n\t\treturn '{ width: ' + f.number(this.width)\n\t\t\t\t+ ', height: ' + f.number(this.height) + ' }';\n\t},\n\n\t_serialize: function(options) {\n\t\tvar f = options.formatter;\n\t\treturn [f.number(this.width),\n\t\t\t\tf.number(this.height)];\n\t},\n\n\tadd: function() {\n\t\tvar size = Size.read(arguments);\n\t\treturn new Size(this.width + size.width, this.height + size.height);\n\t},\n\n\tsubtract: function() {\n\t\tvar size = Size.read(arguments);\n\t\treturn new Size(this.width - size.width, this.height - size.height);\n\t},\n\n\tmultiply: function() {\n\t\tvar size = Size.read(arguments);\n\t\treturn new Size(this.width * size.width, this.height * size.height);\n\t},\n\n\tdivide: function() {\n\t\tvar size = Size.read(arguments);\n\t\treturn new Size(this.width / size.width, this.height / size.height);\n\t},\n\n\tmodulo: function() {\n\t\tvar size = Size.read(arguments);\n\t\treturn new Size(this.width % size.width, this.height % size.height);\n\t},\n\n\tnegate: function() {\n\t\treturn new Size(-this.width, -this.height);\n\t},\n\n\tisZero: function() {\n\t\tvar isZero = Numerical.isZero;\n\t\treturn isZero(this.width) && isZero(this.height);\n\t},\n\n\tisNaN: function() {\n\t\treturn isNaN(this.width) || isNaN(this.height);\n\t},\n\n\tstatics: {\n\t\tmin: function(size1, size2) {\n\t\t\treturn new Size(\n\t\t\t\tMath.min(size1.width, size2.width),\n\t\t\t\tMath.min(size1.height, size2.height));\n\t\t},\n\n\t\tmax: function(size1, size2) {\n\t\t\treturn new Size(\n\t\t\t\tMath.max(size1.width, size2.width),\n\t\t\t\tMath.max(size1.height, size2.height));\n\t\t},\n\n\t\trandom: function() {\n\t\t\treturn new Size(Math.random(), Math.random());\n\t\t}\n\t}\n}, Base.each(['round', 'ceil', 'floor', 'abs'], function(key) {\n\tvar op = Math[key];\n\tthis[key] = function() {\n\t\treturn new Size(op(this.width), op(this.height));\n\t};\n}, {}));\n\nvar LinkedSize = Size.extend({\n\tinitialize: function Size(width, height, owner, setter) {\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tthis._owner = owner;\n\t\tthis._setter = setter;\n\t},\n\n\t_set: function(width, height, _dontNotify) {\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tif (!_dontNotify)\n\t\t\tthis._owner[this._setter](this);\n\t\treturn this;\n\t},\n\n\tgetWidth: function() {\n\t\treturn this._width;\n\t},\n\n\tsetWidth: function(width) {\n\t\tthis._width = width;\n\t\tthis._owner[this._setter](this);\n\t},\n\n\tgetHeight: function() {\n\t\treturn this._height;\n\t},\n\n\tsetHeight: function(height) {\n\t\tthis._height = height;\n\t\tthis._owner[this._setter](this);\n\t}\n});\n\nvar Rectangle = Base.extend({\n\t_class: 'Rectangle',\n\t_readIndex: true,\n\tbeans: true,\n\n\tinitialize: function Rectangle(arg0, arg1, arg2, arg3) {\n\t\tvar args = arguments,\n\t\t\ttype = typeof arg0,\n\t\t\tread;\n\t\tif (type === 'number') {\n\t\t\tthis._set(arg0, arg1, arg2, arg3);\n\t\t\tread = 4;\n\t\t} else if (type === 'undefined' || arg0 === null) {\n\t\t\tthis._set(0, 0, 0, 0);\n\t\t\tread = arg0 === null ? 1 : 0;\n\t\t} else if (args.length === 1) {\n\t\t\tif (Array.isArray(arg0)) {\n\t\t\t\tthis._set.apply(this, arg0);\n\t\t\t\tread = 1;\n\t\t\t} else if (arg0.x !== undefined || arg0.width !== undefined) {\n\t\t\t\tthis._set(arg0.x || 0, arg0.y || 0,\n\t\t\t\t\t\targ0.width || 0, arg0.height || 0);\n\t\t\t\tread = 1;\n\t\t\t} else if (arg0.from === undefined && arg0.to === undefined) {\n\t\t\t\tthis._set(0, 0, 0, 0);\n\t\t\t\tif (Base.readSupported(args, this)) {\n\t\t\t\t\tread = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (read === undefined) {\n\t\t\tvar frm = Point.readNamed(args, 'from'),\n\t\t\t\tnext = Base.peek(args),\n\t\t\t\tx = frm.x,\n\t\t\t\ty = frm.y,\n\t\t\t\twidth,\n\t\t\t\theight;\n\t\t\tif (next && next.x !== undefined || Base.hasNamed(args, 'to')) {\n\t\t\t\tvar to = Point.readNamed(args, 'to');\n\t\t\t\twidth = to.x - x;\n\t\t\t\theight = to.y - y;\n\t\t\t\tif (width < 0) {\n\t\t\t\t\tx = to.x;\n\t\t\t\t\twidth = -width;\n\t\t\t\t}\n\t\t\t\tif (height < 0) {\n\t\t\t\t\ty = to.y;\n\t\t\t\t\theight = -height;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar size = Size.read(args);\n\t\t\t\twidth = size.width;\n\t\t\t\theight = size.height;\n\t\t\t}\n\t\t\tthis._set(x, y, width, height);\n\t\t\tread = args.__index;\n\t\t}\n\t\tvar filtered = args.__filtered;\n\t\tif (filtered)\n\t\t\tthis.__filtered = filtered;\n\t\tif (this.__read)\n\t\t\tthis.__read = read;\n\t\treturn this;\n\t},\n\n\tset: '#initialize',\n\n\t_set: function(x, y, width, height) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\treturn this;\n\t},\n\n\tclone: function() {\n\t\treturn new Rectangle(this.x, this.y, this.width, this.height);\n\t},\n\n\tequals: function(rect) {\n\t\tvar rt = Base.isPlainValue(rect)\n\t\t\t\t? Rectangle.read(arguments)\n\t\t\t\t: rect;\n\t\treturn rt === this\n\t\t\t\t|| rt && this.x === rt.x && this.y === rt.y\n\t\t\t\t\t&& this.width === rt.width && this.height === rt.height\n\t\t\t\t|| false;\n\t},\n\n\ttoString: function() {\n\t\tvar f = Formatter.instance;\n\t\treturn '{ x: ' + f.number(this.x)\n\t\t\t\t+ ', y: ' + f.number(this.y)\n\t\t\t\t+ ', width: ' + f.number(this.width)\n\t\t\t\t+ ', height: ' + f.number(this.height)\n\t\t\t\t+ ' }';\n\t},\n\n\t_serialize: function(options) {\n\t\tvar f = options.formatter;\n\t\treturn [f.number(this.x),\n\t\t\t\tf.number(this.y),\n\t\t\t\tf.number(this.width),\n\t\t\t\tf.number(this.height)];\n\t},\n\n\tgetPoint: function(_dontLink) {\n\t\tvar ctor = _dontLink ? Point : LinkedPoint;\n\t\treturn new ctor(this.x, this.y, this, 'setPoint');\n\t},\n\n\tsetPoint: function() {\n\t\tvar point = Point.read(arguments);\n\t\tthis.x = point.x;\n\t\tthis.y = point.y;\n\t},\n\n\tgetSize: function(_dontLink) {\n\t\tvar ctor = _dontLink ? Size : LinkedSize;\n\t\treturn new ctor(this.width, this.height, this, 'setSize');\n\t},\n\n\t_fw: 1,\n\t_fh: 1,\n\n\tsetSize: function() {\n\t\tvar size = Size.read(arguments),\n\t\t\tsx = this._sx,\n\t\t\tsy = this._sy,\n\t\t\tw = size.width,\n\t\t\th = size.height;\n\t\tif (sx) {\n\t\t\tthis.x += (this.width - w) * sx;\n\t\t}\n\t\tif (sy) {\n\t\t\tthis.y += (this.height - h) * sy;\n\t\t}\n\t\tthis.width = w;\n\t\tthis.height = h;\n\t\tthis._fw = this._fh = 1;\n\t},\n\n\tgetLeft: function() {\n\t\treturn this.x;\n\t},\n\n\tsetLeft: function(left) {\n\t\tif (!this._fw) {\n\t\t\tvar amount = left - this.x;\n\t\t\tthis.width -= this._sx === 0.5 ? amount * 2 : amount;\n\t\t}\n\t\tthis.x = left;\n\t\tthis._sx = this._fw = 0;\n\t},\n\n\tgetTop: function() {\n\t\treturn this.y;\n\t},\n\n\tsetTop: function(top) {\n\t\tif (!this._fh) {\n\t\t\tvar amount = top - this.y;\n\t\t\tthis.height -= this._sy === 0.5 ? amount * 2 : amount;\n\t\t}\n\t\tthis.y = top;\n\t\tthis._sy = this._fh = 0;\n\t},\n\n\tgetRight: function() {\n\t\treturn this.x + this.width;\n\t},\n\n\tsetRight: function(right) {\n\t\tif (!this._fw) {\n\t\t\tvar amount = right - this.x;\n\t\t\tthis.width = this._sx === 0.5 ? amount * 2 : amount;\n\t\t}\n\t\tthis.x = right - this.width;\n\t\tthis._sx = 1;\n\t\tthis._fw = 0;\n\t},\n\n\tgetBottom: function() {\n\t\treturn this.y + this.height;\n\t},\n\n\tsetBottom: function(bottom) {\n\t\tif (!this._fh) {\n\t\t\tvar amount = bottom - this.y;\n\t\t\tthis.height = this._sy === 0.5 ? amount * 2 : amount;\n\t\t}\n\t\tthis.y = bottom - this.height;\n\t\tthis._sy = 1;\n\t\tthis._fh = 0;\n\t},\n\n\tgetCenterX: function() {\n\t\treturn this.x + this.width / 2;\n\t},\n\n\tsetCenterX: function(x) {\n\t\tif (this._fw || this._sx === 0.5) {\n\t\t\tthis.x = x - this.width / 2;\n\t\t} else {\n\t\t\tif (this._sx) {\n\t\t\t\tthis.x += (x - this.x) * 2 * this._sx;\n\t\t\t}\n\t\t\tthis.width = (x - this.x) * 2;\n\t\t}\n\t\tthis._sx = 0.5;\n\t\tthis._fw = 0;\n\t},\n\n\tgetCenterY: function() {\n\t\treturn this.y + this.height / 2;\n\t},\n\n\tsetCenterY: function(y) {\n\t\tif (this._fh || this._sy === 0.5) {\n\t\t\tthis.y = y - this.height / 2;\n\t\t} else {\n\t\t\tif (this._sy) {\n\t\t\t\tthis.y += (y - this.y) * 2 * this._sy;\n\t\t\t}\n\t\t\tthis.height = (y - this.y) * 2;\n\t\t}\n\t\tthis._sy = 0.5;\n\t\tthis._fh = 0;\n\t},\n\n\tgetCenter: function(_dontLink) {\n\t\tvar ctor = _dontLink ? Point : LinkedPoint;\n\t\treturn new ctor(this.getCenterX(), this.getCenterY(), this, 'setCenter');\n\t},\n\n\tsetCenter: function() {\n\t\tvar point = Point.read(arguments);\n\t\tthis.setCenterX(point.x);\n\t\tthis.setCenterY(point.y);\n\t\treturn this;\n\t},\n\n\tgetArea: function() {\n\t\treturn this.width * this.height;\n\t},\n\n\tisEmpty: function() {\n\t\treturn this.width === 0 || this.height === 0;\n\t},\n\n\tcontains: function(arg) {\n\t\treturn arg && arg.width !== undefined\n\t\t\t\t|| (Array.isArray(arg) ? arg : arguments).length === 4\n\t\t\t\t? this._containsRectangle(Rectangle.read(arguments))\n\t\t\t\t: this._containsPoint(Point.read(arguments));\n\t},\n\n\t_containsPoint: function(point) {\n\t\tvar x = point.x,\n\t\t\ty = point.y;\n\t\treturn x >= this.x && y >= this.y\n\t\t\t\t&& x <= this.x + this.width\n\t\t\t\t&& y <= this.y + this.height;\n\t},\n\n\t_containsRectangle: function(rect) {\n\t\tvar x = rect.x,\n\t\t\ty = rect.y;\n\t\treturn x >= this.x && y >= this.y\n\t\t\t\t&& x + rect.width <= this.x + this.width\n\t\t\t\t&& y + rect.height <= this.y + this.height;\n\t},\n\n\tintersects: function() {\n\t\tvar rect = Rectangle.read(arguments),\n\t\t\tepsilon = Base.read(arguments) || 0;\n\t\treturn rect.x + rect.width > this.x - epsilon\n\t\t\t\t&& rect.y + rect.height > this.y - epsilon\n\t\t\t\t&& rect.x < this.x + this.width + epsilon\n\t\t\t\t&& rect.y < this.y + this.height + epsilon;\n\t},\n\n\tintersect: function() {\n\t\tvar rect = Rectangle.read(arguments),\n\t\t\tx1 = Math.max(this.x, rect.x),\n\t\t\ty1 = Math.max(this.y, rect.y),\n\t\t\tx2 = Math.min(this.x + this.width, rect.x + rect.width),\n\t\t\ty2 = Math.min(this.y + this.height, rect.y + rect.height);\n\t\treturn new Rectangle(x1, y1, x2 - x1, y2 - y1);\n\t},\n\n\tunite: function() {\n\t\tvar rect = Rectangle.read(arguments),\n\t\t\tx1 = Math.min(this.x, rect.x),\n\t\t\ty1 = Math.min(this.y, rect.y),\n\t\t\tx2 = Math.max(this.x + this.width, rect.x + rect.width),\n\t\t\ty2 = Math.max(this.y + this.height, rect.y + rect.height);\n\t\treturn new Rectangle(x1, y1, x2 - x1, y2 - y1);\n\t},\n\n\tinclude: function() {\n\t\tvar point = Point.read(arguments);\n\t\tvar x1 = Math.min(this.x, point.x),\n\t\t\ty1 = Math.min(this.y, point.y),\n\t\t\tx2 = Math.max(this.x + this.width, point.x),\n\t\t\ty2 = Math.max(this.y + this.height, point.y);\n\t\treturn new Rectangle(x1, y1, x2 - x1, y2 - y1);\n\t},\n\n\texpand: function() {\n\t\tvar amount = Size.read(arguments),\n\t\t\thor = amount.width,\n\t\t\tver = amount.height;\n\t\treturn new Rectangle(this.x - hor / 2, this.y - ver / 2,\n\t\t\t\tthis.width + hor, this.height + ver);\n\t},\n\n\tscale: function(hor, ver) {\n\t\treturn this.expand(this.width * hor - this.width,\n\t\t\t\tthis.height * (ver === undefined ? hor : ver) - this.height);\n\t}\n}, Base.each([\n\t\t['Top', 'Left'], ['Top', 'Right'],\n\t\t['Bottom', 'Left'], ['Bottom', 'Right'],\n\t\t['Left', 'Center'], ['Top', 'Center'],\n\t\t['Right', 'Center'], ['Bottom', 'Center']\n\t],\n\tfunction(parts, index) {\n\t\tvar part = parts.join(''),\n\t\t\txFirst = /^[RL]/.test(part);\n\t\tif (index >= 4)\n\t\t\tparts[1] += xFirst ? 'Y' : 'X';\n\t\tvar x = parts[xFirst ? 0 : 1],\n\t\t\ty = parts[xFirst ? 1 : 0],\n\t\t\tgetX = 'get' + x,\n\t\t\tgetY = 'get' + y,\n\t\t\tsetX = 'set' + x,\n\t\t\tsetY = 'set' + y,\n\t\t\tget = 'get' + part,\n\t\t\tset = 'set' + part;\n\t\tthis[get] = function(_dontLink) {\n\t\t\tvar ctor = _dontLink ? Point : LinkedPoint;\n\t\t\treturn new ctor(this[getX](), this[getY](), this, set);\n\t\t};\n\t\tthis[set] = function() {\n\t\t\tvar point = Point.read(arguments);\n\t\t\tthis[setX](point.x);\n\t\t\tthis[setY](point.y);\n\t\t};\n\t}, {\n\t\tbeans: true\n\t}\n));\n\nvar LinkedRectangle = Rectangle.extend({\n\tinitialize: function Rectangle(x, y, width, height, owner, setter) {\n\t\tthis._set(x, y, width, height, true);\n\t\tthis._owner = owner;\n\t\tthis._setter = setter;\n\t},\n\n\t_set: function(x, y, width, height, _dontNotify) {\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tif (!_dontNotify)\n\t\t\tthis._owner[this._setter](this);\n\t\treturn this;\n\t}\n},\nnew function() {\n\tvar proto = Rectangle.prototype;\n\n\treturn Base.each(['x', 'y', 'width', 'height'], function(key) {\n\t\tvar part = Base.capitalize(key),\n\t\t\tinternal = '_' + key;\n\t\tthis['get' + part] = function() {\n\t\t\treturn this[internal];\n\t\t};\n\n\t\tthis['set' + part] = function(value) {\n\t\t\tthis[internal] = value;\n\t\t\tif (!this._dontNotify)\n\t\t\t\tthis._owner[this._setter](this);\n\t\t};\n\t}, Base.each(['Point', 'Size', 'Center',\n\t\t\t'Left', 'Top', 'Right', 'Bottom', 'CenterX', 'CenterY',\n\t\t\t'TopLeft', 'TopRight', 'BottomLeft', 'BottomRight',\n\t\t\t'LeftCenter', 'TopCenter', 'RightCenter', 'BottomCenter'],\n\t\tfunction(key) {\n\t\t\tvar name = 'set' + key;\n\t\t\tthis[name] = function() {\n\t\t\t\tthis._dontNotify = true;\n\t\t\t\tproto[name].apply(this, arguments);\n\t\t\t\tthis._dontNotify = false;\n\t\t\t\tthis._owner[this._setter](this);\n\t\t\t};\n\t\t}, {\n\t\t\tisSelected: function() {\n\t\t\t\treturn !!(this._owner._selection & 2);\n\t\t\t},\n\n\t\t\tsetSelected: function(selected) {\n\t\t\t\tvar owner = this._owner;\n\t\t\t\tif (owner._changeSelection) {\n\t\t\t\t\towner._changeSelection(2, selected);\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t);\n});\n\nvar Matrix = Base.extend({\n\t_class: 'Matrix',\n\n\tinitialize: function Matrix(arg, _dontNotify) {\n\t\tvar args = arguments,\n\t\t\tcount = args.length,\n\t\t\tok = true;\n\t\tif (count >= 6) {\n\t\t\tthis._set.apply(this, args);\n\t\t} else if (count === 1 || count === 2) {\n\t\t\tif (arg instanceof Matrix) {\n\t\t\t\tthis._set(arg._a, arg._b, arg._c, arg._d, arg._tx, arg._ty,\n\t\t\t\t\t\t_dontNotify);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tthis._set.apply(this,\n\t\t\t\t\t\t_dontNotify ? arg.concat([_dontNotify]) : arg);\n\t\t\t} else {\n\t\t\t\tok = false;\n\t\t\t}\n\t\t} else if (!count) {\n\t\t\tthis.reset();\n\t\t} else {\n\t\t\tok = false;\n\t\t}\n\t\tif (!ok) {\n\t\t\tthrow new Error('Unsupported matrix parameters');\n\t\t}\n\t\treturn this;\n\t},\n\n\tset: '#initialize',\n\n\t_set: function(a, b, c, d, tx, ty, _dontNotify) {\n\t\tthis._a = a;\n\t\tthis._b = b;\n\t\tthis._c = c;\n\t\tthis._d = d;\n\t\tthis._tx = tx;\n\t\tthis._ty = ty;\n\t\tif (!_dontNotify)\n\t\t\tthis._changed();\n\t\treturn this;\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\treturn Base.serialize(this.getValues(), options, true, dictionary);\n\t},\n\n\t_changed: function() {\n\t\tvar owner = this._owner;\n\t\tif (owner) {\n\t\t\tif (owner._applyMatrix) {\n\t\t\t\towner.transform(null, true);\n\t\t\t} else {\n\t\t\t\towner._changed(25);\n\t\t\t}\n\t\t}\n\t},\n\n\tclone: function() {\n\t\treturn new Matrix(this._a, this._b, this._c, this._d,\n\t\t\t\tthis._tx, this._ty);\n\t},\n\n\tequals: function(mx) {\n\t\treturn mx === this || mx && this._a === mx._a && this._b === mx._b\n\t\t\t\t&& this._c === mx._c && this._d === mx._d\n\t\t\t\t&& this._tx === mx._tx && this._ty === mx._ty;\n\t},\n\n\ttoString: function() {\n\t\tvar f = Formatter.instance;\n\t\treturn '[[' + [f.number(this._a), f.number(this._c),\n\t\t\t\t\tf.number(this._tx)].join(', ') + '], ['\n\t\t\t\t+ [f.number(this._b), f.number(this._d),\n\t\t\t\t\tf.number(this._ty)].join(', ') + ']]';\n\t},\n\n\treset: function(_dontNotify) {\n\t\tthis._a = this._d = 1;\n\t\tthis._b = this._c = this._tx = this._ty = 0;\n\t\tif (!_dontNotify)\n\t\t\tthis._changed();\n\t\treturn this;\n\t},\n\n\tapply: function(recursively, _setApplyMatrix) {\n\t\tvar owner = this._owner;\n\t\tif (owner) {\n\t\t\towner.transform(null, Base.pick(recursively, true), _setApplyMatrix);\n\t\t\treturn this.isIdentity();\n\t\t}\n\t\treturn false;\n\t},\n\n\ttranslate: function() {\n\t\tvar point = Point.read(arguments),\n\t\t\tx = point.x,\n\t\t\ty = point.y;\n\t\tthis._tx += x * this._a + y * this._c;\n\t\tthis._ty += x * this._b + y * this._d;\n\t\tthis._changed();\n\t\treturn this;\n\t},\n\n\tscale: function() {\n\t\tvar args = arguments,\n\t\t\tscale = Point.read(args),\n\t\t\tcenter = Point.read(args, 0, { readNull: true });\n\t\tif (center)\n\t\t\tthis.translate(center);\n\t\tthis._a *= scale.x;\n\t\tthis._b *= scale.x;\n\t\tthis._c *= scale.y;\n\t\tthis._d *= scale.y;\n\t\tif (center)\n\t\t\tthis.translate(center.negate());\n\t\tthis._changed();\n\t\treturn this;\n\t},\n\n\trotate: function(angle ) {\n\t\tangle *= Math.PI / 180;\n\t\tvar center = Point.read(arguments, 1),\n\t\t\tx = center.x,\n\t\t\ty = center.y,\n\t\t\tcos = Math.cos(angle),\n\t\t\tsin = Math.sin(angle),\n\t\t\ttx = x - x * cos + y * sin,\n\t\t\tty = y - x * sin - y * cos,\n\t\t\ta = this._a,\n\t\t\tb = this._b,\n\t\t\tc = this._c,\n\t\t\td = this._d;\n\t\tthis._a = cos * a + sin * c;\n\t\tthis._b = cos * b + sin * d;\n\t\tthis._c = -sin * a + cos * c;\n\t\tthis._d = -sin * b + cos * d;\n\t\tthis._tx += tx * a + ty * c;\n\t\tthis._ty += tx * b + ty * d;\n\t\tthis._changed();\n\t\treturn this;\n\t},\n\n\tshear: function() {\n\t\tvar args = arguments,\n\t\t\tshear = Point.read(args),\n\t\t\tcenter = Point.read(args, 0, { readNull: true });\n\t\tif (center)\n\t\t\tthis.translate(center);\n\t\tvar a = this._a,\n\t\t\tb = this._b;\n\t\tthis._a += shear.y * this._c;\n\t\tthis._b += shear.y * this._d;\n\t\tthis._c += shear.x * a;\n\t\tthis._d += shear.x * b;\n\t\tif (center)\n\t\t\tthis.translate(center.negate());\n\t\tthis._changed();\n\t\treturn this;\n\t},\n\n\tskew: function() {\n\t\tvar args = arguments,\n\t\t\tskew = Point.read(args),\n\t\t\tcenter = Point.read(args, 0, { readNull: true }),\n\t\t\ttoRadians = Math.PI / 180,\n\t\t\tshear = new Point(Math.tan(skew.x * toRadians),\n\t\t\t\tMath.tan(skew.y * toRadians));\n\t\treturn this.shear(shear, center);\n\t},\n\n\tappend: function(mx, _dontNotify) {\n\t\tif (mx) {\n\t\t\tvar a1 = this._a,\n\t\t\t\tb1 = this._b,\n\t\t\t\tc1 = this._c,\n\t\t\t\td1 = this._d,\n\t\t\t\ta2 = mx._a,\n\t\t\t\tb2 = mx._c,\n\t\t\t\tc2 = mx._b,\n\t\t\t\td2 = mx._d,\n\t\t\t\ttx2 = mx._tx,\n\t\t\t\tty2 = mx._ty;\n\t\t\tthis._a = a2 * a1 + c2 * c1;\n\t\t\tthis._c = b2 * a1 + d2 * c1;\n\t\t\tthis._b = a2 * b1 + c2 * d1;\n\t\t\tthis._d = b2 * b1 + d2 * d1;\n\t\t\tthis._tx += tx2 * a1 + ty2 * c1;\n\t\t\tthis._ty += tx2 * b1 + ty2 * d1;\n\t\t\tif (!_dontNotify)\n\t\t\t\tthis._changed();\n\t\t}\n\t\treturn this;\n\t},\n\n\tprepend: function(mx, _dontNotify) {\n\t\tif (mx) {\n\t\t\tvar a1 = this._a,\n\t\t\t\tb1 = this._b,\n\t\t\t\tc1 = this._c,\n\t\t\t\td1 = this._d,\n\t\t\t\ttx1 = this._tx,\n\t\t\t\tty1 = this._ty,\n\t\t\t\ta2 = mx._a,\n\t\t\t\tb2 = mx._c,\n\t\t\t\tc2 = mx._b,\n\t\t\t\td2 = mx._d,\n\t\t\t\ttx2 = mx._tx,\n\t\t\t\tty2 = mx._ty;\n\t\t\tthis._a = a2 * a1 + b2 * b1;\n\t\t\tthis._c = a2 * c1 + b2 * d1;\n\t\t\tthis._b = c2 * a1 + d2 * b1;\n\t\t\tthis._d = c2 * c1 + d2 * d1;\n\t\t\tthis._tx = a2 * tx1 + b2 * ty1 + tx2;\n\t\t\tthis._ty = c2 * tx1 + d2 * ty1 + ty2;\n\t\t\tif (!_dontNotify)\n\t\t\t\tthis._changed();\n\t\t}\n\t\treturn this;\n\t},\n\n\tappended: function(mx) {\n\t\treturn this.clone().append(mx);\n\t},\n\n\tprepended: function(mx) {\n\t\treturn this.clone().prepend(mx);\n\t},\n\n\tinvert: function() {\n\t\tvar a = this._a,\n\t\t\tb = this._b,\n\t\t\tc = this._c,\n\t\t\td = this._d,\n\t\t\ttx = this._tx,\n\t\t\tty = this._ty,\n\t\t\tdet = a * d - b * c,\n\t\t\tres = null;\n\t\tif (det && !isNaN(det) && isFinite(tx) && isFinite(ty)) {\n\t\t\tthis._a = d / det;\n\t\t\tthis._b = -b / det;\n\t\t\tthis._c = -c / det;\n\t\t\tthis._d = a / det;\n\t\t\tthis._tx = (c * ty - d * tx) / det;\n\t\t\tthis._ty = (b * tx - a * ty) / det;\n\t\t\tres = this;\n\t\t}\n\t\treturn res;\n\t},\n\n\tinverted: function() {\n\t\treturn this.clone().invert();\n\t},\n\n\tconcatenate: '#append',\n\tpreConcatenate: '#prepend',\n\tchain: '#appended',\n\n\t_shiftless: function() {\n\t\treturn new Matrix(this._a, this._b, this._c, this._d, 0, 0);\n\t},\n\n\t_orNullIfIdentity: function() {\n\t\treturn this.isIdentity() ? null : this;\n\t},\n\n\tisIdentity: function() {\n\t\treturn this._a === 1 && this._b === 0 && this._c === 0 && this._d === 1\n\t\t\t\t&& this._tx === 0 && this._ty === 0;\n\t},\n\n\tisInvertible: function() {\n\t\tvar det = this._a * this._d - this._c * this._b;\n\t\treturn det && !isNaN(det) && isFinite(this._tx) && isFinite(this._ty);\n\t},\n\n\tisSingular: function() {\n\t\treturn !this.isInvertible();\n\t},\n\n\ttransform: function( src, dst, count) {\n\t\treturn arguments.length < 3\n\t\t\t? this._transformPoint(Point.read(arguments))\n\t\t\t: this._transformCoordinates(src, dst, count);\n\t},\n\n\t_transformPoint: function(point, dest, _dontNotify) {\n\t\tvar x = point.x,\n\t\t\ty = point.y;\n\t\tif (!dest)\n\t\t\tdest = new Point();\n\t\treturn dest._set(\n\t\t\t\tx * this._a + y * this._c + this._tx,\n\t\t\t\tx * this._b + y * this._d + this._ty,\n\t\t\t\t_dontNotify);\n\t},\n\n\t_transformCoordinates: function(src, dst, count) {\n\t\tfor (var i = 0, max = 2 * count; i < max; i += 2) {\n\t\t\tvar x = src[i],\n\t\t\t\ty = src[i + 1];\n\t\t\tdst[i] = x * this._a + y * this._c + this._tx;\n\t\t\tdst[i + 1] = x * this._b + y * this._d + this._ty;\n\t\t}\n\t\treturn dst;\n\t},\n\n\t_transformCorners: function(rect) {\n\t\tvar x1 = rect.x,\n\t\t\ty1 = rect.y,\n\t\t\tx2 = x1 + rect.width,\n\t\t\ty2 = y1 + rect.height,\n\t\t\tcoords = [ x1, y1, x2, y1, x2, y2, x1, y2 ];\n\t\treturn this._transformCoordinates(coords, coords, 4);\n\t},\n\n\t_transformBounds: function(bounds, dest, _dontNotify) {\n\t\tvar coords = this._transformCorners(bounds),\n\t\t\tmin = coords.slice(0, 2),\n\t\t\tmax = min.slice();\n\t\tfor (var i = 2; i < 8; i++) {\n\t\t\tvar val = coords[i],\n\t\t\t\tj = i & 1;\n\t\t\tif (val < min[j]) {\n\t\t\t\tmin[j] = val;\n\t\t\t} else if (val > max[j]) {\n\t\t\t\tmax[j] = val;\n\t\t\t}\n\t\t}\n\t\tif (!dest)\n\t\t\tdest = new Rectangle();\n\t\treturn dest._set(min[0], min[1], max[0] - min[0], max[1] - min[1],\n\t\t\t\t_dontNotify);\n\t},\n\n\tinverseTransform: function() {\n\t\treturn this._inverseTransform(Point.read(arguments));\n\t},\n\n\t_inverseTransform: function(point, dest, _dontNotify) {\n\t\tvar a = this._a,\n\t\t\tb = this._b,\n\t\t\tc = this._c,\n\t\t\td = this._d,\n\t\t\ttx = this._tx,\n\t\t\tty = this._ty,\n\t\t\tdet = a * d - b * c,\n\t\t\tres = null;\n\t\tif (det && !isNaN(det) && isFinite(tx) && isFinite(ty)) {\n\t\t\tvar x = point.x - this._tx,\n\t\t\t\ty = point.y - this._ty;\n\t\t\tif (!dest)\n\t\t\t\tdest = new Point();\n\t\t\tres = dest._set(\n\t\t\t\t\t(x * d - y * c) / det,\n\t\t\t\t\t(y * a - x * b) / det,\n\t\t\t\t\t_dontNotify);\n\t\t}\n\t\treturn res;\n\t},\n\n\tdecompose: function() {\n\t\tvar a = this._a,\n\t\t\tb = this._b,\n\t\t\tc = this._c,\n\t\t\td = this._d,\n\t\t\tdet = a * d - b * c,\n\t\t\tsqrt = Math.sqrt,\n\t\t\tatan2 = Math.atan2,\n\t\t\tdegrees = 180 / Math.PI,\n\t\t\trotate,\n\t\t\tscale,\n\t\t\tskew;\n\t\tif (a !== 0 || b !== 0) {\n\t\t\tvar r = sqrt(a * a + b * b);\n\t\t\trotate = Math.acos(a / r) * (b > 0 ? 1 : -1);\n\t\t\tscale = [r, det / r];\n\t\t\tskew = [atan2(a * c + b * d, r * r), 0];\n\t\t} else if (c !== 0 || d !== 0) {\n\t\t\tvar s = sqrt(c * c + d * d);\n\t\t\trotate = Math.asin(c / s)  * (d > 0 ? 1 : -1);\n\t\t\tscale = [det / s, s];\n\t\t\tskew = [0, atan2(a * c + b * d, s * s)];\n\t\t} else {\n\t\t\trotate = 0;\n\t\t\tskew = scale = [0, 0];\n\t\t}\n\t\treturn {\n\t\t\ttranslation: this.getTranslation(),\n\t\t\trotation: rotate * degrees,\n\t\t\tscaling: new Point(scale),\n\t\t\tskewing: new Point(skew[0] * degrees, skew[1] * degrees)\n\t\t};\n\t},\n\n\tgetValues: function() {\n\t\treturn [ this._a, this._b, this._c, this._d, this._tx, this._ty ];\n\t},\n\n\tgetTranslation: function() {\n\t\treturn new Point(this._tx, this._ty);\n\t},\n\n\tgetScaling: function() {\n\t\treturn this.decompose().scaling;\n\t},\n\n\tgetRotation: function() {\n\t\treturn this.decompose().rotation;\n\t},\n\n\tapplyToContext: function(ctx) {\n\t\tif (!this.isIdentity()) {\n\t\t\tctx.transform(this._a, this._b, this._c, this._d,\n\t\t\t\t\tthis._tx, this._ty);\n\t\t}\n\t}\n}, Base.each(['a', 'b', 'c', 'd', 'tx', 'ty'], function(key) {\n\tvar part = Base.capitalize(key),\n\t\tprop = '_' + key;\n\tthis['get' + part] = function() {\n\t\treturn this[prop];\n\t};\n\tthis['set' + part] = function(value) {\n\t\tthis[prop] = value;\n\t\tthis._changed();\n\t};\n}, {}));\n\nvar Line = Base.extend({\n\t_class: 'Line',\n\n\tinitialize: function Line(arg0, arg1, arg2, arg3, arg4) {\n\t\tvar asVector = false;\n\t\tif (arguments.length >= 4) {\n\t\t\tthis._px = arg0;\n\t\t\tthis._py = arg1;\n\t\t\tthis._vx = arg2;\n\t\t\tthis._vy = arg3;\n\t\t\tasVector = arg4;\n\t\t} else {\n\t\t\tthis._px = arg0.x;\n\t\t\tthis._py = arg0.y;\n\t\t\tthis._vx = arg1.x;\n\t\t\tthis._vy = arg1.y;\n\t\t\tasVector = arg2;\n\t\t}\n\t\tif (!asVector) {\n\t\t\tthis._vx -= this._px;\n\t\t\tthis._vy -= this._py;\n\t\t}\n\t},\n\n\tgetPoint: function() {\n\t\treturn new Point(this._px, this._py);\n\t},\n\n\tgetVector: function() {\n\t\treturn new Point(this._vx, this._vy);\n\t},\n\n\tgetLength: function() {\n\t\treturn this.getVector().getLength();\n\t},\n\n\tintersect: function(line, isInfinite) {\n\t\treturn Line.intersect(\n\t\t\t\tthis._px, this._py, this._vx, this._vy,\n\t\t\t\tline._px, line._py, line._vx, line._vy,\n\t\t\t\ttrue, isInfinite);\n\t},\n\n\tgetSide: function(point, isInfinite) {\n\t\treturn Line.getSide(\n\t\t\t\tthis._px, this._py, this._vx, this._vy,\n\t\t\t\tpoint.x, point.y, true, isInfinite);\n\t},\n\n\tgetDistance: function(point) {\n\t\treturn Math.abs(this.getSignedDistance(point));\n\t},\n\n\tgetSignedDistance: function(point) {\n\t\treturn Line.getSignedDistance(this._px, this._py, this._vx, this._vy,\n\t\t\t\tpoint.x, point.y, true);\n\t},\n\n\tisCollinear: function(line) {\n\t\treturn Point.isCollinear(this._vx, this._vy, line._vx, line._vy);\n\t},\n\n\tisOrthogonal: function(line) {\n\t\treturn Point.isOrthogonal(this._vx, this._vy, line._vx, line._vy);\n\t},\n\n\tstatics: {\n\t\tintersect: function(p1x, p1y, v1x, v1y, p2x, p2y, v2x, v2y, asVector,\n\t\t\t\tisInfinite) {\n\t\t\tif (!asVector) {\n\t\t\t\tv1x -= p1x;\n\t\t\t\tv1y -= p1y;\n\t\t\t\tv2x -= p2x;\n\t\t\t\tv2y -= p2y;\n\t\t\t}\n\t\t\tvar cross = v1x * v2y - v1y * v2x;\n\t\t\tif (!Numerical.isMachineZero(cross)) {\n\t\t\t\tvar dx = p1x - p2x,\n\t\t\t\t\tdy = p1y - p2y,\n\t\t\t\t\tu1 = (v2x * dy - v2y * dx) / cross,\n\t\t\t\t\tu2 = (v1x * dy - v1y * dx) / cross,\n\t\t\t\t\tepsilon = 1e-12,\n\t\t\t\t\tuMin = -epsilon,\n\t\t\t\t\tuMax = 1 + epsilon;\n\t\t\t\tif (isInfinite\n\t\t\t\t\t\t|| uMin < u1 && u1 < uMax && uMin < u2 && u2 < uMax) {\n\t\t\t\t\tif (!isInfinite) {\n\t\t\t\t\t\tu1 = u1 <= 0 ? 0 : u1 >= 1 ? 1 : u1;\n\t\t\t\t\t}\n\t\t\t\t\treturn new Point(\n\t\t\t\t\t\t\tp1x + u1 * v1x,\n\t\t\t\t\t\t\tp1y + u1 * v1y);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgetSide: function(px, py, vx, vy, x, y, asVector, isInfinite) {\n\t\t\tif (!asVector) {\n\t\t\t\tvx -= px;\n\t\t\t\tvy -= py;\n\t\t\t}\n\t\t\tvar v2x = x - px,\n\t\t\t\tv2y = y - py,\n\t\t\t\tccw = v2x * vy - v2y * vx;\n\t\t\tif (!isInfinite && Numerical.isMachineZero(ccw)) {\n\t\t\t\tccw = (v2x * vx + v2x * vx) / (vx * vx + vy * vy);\n\t\t\t\tif (ccw >= 0 && ccw <= 1)\n\t\t\t\t\tccw = 0;\n\t\t\t}\n\t\t\treturn ccw < 0 ? -1 : ccw > 0 ? 1 : 0;\n\t\t},\n\n\t\tgetSignedDistance: function(px, py, vx, vy, x, y, asVector) {\n\t\t\tif (!asVector) {\n\t\t\t\tvx -= px;\n\t\t\t\tvy -= py;\n\t\t\t}\n\t\t\t  return  vx === 0 ? (vy > 0 ? x - px : px - x)\n\t\t\t\t\t: vy === 0 ? (vx < 0 ? y - py : py - y)\n\t\t\t\t\t: ((x - px) * vy - (y - py) * vx) / (\n\t\t\t\t\t\tvy > vx\n\t\t\t\t\t\t\t? vy * Math.sqrt(1 + (vx * vx) / (vy * vy))\n\t\t\t\t\t\t\t: vx * Math.sqrt(1 + (vy * vy) / (vx * vx))\n\t\t\t\t\t);\n\t\t},\n\n\t\tgetDistance: function(px, py, vx, vy, x, y, asVector) {\n\t\t\treturn Math.abs(\n\t\t\t\t\tLine.getSignedDistance(px, py, vx, vy, x, y, asVector));\n\t\t}\n\t}\n});\n\nvar Project = PaperScopeItem.extend({\n\t_class: 'Project',\n\t_list: 'projects',\n\t_reference: 'project',\n\t_compactSerialize: true,\n\n\tinitialize: function Project(element) {\n\t\tPaperScopeItem.call(this, true);\n\t\tthis._children = [];\n\t\tthis._namedChildren = {};\n\t\tthis._activeLayer = null;\n\t\tthis._currentStyle = new Style(null, null, this);\n\t\tthis._view = View.create(this,\n\t\t\t\telement || CanvasProvider.getCanvas(1, 1));\n\t\tthis._selectionItems = {};\n\t\tthis._selectionCount = 0;\n\t\tthis._updateVersion = 0;\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\treturn Base.serialize(this._children, options, true, dictionary);\n\t},\n\n\t_changed: function(flags, item) {\n\t\tif (flags & 1) {\n\t\t\tvar view = this._view;\n\t\t\tif (view) {\n\t\t\t\tview._needsUpdate = true;\n\t\t\t\tif (!view._requested && view._autoUpdate)\n\t\t\t\t\tview.requestUpdate();\n\t\t\t}\n\t\t}\n\t\tvar changes = this._changes;\n\t\tif (changes && item) {\n\t\t\tvar changesById = this._changesById,\n\t\t\t\tid = item._id,\n\t\t\t\tentry = changesById[id];\n\t\t\tif (entry) {\n\t\t\t\tentry.flags |= flags;\n\t\t\t} else {\n\t\t\t\tchanges.push(changesById[id] = { item: item, flags: flags });\n\t\t\t}\n\t\t}\n\t},\n\n\tclear: function() {\n\t\tvar children = this._children;\n\t\tfor (var i = children.length - 1; i >= 0; i--)\n\t\t\tchildren[i].remove();\n\t},\n\n\tisEmpty: function() {\n\t\treturn !this._children.length;\n\t},\n\n\tremove: function remove() {\n\t\tif (!remove.base.call(this))\n\t\t\treturn false;\n\t\tif (this._view)\n\t\t\tthis._view.remove();\n\t\treturn true;\n\t},\n\n\tgetView: function() {\n\t\treturn this._view;\n\t},\n\n\tgetCurrentStyle: function() {\n\t\treturn this._currentStyle;\n\t},\n\n\tsetCurrentStyle: function(style) {\n\t\tthis._currentStyle.set(style);\n\t},\n\n\tgetIndex: function() {\n\t\treturn this._index;\n\t},\n\n\tgetOptions: function() {\n\t\treturn this._scope.settings;\n\t},\n\n\tgetLayers: function() {\n\t\treturn this._children;\n\t},\n\n\tgetActiveLayer: function() {\n\t\treturn this._activeLayer || new Layer({ project: this, insert: true });\n\t},\n\n\tgetSymbolDefinitions: function() {\n\t\tvar definitions = [],\n\t\t\tids = {};\n\t\tthis.getItems({\n\t\t\tclass: SymbolItem,\n\t\t\tmatch: function(item) {\n\t\t\t\tvar definition = item._definition,\n\t\t\t\t\tid = definition._id;\n\t\t\t\tif (!ids[id]) {\n\t\t\t\t\tids[id] = true;\n\t\t\t\t\tdefinitions.push(definition);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\treturn definitions;\n\t},\n\n\tgetSymbols: 'getSymbolDefinitions',\n\n\tgetSelectedItems: function() {\n\t\tvar selectionItems = this._selectionItems,\n\t\t\titems = [];\n\t\tfor (var id in selectionItems) {\n\t\t\tvar item = selectionItems[id],\n\t\t\t\tselection = item._selection;\n\t\t\tif ((selection & 1) && item.isInserted()) {\n\t\t\t\titems.push(item);\n\t\t\t} else if (!selection) {\n\t\t\t\tthis._updateSelection(item);\n\t\t\t}\n\t\t}\n\t\treturn items;\n\t},\n\n\t_updateSelection: function(item) {\n\t\tvar id = item._id,\n\t\t\tselectionItems = this._selectionItems;\n\t\tif (item._selection) {\n\t\t\tif (selectionItems[id] !== item) {\n\t\t\t\tthis._selectionCount++;\n\t\t\t\tselectionItems[id] = item;\n\t\t\t}\n\t\t} else if (selectionItems[id] === item) {\n\t\t\tthis._selectionCount--;\n\t\t\tdelete selectionItems[id];\n\t\t}\n\t},\n\n\tselectAll: function() {\n\t\tvar children = this._children;\n\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\tchildren[i].setFullySelected(true);\n\t},\n\n\tdeselectAll: function() {\n\t\tvar selectionItems = this._selectionItems;\n\t\tfor (var i in selectionItems)\n\t\t\tselectionItems[i].setFullySelected(false);\n\t},\n\n\taddLayer: function(layer) {\n\t\treturn this.insertLayer(undefined, layer);\n\t},\n\n\tinsertLayer: function(index, layer) {\n\t\tif (layer instanceof Layer) {\n\t\t\tlayer._remove(false, true);\n\t\t\tBase.splice(this._children, [layer], index, 0);\n\t\t\tlayer._setProject(this, true);\n\t\t\tvar name = layer._name;\n\t\t\tif (name)\n\t\t\t\tlayer.setName(name);\n\t\t\tif (this._changes)\n\t\t\t\tlayer._changed(5);\n\t\t\tif (!this._activeLayer)\n\t\t\t\tthis._activeLayer = layer;\n\t\t} else {\n\t\t\tlayer = null;\n\t\t}\n\t\treturn layer;\n\t},\n\n\t_insertItem: function(index, item, _created) {\n\t\titem = this.insertLayer(index, item)\n\t\t\t\t|| (this._activeLayer || this._insertItem(undefined,\n\t\t\t\t\t\tnew Layer(Item.NO_INSERT), true))\n\t\t\t\t\t\t.insertChild(index, item);\n\t\tif (_created && item.activate)\n\t\t\titem.activate();\n\t\treturn item;\n\t},\n\n\tgetItems: function(options) {\n\t\treturn Item._getItems(this, options);\n\t},\n\n\tgetItem: function(options) {\n\t\treturn Item._getItems(this, options, null, null, true)[0] || null;\n\t},\n\n\timportJSON: function(json) {\n\t\tthis.activate();\n\t\tvar layer = this._activeLayer;\n\t\treturn Base.importJSON(json, layer && layer.isEmpty() && layer);\n\t},\n\n\tremoveOn: function(type) {\n\t\tvar sets = this._removeSets;\n\t\tif (sets) {\n\t\t\tif (type === 'mouseup')\n\t\t\t\tsets.mousedrag = null;\n\t\t\tvar set = sets[type];\n\t\t\tif (set) {\n\t\t\t\tfor (var id in set) {\n\t\t\t\t\tvar item = set[id];\n\t\t\t\t\tfor (var key in sets) {\n\t\t\t\t\t\tvar other = sets[key];\n\t\t\t\t\t\tif (other && other != set)\n\t\t\t\t\t\t\tdelete other[item._id];\n\t\t\t\t\t}\n\t\t\t\t\titem.remove();\n\t\t\t\t}\n\t\t\t\tsets[type] = null;\n\t\t\t}\n\t\t}\n\t},\n\n\tdraw: function(ctx, matrix, pixelRatio) {\n\t\tthis._updateVersion++;\n\t\tctx.save();\n\t\tmatrix.applyToContext(ctx);\n\t\tvar children = this._children,\n\t\t\tparam = new Base({\n\t\t\t\toffset: new Point(0, 0),\n\t\t\t\tpixelRatio: pixelRatio,\n\t\t\t\tviewMatrix: matrix.isIdentity() ? null : matrix,\n\t\t\t\tmatrices: [new Matrix()],\n\t\t\t\tupdateMatrix: true\n\t\t\t});\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tchildren[i].draw(ctx, param);\n\t\t}\n\t\tctx.restore();\n\n\t\tif (this._selectionCount > 0) {\n\t\t\tctx.save();\n\t\t\tctx.strokeWidth = 1;\n\t\t\tvar items = this._selectionItems,\n\t\t\t\tsize = this._scope.settings.handleSize,\n\t\t\t\tversion = this._updateVersion;\n\t\t\tfor (var id in items) {\n\t\t\t\titems[id]._drawSelection(ctx, matrix, size, items, version);\n\t\t\t}\n\t\t\tctx.restore();\n\t\t}\n\t}\n});\n\nvar Item = Base.extend(Emitter, {\n\tstatics: {\n\t\textend: function extend(src) {\n\t\t\tif (src._serializeFields)\n\t\t\t\tsrc._serializeFields = Base.set({},\n\t\t\t\t\tthis.prototype._serializeFields, src._serializeFields);\n\t\t\treturn extend.base.apply(this, arguments);\n\t\t},\n\n\t\tNO_INSERT: { insert: false }\n\t},\n\n\t_class: 'Item',\n\t_name: null,\n\t_applyMatrix: true,\n\t_canApplyMatrix: true,\n\t_canScaleStroke: false,\n\t_pivot: null,\n\t_visible: true,\n\t_blendMode: 'normal',\n\t_opacity: 1,\n\t_locked: false,\n\t_guide: false,\n\t_clipMask: false,\n\t_selection: 0,\n\t_selectBounds: true,\n\t_selectChildren: false,\n\t_serializeFields: {\n\t\tname: null,\n\t\tapplyMatrix: null,\n\t\tmatrix: new Matrix(),\n\t\tpivot: null,\n\t\tvisible: true,\n\t\tblendMode: 'normal',\n\t\topacity: 1,\n\t\tlocked: false,\n\t\tguide: false,\n\t\tclipMask: false,\n\t\tselected: false,\n\t\tdata: {}\n\t},\n\t_prioritize: ['applyMatrix']\n},\nnew function() {\n\tvar handlers = ['onMouseDown', 'onMouseUp', 'onMouseDrag', 'onClick',\n\t\t\t'onDoubleClick', 'onMouseMove', 'onMouseEnter', 'onMouseLeave'];\n\treturn Base.each(handlers,\n\t\tfunction(name) {\n\t\t\tthis._events[name] = {\n\t\t\t\tinstall: function(type) {\n\t\t\t\t\tthis.getView()._countItemEvent(type, 1);\n\t\t\t\t},\n\n\t\t\t\tuninstall: function(type) {\n\t\t\t\t\tthis.getView()._countItemEvent(type, -1);\n\t\t\t\t}\n\t\t\t};\n\t\t}, {\n\t\t\t_events: {\n\t\t\t\tonFrame: {\n\t\t\t\t\tinstall: function() {\n\t\t\t\t\t\tthis.getView()._animateItem(this, true);\n\t\t\t\t\t},\n\n\t\t\t\t\tuninstall: function() {\n\t\t\t\t\t\tthis.getView()._animateItem(this, false);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tonLoad: {},\n\t\t\t\tonError: {}\n\t\t\t},\n\t\t\tstatics: {\n\t\t\t\t_itemHandlers: handlers\n\t\t\t}\n\t\t}\n\t);\n}, {\n\tinitialize: function Item() {\n\t},\n\n\t_initialize: function(props, point) {\n\t\tvar hasProps = props && Base.isPlainObject(props),\n\t\t\tinternal = hasProps && props.internal === true,\n\t\t\tmatrix = this._matrix = new Matrix(),\n\t\t\tproject = hasProps && props.project || paper.project,\n\t\t\tsettings = paper.settings;\n\t\tthis._id = internal ? null : UID.get();\n\t\tthis._parent = this._index = null;\n\t\tthis._applyMatrix = this._canApplyMatrix && settings.applyMatrix;\n\t\tif (point)\n\t\t\tmatrix.translate(point);\n\t\tmatrix._owner = this;\n\t\tthis._style = new Style(project._currentStyle, this, project);\n\t\tif (internal || hasProps && props.insert == false\n\t\t\t|| !settings.insertItems && !(hasProps && props.insert === true)) {\n\t\t\tthis._setProject(project);\n\t\t} else {\n\t\t\t(hasProps && props.parent || project)\n\t\t\t\t\t._insertItem(undefined, this, true);\n\t\t}\n\t\tif (hasProps && props !== Item.NO_INSERT) {\n\t\t\tthis.set(props, {\n\t\t\t\tinternal: true, insert: true, project: true, parent: true\n\t\t\t});\n\t\t}\n\t\treturn hasProps;\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\tvar props = {},\n\t\t\tthat = this;\n\n\t\tfunction serialize(fields) {\n\t\t\tfor (var key in fields) {\n\t\t\t\tvar value = that[key];\n\t\t\t\tif (!Base.equals(value, key === 'leading'\n\t\t\t\t\t\t? fields.fontSize * 1.2 : fields[key])) {\n\t\t\t\t\tprops[key] = Base.serialize(value, options,\n\t\t\t\t\t\t\tkey !== 'data', dictionary);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tserialize(this._serializeFields);\n\t\tif (!(this instanceof Group))\n\t\t\tserialize(this._style._defaults);\n\t\treturn [ this._class, props ];\n\t},\n\n\t_changed: function(flags) {\n\t\tvar symbol = this._symbol,\n\t\t\tcacheParent = this._parent || symbol,\n\t\t\tproject = this._project;\n\t\tif (flags & 8) {\n\t\t\tthis._bounds = this._position = this._decomposed = undefined;\n\t\t}\n\t\tif (flags & 16) {\n\t\t\tthis._globalMatrix = undefined;\n\t\t}\n\t\tif (cacheParent\n\t\t\t\t&& (flags & 72)) {\n\t\t\tItem._clearBoundsCache(cacheParent);\n\t\t}\n\t\tif (flags & 2) {\n\t\t\tItem._clearBoundsCache(this);\n\t\t}\n\t\tif (project)\n\t\t\tproject._changed(flags, this);\n\t\tif (symbol)\n\t\t\tsymbol._changed(flags);\n\t},\n\n\tgetId: function() {\n\t\treturn this._id;\n\t},\n\n\tgetName: function() {\n\t\treturn this._name;\n\t},\n\n\tsetName: function(name) {\n\n\t\tif (this._name)\n\t\t\tthis._removeNamed();\n\t\tif (name === (+name) + '')\n\t\t\tthrow new Error(\n\t\t\t\t\t'Names consisting only of numbers are not supported.');\n\t\tvar owner = this._getOwner();\n\t\tif (name && owner) {\n\t\t\tvar children = owner._children,\n\t\t\t\tnamedChildren = owner._namedChildren;\n\t\t\t(namedChildren[name] = namedChildren[name] || []).push(this);\n\t\t\tif (!(name in children))\n\t\t\t\tchildren[name] = this;\n\t\t}\n\t\tthis._name = name || undefined;\n\t\tthis._changed(256);\n\t},\n\n\tgetStyle: function() {\n\t\treturn this._style;\n\t},\n\n\tsetStyle: function(style) {\n\t\tthis.getStyle().set(style);\n\t}\n}, Base.each(['locked', 'visible', 'blendMode', 'opacity', 'guide'],\n\tfunction(name) {\n\t\tvar part = Base.capitalize(name),\n\t\t\tkey = '_' + name,\n\t\t\tflags = {\n\t\t\t\tlocked: 256,\n\t\t\t\tvisible: 265\n\t\t\t};\n\t\tthis['get' + part] = function() {\n\t\t\treturn this[key];\n\t\t};\n\t\tthis['set' + part] = function(value) {\n\t\t\tif (value != this[key]) {\n\t\t\t\tthis[key] = value;\n\t\t\t\tthis._changed(flags[name] || 257);\n\t\t\t}\n\t\t};\n\t},\n{}), {\n\tbeans: true,\n\n\tgetSelection: function() {\n\t\treturn this._selection;\n\t},\n\n\tsetSelection: function(selection) {\n\t\tif (selection !== this._selection) {\n\t\t\tthis._selection = selection;\n\t\t\tvar project = this._project;\n\t\t\tif (project) {\n\t\t\t\tproject._updateSelection(this);\n\t\t\t\tthis._changed(257);\n\t\t\t}\n\t\t}\n\t},\n\n\t_changeSelection: function(flag, selected) {\n\t\tvar selection = this._selection;\n\t\tthis.setSelection(selected ? selection | flag : selection & ~flag);\n\t},\n\n\tisSelected: function() {\n\t\tif (this._selectChildren) {\n\t\t\tvar children = this._children;\n\t\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\t\tif (children[i].isSelected())\n\t\t\t\t\treturn true;\n\t\t}\n\t\treturn !!(this._selection & 1);\n\t},\n\n\tsetSelected: function(selected) {\n\t\tif (this._selectChildren) {\n\t\t\tvar children = this._children;\n\t\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\t\tchildren[i].setSelected(selected);\n\t\t}\n\t\tthis._changeSelection(1, selected);\n\t},\n\n\tisFullySelected: function() {\n\t\tvar children = this._children,\n\t\t\tselected = !!(this._selection & 1);\n\t\tif (children && selected) {\n\t\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\t\tif (!children[i].isFullySelected())\n\t\t\t\t\treturn false;\n\t\t\treturn true;\n\t\t}\n\t\treturn selected;\n\t},\n\n\tsetFullySelected: function(selected) {\n\t\tvar children = this._children;\n\t\tif (children) {\n\t\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\t\tchildren[i].setFullySelected(selected);\n\t\t}\n\t\tthis._changeSelection(1, selected);\n\t},\n\n\tisClipMask: function() {\n\t\treturn this._clipMask;\n\t},\n\n\tsetClipMask: function(clipMask) {\n\t\tif (this._clipMask != (clipMask = !!clipMask)) {\n\t\t\tthis._clipMask = clipMask;\n\t\t\tif (clipMask) {\n\t\t\t\tthis.setFillColor(null);\n\t\t\t\tthis.setStrokeColor(null);\n\t\t\t}\n\t\t\tthis._changed(257);\n\t\t\tif (this._parent)\n\t\t\t\tthis._parent._changed(2048);\n\t\t}\n\t},\n\n\tgetData: function() {\n\t\tif (!this._data)\n\t\t\tthis._data = {};\n\t\treturn this._data;\n\t},\n\n\tsetData: function(data) {\n\t\tthis._data = data;\n\t},\n\n\tgetPosition: function(_dontLink) {\n\t\tvar ctor = _dontLink ? Point : LinkedPoint;\n\t\tvar position = this._position ||\n\t\t\t(this._position = this._getPositionFromBounds());\n\t\treturn new ctor(position.x, position.y, this, 'setPosition');\n\t},\n\n\tsetPosition: function() {\n\t\tthis.translate(Point.read(arguments).subtract(this.getPosition(true)));\n\t},\n\n\t_getPositionFromBounds: function(bounds) {\n\t\treturn this._pivot\n\t\t\t\t? this._matrix._transformPoint(this._pivot)\n\t\t\t\t: (bounds || this.getBounds()).getCenter(true);\n\t},\n\n\tgetPivot: function() {\n\t\tvar pivot = this._pivot;\n\t\treturn pivot\n\t\t\t\t? new LinkedPoint(pivot.x, pivot.y, this, 'setPivot')\n\t\t\t\t: null;\n\t},\n\n\tsetPivot: function() {\n\t\tthis._pivot = Point.read(arguments, 0, { clone: true, readNull: true });\n\t\tthis._position = undefined;\n\t}\n}, Base.each({\n\t\tgetStrokeBounds: { stroke: true },\n\t\tgetHandleBounds: { handle: true },\n\t\tgetInternalBounds: { internal: true }\n\t},\n\tfunction(options, key) {\n\t\tthis[key] = function(matrix) {\n\t\t\treturn this.getBounds(matrix, options);\n\t\t};\n\t},\n{\n\tbeans: true,\n\n\tgetBounds: function(matrix, options) {\n\t\tvar hasMatrix = options || matrix instanceof Matrix,\n\t\t\topts = Base.set({}, hasMatrix ? options : matrix,\n\t\t\t\t\tthis._boundsOptions);\n\t\tif (!opts.stroke || this.getStrokeScaling())\n\t\t\topts.cacheItem = this;\n\t\tvar rect = this._getCachedBounds(hasMatrix && matrix, opts).rect;\n\t\treturn !arguments.length\n\t\t\t\t? new LinkedRectangle(rect.x, rect.y, rect.width, rect.height,\n\t\t\t\t\tthis, 'setBounds')\n\t\t\t\t: rect;\n\t},\n\n\tsetBounds: function() {\n\t\tvar rect = Rectangle.read(arguments),\n\t\t\tbounds = this.getBounds(),\n\t\t\t_matrix = this._matrix,\n\t\t\tmatrix = new Matrix(),\n\t\t\tcenter = rect.getCenter();\n\t\tmatrix.translate(center);\n\t\tif (rect.width != bounds.width || rect.height != bounds.height) {\n\t\t\tif (!_matrix.isInvertible()) {\n\t\t\t\t_matrix.set(_matrix._backup\n\t\t\t\t\t\t|| new Matrix().translate(_matrix.getTranslation()));\n\t\t\t\tbounds = this.getBounds();\n\t\t\t}\n\t\t\tmatrix.scale(\n\t\t\t\t\tbounds.width !== 0 ? rect.width / bounds.width : 0,\n\t\t\t\t\tbounds.height !== 0 ? rect.height / bounds.height : 0);\n\t\t}\n\t\tcenter = bounds.getCenter();\n\t\tmatrix.translate(-center.x, -center.y);\n\t\tthis.transform(matrix);\n\t},\n\n\t_getBounds: function(matrix, options) {\n\t\tvar children = this._children;\n\t\tif (!children || !children.length)\n\t\t\treturn new Rectangle();\n\t\tItem._updateBoundsCache(this, options.cacheItem);\n\t\treturn Item._getBounds(children, matrix, options);\n\t},\n\n\t_getBoundsCacheKey: function(options, internal) {\n\t\treturn [\n\t\t\toptions.stroke ? 1 : 0,\n\t\t\toptions.handle ? 1 : 0,\n\t\t\tinternal ? 1 : 0\n\t\t].join('');\n\t},\n\n\t_getCachedBounds: function(matrix, options, noInternal) {\n\t\tmatrix = matrix && matrix._orNullIfIdentity();\n\t\tvar internal = options.internal && !noInternal,\n\t\t\tcacheItem = options.cacheItem,\n\t\t\t_matrix = internal ? null : this._matrix._orNullIfIdentity(),\n\t\t\tcacheKey = cacheItem && (!matrix || matrix.equals(_matrix))\n\t\t\t\t&& this._getBoundsCacheKey(options, internal),\n\t\t\tbounds = this._bounds;\n\t\tItem._updateBoundsCache(this._parent || this._symbol, cacheItem);\n\t\tif (cacheKey && bounds && cacheKey in bounds) {\n\t\t\tvar cached = bounds[cacheKey];\n\t\t\treturn {\n\t\t\t\trect: cached.rect.clone(),\n\t\t\t\tnonscaling: cached.nonscaling\n\t\t\t};\n\t\t}\n\t\tvar res = this._getBounds(matrix || _matrix, options),\n\t\t\trect = res.rect || res,\n\t\t\tstyle = this._style,\n\t\t\tnonscaling = res.nonscaling || style.hasStroke()\n\t\t\t\t&& !style.getStrokeScaling();\n\t\tif (cacheKey) {\n\t\t\tif (!bounds) {\n\t\t\t\tthis._bounds = bounds = {};\n\t\t\t}\n\t\t\tvar cached = bounds[cacheKey] = {\n\t\t\t\trect: rect.clone(),\n\t\t\t\tnonscaling: nonscaling,\n\t\t\t\tinternal: internal\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\trect: rect,\n\t\t\tnonscaling: nonscaling\n\t\t};\n\t},\n\n\t_getStrokeMatrix: function(matrix, options) {\n\t\tvar parent = this.getStrokeScaling() ? null\n\t\t\t\t: options && options.internal ? this\n\t\t\t\t\t: this._parent || this._symbol && this._symbol._item,\n\t\t\tmx = parent ? parent.getViewMatrix().invert() : matrix;\n\t\treturn mx && mx._shiftless();\n\t},\n\n\tstatics: {\n\t\t_updateBoundsCache: function(parent, item) {\n\t\t\tif (parent && item) {\n\t\t\t\tvar id = item._id,\n\t\t\t\t\tref = parent._boundsCache = parent._boundsCache || {\n\t\t\t\t\t\tids: {},\n\t\t\t\t\t\tlist: []\n\t\t\t\t\t};\n\t\t\t\tif (!ref.ids[id]) {\n\t\t\t\t\tref.list.push(item);\n\t\t\t\t\tref.ids[id] = item;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_clearBoundsCache: function(item) {\n\t\t\tvar cache = item._boundsCache;\n\t\t\tif (cache) {\n\t\t\t\titem._bounds = item._position = item._boundsCache = undefined;\n\t\t\t\tfor (var i = 0, list = cache.list, l = list.length; i < l; i++){\n\t\t\t\t\tvar other = list[i];\n\t\t\t\t\tif (other !== item) {\n\t\t\t\t\t\tother._bounds = other._position = undefined;\n\t\t\t\t\t\tif (other._boundsCache)\n\t\t\t\t\t\t\tItem._clearBoundsCache(other);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_getBounds: function(items, matrix, options) {\n\t\t\tvar x1 = Infinity,\n\t\t\t\tx2 = -x1,\n\t\t\t\ty1 = x1,\n\t\t\t\ty2 = x2,\n\t\t\t\tnonscaling = false;\n\t\t\toptions = options || {};\n\t\t\tfor (var i = 0, l = items.length; i < l; i++) {\n\t\t\t\tvar item = items[i];\n\t\t\t\tif (item._visible && !item.isEmpty(true)) {\n\t\t\t\t\tvar bounds = item._getCachedBounds(\n\t\t\t\t\t\tmatrix && matrix.appended(item._matrix), options, true),\n\t\t\t\t\t\trect = bounds.rect;\n\t\t\t\t\tx1 = Math.min(rect.x, x1);\n\t\t\t\t\ty1 = Math.min(rect.y, y1);\n\t\t\t\t\tx2 = Math.max(rect.x + rect.width, x2);\n\t\t\t\t\ty2 = Math.max(rect.y + rect.height, y2);\n\t\t\t\t\tif (bounds.nonscaling)\n\t\t\t\t\t\tnonscaling = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn {\n\t\t\t\trect: isFinite(x1)\n\t\t\t\t\t? new Rectangle(x1, y1, x2 - x1, y2 - y1)\n\t\t\t\t\t: new Rectangle(),\n\t\t\t\tnonscaling: nonscaling\n\t\t\t};\n\t\t}\n\t}\n\n}), {\n\tbeans: true,\n\n\t_decompose: function() {\n\t\treturn this._applyMatrix\n\t\t\t? null\n\t\t\t: this._decomposed || (this._decomposed = this._matrix.decompose());\n\t},\n\n\tgetRotation: function() {\n\t\tvar decomposed = this._decompose();\n\t\treturn decomposed ? decomposed.rotation : 0;\n\t},\n\n\tsetRotation: function(rotation) {\n\t\tvar current = this.getRotation();\n\t\tif (current != null && rotation != null) {\n\t\t\tvar decomposed = this._decomposed;\n\t\t\tthis.rotate(rotation - current);\n\t\t\tif (decomposed) {\n\t\t\t\tdecomposed.rotation = rotation;\n\t\t\t\tthis._decomposed = decomposed;\n\t\t\t}\n\t\t}\n\t},\n\n\tgetScaling: function() {\n\t\tvar decomposed = this._decompose(),\n\t\t\ts = decomposed && decomposed.scaling;\n\t\treturn new LinkedPoint(s ? s.x : 1, s ? s.y : 1, this, 'setScaling');\n\t},\n\n\tsetScaling: function() {\n\t\tvar current = this.getScaling(),\n\t\t\tscaling = Point.read(arguments, 0, { clone: true, readNull: true });\n\t\tif (current && scaling && !current.equals(scaling)) {\n\t\t\tvar rotation = this.getRotation(),\n\t\t\t\tdecomposed = this._decomposed,\n\t\t\t\tmatrix = new Matrix(),\n\t\t\t\tisZero = Numerical.isZero;\n\t\t\tif (isZero(current.x) || isZero(current.y)) {\n\t\t\t\tmatrix.translate(decomposed.translation);\n\t\t\t\tif (rotation) {\n\t\t\t\t\tmatrix.rotate(rotation);\n\t\t\t\t}\n\t\t\t\tmatrix.scale(scaling.x, scaling.y);\n\t\t\t\tthis._matrix.set(matrix);\n\t\t\t} else {\n\t\t\t\tvar center = this.getPosition(true);\n\t\t\t\tmatrix.translate(center);\n\t\t\t\tif (rotation)\n\t\t\t\t\tmatrix.rotate(rotation);\n\t\t\t\tmatrix.scale(scaling.x / current.x, scaling.y / current.y);\n\t\t\t\tif (rotation)\n\t\t\t\t\tmatrix.rotate(-rotation);\n\t\t\t\tmatrix.translate(center.negate());\n\t\t\t\tthis.transform(matrix);\n\t\t\t}\n\t\t\tif (decomposed) {\n\t\t\t\tdecomposed.scaling = scaling;\n\t\t\t\tthis._decomposed = decomposed;\n\t\t\t}\n\t\t}\n\t},\n\n\tgetMatrix: function() {\n\t\treturn this._matrix;\n\t},\n\n\tsetMatrix: function() {\n\t\tvar matrix = this._matrix;\n\t\tmatrix.set.apply(matrix, arguments);\n\t},\n\n\tgetGlobalMatrix: function(_dontClone) {\n\t\tvar matrix = this._globalMatrix;\n\t\tif (matrix) {\n\t\t\tvar parent = this._parent;\n\t\t\tvar parents = [];\n\t\t\twhile (parent) {\n\t\t\t\tif (!parent._globalMatrix) {\n\t\t\t\t\tmatrix = null;\n\t\t\t\t\tfor (var i = 0, l = parents.length; i < l; i++) {\n\t\t\t\t\t\tparents[i]._globalMatrix = null;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tparents.push(parent);\n\t\t\t\tparent = parent._parent;\n\t\t\t}\n\t\t}\n\t\tif (!matrix) {\n\t\t\tmatrix = this._globalMatrix = this._matrix.clone();\n\t\t\tvar parent = this._parent;\n\t\t\tif (parent)\n\t\t\t\tmatrix.prepend(parent.getGlobalMatrix(true));\n\t\t}\n\t\treturn _dontClone ? matrix : matrix.clone();\n\t},\n\n\tgetViewMatrix: function() {\n\t\treturn this.getGlobalMatrix().prepend(this.getView()._matrix);\n\t},\n\n\tgetApplyMatrix: function() {\n\t\treturn this._applyMatrix;\n\t},\n\n\tsetApplyMatrix: function(apply) {\n\t\tif (this._applyMatrix = this._canApplyMatrix && !!apply)\n\t\t\tthis.transform(null, true);\n\t},\n\n\tgetTransformContent: '#getApplyMatrix',\n\tsetTransformContent: '#setApplyMatrix',\n}, {\n\tgetProject: function() {\n\t\treturn this._project;\n\t},\n\n\t_setProject: function(project, installEvents) {\n\t\tif (this._project !== project) {\n\t\t\tif (this._project)\n\t\t\t\tthis._installEvents(false);\n\t\t\tthis._project = project;\n\t\t\tvar children = this._children;\n\t\t\tfor (var i = 0, l = children && children.length; i < l; i++)\n\t\t\t\tchildren[i]._setProject(project);\n\t\t\tinstallEvents = true;\n\t\t}\n\t\tif (installEvents)\n\t\t\tthis._installEvents(true);\n\t},\n\n\tgetView: function() {\n\t\treturn this._project._view;\n\t},\n\n\t_installEvents: function _installEvents(install) {\n\t\t_installEvents.base.call(this, install);\n\t\tvar children = this._children;\n\t\tfor (var i = 0, l = children && children.length; i < l; i++)\n\t\t\tchildren[i]._installEvents(install);\n\t},\n\n\tgetLayer: function() {\n\t\tvar parent = this;\n\t\twhile (parent = parent._parent) {\n\t\t\tif (parent instanceof Layer)\n\t\t\t\treturn parent;\n\t\t}\n\t\treturn null;\n\t},\n\n\tgetParent: function() {\n\t\treturn this._parent;\n\t},\n\n\tsetParent: function(item) {\n\t\treturn item.addChild(this);\n\t},\n\n\t_getOwner: '#getParent',\n\n\tgetChildren: function() {\n\t\treturn this._children;\n\t},\n\n\tsetChildren: function(items) {\n\t\tthis.removeChildren();\n\t\tthis.addChildren(items);\n\t},\n\n\tgetFirstChild: function() {\n\t\treturn this._children && this._children[0] || null;\n\t},\n\n\tgetLastChild: function() {\n\t\treturn this._children && this._children[this._children.length - 1]\n\t\t\t\t|| null;\n\t},\n\n\tgetNextSibling: function() {\n\t\tvar owner = this._getOwner();\n\t\treturn owner && owner._children[this._index + 1] || null;\n\t},\n\n\tgetPreviousSibling: function() {\n\t\tvar owner = this._getOwner();\n\t\treturn owner && owner._children[this._index - 1] || null;\n\t},\n\n\tgetIndex: function() {\n\t\treturn this._index;\n\t},\n\n\tequals: function(item) {\n\t\treturn item === this || item && this._class === item._class\n\t\t\t\t&& this._style.equals(item._style)\n\t\t\t\t&& this._matrix.equals(item._matrix)\n\t\t\t\t&& this._locked === item._locked\n\t\t\t\t&& this._visible === item._visible\n\t\t\t\t&& this._blendMode === item._blendMode\n\t\t\t\t&& this._opacity === item._opacity\n\t\t\t\t&& this._clipMask === item._clipMask\n\t\t\t\t&& this._guide === item._guide\n\t\t\t\t&& this._equals(item)\n\t\t\t\t|| false;\n\t},\n\n\t_equals: function(item) {\n\t\treturn Base.equals(this._children, item._children);\n\t},\n\n\tclone: function(options) {\n\t\tvar copy = new this.constructor(Item.NO_INSERT),\n\t\t\tchildren = this._children,\n\t\t\tinsert = Base.pick(options ? options.insert : undefined,\n\t\t\t\t\toptions === undefined || options === true),\n\t\t\tdeep = Base.pick(options ? options.deep : undefined, true);\n\t\tif (children)\n\t\t\tcopy.copyAttributes(this);\n\t\tif (!children || deep)\n\t\t\tcopy.copyContent(this);\n\t\tif (!children)\n\t\t\tcopy.copyAttributes(this);\n\t\tif (insert)\n\t\t\tcopy.insertAbove(this);\n\t\tvar name = this._name,\n\t\t\tparent = this._parent;\n\t\tif (name && parent) {\n\t\t\tvar children = parent._children,\n\t\t\t\torig = name,\n\t\t\t\ti = 1;\n\t\t\twhile (children[name])\n\t\t\t\tname = orig + ' ' + (i++);\n\t\t\tif (name !== orig)\n\t\t\t\tcopy.setName(name);\n\t\t}\n\t\treturn copy;\n\t},\n\n\tcopyContent: function(source) {\n\t\tvar children = source._children;\n\t\tfor (var i = 0, l = children && children.length; i < l; i++) {\n\t\t\tthis.addChild(children[i].clone(false), true);\n\t\t}\n\t},\n\n\tcopyAttributes: function(source, excludeMatrix) {\n\t\tthis.setStyle(source._style);\n\t\tvar keys = ['_locked', '_visible', '_blendMode', '_opacity',\n\t\t\t\t'_clipMask', '_guide'];\n\t\tfor (var i = 0, l = keys.length; i < l; i++) {\n\t\t\tvar key = keys[i];\n\t\t\tif (source.hasOwnProperty(key))\n\t\t\t\tthis[key] = source[key];\n\t\t}\n\t\tif (!excludeMatrix)\n\t\t\tthis._matrix.set(source._matrix, true);\n\t\tthis.setApplyMatrix(source._applyMatrix);\n\t\tthis.setPivot(source._pivot);\n\t\tthis.setSelection(source._selection);\n\t\tvar data = source._data,\n\t\t\tname = source._name;\n\t\tthis._data = data ? Base.clone(data) : null;\n\t\tif (name)\n\t\t\tthis.setName(name);\n\t},\n\n\trasterize: function(arg0, arg1) {\n\t\tvar resolution,\n\t\t\tinsert,\n\t\t\traster;\n\t\tif (Base.isPlainObject(arg0)) {\n\t\t\tresolution = arg0.resolution;\n\t\t\tinsert = arg0.insert;\n\t\t\traster = arg0.raster;\n\t\t} else {\n\t\t\tresolution = arg0;\n\t\t\tinsert = arg1;\n\t\t}\n\t\tif (raster) {\n\t\t\traster.matrix.reset(true);\n\t\t} else {\n\t\t\traster = new Raster(Item.NO_INSERT);\n\t\t}\n\t\tvar bounds = this.getStrokeBounds(),\n\t\t\tscale = (resolution || this.getView().getResolution()) / 72,\n\t\t\ttopLeft = bounds.getTopLeft().floor(),\n\t\t\tbottomRight = bounds.getBottomRight().ceil(),\n\t\t\tboundsSize = new Size(bottomRight.subtract(topLeft)),\n\t\t\trasterSize = boundsSize.multiply(scale);\n\t\traster.setSize(rasterSize, true);\n\n\t\tif (!rasterSize.isZero()) {\n\t\t\tvar ctx = raster.getContext(true),\n\t\t\t\tmatrix = new Matrix().scale(scale).translate(topLeft.negate());\n\t\t\tctx.save();\n\t\t\tmatrix.applyToContext(ctx);\n\t\t\tthis.draw(ctx, new Base({ matrices: [matrix] }));\n\t\t\tctx.restore();\n\t\t}\n\t\traster.transform(\n\t\t\tnew Matrix()\n\t\t\t\t.translate(topLeft.add(boundsSize.divide(2)))\n\t\t\t\t.scale(1 / scale)\n\t\t);\n\t\tif (insert === undefined || insert) {\n\t\t\traster.insertAbove(this);\n\t\t}\n\t\treturn raster;\n\t},\n\n\tcontains: function() {\n\t\tvar matrix = this._matrix;\n\t\treturn (\n\t\t\tmatrix.isInvertible() &&\n\t\t\t!!this._contains(matrix._inverseTransform(Point.read(arguments)))\n\t\t);\n\t},\n\n\t_contains: function(point) {\n\t\tvar children = this._children;\n\t\tif (children) {\n\t\t\tfor (var i = children.length - 1; i >= 0; i--) {\n\t\t\t\tif (children[i].contains(point))\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn point.isInside(this.getInternalBounds());\n\t},\n\n\tisInside: function() {\n\t\treturn Rectangle.read(arguments).contains(this.getBounds());\n\t},\n\n\t_asPathItem: function() {\n\t\treturn new Path.Rectangle({\n\t\t\trectangle: this.getInternalBounds(),\n\t\t\tmatrix: this._matrix,\n\t\t\tinsert: false,\n\t\t});\n\t},\n\n\tintersects: function(item, _matrix) {\n\t\tif (!(item instanceof Item))\n\t\t\treturn false;\n\t\treturn this._asPathItem().getIntersections(item._asPathItem(), null,\n\t\t\t\t_matrix, true).length > 0;\n\t}\n},\nnew function() {\n\tfunction hitTest() {\n\t\tvar args = arguments;\n\t\treturn this._hitTest(\n\t\t\t\tPoint.read(args),\n\t\t\t\tHitResult.getOptions(args));\n\t}\n\n\tfunction hitTestAll() {\n\t\tvar args = arguments,\n\t\t\tpoint = Point.read(args),\n\t\t\toptions = HitResult.getOptions(args),\n\t\t\tall = [];\n\t\tthis._hitTest(point, new Base({ all: all }, options));\n\t\treturn all;\n\t}\n\n\tfunction hitTestChildren(point, options, viewMatrix, _exclude) {\n\t\tvar children = this._children;\n\t\tif (children) {\n\t\t\tfor (var i = children.length - 1; i >= 0; i--) {\n\t\t\t\tvar child = children[i];\n\t\t\t\tvar res = child !== _exclude && child._hitTest(point, options,\n\t\t\t\t\t\tviewMatrix);\n\t\t\t\tif (res && !options.all)\n\t\t\t\t\treturn res;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tProject.inject({\n\t\thitTest: hitTest,\n\t\thitTestAll: hitTestAll,\n\t\t_hitTest: hitTestChildren\n\t});\n\n\treturn {\n\t\thitTest: hitTest,\n\t\thitTestAll: hitTestAll,\n\t\t_hitTestChildren: hitTestChildren,\n\t};\n}, {\n\n\t_hitTest: function(point, options, parentViewMatrix) {\n\t\tif (this._locked || !this._visible || this._guide && !options.guides\n\t\t\t\t|| this.isEmpty()) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar matrix = this._matrix,\n\t\t\tviewMatrix = parentViewMatrix\n\t\t\t\t\t? parentViewMatrix.appended(matrix)\n\t\t\t\t\t: this.getGlobalMatrix().prepend(this.getView()._matrix),\n\t\t\ttolerance = Math.max(options.tolerance, 1e-12),\n\t\t\ttolerancePadding = options._tolerancePadding = new Size(\n\t\t\t\t\tPath._getStrokePadding(tolerance,\n\t\t\t\t\t\tmatrix._shiftless().invert()));\n\t\tpoint = matrix._inverseTransform(point);\n\t\tif (!point || !this._children &&\n\t\t\t!this.getBounds({ internal: true, stroke: true, handle: true })\n\t\t\t\t.expand(tolerancePadding.multiply(2))._containsPoint(point)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar checkSelf = !(options.guides && !this._guide\n\t\t\t\t|| options.selected && !this.isSelected()\n\t\t\t\t|| options.type && options.type !== Base.hyphenate(this._class)\n\t\t\t\t|| options.class && !(this instanceof options.class)),\n\t\t\tmatch = options.match,\n\t\t\tthat = this,\n\t\t\tbounds,\n\t\t\tres;\n\n\t\tfunction filter(hit) {\n\t\t\tif (hit && match && !match(hit))\n\t\t\t\thit = null;\n\t\t\tif (hit && options.all)\n\t\t\t\toptions.all.push(hit);\n\t\t\treturn hit;\n\t\t}\n\n\t\tfunction checkPoint(type, part) {\n\t\t\tvar pt = part ? bounds['get' + part]() : that.getPosition();\n\t\t\tif (point.subtract(pt).divide(tolerancePadding).length <= 1) {\n\t\t\t\treturn new HitResult(type, that, {\n\t\t\t\t\tname: part ? Base.hyphenate(part) : type,\n\t\t\t\t\tpoint: pt\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tvar checkPosition = options.position,\n\t\t\tcheckCenter = options.center,\n\t\t\tcheckBounds = options.bounds;\n\t\tif (checkSelf && this._parent\n\t\t\t\t&& (checkPosition || checkCenter || checkBounds)) {\n\t\t\tif (checkCenter || checkBounds) {\n\t\t\t\tbounds = this.getInternalBounds();\n\t\t\t}\n\t\t\tres = checkPosition && checkPoint('position') ||\n\t\t\t\t\tcheckCenter && checkPoint('center', 'Center');\n\t\t\tif (!res && checkBounds) {\n\t\t\t\tvar points = [\n\t\t\t\t\t'TopLeft', 'TopRight', 'BottomLeft', 'BottomRight',\n\t\t\t\t\t'LeftCenter', 'TopCenter', 'RightCenter', 'BottomCenter'\n\t\t\t\t];\n\t\t\t\tfor (var i = 0; i < 8 && !res; i++) {\n\t\t\t\t\tres = checkPoint('bounds', points[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tres = filter(res);\n\t\t}\n\n\t\tif (!res) {\n\t\t\tres = this._hitTestChildren(point, options, viewMatrix)\n\t\t\t\t|| checkSelf\n\t\t\t\t\t&& filter(this._hitTestSelf(point, options, viewMatrix,\n\t\t\t\t\t\tthis.getStrokeScaling() ? null\n\t\t\t\t\t\t\t: viewMatrix._shiftless().invert()))\n\t\t\t\t|| null;\n\t\t}\n\t\tif (res && res.point) {\n\t\t\tres.point = matrix.transform(res.point);\n\t\t}\n\t\treturn res;\n\t},\n\n\t_hitTestSelf: function(point, options) {\n\t\tif (options.fill && this.hasFill() && this._contains(point))\n\t\t\treturn new HitResult('fill', this);\n\t},\n\n\tmatches: function(name, compare) {\n\t\tfunction matchObject(obj1, obj2) {\n\t\t\tfor (var i in obj1) {\n\t\t\t\tif (obj1.hasOwnProperty(i)) {\n\t\t\t\t\tvar val1 = obj1[i],\n\t\t\t\t\t\tval2 = obj2[i];\n\t\t\t\t\tif (Base.isPlainObject(val1) && Base.isPlainObject(val2)) {\n\t\t\t\t\t\tif (!matchObject(val1, val2))\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if (!Base.equals(val1, val2)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\tvar type = typeof name;\n\t\tif (type === 'object') {\n\t\t\tfor (var key in name) {\n\t\t\t\tif (name.hasOwnProperty(key) && !this.matches(key, name[key]))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t} else if (type === 'function') {\n\t\t\treturn name(this);\n\t\t} else if (name === 'match') {\n\t\t\treturn compare(this);\n\t\t} else {\n\t\t\tvar value = /^(empty|editable)$/.test(name)\n\t\t\t\t\t? this['is' + Base.capitalize(name)]()\n\t\t\t\t\t: name === 'type'\n\t\t\t\t\t\t? Base.hyphenate(this._class)\n\t\t\t\t\t\t: this[name];\n\t\t\tif (name === 'class') {\n\t\t\t\tif (typeof compare === 'function')\n\t\t\t\t\treturn this instanceof compare;\n\t\t\t\tvalue = this._class;\n\t\t\t}\n\t\t\tif (typeof compare === 'function') {\n\t\t\t\treturn !!compare(value);\n\t\t\t} else if (compare) {\n\t\t\t\tif (compare.test) {\n\t\t\t\t\treturn compare.test(value);\n\t\t\t\t} else if (Base.isPlainObject(compare)) {\n\t\t\t\t\treturn matchObject(compare, value);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn Base.equals(value, compare);\n\t\t}\n\t},\n\n\tgetItems: function(options) {\n\t\treturn Item._getItems(this, options, this._matrix);\n\t},\n\n\tgetItem: function(options) {\n\t\treturn Item._getItems(this, options, this._matrix, null, true)[0]\n\t\t\t\t|| null;\n\t},\n\n\tstatics: {\n\t\t_getItems: function _getItems(item, options, matrix, param, firstOnly) {\n\t\t\tif (!param) {\n\t\t\t\tvar obj = typeof options === 'object' && options,\n\t\t\t\t\toverlapping = obj && obj.overlapping,\n\t\t\t\t\tinside = obj && obj.inside,\n\t\t\t\t\tbounds = overlapping || inside,\n\t\t\t\t\trect = bounds && Rectangle.read([bounds]);\n\t\t\t\tparam = {\n\t\t\t\t\titems: [],\n\t\t\t\t\trecursive: obj && obj.recursive !== false,\n\t\t\t\t\tinside: !!inside,\n\t\t\t\t\toverlapping: !!overlapping,\n\t\t\t\t\trect: rect,\n\t\t\t\t\tpath: overlapping && new Path.Rectangle({\n\t\t\t\t\t\trectangle: rect,\n\t\t\t\t\t\tinsert: false\n\t\t\t\t\t})\n\t\t\t\t};\n\t\t\t\tif (obj) {\n\t\t\t\t\toptions = Base.filter({}, options, {\n\t\t\t\t\t\trecursive: true, inside: true, overlapping: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar children = item._children,\n\t\t\t\titems = param.items,\n\t\t\t\trect = param.rect;\n\t\t\tmatrix = rect && (matrix || new Matrix());\n\t\t\tfor (var i = 0, l = children && children.length; i < l; i++) {\n\t\t\t\tvar child = children[i],\n\t\t\t\t\tchildMatrix = matrix && matrix.appended(child._matrix),\n\t\t\t\t\tadd = true;\n\t\t\t\tif (rect) {\n\t\t\t\t\tvar bounds = child.getBounds(childMatrix);\n\t\t\t\t\tif (!rect.intersects(bounds))\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\tif (!(rect.contains(bounds)\n\t\t\t\t\t\t\t|| param.overlapping && (bounds.contains(rect)\n\t\t\t\t\t\t\t\t|| param.path.intersects(child, childMatrix))))\n\t\t\t\t\t\tadd = false;\n\t\t\t\t}\n\t\t\t\tif (add && child.matches(options)) {\n\t\t\t\t\titems.push(child);\n\t\t\t\t\tif (firstOnly)\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (param.recursive !== false) {\n\t\t\t\t\t_getItems(child, options, childMatrix, param, firstOnly);\n\t\t\t\t}\n\t\t\t\tif (firstOnly && items.length > 0)\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn items;\n\t\t}\n\t}\n}, {\n\n\timportJSON: function(json) {\n\t\tvar res = Base.importJSON(json, this);\n\t\treturn res !== this ? this.addChild(res) : res;\n\t},\n\n\taddChild: function(item) {\n\t\treturn this.insertChild(undefined, item);\n\t},\n\n\tinsertChild: function(index, item) {\n\t\tvar res = item ? this.insertChildren(index, [item]) : null;\n\t\treturn res && res[0];\n\t},\n\n\taddChildren: function(items) {\n\t\treturn this.insertChildren(this._children.length, items);\n\t},\n\n\tinsertChildren: function(index, items) {\n\t\tvar children = this._children;\n\t\tif (children && items && items.length > 0) {\n\t\t\titems = Base.slice(items);\n\t\t\tvar inserted = {};\n\t\t\tfor (var i = items.length - 1; i >= 0; i--) {\n\t\t\t\tvar item = items[i],\n\t\t\t\t\tid = item && item._id;\n\t\t\t\tif (!item || inserted[id]) {\n\t\t\t\t\titems.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\titem._remove(false, true);\n\t\t\t\t\tinserted[id] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tBase.splice(children, items, index, 0);\n\t\t\tvar project = this._project,\n\t\t\t\tnotifySelf = project._changes;\n\t\t\tfor (var i = 0, l = items.length; i < l; i++) {\n\t\t\t\tvar item = items[i],\n\t\t\t\t\tname = item._name;\n\t\t\t\titem._parent = this;\n\t\t\t\titem._setProject(project, true);\n\t\t\t\tif (name)\n\t\t\t\t\titem.setName(name);\n\t\t\t\tif (notifySelf)\n\t\t\t\t\titem._changed(5);\n\t\t\t}\n\t\t\tthis._changed(11);\n\t\t} else {\n\t\t\titems = null;\n\t\t}\n\t\treturn items;\n\t},\n\n\t_insertItem: '#insertChild',\n\n\t_insertAt: function(item, offset) {\n\t\tvar owner = item && item._getOwner(),\n\t\t\tres = item !== this && owner ? this : null;\n\t\tif (res) {\n\t\t\tres._remove(false, true);\n\t\t\towner._insertItem(item._index + offset, res);\n\t\t}\n\t\treturn res;\n\t},\n\n\tinsertAbove: function(item) {\n\t\treturn this._insertAt(item, 1);\n\t},\n\n\tinsertBelow: function(item) {\n\t\treturn this._insertAt(item, 0);\n\t},\n\n\tsendToBack: function() {\n\t\tvar owner = this._getOwner();\n\t\treturn owner ? owner._insertItem(0, this) : null;\n\t},\n\n\tbringToFront: function() {\n\t\tvar owner = this._getOwner();\n\t\treturn owner ? owner._insertItem(undefined, this) : null;\n\t},\n\n\tappendTop: '#addChild',\n\n\tappendBottom: function(item) {\n\t\treturn this.insertChild(0, item);\n\t},\n\n\tmoveAbove: '#insertAbove',\n\n\tmoveBelow: '#insertBelow',\n\n\taddTo: function(owner) {\n\t\treturn owner._insertItem(undefined, this);\n\t},\n\n\tcopyTo: function(owner) {\n\t\treturn this.clone(false).addTo(owner);\n\t},\n\n\treduce: function(options) {\n\t\tvar children = this._children;\n\t\tif (children && children.length === 1) {\n\t\t\tvar child = children[0].reduce(options);\n\t\t\tif (this._parent) {\n\t\t\t\tchild.insertAbove(this);\n\t\t\t\tthis.remove();\n\t\t\t} else {\n\t\t\t\tchild.remove();\n\t\t\t}\n\t\t\treturn child;\n\t\t}\n\t\treturn this;\n\t},\n\n\t_removeNamed: function() {\n\t\tvar owner = this._getOwner();\n\t\tif (owner) {\n\t\t\tvar children = owner._children,\n\t\t\t\tnamedChildren = owner._namedChildren,\n\t\t\t\tname = this._name,\n\t\t\t\tnamedArray = namedChildren[name],\n\t\t\t\tindex = namedArray ? namedArray.indexOf(this) : -1;\n\t\t\tif (index !== -1) {\n\t\t\t\tif (children[name] == this)\n\t\t\t\t\tdelete children[name];\n\t\t\t\tnamedArray.splice(index, 1);\n\t\t\t\tif (namedArray.length) {\n\t\t\t\t\tchildren[name] = namedArray[0];\n\t\t\t\t} else {\n\t\t\t\t\tdelete namedChildren[name];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t_remove: function(notifySelf, notifyParent) {\n\t\tvar owner = this._getOwner(),\n\t\t\tproject = this._project,\n\t\t\tindex = this._index;\n\t\tif (this._style)\n\t\t\tthis._style._dispose();\n\t\tif (owner) {\n\t\t\tif (this._name)\n\t\t\t\tthis._removeNamed();\n\t\t\tif (index != null) {\n\t\t\t\tif (project._activeLayer === this)\n\t\t\t\t\tproject._activeLayer = this.getNextSibling()\n\t\t\t\t\t\t\t|| this.getPreviousSibling();\n\t\t\t\tBase.splice(owner._children, null, index, 1);\n\t\t\t}\n\t\t\tthis._installEvents(false);\n\t\t\tif (notifySelf && project._changes)\n\t\t\t\tthis._changed(5);\n\t\t\tif (notifyParent)\n\t\t\t\towner._changed(11, this);\n\t\t\tthis._parent = null;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tremove: function() {\n\t\treturn this._remove(true, true);\n\t},\n\n\treplaceWith: function(item) {\n\t\tvar ok = item && item.insertBelow(this);\n\t\tif (ok)\n\t\t\tthis.remove();\n\t\treturn ok;\n\t},\n\n\tremoveChildren: function(start, end) {\n\t\tif (!this._children)\n\t\t\treturn null;\n\t\tstart = start || 0;\n\t\tend = Base.pick(end, this._children.length);\n\t\tvar removed = Base.splice(this._children, null, start, end - start);\n\t\tfor (var i = removed.length - 1; i >= 0; i--) {\n\t\t\tremoved[i]._remove(true, false);\n\t\t}\n\t\tif (removed.length > 0)\n\t\t\tthis._changed(11);\n\t\treturn removed;\n\t},\n\n\tclear: '#removeChildren',\n\n\treverseChildren: function() {\n\t\tif (this._children) {\n\t\t\tthis._children.reverse();\n\t\t\tfor (var i = 0, l = this._children.length; i < l; i++)\n\t\t\t\tthis._children[i]._index = i;\n\t\t\tthis._changed(11);\n\t\t}\n\t},\n\n\tisEmpty: function(recursively) {\n\t\tvar children = this._children;\n\t\tvar numChildren = children ? children.length : 0;\n\t\tif (recursively) {\n\t\t\tfor (var i = 0; i < numChildren; i++) {\n\t\t\t\tif (!children[i].isEmpty(recursively)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn !numChildren;\n\t},\n\n\tisEditable: function() {\n\t\tvar item = this;\n\t\twhile (item) {\n\t\t\tif (!item._visible || item._locked)\n\t\t\t\treturn false;\n\t\t\titem = item._parent;\n\t\t}\n\t\treturn true;\n\t},\n\n\thasFill: function() {\n\t\treturn this.getStyle().hasFill();\n\t},\n\n\thasStroke: function() {\n\t\treturn this.getStyle().hasStroke();\n\t},\n\n\thasShadow: function() {\n\t\treturn this.getStyle().hasShadow();\n\t},\n\n\t_getOrder: function(item) {\n\t\tfunction getList(item) {\n\t\t\tvar list = [];\n\t\t\tdo {\n\t\t\t\tlist.unshift(item);\n\t\t\t} while (item = item._parent);\n\t\t\treturn list;\n\t\t}\n\t\tvar list1 = getList(this),\n\t\t\tlist2 = getList(item);\n\t\tfor (var i = 0, l = Math.min(list1.length, list2.length); i < l; i++) {\n\t\t\tif (list1[i] != list2[i]) {\n\t\t\t\treturn list1[i]._index < list2[i]._index ? 1 : -1;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t},\n\n\thasChildren: function() {\n\t\treturn this._children && this._children.length > 0;\n\t},\n\n\tisInserted: function() {\n\t\treturn this._parent ? this._parent.isInserted() : false;\n\t},\n\n\tisAbove: function(item) {\n\t\treturn this._getOrder(item) === -1;\n\t},\n\n\tisBelow: function(item) {\n\t\treturn this._getOrder(item) === 1;\n\t},\n\n\tisParent: function(item) {\n\t\treturn this._parent === item;\n\t},\n\n\tisChild: function(item) {\n\t\treturn item && item._parent === this;\n\t},\n\n\tisDescendant: function(item) {\n\t\tvar parent = this;\n\t\twhile (parent = parent._parent) {\n\t\t\tif (parent === item)\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tisAncestor: function(item) {\n\t\treturn item ? item.isDescendant(this) : false;\n\t},\n\n\tisSibling: function(item) {\n\t\treturn this._parent === item._parent;\n\t},\n\n\tisGroupedWith: function(item) {\n\t\tvar parent = this._parent;\n\t\twhile (parent) {\n\t\t\tif (parent._parent\n\t\t\t\t&& /^(Group|Layer|CompoundPath)$/.test(parent._class)\n\t\t\t\t&& item.isDescendant(parent))\n\t\t\t\t\treturn true;\n\t\t\tparent = parent._parent;\n\t\t}\n\t\treturn false;\n\t},\n\n}, Base.each(['rotate', 'scale', 'shear', 'skew'], function(key) {\n\tvar rotate = key === 'rotate';\n\tthis[key] = function() {\n\t\tvar args = arguments,\n\t\t\tvalue = (rotate ? Base : Point).read(args),\n\t\t\tcenter = Point.read(args, 0, { readNull: true });\n\t\treturn this.transform(new Matrix()[key](value,\n\t\t\t\tcenter || this.getPosition(true)));\n\t};\n}, {\n\ttranslate: function() {\n\t\tvar mx = new Matrix();\n\t\treturn this.transform(mx.translate.apply(mx, arguments));\n\t},\n\n\ttransform: function(matrix, _applyRecursively, _setApplyMatrix) {\n\t\tvar _matrix = this._matrix,\n\t\t\ttransformMatrix = matrix && !matrix.isIdentity(),\n\t\t\tapplyMatrix = (\n\t\t\t\t_setApplyMatrix && this._canApplyMatrix ||\n\t\t\t\tthis._applyMatrix && (\n\t\t\t\t\ttransformMatrix || !_matrix.isIdentity() ||\n\t\t\t\t\t_applyRecursively && this._children\n\t\t\t\t)\n\t\t\t);\n\t\tif (!transformMatrix && !applyMatrix)\n\t\t\treturn this;\n\t\tif (transformMatrix) {\n\t\t\tif (!matrix.isInvertible() && _matrix.isInvertible())\n\t\t\t\t_matrix._backup = _matrix.getValues();\n\t\t\t_matrix.prepend(matrix, true);\n\t\t\tvar style = this._style,\n\t\t\t\tfillColor = style.getFillColor(true),\n\t\t\t\tstrokeColor = style.getStrokeColor(true);\n\t\t\tif (fillColor)\n\t\t\t\tfillColor.transform(matrix);\n\t\t\tif (strokeColor)\n\t\t\t\tstrokeColor.transform(matrix);\n\t\t}\n\n\t\tif (applyMatrix && (applyMatrix = this._transformContent(\n\t\t\t\t_matrix, _applyRecursively, _setApplyMatrix))) {\n\t\t\tvar pivot = this._pivot;\n\t\t\tif (pivot)\n\t\t\t\t_matrix._transformPoint(pivot, pivot, true);\n\t\t\t_matrix.reset(true);\n\t\t\tif (_setApplyMatrix && this._canApplyMatrix)\n\t\t\t\tthis._applyMatrix = true;\n\t\t}\n\t\tvar bounds = this._bounds,\n\t\t\tposition = this._position;\n\t\tif (transformMatrix || applyMatrix) {\n\t\t\tthis._changed(25);\n\t\t}\n\t\tvar decomp = transformMatrix && bounds && matrix.decompose();\n\t\tif (decomp && decomp.skewing.isZero() && decomp.rotation % 90 === 0) {\n\t\t\tfor (var key in bounds) {\n\t\t\t\tvar cache = bounds[key];\n\t\t\t\tif (cache.nonscaling) {\n\t\t\t\t\tdelete bounds[key];\n\t\t\t\t} else if (applyMatrix || !cache.internal) {\n\t\t\t\t\tvar rect = cache.rect;\n\t\t\t\t\tmatrix._transformBounds(rect, rect);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._bounds = bounds;\n\t\t\tvar cached = bounds[this._getBoundsCacheKey(\n\t\t\t\tthis._boundsOptions || {})];\n\t\t\tif (cached) {\n\t\t\t\tthis._position = this._getPositionFromBounds(cached.rect);\n\t\t\t}\n\t\t} else if (transformMatrix && position && this._pivot) {\n\t\t\tthis._position = matrix._transformPoint(position, position);\n\t\t}\n\t\treturn this;\n\t},\n\n\t_transformContent: function(matrix, applyRecursively, setApplyMatrix) {\n\t\tvar children = this._children;\n\t\tif (children) {\n\t\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\t\tchildren[i].transform(matrix, applyRecursively, setApplyMatrix);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t},\n\n\tglobalToLocal: function() {\n\t\treturn this.getGlobalMatrix(true)._inverseTransform(\n\t\t\t\tPoint.read(arguments));\n\t},\n\n\tlocalToGlobal: function() {\n\t\treturn this.getGlobalMatrix(true)._transformPoint(\n\t\t\t\tPoint.read(arguments));\n\t},\n\n\tparentToLocal: function() {\n\t\treturn this._matrix._inverseTransform(Point.read(arguments));\n\t},\n\n\tlocalToParent: function() {\n\t\treturn this._matrix._transformPoint(Point.read(arguments));\n\t},\n\n\tfitBounds: function(rectangle, fill) {\n\t\trectangle = Rectangle.read(arguments);\n\t\tvar bounds = this.getBounds(),\n\t\t\titemRatio = bounds.height / bounds.width,\n\t\t\trectRatio = rectangle.height / rectangle.width,\n\t\t\tscale = (fill ? itemRatio > rectRatio : itemRatio < rectRatio)\n\t\t\t\t\t? rectangle.width / bounds.width\n\t\t\t\t\t: rectangle.height / bounds.height,\n\t\t\tnewBounds = new Rectangle(new Point(),\n\t\t\t\t\tnew Size(bounds.width * scale, bounds.height * scale));\n\t\tnewBounds.setCenter(rectangle.getCenter());\n\t\tthis.setBounds(newBounds);\n\t}\n}), {\n\n\t_setStyles: function(ctx, param, viewMatrix) {\n\t\tvar style = this._style,\n\t\t\tmatrix = this._matrix;\n\t\tif (style.hasFill()) {\n\t\t\tctx.fillStyle = style.getFillColor().toCanvasStyle(ctx, matrix);\n\t\t}\n\t\tif (style.hasStroke()) {\n\t\t\tctx.strokeStyle = style.getStrokeColor().toCanvasStyle(ctx, matrix);\n\t\t\tctx.lineWidth = style.getStrokeWidth();\n\t\t\tvar strokeJoin = style.getStrokeJoin(),\n\t\t\t\tstrokeCap = style.getStrokeCap(),\n\t\t\t\tmiterLimit = style.getMiterLimit();\n\t\t\tif (strokeJoin)\n\t\t\t\tctx.lineJoin = strokeJoin;\n\t\t\tif (strokeCap)\n\t\t\t\tctx.lineCap = strokeCap;\n\t\t\tif (miterLimit)\n\t\t\t\tctx.miterLimit = miterLimit;\n\t\t\tif (paper.support.nativeDash) {\n\t\t\t\tvar dashArray = style.getDashArray(),\n\t\t\t\t\tdashOffset = style.getDashOffset();\n\t\t\t\tif (dashArray && dashArray.length) {\n\t\t\t\t\tif ('setLineDash' in ctx) {\n\t\t\t\t\t\tctx.setLineDash(dashArray);\n\t\t\t\t\t\tctx.lineDashOffset = dashOffset;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tctx.mozDash = dashArray;\n\t\t\t\t\t\tctx.mozDashOffset = dashOffset;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (style.hasShadow()) {\n\t\t\tvar pixelRatio = param.pixelRatio || 1,\n\t\t\t\tmx = viewMatrix._shiftless().prepend(\n\t\t\t\t\tnew Matrix().scale(pixelRatio, pixelRatio)),\n\t\t\t\tblur = mx.transform(new Point(style.getShadowBlur(), 0)),\n\t\t\t\toffset = mx.transform(this.getShadowOffset());\n\t\t\tctx.shadowColor = style.getShadowColor().toCanvasStyle(ctx);\n\t\t\tctx.shadowBlur = blur.getLength();\n\t\t\tctx.shadowOffsetX = offset.x;\n\t\t\tctx.shadowOffsetY = offset.y;\n\t\t}\n\t},\n\n\tdraw: function(ctx, param, parentStrokeMatrix) {\n\t\tvar updateVersion = this._updateVersion = this._project._updateVersion;\n\t\tif (!this._visible || this._opacity === 0)\n\t\t\treturn;\n\t\tvar matrices = param.matrices,\n\t\t\tviewMatrix = param.viewMatrix,\n\t\t\tmatrix = this._matrix,\n\t\t\tglobalMatrix = matrices[matrices.length - 1].appended(matrix);\n\t\tif (!globalMatrix.isInvertible())\n\t\t\treturn;\n\n\t\tviewMatrix = viewMatrix ? viewMatrix.appended(globalMatrix)\n\t\t\t\t: globalMatrix;\n\n\t\tmatrices.push(globalMatrix);\n\t\tif (param.updateMatrix) {\n\t\t\tthis._globalMatrix = globalMatrix;\n\t\t}\n\n\t\tvar blendMode = this._blendMode,\n\t\t\topacity = Numerical.clamp(this._opacity, 0, 1),\n\t\t\tnormalBlend = blendMode === 'normal',\n\t\t\tnativeBlend = BlendMode.nativeModes[blendMode],\n\t\t\tdirect = normalBlend && opacity === 1\n\t\t\t\t\t|| param.dontStart\n\t\t\t\t\t|| param.clip\n\t\t\t\t\t|| (nativeBlend || normalBlend && opacity < 1)\n\t\t\t\t\t\t&& this._canComposite(),\n\t\t\tpixelRatio = param.pixelRatio || 1,\n\t\t\tmainCtx, itemOffset, prevOffset;\n\t\tif (!direct) {\n\t\t\tvar bounds = this.getStrokeBounds(viewMatrix);\n\t\t\tif (!bounds.width || !bounds.height) {\n\t\t\t\tmatrices.pop();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tprevOffset = param.offset;\n\t\t\titemOffset = param.offset = bounds.getTopLeft().floor();\n\t\t\tmainCtx = ctx;\n\t\t\tctx = CanvasProvider.getContext(bounds.getSize().ceil().add(1)\n\t\t\t\t\t.multiply(pixelRatio));\n\t\t\tif (pixelRatio !== 1)\n\t\t\t\tctx.scale(pixelRatio, pixelRatio);\n\t\t}\n\t\tctx.save();\n\t\tvar strokeMatrix = parentStrokeMatrix\n\t\t\t\t? parentStrokeMatrix.appended(matrix)\n\t\t\t\t: this._canScaleStroke && !this.getStrokeScaling(true)\n\t\t\t\t\t&& viewMatrix,\n\t\t\tclip = !direct && param.clipItem,\n\t\t\ttransform = !strokeMatrix || clip;\n\t\tif (direct) {\n\t\t\tctx.globalAlpha = opacity;\n\t\t\tif (nativeBlend)\n\t\t\t\tctx.globalCompositeOperation = blendMode;\n\t\t} else if (transform) {\n\t\t\tctx.translate(-itemOffset.x, -itemOffset.y);\n\t\t}\n\t\tif (transform) {\n\t\t\t(direct ? matrix : viewMatrix).applyToContext(ctx);\n\t\t}\n\t\tif (clip) {\n\t\t\tparam.clipItem.draw(ctx, param.extend({ clip: true }));\n\t\t}\n\t\tif (strokeMatrix) {\n\t\t\tctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n\t\t\tvar offset = param.offset;\n\t\t\tif (offset)\n\t\t\t\tctx.translate(-offset.x, -offset.y);\n\t\t}\n\t\tthis._draw(ctx, param, viewMatrix, strokeMatrix);\n\t\tctx.restore();\n\t\tmatrices.pop();\n\t\tif (param.clip && !param.dontFinish) {\n\t\t\tctx.clip(this.getFillRule());\n\t\t}\n\t\tif (!direct) {\n\t\t\tBlendMode.process(blendMode, ctx, mainCtx, opacity,\n\t\t\t\t\titemOffset.subtract(prevOffset).multiply(pixelRatio));\n\t\t\tCanvasProvider.release(ctx);\n\t\t\tparam.offset = prevOffset;\n\t\t}\n\t},\n\n\t_isUpdated: function(updateVersion) {\n\t\tvar parent = this._parent;\n\t\tif (parent instanceof CompoundPath)\n\t\t\treturn parent._isUpdated(updateVersion);\n\t\tvar updated = this._updateVersion === updateVersion;\n\t\tif (!updated && parent && parent._visible\n\t\t\t\t&& parent._isUpdated(updateVersion)) {\n\t\t\tthis._updateVersion = updateVersion;\n\t\t\tupdated = true;\n\t\t}\n\t\treturn updated;\n\t},\n\n\t_drawSelection: function(ctx, matrix, size, selectionItems, updateVersion) {\n\t\tvar selection = this._selection,\n\t\t\titemSelected = selection & 1,\n\t\t\tboundsSelected = selection & 2\n\t\t\t\t\t|| itemSelected && this._selectBounds,\n\t\t\tpositionSelected = selection & 4;\n\t\tif (!this._drawSelected)\n\t\t\titemSelected = false;\n\t\tif ((itemSelected || boundsSelected || positionSelected)\n\t\t\t\t&& this._isUpdated(updateVersion)) {\n\t\t\tvar layer,\n\t\t\t\tcolor = this.getSelectedColor(true) || (layer = this.getLayer())\n\t\t\t\t\t&& layer.getSelectedColor(true),\n\t\t\t\tmx = matrix.appended(this.getGlobalMatrix(true)),\n\t\t\t\thalf = size / 2;\n\t\t\tctx.strokeStyle = ctx.fillStyle = color\n\t\t\t\t\t? color.toCanvasStyle(ctx) : '#009dec';\n\t\t\tif (itemSelected)\n\t\t\t\tthis._drawSelected(ctx, mx, selectionItems);\n\t\t\tif (positionSelected) {\n\t\t\t\tvar pos = this.getPosition(true),\n\t\t\t\t\tparent = this._parent,\n\t\t\t\t\tpoint = parent ? parent.localToGlobal(pos) : pos,\n\t\t\t\t\tx = point.x,\n\t\t\t\t\ty = point.y;\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.arc(x, y, half, 0, Math.PI * 2, true);\n\t\t\t\tctx.stroke();\n\t\t\t\tvar deltas = [[0, -1], [1, 0], [0, 1], [-1, 0]],\n\t\t\t\t\tstart = half,\n\t\t\t\t\tend = size + 1;\n\t\t\t\tfor (var i = 0; i < 4; i++) {\n\t\t\t\t\tvar delta = deltas[i],\n\t\t\t\t\t\tdx = delta[0],\n\t\t\t\t\t\tdy = delta[1];\n\t\t\t\t\tctx.moveTo(x + dx * start, y + dy * start);\n\t\t\t\t\tctx.lineTo(x + dx * end, y + dy * end);\n\t\t\t\t\tctx.stroke();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (boundsSelected) {\n\t\t\t\tvar coords = mx._transformCorners(this.getInternalBounds());\n\t\t\t\tctx.beginPath();\n\t\t\t\tfor (var i = 0; i < 8; i++) {\n\t\t\t\t\tctx[!i ? 'moveTo' : 'lineTo'](coords[i], coords[++i]);\n\t\t\t\t}\n\t\t\t\tctx.closePath();\n\t\t\t\tctx.stroke();\n\t\t\t\tfor (var i = 0; i < 8; i++) {\n\t\t\t\t\tctx.fillRect(coords[i] - half, coords[++i] - half,\n\t\t\t\t\t\t\tsize, size);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t_canComposite: function() {\n\t\treturn false;\n\t}\n}, Base.each(['down', 'drag', 'up', 'move'], function(key) {\n\tthis['removeOn' + Base.capitalize(key)] = function() {\n\t\tvar hash = {};\n\t\thash[key] = true;\n\t\treturn this.removeOn(hash);\n\t};\n}, {\n\n\tremoveOn: function(obj) {\n\t\tfor (var name in obj) {\n\t\t\tif (obj[name]) {\n\t\t\t\tvar key = 'mouse' + name,\n\t\t\t\t\tproject = this._project,\n\t\t\t\t\tsets = project._removeSets = project._removeSets || {};\n\t\t\t\tsets[key] = sets[key] || {};\n\t\t\t\tsets[key][this._id] = this;\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n}), {\n\ttween: function(from, to, options) {\n\t\tif (!options) {\n\t\t\toptions = to;\n\t\t\tto = from;\n\t\t\tfrom = null;\n\t\t\tif (!options) {\n\t\t\t\toptions = to;\n\t\t\t\tto = null;\n\t\t\t}\n\t\t}\n\t\tvar easing = options && options.easing,\n\t\t\tstart = options && options.start,\n\t\t\tduration = options != null && (\n\t\t\t\ttypeof options === 'number' ? options : options.duration\n\t\t\t),\n\t\t\ttween = new Tween(this, from, to, duration, easing, start);\n\t\tfunction onFrame(event) {\n\t\t\ttween._handleFrame(event.time * 1000);\n\t\t\tif (!tween.running) {\n\t\t\t\tthis.off('frame', onFrame);\n\t\t\t}\n\t\t}\n\t\tif (duration) {\n\t\t\tthis.on('frame', onFrame);\n\t\t}\n\t\treturn tween;\n\t},\n\n\ttweenTo: function(to, options) {\n\t\treturn this.tween(null, to, options);\n\t},\n\n\ttweenFrom: function(from, options) {\n\t\treturn this.tween(from, null, options);\n\t}\n});\n\nvar Group = Item.extend({\n\t_class: 'Group',\n\t_selectBounds: false,\n\t_selectChildren: true,\n\t_serializeFields: {\n\t\tchildren: []\n\t},\n\n\tinitialize: function Group(arg) {\n\t\tthis._children = [];\n\t\tthis._namedChildren = {};\n\t\tif (!this._initialize(arg))\n\t\t\tthis.addChildren(Array.isArray(arg) ? arg : arguments);\n\t},\n\n\t_changed: function _changed(flags) {\n\t\t_changed.base.call(this, flags);\n\t\tif (flags & 2050) {\n\t\t\tthis._clipItem = undefined;\n\t\t}\n\t},\n\n\t_getClipItem: function() {\n\t\tvar clipItem = this._clipItem;\n\t\tif (clipItem === undefined) {\n\t\t\tclipItem = null;\n\t\t\tvar children = this._children;\n\t\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\t\tif (children[i]._clipMask) {\n\t\t\t\t\tclipItem = children[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._clipItem = clipItem;\n\t\t}\n\t\treturn clipItem;\n\t},\n\n\tisClipped: function() {\n\t\treturn !!this._getClipItem();\n\t},\n\n\tsetClipped: function(clipped) {\n\t\tvar child = this.getFirstChild();\n\t\tif (child)\n\t\t\tchild.setClipMask(clipped);\n\t},\n\n\t_getBounds: function _getBounds(matrix, options) {\n\t\tvar clipItem = this._getClipItem();\n\t\treturn clipItem\n\t\t\t? clipItem._getCachedBounds(clipItem._matrix.prepended(matrix),\n\t\t\t\tBase.set({}, options, { stroke: false }))\n\t\t\t: _getBounds.base.call(this, matrix, options);\n\t},\n\n\t_hitTestChildren: function _hitTestChildren(point, options, viewMatrix) {\n\t\tvar clipItem = this._getClipItem();\n\t\treturn (!clipItem || clipItem.contains(point))\n\t\t\t\t&& _hitTestChildren.base.call(this, point, options, viewMatrix,\n\t\t\t\t\tclipItem);\n\t},\n\n\t_draw: function(ctx, param) {\n\t\tvar clip = param.clip,\n\t\t\tclipItem = !clip && this._getClipItem();\n\t\tparam = param.extend({ clipItem: clipItem, clip: false });\n\t\tif (clip) {\n\t\t\tctx.beginPath();\n\t\t\tparam.dontStart = param.dontFinish = true;\n\t\t} else if (clipItem) {\n\t\t\tclipItem.draw(ctx, param.extend({ clip: true }));\n\t\t}\n\t\tvar children = this._children;\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tvar item = children[i];\n\t\t\tif (item !== clipItem)\n\t\t\t\titem.draw(ctx, param);\n\t\t}\n\t}\n});\n\nvar Layer = Group.extend({\n\t_class: 'Layer',\n\n\tinitialize: function Layer() {\n\t\tGroup.apply(this, arguments);\n\t},\n\n\t_getOwner: function() {\n\t\treturn this._parent || this._index != null && this._project;\n\t},\n\n\tisInserted: function isInserted() {\n\t\treturn this._parent ? isInserted.base.call(this) : this._index != null;\n\t},\n\n\tactivate: function() {\n\t\tthis._project._activeLayer = this;\n\t},\n\n\t_hitTestSelf: function() {\n\t}\n});\n\nvar Shape = Item.extend({\n\t_class: 'Shape',\n\t_applyMatrix: false,\n\t_canApplyMatrix: false,\n\t_canScaleStroke: true,\n\t_serializeFields: {\n\t\ttype: null,\n\t\tsize: null,\n\t\tradius: null\n\t},\n\n\tinitialize: function Shape(props, point) {\n\t\tthis._initialize(props, point);\n\t},\n\n\t_equals: function(item) {\n\t\treturn this._type === item._type\n\t\t\t&& this._size.equals(item._size)\n\t\t\t&& Base.equals(this._radius, item._radius);\n\t},\n\n\tcopyContent: function(source) {\n\t\tthis.setType(source._type);\n\t\tthis.setSize(source._size);\n\t\tthis.setRadius(source._radius);\n\t},\n\n\tgetType: function() {\n\t\treturn this._type;\n\t},\n\n\tsetType: function(type) {\n\t\tthis._type = type;\n\t},\n\n\tgetShape: '#getType',\n\tsetShape: '#setType',\n\n\tgetSize: function() {\n\t\tvar size = this._size;\n\t\treturn new LinkedSize(size.width, size.height, this, 'setSize');\n\t},\n\n\tsetSize: function() {\n\t\tvar size = Size.read(arguments);\n\t\tif (!this._size) {\n\t\t\tthis._size = size.clone();\n\t\t} else if (!this._size.equals(size)) {\n\t\t\tvar type = this._type,\n\t\t\t\twidth = size.width,\n\t\t\t\theight = size.height;\n\t\t\tif (type === 'rectangle') {\n\t\t\t\tthis._radius.set(Size.min(this._radius, size.divide(2).abs()));\n\t\t\t} else if (type === 'circle') {\n\t\t\t\twidth = height = (width + height) / 2;\n\t\t\t\tthis._radius = width / 2;\n\t\t\t} else if (type === 'ellipse') {\n\t\t\t\tthis._radius._set(width / 2, height / 2);\n\t\t\t}\n\t\t\tthis._size._set(width, height);\n\t\t\tthis._changed(9);\n\t\t}\n\t},\n\n\tgetRadius: function() {\n\t\tvar rad = this._radius;\n\t\treturn this._type === 'circle'\n\t\t\t\t? rad\n\t\t\t\t: new LinkedSize(rad.width, rad.height, this, 'setRadius');\n\t},\n\n\tsetRadius: function(radius) {\n\t\tvar type = this._type;\n\t\tif (type === 'circle') {\n\t\t\tif (radius === this._radius)\n\t\t\t\treturn;\n\t\t\tvar size = radius * 2;\n\t\t\tthis._radius = radius;\n\t\t\tthis._size._set(size, size);\n\t\t} else {\n\t\t\tradius = Size.read(arguments);\n\t\t\tif (!this._radius) {\n\t\t\t\tthis._radius = radius.clone();\n\t\t\t} else {\n\t\t\t\tif (this._radius.equals(radius))\n\t\t\t\t\treturn;\n\t\t\t\tthis._radius.set(radius);\n\t\t\t\tif (type === 'rectangle') {\n\t\t\t\t\tvar size = Size.max(this._size, radius.multiply(2));\n\t\t\t\t\tthis._size.set(size);\n\t\t\t\t} else if (type === 'ellipse') {\n\t\t\t\t\tthis._size._set(radius.width * 2, radius.height * 2);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis._changed(9);\n\t},\n\n\tisEmpty: function() {\n\t\treturn false;\n\t},\n\n\ttoPath: function(insert) {\n\t\tvar path = new Path[Base.capitalize(this._type)]({\n\t\t\tcenter: new Point(),\n\t\t\tsize: this._size,\n\t\t\tradius: this._radius,\n\t\t\tinsert: false\n\t\t});\n\t\tpath.copyAttributes(this);\n\t\tif (paper.settings.applyMatrix)\n\t\t\tpath.setApplyMatrix(true);\n\t\tif (insert === undefined || insert)\n\t\t\tpath.insertAbove(this);\n\t\treturn path;\n\t},\n\n\ttoShape: '#clone',\n\n\t_asPathItem: function() {\n\t\treturn this.toPath(false);\n\t},\n\n\t_draw: function(ctx, param, viewMatrix, strokeMatrix) {\n\t\tvar style = this._style,\n\t\t\thasFill = style.hasFill(),\n\t\t\thasStroke = style.hasStroke(),\n\t\t\tdontPaint = param.dontFinish || param.clip,\n\t\t\tuntransformed = !strokeMatrix;\n\t\tif (hasFill || hasStroke || dontPaint) {\n\t\t\tvar type = this._type,\n\t\t\t\tradius = this._radius,\n\t\t\t\tisCircle = type === 'circle';\n\t\t\tif (!param.dontStart)\n\t\t\t\tctx.beginPath();\n\t\t\tif (untransformed && isCircle) {\n\t\t\t\tctx.arc(0, 0, radius, 0, Math.PI * 2, true);\n\t\t\t} else {\n\t\t\t\tvar rx = isCircle ? radius : radius.width,\n\t\t\t\t\try = isCircle ? radius : radius.height,\n\t\t\t\t\tsize = this._size,\n\t\t\t\t\twidth = size.width,\n\t\t\t\t\theight = size.height;\n\t\t\t\tif (untransformed && type === 'rectangle' && rx === 0 && ry === 0) {\n\t\t\t\t\tctx.rect(-width / 2, -height / 2, width, height);\n\t\t\t\t} else {\n\t\t\t\t\tvar x = width / 2,\n\t\t\t\t\t\ty = height / 2,\n\t\t\t\t\t\tkappa = 1 - 0.5522847498307936,\n\t\t\t\t\t\tcx = rx * kappa,\n\t\t\t\t\t\tcy = ry * kappa,\n\t\t\t\t\t\tc = [\n\t\t\t\t\t\t\t-x, -y + ry,\n\t\t\t\t\t\t\t-x, -y + cy,\n\t\t\t\t\t\t\t-x + cx, -y,\n\t\t\t\t\t\t\t-x + rx, -y,\n\t\t\t\t\t\t\tx - rx, -y,\n\t\t\t\t\t\t\tx - cx, -y,\n\t\t\t\t\t\t\tx, -y + cy,\n\t\t\t\t\t\t\tx, -y + ry,\n\t\t\t\t\t\t\tx, y - ry,\n\t\t\t\t\t\t\tx, y - cy,\n\t\t\t\t\t\t\tx - cx, y,\n\t\t\t\t\t\t\tx - rx, y,\n\t\t\t\t\t\t\t-x + rx, y,\n\t\t\t\t\t\t\t-x + cx, y,\n\t\t\t\t\t\t\t-x, y - cy,\n\t\t\t\t\t\t\t-x, y - ry\n\t\t\t\t\t\t];\n\t\t\t\t\tif (strokeMatrix)\n\t\t\t\t\t\tstrokeMatrix.transform(c, c, 32);\n\t\t\t\t\tctx.moveTo(c[0], c[1]);\n\t\t\t\t\tctx.bezierCurveTo(c[2], c[3], c[4], c[5], c[6], c[7]);\n\t\t\t\t\tif (x !== rx)\n\t\t\t\t\t\tctx.lineTo(c[8], c[9]);\n\t\t\t\t\tctx.bezierCurveTo(c[10], c[11], c[12], c[13], c[14], c[15]);\n\t\t\t\t\tif (y !== ry)\n\t\t\t\t\t\tctx.lineTo(c[16], c[17]);\n\t\t\t\t\tctx.bezierCurveTo(c[18], c[19], c[20], c[21], c[22], c[23]);\n\t\t\t\t\tif (x !== rx)\n\t\t\t\t\t\tctx.lineTo(c[24], c[25]);\n\t\t\t\t\tctx.bezierCurveTo(c[26], c[27], c[28], c[29], c[30], c[31]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tctx.closePath();\n\t\t}\n\t\tif (!dontPaint && (hasFill || hasStroke)) {\n\t\t\tthis._setStyles(ctx, param, viewMatrix);\n\t\t\tif (hasFill) {\n\t\t\t\tctx.fill(style.getFillRule());\n\t\t\t\tctx.shadowColor = 'rgba(0,0,0,0)';\n\t\t\t}\n\t\t\tif (hasStroke)\n\t\t\t\tctx.stroke();\n\t\t}\n\t},\n\n\t_canComposite: function() {\n\t\treturn !(this.hasFill() && this.hasStroke());\n\t},\n\n\t_getBounds: function(matrix, options) {\n\t\tvar rect = new Rectangle(this._size).setCenter(0, 0),\n\t\t\tstyle = this._style,\n\t\t\tstrokeWidth = options.stroke && style.hasStroke()\n\t\t\t\t\t&& style.getStrokeWidth();\n\t\tif (matrix)\n\t\t\trect = matrix._transformBounds(rect);\n\t\treturn strokeWidth\n\t\t\t\t? rect.expand(Path._getStrokePadding(strokeWidth,\n\t\t\t\t\tthis._getStrokeMatrix(matrix, options)))\n\t\t\t\t: rect;\n\t}\n},\nnew function() {\n\tfunction getCornerCenter(that, point, expand) {\n\t\tvar radius = that._radius;\n\t\tif (!radius.isZero()) {\n\t\t\tvar halfSize = that._size.divide(2);\n\t\t\tfor (var q = 1; q <= 4; q++) {\n\t\t\t\tvar dir = new Point(q > 1 && q < 4 ? -1 : 1, q > 2 ? -1 : 1),\n\t\t\t\t\tcorner = dir.multiply(halfSize),\n\t\t\t\t\tcenter = corner.subtract(dir.multiply(radius)),\n\t\t\t\t\trect = new Rectangle(\n\t\t\t\t\t\t\texpand ? corner.add(dir.multiply(expand)) : corner,\n\t\t\t\t\t\t\tcenter);\n\t\t\t\tif (rect.contains(point))\n\t\t\t\t\treturn { point: center, quadrant: q };\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction isOnEllipseStroke(point, radius, padding, quadrant) {\n\t\tvar vector = point.divide(radius);\n\t\treturn (!quadrant || vector.isInQuadrant(quadrant)) &&\n\t\t\t\tvector.subtract(vector.normalize()).multiply(radius)\n\t\t\t\t\t.divide(padding).length <= 1;\n\t}\n\n\treturn {\n\t\t_contains: function _contains(point) {\n\t\t\tif (this._type === 'rectangle') {\n\t\t\t\tvar center = getCornerCenter(this, point);\n\t\t\t\treturn center\n\t\t\t\t\t\t? point.subtract(center.point).divide(this._radius)\n\t\t\t\t\t\t\t.getLength() <= 1\n\t\t\t\t\t\t: _contains.base.call(this, point);\n\t\t\t} else {\n\t\t\t\treturn point.divide(this.size).getLength() <= 0.5;\n\t\t\t}\n\t\t},\n\n\t\t_hitTestSelf: function _hitTestSelf(point, options, viewMatrix,\n\t\t\t\tstrokeMatrix) {\n\t\t\tvar hit = false,\n\t\t\t\tstyle = this._style,\n\t\t\t\thitStroke = options.stroke && style.hasStroke(),\n\t\t\t\thitFill = options.fill && style.hasFill();\n\t\t\tif (hitStroke || hitFill) {\n\t\t\t\tvar type = this._type,\n\t\t\t\t\tradius = this._radius,\n\t\t\t\t\tstrokeRadius = hitStroke ? style.getStrokeWidth() / 2 : 0,\n\t\t\t\t\tstrokePadding = options._tolerancePadding.add(\n\t\t\t\t\t\tPath._getStrokePadding(strokeRadius,\n\t\t\t\t\t\t\t!style.getStrokeScaling() && strokeMatrix));\n\t\t\t\tif (type === 'rectangle') {\n\t\t\t\t\tvar padding = strokePadding.multiply(2),\n\t\t\t\t\t\tcenter = getCornerCenter(this, point, padding);\n\t\t\t\t\tif (center) {\n\t\t\t\t\t\thit = isOnEllipseStroke(point.subtract(center.point),\n\t\t\t\t\t\t\t\tradius, strokePadding, center.quadrant);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar rect = new Rectangle(this._size).setCenter(0, 0),\n\t\t\t\t\t\t\touter = rect.expand(padding),\n\t\t\t\t\t\t\tinner = rect.expand(padding.negate());\n\t\t\t\t\t\thit = outer._containsPoint(point)\n\t\t\t\t\t\t\t\t&& !inner._containsPoint(point);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\thit = isOnEllipseStroke(point, radius, strokePadding);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn hit ? new HitResult(hitStroke ? 'stroke' : 'fill', this)\n\t\t\t\t\t: _hitTestSelf.base.apply(this, arguments);\n\t\t}\n\t};\n}, {\n\nstatics: new function() {\n\tfunction createShape(type, point, size, radius, args) {\n\t\tvar item = Base.create(Shape.prototype);\n\t\titem._type = type;\n\t\titem._size = size;\n\t\titem._radius = radius;\n\t\titem._initialize(Base.getNamed(args), point);\n\t\treturn item;\n\t}\n\n\treturn {\n\t\tCircle: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tcenter = Point.readNamed(args, 'center'),\n\t\t\t\tradius = Base.readNamed(args, 'radius');\n\t\t\treturn createShape('circle', center, new Size(radius * 2), radius,\n\t\t\t\t\targs);\n\t\t},\n\n\t\tRectangle: function() {\n\t\t\tvar args = arguments,\n\t\t\t\trect = Rectangle.readNamed(args, 'rectangle'),\n\t\t\t\tradius = Size.min(Size.readNamed(args, 'radius'),\n\t\t\t\t\t\trect.getSize(true).divide(2));\n\t\t\treturn createShape('rectangle', rect.getCenter(true),\n\t\t\t\t\trect.getSize(true), radius, args);\n\t\t},\n\n\t\tEllipse: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tellipse = Shape._readEllipse(args),\n\t\t\t\tradius = ellipse.radius;\n\t\t\treturn createShape('ellipse', ellipse.center, radius.multiply(2),\n\t\t\t\t\tradius, args);\n\t\t},\n\n\t\t_readEllipse: function(args) {\n\t\t\tvar center,\n\t\t\t\tradius;\n\t\t\tif (Base.hasNamed(args, 'radius')) {\n\t\t\t\tcenter = Point.readNamed(args, 'center');\n\t\t\t\tradius = Size.readNamed(args, 'radius');\n\t\t\t} else {\n\t\t\t\tvar rect = Rectangle.readNamed(args, 'rectangle');\n\t\t\t\tcenter = rect.getCenter(true);\n\t\t\t\tradius = rect.getSize(true).divide(2);\n\t\t\t}\n\t\t\treturn { center: center, radius: radius };\n\t\t}\n\t};\n}});\n\nvar Raster = Item.extend({\n\t_class: 'Raster',\n\t_applyMatrix: false,\n\t_canApplyMatrix: false,\n\t_boundsOptions: { stroke: false, handle: false },\n\t_serializeFields: {\n\t\tcrossOrigin: null,\n\t\tsource: null\n\t},\n\t_prioritize: ['crossOrigin'],\n\t_smoothing: 'low',\n\tbeans: true,\n\n\tinitialize: function Raster(source, position) {\n\t\tif (!this._initialize(source,\n\t\t\t\tposition !== undefined && Point.read(arguments))) {\n\t\t\tvar image,\n\t\t\t\ttype = typeof source,\n\t\t\t\tobject = type === 'string'\n\t\t\t\t\t? document.getElementById(source)\n\t\t\t\t\t: type  === 'object'\n\t\t\t\t\t\t? source\n\t\t\t\t\t\t: null;\n\t\t\tif (object && object !== Item.NO_INSERT) {\n\t\t\t\tif (object.getContext || object.naturalHeight != null) {\n\t\t\t\t\timage = object;\n\t\t\t\t} else if (object) {\n\t\t\t\t\tvar size = Size.read(arguments);\n\t\t\t\t\tif (!size.isZero()) {\n\t\t\t\t\t\timage = CanvasProvider.getCanvas(size);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (image) {\n\t\t\t\tthis.setImage(image);\n\t\t\t} else {\n\t\t\t\tthis.setSource(source);\n\t\t\t}\n\t\t}\n\t\tif (!this._size) {\n\t\t\tthis._size = new Size();\n\t\t\tthis._loaded = false;\n\t\t}\n\t},\n\n\t_equals: function(item) {\n\t\treturn this.getSource() === item.getSource();\n\t},\n\n\tcopyContent: function(source) {\n\t\tvar image = source._image,\n\t\t\tcanvas = source._canvas;\n\t\tif (image) {\n\t\t\tthis._setImage(image);\n\t\t} else if (canvas) {\n\t\t\tvar copyCanvas = CanvasProvider.getCanvas(source._size);\n\t\t\tcopyCanvas.getContext('2d').drawImage(canvas, 0, 0);\n\t\t\tthis._setImage(copyCanvas);\n\t\t}\n\t\tthis._crossOrigin = source._crossOrigin;\n\t},\n\n\tgetSize: function() {\n\t\tvar size = this._size;\n\t\treturn new LinkedSize(size ? size.width : 0, size ? size.height : 0,\n\t\t\t\tthis, 'setSize');\n\t},\n\n\tsetSize: function(_size, _clear) {\n\t\tvar size = Size.read(arguments);\n\t\tif (!size.equals(this._size)) {\n\t\t\tif (size.width > 0 && size.height > 0) {\n\t\t\t\tvar element = !_clear && this.getElement();\n\t\t\t\tthis._setImage(CanvasProvider.getCanvas(size));\n\t\t\t\tif (element) {\n\t\t\t\t\tthis.getContext(true).drawImage(element, 0, 0,\n\t\t\t\t\t\t\tsize.width, size.height);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this._canvas)\n\t\t\t\t\tCanvasProvider.release(this._canvas);\n\t\t\t\tthis._size = size.clone();\n\t\t\t}\n\t\t} else if (_clear) {\n\t\t\tthis.clear();\n\t\t}\n\t},\n\n\tgetWidth: function() {\n\t\treturn this._size ? this._size.width : 0;\n\t},\n\n\tsetWidth: function(width) {\n\t\tthis.setSize(width, this.getHeight());\n\t},\n\n\tgetHeight: function() {\n\t\treturn this._size ? this._size.height : 0;\n\t},\n\n\tsetHeight: function(height) {\n\t\tthis.setSize(this.getWidth(), height);\n\t},\n\n\tgetLoaded: function() {\n\t\treturn this._loaded;\n\t},\n\n\tisEmpty: function() {\n\t\tvar size = this._size;\n\t\treturn !size || size.width === 0 && size.height === 0;\n\t},\n\n\tgetResolution: function() {\n\t\tvar matrix = this._matrix,\n\t\t\torig = new Point(0, 0).transform(matrix),\n\t\t\tu = new Point(1, 0).transform(matrix).subtract(orig),\n\t\t\tv = new Point(0, 1).transform(matrix).subtract(orig);\n\t\treturn new Size(\n\t\t\t72 / u.getLength(),\n\t\t\t72 / v.getLength()\n\t\t);\n\t},\n\n\tgetPpi: '#getResolution',\n\n\tgetImage: function() {\n\t\treturn this._image;\n\t},\n\n\tsetImage: function(image) {\n\t\tvar that = this;\n\n\t\tfunction emit(event) {\n\t\t\tvar view = that.getView(),\n\t\t\t\ttype = event && event.type || 'load';\n\t\t\tif (view && that.responds(type)) {\n\t\t\t\tpaper = view._scope;\n\t\t\t\tthat.emit(type, new Event(event));\n\t\t\t}\n\t\t}\n\n\t\tthis._setImage(image);\n\t\tif (this._loaded) {\n\t\t\tsetTimeout(emit, 0);\n\t\t} else if (image) {\n\t\t\tDomEvent.add(image, {\n\t\t\t\tload: function(event) {\n\t\t\t\t\tthat._setImage(image);\n\t\t\t\t\temit(event);\n\t\t\t\t},\n\t\t\t\terror: emit\n\t\t\t});\n\t\t}\n\t},\n\n\t_setImage: function(image) {\n\t\tif (this._canvas)\n\t\t\tCanvasProvider.release(this._canvas);\n\t\tif (image && image.getContext) {\n\t\t\tthis._image = null;\n\t\t\tthis._canvas = image;\n\t\t\tthis._loaded = true;\n\t\t} else {\n\t\t\tthis._image = image;\n\t\t\tthis._canvas = null;\n\t\t\tthis._loaded = !!(image && image.src && image.complete);\n\t\t}\n\t\tthis._size = new Size(\n\t\t\t\timage ? image.naturalWidth || image.width : 0,\n\t\t\t\timage ? image.naturalHeight || image.height : 0);\n\t\tthis._context = null;\n\t\tthis._changed(1033);\n\t},\n\n\tgetCanvas: function() {\n\t\tif (!this._canvas) {\n\t\t\tvar ctx = CanvasProvider.getContext(this._size);\n\t\t\ttry {\n\t\t\t\tif (this._image)\n\t\t\t\t\tctx.drawImage(this._image, 0, 0);\n\t\t\t\tthis._canvas = ctx.canvas;\n\t\t\t} catch (e) {\n\t\t\t\tCanvasProvider.release(ctx);\n\t\t\t}\n\t\t}\n\t\treturn this._canvas;\n\t},\n\n\tsetCanvas: '#setImage',\n\n\tgetContext: function(_change) {\n\t\tif (!this._context)\n\t\t\tthis._context = this.getCanvas().getContext('2d');\n\t\tif (_change) {\n\t\t\tthis._image = null;\n\t\t\tthis._changed(1025);\n\t\t}\n\t\treturn this._context;\n\t},\n\n\tsetContext: function(context) {\n\t\tthis._context = context;\n\t},\n\n\tgetSource: function() {\n\t\tvar image = this._image;\n\t\treturn image && image.src || this.toDataURL();\n\t},\n\n\tsetSource: function(src) {\n\t\tvar image = new self.Image(),\n\t\t\tcrossOrigin = this._crossOrigin;\n\t\tif (crossOrigin)\n\t\t\timage.crossOrigin = crossOrigin;\n\t\tif (src)\n\t\t\timage.src = src;\n\t\tthis.setImage(image);\n\t},\n\n\tgetCrossOrigin: function() {\n\t\tvar image = this._image;\n\t\treturn image && image.crossOrigin || this._crossOrigin || '';\n\t},\n\n\tsetCrossOrigin: function(crossOrigin) {\n\t\tthis._crossOrigin = crossOrigin;\n\t\tvar image = this._image;\n\t\tif (image)\n\t\t\timage.crossOrigin = crossOrigin;\n\t},\n\n\tgetSmoothing: function() {\n\t\treturn this._smoothing;\n\t},\n\n\tsetSmoothing: function(smoothing) {\n\t\tthis._smoothing = typeof smoothing === 'string'\n\t\t\t? smoothing\n\t\t\t: smoothing ? 'low' : 'off';\n\t\tthis._changed(257);\n\t},\n\n\tgetElement: function() {\n\t\treturn this._canvas || this._loaded && this._image;\n\t}\n}, {\n\tbeans: false,\n\n\tgetSubCanvas: function() {\n\t\tvar rect = Rectangle.read(arguments),\n\t\t\tctx = CanvasProvider.getContext(rect.getSize());\n\t\tctx.drawImage(this.getCanvas(), rect.x, rect.y,\n\t\t\t\trect.width, rect.height, 0, 0, rect.width, rect.height);\n\t\treturn ctx.canvas;\n\t},\n\n\tgetSubRaster: function() {\n\t\tvar rect = Rectangle.read(arguments),\n\t\t\traster = new Raster(Item.NO_INSERT);\n\t\traster._setImage(this.getSubCanvas(rect));\n\t\traster.translate(rect.getCenter().subtract(this.getSize().divide(2)));\n\t\traster._matrix.prepend(this._matrix);\n\t\traster.insertAbove(this);\n\t\treturn raster;\n\t},\n\n\ttoDataURL: function() {\n\t\tvar image = this._image,\n\t\t\tsrc = image && image.src;\n\t\tif (/^data:/.test(src))\n\t\t\treturn src;\n\t\tvar canvas = this.getCanvas();\n\t\treturn canvas ? canvas.toDataURL.apply(canvas, arguments) : null;\n\t},\n\n\tdrawImage: function(image ) {\n\t\tvar point = Point.read(arguments, 1);\n\t\tthis.getContext(true).drawImage(image, point.x, point.y);\n\t},\n\n\tgetAverageColor: function(object) {\n\t\tvar bounds, path;\n\t\tif (!object) {\n\t\t\tbounds = this.getBounds();\n\t\t} else if (object instanceof PathItem) {\n\t\t\tpath = object;\n\t\t\tbounds = object.getBounds();\n\t\t} else if (typeof object === 'object') {\n\t\t\tif ('width' in object) {\n\t\t\t\tbounds = new Rectangle(object);\n\t\t\t} else if ('x' in object) {\n\t\t\t\tbounds = new Rectangle(object.x - 0.5, object.y - 0.5, 1, 1);\n\t\t\t}\n\t\t}\n\t\tif (!bounds)\n\t\t\treturn null;\n\t\tvar sampleSize = 32,\n\t\t\twidth = Math.min(bounds.width, sampleSize),\n\t\t\theight = Math.min(bounds.height, sampleSize);\n\t\tvar ctx = Raster._sampleContext;\n\t\tif (!ctx) {\n\t\t\tctx = Raster._sampleContext = CanvasProvider.getContext(\n\t\t\t\t\tnew Size(sampleSize));\n\t\t} else {\n\t\t\tctx.clearRect(0, 0, sampleSize + 1, sampleSize + 1);\n\t\t}\n\t\tctx.save();\n\t\tvar matrix = new Matrix()\n\t\t\t\t.scale(width / bounds.width, height / bounds.height)\n\t\t\t\t.translate(-bounds.x, -bounds.y);\n\t\tmatrix.applyToContext(ctx);\n\t\tif (path)\n\t\t\tpath.draw(ctx, new Base({ clip: true, matrices: [matrix] }));\n\t\tthis._matrix.applyToContext(ctx);\n\t\tvar element = this.getElement(),\n\t\t\tsize = this._size;\n\t\tif (element)\n\t\t\tctx.drawImage(element, -size.width / 2, -size.height / 2);\n\t\tctx.restore();\n\t\tvar pixels = ctx.getImageData(0.5, 0.5, Math.ceil(width),\n\t\t\t\tMath.ceil(height)).data,\n\t\t\tchannels = [0, 0, 0],\n\t\t\ttotal = 0;\n\t\tfor (var i = 0, l = pixels.length; i < l; i += 4) {\n\t\t\tvar alpha = pixels[i + 3];\n\t\t\ttotal += alpha;\n\t\t\talpha /= 255;\n\t\t\tchannels[0] += pixels[i] * alpha;\n\t\t\tchannels[1] += pixels[i + 1] * alpha;\n\t\t\tchannels[2] += pixels[i + 2] * alpha;\n\t\t}\n\t\tfor (var i = 0; i < 3; i++)\n\t\t\tchannels[i] /= total;\n\t\treturn total ? Color.read(channels) : null;\n\t},\n\n\tgetPixel: function() {\n\t\tvar point = Point.read(arguments);\n\t\tvar data = this.getContext().getImageData(point.x, point.y, 1, 1).data;\n\t\treturn new Color('rgb', [data[0] / 255, data[1] / 255, data[2] / 255],\n\t\t\t\tdata[3] / 255);\n\t},\n\n\tsetPixel: function() {\n\t\tvar args = arguments,\n\t\t\tpoint = Point.read(args),\n\t\t\tcolor = Color.read(args),\n\t\t\tcomponents = color._convert('rgb'),\n\t\t\talpha = color._alpha,\n\t\t\tctx = this.getContext(true),\n\t\t\timageData = ctx.createImageData(1, 1),\n\t\t\tdata = imageData.data;\n\t\tdata[0] = components[0] * 255;\n\t\tdata[1] = components[1] * 255;\n\t\tdata[2] = components[2] * 255;\n\t\tdata[3] = alpha != null ? alpha * 255 : 255;\n\t\tctx.putImageData(imageData, point.x, point.y);\n\t},\n\n\tclear: function() {\n\t\tvar size = this._size;\n\t\tthis.getContext(true).clearRect(0, 0, size.width + 1, size.height + 1);\n\t},\n\n\tcreateImageData: function() {\n\t\tvar size = Size.read(arguments);\n\t\treturn this.getContext().createImageData(size.width, size.height);\n\t},\n\n\tgetImageData: function() {\n\t\tvar rect = Rectangle.read(arguments);\n\t\tif (rect.isEmpty())\n\t\t\trect = new Rectangle(this._size);\n\t\treturn this.getContext().getImageData(rect.x, rect.y,\n\t\t\t\trect.width, rect.height);\n\t},\n\n\tsetImageData: function(data ) {\n\t\tvar point = Point.read(arguments, 1);\n\t\tthis.getContext(true).putImageData(data, point.x, point.y);\n\t},\n\n\t_getBounds: function(matrix, options) {\n\t\tvar rect = new Rectangle(this._size).setCenter(0, 0);\n\t\treturn matrix ? matrix._transformBounds(rect) : rect;\n\t},\n\n\t_hitTestSelf: function(point) {\n\t\tif (this._contains(point)) {\n\t\t\tvar that = this;\n\t\t\treturn new HitResult('pixel', that, {\n\t\t\t\toffset: point.add(that._size.divide(2)).round(),\n\t\t\t\tcolor: {\n\t\t\t\t\tget: function() {\n\t\t\t\t\t\treturn that.getPixel(this.offset);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\t_draw: function(ctx, param, viewMatrix) {\n\t\tvar element = this.getElement();\n\t\tif (element && element.width > 0 && element.height > 0) {\n\t\t\tctx.globalAlpha = Numerical.clamp(this._opacity, 0, 1);\n\n\t\t\tthis._setStyles(ctx, param, viewMatrix);\n\n\t\t\tvar smoothing = this._smoothing,\n\t\t\t\tdisabled = smoothing === 'off';\n\t\t\tDomElement.setPrefixed(\n\t\t\t\tctx,\n\t\t\t\tdisabled ? 'imageSmoothingEnabled' : 'imageSmoothingQuality',\n\t\t\t\tdisabled ? false : smoothing\n\t\t\t);\n\n\t\t\tctx.drawImage(element,\n\t\t\t\t\t-this._size.width / 2, -this._size.height / 2);\n\t\t}\n\t},\n\n\t_canComposite: function() {\n\t\treturn true;\n\t}\n});\n\nvar SymbolItem = Item.extend({\n\t_class: 'SymbolItem',\n\t_applyMatrix: false,\n\t_canApplyMatrix: false,\n\t_boundsOptions: { stroke: true },\n\t_serializeFields: {\n\t\tsymbol: null\n\t},\n\n\tinitialize: function SymbolItem(arg0, arg1) {\n\t\tif (!this._initialize(arg0,\n\t\t\t\targ1 !== undefined && Point.read(arguments, 1)))\n\t\t\tthis.setDefinition(arg0 instanceof SymbolDefinition ?\n\t\t\t\t\targ0 : new SymbolDefinition(arg0));\n\t},\n\n\t_equals: function(item) {\n\t\treturn this._definition === item._definition;\n\t},\n\n\tcopyContent: function(source) {\n\t\tthis.setDefinition(source._definition);\n\t},\n\n\tgetDefinition: function() {\n\t\treturn this._definition;\n\t},\n\n\tsetDefinition: function(definition) {\n\t\tthis._definition = definition;\n\t\tthis._changed(9);\n\t},\n\n\tgetSymbol: '#getDefinition',\n\tsetSymbol: '#setDefinition',\n\n\tisEmpty: function() {\n\t\treturn this._definition._item.isEmpty();\n\t},\n\n\t_getBounds: function(matrix, options) {\n\t\tvar item = this._definition._item;\n\t\treturn item._getCachedBounds(item._matrix.prepended(matrix), options);\n\t},\n\n\t_hitTestSelf: function(point, options, viewMatrix) {\n\t\tvar opts = options.extend({ all: false });\n\t\tvar res = this._definition._item._hitTest(point, opts, viewMatrix);\n\t\tif (res)\n\t\t\tres.item = this;\n\t\treturn res;\n\t},\n\n\t_draw: function(ctx, param) {\n\t\tthis._definition._item.draw(ctx, param);\n\t}\n\n});\n\nvar SymbolDefinition = Base.extend({\n\t_class: 'SymbolDefinition',\n\n\tinitialize: function SymbolDefinition(item, dontCenter) {\n\t\tthis._id = UID.get();\n\t\tthis.project = paper.project;\n\t\tif (item)\n\t\t\tthis.setItem(item, dontCenter);\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\treturn dictionary.add(this, function() {\n\t\t\treturn Base.serialize([this._class, this._item],\n\t\t\t\t\toptions, false, dictionary);\n\t\t});\n\t},\n\n\t_changed: function(flags) {\n\t\tif (flags & 8)\n\t\t\tItem._clearBoundsCache(this);\n\t\tif (flags & 1)\n\t\t\tthis.project._changed(flags);\n\t},\n\n\tgetItem: function() {\n\t\treturn this._item;\n\t},\n\n\tsetItem: function(item, _dontCenter) {\n\t\tif (item._symbol)\n\t\t\titem = item.clone();\n\t\tif (this._item)\n\t\t\tthis._item._symbol = null;\n\t\tthis._item = item;\n\t\titem.remove();\n\t\titem.setSelected(false);\n\t\tif (!_dontCenter)\n\t\t\titem.setPosition(new Point());\n\t\titem._symbol = this;\n\t\tthis._changed(9);\n\t},\n\n\tgetDefinition: '#getItem',\n\tsetDefinition: '#setItem',\n\n\tplace: function(position) {\n\t\treturn new SymbolItem(this, position);\n\t},\n\n\tclone: function() {\n\t\treturn new SymbolDefinition(this._item.clone(false));\n\t},\n\n\tequals: function(symbol) {\n\t\treturn symbol === this\n\t\t\t\t|| symbol && this._item.equals(symbol._item)\n\t\t\t\t|| false;\n\t}\n});\n\nvar HitResult = Base.extend({\n\t_class: 'HitResult',\n\n\tinitialize: function HitResult(type, item, values) {\n\t\tthis.type = type;\n\t\tthis.item = item;\n\t\tif (values)\n\t\t\tthis.inject(values);\n\t},\n\n\tstatics: {\n\t\tgetOptions: function(args) {\n\t\t\tvar options = args && Base.read(args);\n\t\t\treturn new Base({\n\t\t\t\ttype: null,\n\t\t\t\ttolerance: paper.settings.hitTolerance,\n\t\t\t\tfill: !options,\n\t\t\t\tstroke: !options,\n\t\t\t\tsegments: !options,\n\t\t\t\thandles: false,\n\t\t\t\tends: false,\n\t\t\t\tposition: false,\n\t\t\t\tcenter: false,\n\t\t\t\tbounds: false,\n\t\t\t\tguides: false,\n\t\t\t\tselected: false\n\t\t\t}, options);\n\t\t}\n\t}\n});\n\nvar Segment = Base.extend({\n\t_class: 'Segment',\n\tbeans: true,\n\t_selection: 0,\n\n\tinitialize: function Segment(arg0, arg1, arg2, arg3, arg4, arg5) {\n\t\tvar count = arguments.length,\n\t\t\tpoint, handleIn, handleOut, selection;\n\t\tif (count > 0) {\n\t\t\tif (arg0 == null || typeof arg0 === 'object') {\n\t\t\t\tif (count === 1 && arg0 && 'point' in arg0) {\n\t\t\t\t\tpoint = arg0.point;\n\t\t\t\t\thandleIn = arg0.handleIn;\n\t\t\t\t\thandleOut = arg0.handleOut;\n\t\t\t\t\tselection = arg0.selection;\n\t\t\t\t} else {\n\t\t\t\t\tpoint = arg0;\n\t\t\t\t\thandleIn = arg1;\n\t\t\t\t\thandleOut = arg2;\n\t\t\t\t\tselection = arg3;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tpoint = [ arg0, arg1 ];\n\t\t\t\thandleIn = arg2 !== undefined ? [ arg2, arg3 ] : null;\n\t\t\t\thandleOut = arg4 !== undefined ? [ arg4, arg5 ] : null;\n\t\t\t}\n\t\t}\n\t\tnew SegmentPoint(point, this, '_point');\n\t\tnew SegmentPoint(handleIn, this, '_handleIn');\n\t\tnew SegmentPoint(handleOut, this, '_handleOut');\n\t\tif (selection)\n\t\t\tthis.setSelection(selection);\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\tvar point = this._point,\n\t\t\tselection = this._selection,\n\t\t\tobj = selection || this.hasHandles()\n\t\t\t\t\t? [point, this._handleIn, this._handleOut]\n\t\t\t\t\t: point;\n\t\tif (selection)\n\t\t\tobj.push(selection);\n\t\treturn Base.serialize(obj, options, true, dictionary);\n\t},\n\n\t_changed: function(point) {\n\t\tvar path = this._path;\n\t\tif (!path)\n\t\t\treturn;\n\t\tvar curves = path._curves,\n\t\t\tindex = this._index,\n\t\t\tcurve;\n\t\tif (curves) {\n\t\t\tif ((!point || point === this._point || point === this._handleIn)\n\t\t\t\t\t&& (curve = index > 0 ? curves[index - 1] : path._closed\n\t\t\t\t\t\t? curves[curves.length - 1] : null))\n\t\t\t\tcurve._changed();\n\t\t\tif ((!point || point === this._point || point === this._handleOut)\n\t\t\t\t\t&& (curve = curves[index]))\n\t\t\t\tcurve._changed();\n\t\t}\n\t\tpath._changed(41);\n\t},\n\n\tgetPoint: function() {\n\t\treturn this._point;\n\t},\n\n\tsetPoint: function() {\n\t\tthis._point.set(Point.read(arguments));\n\t},\n\n\tgetHandleIn: function() {\n\t\treturn this._handleIn;\n\t},\n\n\tsetHandleIn: function() {\n\t\tthis._handleIn.set(Point.read(arguments));\n\t},\n\n\tgetHandleOut: function() {\n\t\treturn this._handleOut;\n\t},\n\n\tsetHandleOut: function() {\n\t\tthis._handleOut.set(Point.read(arguments));\n\t},\n\n\thasHandles: function() {\n\t\treturn !this._handleIn.isZero() || !this._handleOut.isZero();\n\t},\n\n\tisSmooth: function() {\n\t\tvar handleIn = this._handleIn,\n\t\t\thandleOut = this._handleOut;\n\t\treturn !handleIn.isZero() && !handleOut.isZero()\n\t\t\t\t&& handleIn.isCollinear(handleOut);\n\t},\n\n\tclearHandles: function() {\n\t\tthis._handleIn._set(0, 0);\n\t\tthis._handleOut._set(0, 0);\n\t},\n\n\tgetSelection: function() {\n\t\treturn this._selection;\n\t},\n\n\tsetSelection: function(selection) {\n\t\tvar oldSelection = this._selection,\n\t\t\tpath = this._path;\n\t\tthis._selection = selection = selection || 0;\n\t\tif (path && selection !== oldSelection) {\n\t\t\tpath._updateSelection(this, oldSelection, selection);\n\t\t\tpath._changed(257);\n\t\t}\n\t},\n\n\t_changeSelection: function(flag, selected) {\n\t\tvar selection = this._selection;\n\t\tthis.setSelection(selected ? selection | flag : selection & ~flag);\n\t},\n\n\tisSelected: function() {\n\t\treturn !!(this._selection & 7);\n\t},\n\n\tsetSelected: function(selected) {\n\t\tthis._changeSelection(7, selected);\n\t},\n\n\tgetIndex: function() {\n\t\treturn this._index !== undefined ? this._index : null;\n\t},\n\n\tgetPath: function() {\n\t\treturn this._path || null;\n\t},\n\n\tgetCurve: function() {\n\t\tvar path = this._path,\n\t\t\tindex = this._index;\n\t\tif (path) {\n\t\t\tif (index > 0 && !path._closed\n\t\t\t\t\t&& index === path._segments.length - 1)\n\t\t\t\tindex--;\n\t\t\treturn path.getCurves()[index] || null;\n\t\t}\n\t\treturn null;\n\t},\n\n\tgetLocation: function() {\n\t\tvar curve = this.getCurve();\n\t\treturn curve\n\t\t\t\t? new CurveLocation(curve, this === curve._segment1 ? 0 : 1)\n\t\t\t\t: null;\n\t},\n\n\tgetNext: function() {\n\t\tvar segments = this._path && this._path._segments;\n\t\treturn segments && (segments[this._index + 1]\n\t\t\t\t|| this._path._closed && segments[0]) || null;\n\t},\n\n\tsmooth: function(options, _first, _last) {\n\t\tvar opts = options || {},\n\t\t\ttype = opts.type,\n\t\t\tfactor = opts.factor,\n\t\t\tprev = this.getPrevious(),\n\t\t\tnext = this.getNext(),\n\t\t\tp0 = (prev || this)._point,\n\t\t\tp1 = this._point,\n\t\t\tp2 = (next || this)._point,\n\t\t\td1 = p0.getDistance(p1),\n\t\t\td2 = p1.getDistance(p2);\n\t\tif (!type || type === 'catmull-rom') {\n\t\t\tvar a = factor === undefined ? 0.5 : factor,\n\t\t\t\td1_a = Math.pow(d1, a),\n\t\t\t\td1_2a = d1_a * d1_a,\n\t\t\t\td2_a = Math.pow(d2, a),\n\t\t\t\td2_2a = d2_a * d2_a;\n\t\t\tif (!_first && prev) {\n\t\t\t\tvar A = 2 * d2_2a + 3 * d2_a * d1_a + d1_2a,\n\t\t\t\t\tN = 3 * d2_a * (d2_a + d1_a);\n\t\t\t\tthis.setHandleIn(N !== 0\n\t\t\t\t\t? new Point(\n\t\t\t\t\t\t(d2_2a * p0._x + A * p1._x - d1_2a * p2._x) / N - p1._x,\n\t\t\t\t\t\t(d2_2a * p0._y + A * p1._y - d1_2a * p2._y) / N - p1._y)\n\t\t\t\t\t: new Point());\n\t\t\t}\n\t\t\tif (!_last && next) {\n\t\t\t\tvar A = 2 * d1_2a + 3 * d1_a * d2_a + d2_2a,\n\t\t\t\t\tN = 3 * d1_a * (d1_a + d2_a);\n\t\t\t\tthis.setHandleOut(N !== 0\n\t\t\t\t\t? new Point(\n\t\t\t\t\t\t(d1_2a * p2._x + A * p1._x - d2_2a * p0._x) / N - p1._x,\n\t\t\t\t\t\t(d1_2a * p2._y + A * p1._y - d2_2a * p0._y) / N - p1._y)\n\t\t\t\t\t: new Point());\n\t\t\t}\n\t\t} else if (type === 'geometric') {\n\t\t\tif (prev && next) {\n\t\t\t\tvar vector = p0.subtract(p2),\n\t\t\t\t\tt = factor === undefined ? 0.4 : factor,\n\t\t\t\t\tk = t * d1 / (d1 + d2);\n\t\t\t\tif (!_first)\n\t\t\t\t\tthis.setHandleIn(vector.multiply(k));\n\t\t\t\tif (!_last)\n\t\t\t\t\tthis.setHandleOut(vector.multiply(k - t));\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new Error('Smoothing method \\'' + type + '\\' not supported.');\n\t\t}\n\t},\n\n\tgetPrevious: function() {\n\t\tvar segments = this._path && this._path._segments;\n\t\treturn segments && (segments[this._index - 1]\n\t\t\t\t|| this._path._closed && segments[segments.length - 1]) || null;\n\t},\n\n\tisFirst: function() {\n\t\treturn !this._index;\n\t},\n\n\tisLast: function() {\n\t\tvar path = this._path;\n\t\treturn path && this._index === path._segments.length - 1 || false;\n\t},\n\n\treverse: function() {\n\t\tvar handleIn = this._handleIn,\n\t\t\thandleOut = this._handleOut,\n\t\t\ttmp = handleIn.clone();\n\t\thandleIn.set(handleOut);\n\t\thandleOut.set(tmp);\n\t},\n\n\treversed: function() {\n\t\treturn new Segment(this._point, this._handleOut, this._handleIn);\n\t},\n\n\tremove: function() {\n\t\treturn this._path ? !!this._path.removeSegment(this._index) : false;\n\t},\n\n\tclone: function() {\n\t\treturn new Segment(this._point, this._handleIn, this._handleOut);\n\t},\n\n\tequals: function(segment) {\n\t\treturn segment === this || segment && this._class === segment._class\n\t\t\t\t&& this._point.equals(segment._point)\n\t\t\t\t&& this._handleIn.equals(segment._handleIn)\n\t\t\t\t&& this._handleOut.equals(segment._handleOut)\n\t\t\t\t|| false;\n\t},\n\n\ttoString: function() {\n\t\tvar parts = [ 'point: ' + this._point ];\n\t\tif (!this._handleIn.isZero())\n\t\t\tparts.push('handleIn: ' + this._handleIn);\n\t\tif (!this._handleOut.isZero())\n\t\t\tparts.push('handleOut: ' + this._handleOut);\n\t\treturn '{ ' + parts.join(', ') + ' }';\n\t},\n\n\ttransform: function(matrix) {\n\t\tthis._transformCoordinates(matrix, new Array(6), true);\n\t\tthis._changed();\n\t},\n\n\tinterpolate: function(from, to, factor) {\n\t\tvar u = 1 - factor,\n\t\t\tv = factor,\n\t\t\tpoint1 = from._point,\n\t\t\tpoint2 = to._point,\n\t\t\thandleIn1 = from._handleIn,\n\t\t\thandleIn2 = to._handleIn,\n\t\t\thandleOut2 = to._handleOut,\n\t\t\thandleOut1 = from._handleOut;\n\t\tthis._point._set(\n\t\t\t\tu * point1._x + v * point2._x,\n\t\t\t\tu * point1._y + v * point2._y, true);\n\t\tthis._handleIn._set(\n\t\t\t\tu * handleIn1._x + v * handleIn2._x,\n\t\t\t\tu * handleIn1._y + v * handleIn2._y, true);\n\t\tthis._handleOut._set(\n\t\t\t\tu * handleOut1._x + v * handleOut2._x,\n\t\t\t\tu * handleOut1._y + v * handleOut2._y, true);\n\t\tthis._changed();\n\t},\n\n\t_transformCoordinates: function(matrix, coords, change) {\n\t\tvar point = this._point,\n\t\t\thandleIn = !change || !this._handleIn.isZero()\n\t\t\t\t\t? this._handleIn : null,\n\t\t\thandleOut = !change || !this._handleOut.isZero()\n\t\t\t\t\t? this._handleOut : null,\n\t\t\tx = point._x,\n\t\t\ty = point._y,\n\t\t\ti = 2;\n\t\tcoords[0] = x;\n\t\tcoords[1] = y;\n\t\tif (handleIn) {\n\t\t\tcoords[i++] = handleIn._x + x;\n\t\t\tcoords[i++] = handleIn._y + y;\n\t\t}\n\t\tif (handleOut) {\n\t\t\tcoords[i++] = handleOut._x + x;\n\t\t\tcoords[i++] = handleOut._y + y;\n\t\t}\n\t\tif (matrix) {\n\t\t\tmatrix._transformCoordinates(coords, coords, i / 2);\n\t\t\tx = coords[0];\n\t\t\ty = coords[1];\n\t\t\tif (change) {\n\t\t\t\tpoint._x = x;\n\t\t\t\tpoint._y = y;\n\t\t\t\ti = 2;\n\t\t\t\tif (handleIn) {\n\t\t\t\t\thandleIn._x = coords[i++] - x;\n\t\t\t\t\thandleIn._y = coords[i++] - y;\n\t\t\t\t}\n\t\t\t\tif (handleOut) {\n\t\t\t\t\thandleOut._x = coords[i++] - x;\n\t\t\t\t\thandleOut._y = coords[i++] - y;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!handleIn) {\n\t\t\t\t\tcoords[i++] = x;\n\t\t\t\t\tcoords[i++] = y;\n\t\t\t\t}\n\t\t\t\tif (!handleOut) {\n\t\t\t\t\tcoords[i++] = x;\n\t\t\t\t\tcoords[i++] = y;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn coords;\n\t}\n});\n\nvar SegmentPoint = Point.extend({\n\tinitialize: function SegmentPoint(point, owner, key) {\n\t\tvar x, y,\n\t\t\tselected;\n\t\tif (!point) {\n\t\t\tx = y = 0;\n\t\t} else if ((x = point[0]) !== undefined) {\n\t\t\ty = point[1];\n\t\t} else {\n\t\t\tvar pt = point;\n\t\t\tif ((x = pt.x) === undefined) {\n\t\t\t\tpt = Point.read(arguments);\n\t\t\t\tx = pt.x;\n\t\t\t}\n\t\t\ty = pt.y;\n\t\t\tselected = pt.selected;\n\t\t}\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._owner = owner;\n\t\towner[key] = this;\n\t\tif (selected)\n\t\t\tthis.setSelected(true);\n\t},\n\n\t_set: function(x, y) {\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._owner._changed(this);\n\t\treturn this;\n\t},\n\n\tgetX: function() {\n\t\treturn this._x;\n\t},\n\n\tsetX: function(x) {\n\t\tthis._x = x;\n\t\tthis._owner._changed(this);\n\t},\n\n\tgetY: function() {\n\t\treturn this._y;\n\t},\n\n\tsetY: function(y) {\n\t\tthis._y = y;\n\t\tthis._owner._changed(this);\n\t},\n\n\tisZero: function() {\n\t\tvar isZero = Numerical.isZero;\n\t\treturn isZero(this._x) && isZero(this._y);\n\t},\n\n\tisSelected: function() {\n\t\treturn !!(this._owner._selection & this._getSelection());\n\t},\n\n\tsetSelected: function(selected) {\n\t\tthis._owner._changeSelection(this._getSelection(), selected);\n\t},\n\n\t_getSelection: function() {\n\t\tvar owner = this._owner;\n\t\treturn this === owner._point ? 1\n\t\t\t: this === owner._handleIn ? 2\n\t\t\t: this === owner._handleOut ? 4\n\t\t\t: 0;\n\t}\n});\n\nvar Curve = Base.extend({\n\t_class: 'Curve',\n\tbeans: true,\n\n\tinitialize: function Curve(arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7) {\n\t\tvar count = arguments.length,\n\t\t\tseg1, seg2,\n\t\t\tpoint1, point2,\n\t\t\thandle1, handle2;\n\t\tif (count === 3) {\n\t\t\tthis._path = arg0;\n\t\t\tseg1 = arg1;\n\t\t\tseg2 = arg2;\n\t\t} else if (!count) {\n\t\t\tseg1 = new Segment();\n\t\t\tseg2 = new Segment();\n\t\t} else if (count === 1) {\n\t\t\tif ('segment1' in arg0) {\n\t\t\t\tseg1 = new Segment(arg0.segment1);\n\t\t\t\tseg2 = new Segment(arg0.segment2);\n\t\t\t} else if ('point1' in arg0) {\n\t\t\t\tpoint1 = arg0.point1;\n\t\t\t\thandle1 = arg0.handle1;\n\t\t\t\thandle2 = arg0.handle2;\n\t\t\t\tpoint2 = arg0.point2;\n\t\t\t} else if (Array.isArray(arg0)) {\n\t\t\t\tpoint1 = [arg0[0], arg0[1]];\n\t\t\t\tpoint2 = [arg0[6], arg0[7]];\n\t\t\t\thandle1 = [arg0[2] - arg0[0], arg0[3] - arg0[1]];\n\t\t\t\thandle2 = [arg0[4] - arg0[6], arg0[5] - arg0[7]];\n\t\t\t}\n\t\t} else if (count === 2) {\n\t\t\tseg1 = new Segment(arg0);\n\t\t\tseg2 = new Segment(arg1);\n\t\t} else if (count === 4) {\n\t\t\tpoint1 = arg0;\n\t\t\thandle1 = arg1;\n\t\t\thandle2 = arg2;\n\t\t\tpoint2 = arg3;\n\t\t} else if (count === 8) {\n\t\t\tpoint1 = [arg0, arg1];\n\t\t\tpoint2 = [arg6, arg7];\n\t\t\thandle1 = [arg2 - arg0, arg3 - arg1];\n\t\t\thandle2 = [arg4 - arg6, arg5 - arg7];\n\t\t}\n\t\tthis._segment1 = seg1 || new Segment(point1, null, handle1);\n\t\tthis._segment2 = seg2 || new Segment(point2, handle2, null);\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\treturn Base.serialize(this.hasHandles()\n\t\t\t\t? [this.getPoint1(), this.getHandle1(), this.getHandle2(),\n\t\t\t\t\tthis.getPoint2()]\n\t\t\t\t: [this.getPoint1(), this.getPoint2()],\n\t\t\t\toptions, true, dictionary);\n\t},\n\n\t_changed: function() {\n\t\tthis._length = this._bounds = undefined;\n\t},\n\n\tclone: function() {\n\t\treturn new Curve(this._segment1, this._segment2);\n\t},\n\n\ttoString: function() {\n\t\tvar parts = [ 'point1: ' + this._segment1._point ];\n\t\tif (!this._segment1._handleOut.isZero())\n\t\t\tparts.push('handle1: ' + this._segment1._handleOut);\n\t\tif (!this._segment2._handleIn.isZero())\n\t\t\tparts.push('handle2: ' + this._segment2._handleIn);\n\t\tparts.push('point2: ' + this._segment2._point);\n\t\treturn '{ ' + parts.join(', ') + ' }';\n\t},\n\n\tclassify: function() {\n\t\treturn Curve.classify(this.getValues());\n\t},\n\n\tremove: function() {\n\t\tvar removed = false;\n\t\tif (this._path) {\n\t\t\tvar segment2 = this._segment2,\n\t\t\t\thandleOut = segment2._handleOut;\n\t\t\tremoved = segment2.remove();\n\t\t\tif (removed)\n\t\t\t\tthis._segment1._handleOut.set(handleOut);\n\t\t}\n\t\treturn removed;\n\t},\n\n\tgetPoint1: function() {\n\t\treturn this._segment1._point;\n\t},\n\n\tsetPoint1: function() {\n\t\tthis._segment1._point.set(Point.read(arguments));\n\t},\n\n\tgetPoint2: function() {\n\t\treturn this._segment2._point;\n\t},\n\n\tsetPoint2: function() {\n\t\tthis._segment2._point.set(Point.read(arguments));\n\t},\n\n\tgetHandle1: function() {\n\t\treturn this._segment1._handleOut;\n\t},\n\n\tsetHandle1: function() {\n\t\tthis._segment1._handleOut.set(Point.read(arguments));\n\t},\n\n\tgetHandle2: function() {\n\t\treturn this._segment2._handleIn;\n\t},\n\n\tsetHandle2: function() {\n\t\tthis._segment2._handleIn.set(Point.read(arguments));\n\t},\n\n\tgetSegment1: function() {\n\t\treturn this._segment1;\n\t},\n\n\tgetSegment2: function() {\n\t\treturn this._segment2;\n\t},\n\n\tgetPath: function() {\n\t\treturn this._path;\n\t},\n\n\tgetIndex: function() {\n\t\treturn this._segment1._index;\n\t},\n\n\tgetNext: function() {\n\t\tvar curves = this._path && this._path._curves;\n\t\treturn curves && (curves[this._segment1._index + 1]\n\t\t\t\t|| this._path._closed && curves[0]) || null;\n\t},\n\n\tgetPrevious: function() {\n\t\tvar curves = this._path && this._path._curves;\n\t\treturn curves && (curves[this._segment1._index - 1]\n\t\t\t\t|| this._path._closed && curves[curves.length - 1]) || null;\n\t},\n\n\tisFirst: function() {\n\t\treturn !this._segment1._index;\n\t},\n\n\tisLast: function() {\n\t\tvar path = this._path;\n\t\treturn path && this._segment1._index === path._curves.length - 1\n\t\t\t\t|| false;\n\t},\n\n\tisSelected: function() {\n\t\treturn this.getPoint1().isSelected()\n\t\t\t\t&& this.getHandle1().isSelected()\n\t\t\t\t&& this.getHandle2().isSelected()\n\t\t\t\t&& this.getPoint2().isSelected();\n\t},\n\n\tsetSelected: function(selected) {\n\t\tthis.getPoint1().setSelected(selected);\n\t\tthis.getHandle1().setSelected(selected);\n\t\tthis.getHandle2().setSelected(selected);\n\t\tthis.getPoint2().setSelected(selected);\n\t},\n\n\tgetValues: function(matrix) {\n\t\treturn Curve.getValues(this._segment1, this._segment2, matrix);\n\t},\n\n\tgetPoints: function() {\n\t\tvar coords = this.getValues(),\n\t\t\tpoints = [];\n\t\tfor (var i = 0; i < 8; i += 2)\n\t\t\tpoints.push(new Point(coords[i], coords[i + 1]));\n\t\treturn points;\n\t}\n}, {\n\tgetLength: function() {\n\t\tif (this._length == null)\n\t\t\tthis._length = Curve.getLength(this.getValues(), 0, 1);\n\t\treturn this._length;\n\t},\n\n\tgetArea: function() {\n\t\treturn Curve.getArea(this.getValues());\n\t},\n\n\tgetLine: function() {\n\t\treturn new Line(this._segment1._point, this._segment2._point);\n\t},\n\n\tgetPart: function(from, to) {\n\t\treturn new Curve(Curve.getPart(this.getValues(), from, to));\n\t},\n\n\tgetPartLength: function(from, to) {\n\t\treturn Curve.getLength(this.getValues(), from, to);\n\t},\n\n\tdivideAt: function(location) {\n\t\treturn this.divideAtTime(location && location.curve === this\n\t\t\t\t? location.time : this.getTimeAt(location));\n\t},\n\n\tdivideAtTime: function(time, _setHandles) {\n\t\tvar tMin = 1e-8,\n\t\t\ttMax = 1 - tMin,\n\t\t\tres = null;\n\t\tif (time >= tMin && time <= tMax) {\n\t\t\tvar parts = Curve.subdivide(this.getValues(), time),\n\t\t\t\tleft = parts[0],\n\t\t\t\tright = parts[1],\n\t\t\t\tsetHandles = _setHandles || this.hasHandles(),\n\t\t\t\tseg1 = this._segment1,\n\t\t\t\tseg2 = this._segment2,\n\t\t\t\tpath = this._path;\n\t\t\tif (setHandles) {\n\t\t\t\tseg1._handleOut._set(left[2] - left[0], left[3] - left[1]);\n\t\t\t\tseg2._handleIn._set(right[4] - right[6],right[5] - right[7]);\n\t\t\t}\n\t\t\tvar x = left[6], y = left[7],\n\t\t\t\tsegment = new Segment(new Point(x, y),\n\t\t\t\t\t\tsetHandles && new Point(left[4] - x, left[5] - y),\n\t\t\t\t\t\tsetHandles && new Point(right[2] - x, right[3] - y));\n\t\t\tif (path) {\n\t\t\t\tpath.insert(seg1._index + 1, segment);\n\t\t\t\tres = this.getNext();\n\t\t\t} else {\n\t\t\t\tthis._segment2 = segment;\n\t\t\t\tthis._changed();\n\t\t\t\tres = new Curve(segment, seg2);\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t},\n\n\tsplitAt: function(location) {\n\t\tvar path = this._path;\n\t\treturn path ? path.splitAt(location) : null;\n\t},\n\n\tsplitAtTime: function(time) {\n\t\treturn this.splitAt(this.getLocationAtTime(time));\n\t},\n\n\tdivide: function(offset, isTime) {\n\t\treturn this.divideAtTime(offset === undefined ? 0.5 : isTime ? offset\n\t\t\t\t: this.getTimeAt(offset));\n\t},\n\n\tsplit: function(offset, isTime) {\n\t\treturn this.splitAtTime(offset === undefined ? 0.5 : isTime ? offset\n\t\t\t\t: this.getTimeAt(offset));\n\t},\n\n\treversed: function() {\n\t\treturn new Curve(this._segment2.reversed(), this._segment1.reversed());\n\t},\n\n\tclearHandles: function() {\n\t\tthis._segment1._handleOut._set(0, 0);\n\t\tthis._segment2._handleIn._set(0, 0);\n\t},\n\nstatics: {\n\tgetValues: function(segment1, segment2, matrix, straight) {\n\t\tvar p1 = segment1._point,\n\t\t\th1 = segment1._handleOut,\n\t\t\th2 = segment2._handleIn,\n\t\t\tp2 = segment2._point,\n\t\t\tx1 = p1.x, y1 = p1.y,\n\t\t\tx2 = p2.x, y2 = p2.y,\n\t\t\tvalues = straight\n\t\t\t\t? [ x1, y1, x1, y1, x2, y2, x2, y2 ]\n\t\t\t\t: [\n\t\t\t\t\tx1, y1,\n\t\t\t\t\tx1 + h1._x, y1 + h1._y,\n\t\t\t\t\tx2 + h2._x, y2 + h2._y,\n\t\t\t\t\tx2, y2\n\t\t\t\t];\n\t\tif (matrix)\n\t\t\tmatrix._transformCoordinates(values, values, 4);\n\t\treturn values;\n\t},\n\n\tsubdivide: function(v, t) {\n\t\tvar x0 = v[0], y0 = v[1],\n\t\t\tx1 = v[2], y1 = v[3],\n\t\t\tx2 = v[4], y2 = v[5],\n\t\t\tx3 = v[6], y3 = v[7];\n\t\tif (t === undefined)\n\t\t\tt = 0.5;\n\t\tvar u = 1 - t,\n\t\t\tx4 = u * x0 + t * x1, y4 = u * y0 + t * y1,\n\t\t\tx5 = u * x1 + t * x2, y5 = u * y1 + t * y2,\n\t\t\tx6 = u * x2 + t * x3, y6 = u * y2 + t * y3,\n\t\t\tx7 = u * x4 + t * x5, y7 = u * y4 + t * y5,\n\t\t\tx8 = u * x5 + t * x6, y8 = u * y5 + t * y6,\n\t\t\tx9 = u * x7 + t * x8, y9 = u * y7 + t * y8;\n\t\treturn [\n\t\t\t[x0, y0, x4, y4, x7, y7, x9, y9],\n\t\t\t[x9, y9, x8, y8, x6, y6, x3, y3]\n\t\t];\n\t},\n\n\tgetMonoCurves: function(v, dir) {\n\t\tvar curves = [],\n\t\t\tio = dir ? 0 : 1,\n\t\t\to0 = v[io + 0],\n\t\t\to1 = v[io + 2],\n\t\t\to2 = v[io + 4],\n\t\t\to3 = v[io + 6];\n\t\tif ((o0 >= o1) === (o1 >= o2) && (o1 >= o2) === (o2 >= o3)\n\t\t\t\t|| Curve.isStraight(v)) {\n\t\t\tcurves.push(v);\n\t\t} else {\n\t\t\tvar a = 3 * (o1 - o2) - o0 + o3,\n\t\t\t\tb = 2 * (o0 + o2) - 4 * o1,\n\t\t\t\tc = o1 - o0,\n\t\t\t\ttMin = 1e-8,\n\t\t\t\ttMax = 1 - tMin,\n\t\t\t\troots = [],\n\t\t\t\tn = Numerical.solveQuadratic(a, b, c, roots, tMin, tMax);\n\t\t\tif (!n) {\n\t\t\t\tcurves.push(v);\n\t\t\t} else {\n\t\t\t\troots.sort();\n\t\t\t\tvar t = roots[0],\n\t\t\t\t\tparts = Curve.subdivide(v, t);\n\t\t\t\tcurves.push(parts[0]);\n\t\t\t\tif (n > 1) {\n\t\t\t\t\tt = (roots[1] - t) / (1 - t);\n\t\t\t\t\tparts = Curve.subdivide(parts[1], t);\n\t\t\t\t\tcurves.push(parts[0]);\n\t\t\t\t}\n\t\t\t\tcurves.push(parts[1]);\n\t\t\t}\n\t\t}\n\t\treturn curves;\n\t},\n\n\tsolveCubic: function (v, coord, val, roots, min, max) {\n\t\tvar v0 = v[coord],\n\t\t\tv1 = v[coord + 2],\n\t\t\tv2 = v[coord + 4],\n\t\t\tv3 = v[coord + 6],\n\t\t\tres = 0;\n\t\tif (  !(v0 < val && v3 < val && v1 < val && v2 < val ||\n\t\t\t\tv0 > val && v3 > val && v1 > val && v2 > val)) {\n\t\t\tvar c = 3 * (v1 - v0),\n\t\t\t\tb = 3 * (v2 - v1) - c,\n\t\t\t\ta = v3 - v0 - c - b;\n\t\t\tres = Numerical.solveCubic(a, b, c, v0 - val, roots, min, max);\n\t\t}\n\t\treturn res;\n\t},\n\n\tgetTimeOf: function(v, point) {\n\t\tvar p0 = new Point(v[0], v[1]),\n\t\t\tp3 = new Point(v[6], v[7]),\n\t\t\tepsilon = 1e-12,\n\t\t\tgeomEpsilon = 1e-7,\n\t\t\tt = point.isClose(p0, epsilon) ? 0\n\t\t\t  : point.isClose(p3, epsilon) ? 1\n\t\t\t  : null;\n\t\tif (t === null) {\n\t\t\tvar coords = [point.x, point.y],\n\t\t\t\troots = [];\n\t\t\tfor (var c = 0; c < 2; c++) {\n\t\t\t\tvar count = Curve.solveCubic(v, c, coords[c], roots, 0, 1);\n\t\t\t\tfor (var i = 0; i < count; i++) {\n\t\t\t\t\tvar u = roots[i];\n\t\t\t\t\tif (point.isClose(Curve.getPoint(v, u), geomEpsilon))\n\t\t\t\t\t\treturn u;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn point.isClose(p0, geomEpsilon) ? 0\n\t\t\t : point.isClose(p3, geomEpsilon) ? 1\n\t\t\t : null;\n\t},\n\n\tgetNearestTime: function(v, point) {\n\t\tif (Curve.isStraight(v)) {\n\t\t\tvar x0 = v[0], y0 = v[1],\n\t\t\t\tx3 = v[6], y3 = v[7],\n\t\t\t\tvx = x3 - x0, vy = y3 - y0,\n\t\t\t\tdet = vx * vx + vy * vy;\n\t\t\tif (det === 0)\n\t\t\t\treturn 0;\n\t\t\tvar u = ((point.x - x0) * vx + (point.y - y0) * vy) / det;\n\t\t\treturn u < 1e-12 ? 0\n\t\t\t\t : u > 0.999999999999 ? 1\n\t\t\t\t : Curve.getTimeOf(v,\n\t\t\t\t\tnew Point(x0 + u * vx, y0 + u * vy));\n\t\t}\n\n\t\tvar count = 100,\n\t\t\tminDist = Infinity,\n\t\t\tminT = 0;\n\n\t\tfunction refine(t) {\n\t\t\tif (t >= 0 && t <= 1) {\n\t\t\t\tvar dist = point.getDistance(Curve.getPoint(v, t), true);\n\t\t\t\tif (dist < minDist) {\n\t\t\t\t\tminDist = dist;\n\t\t\t\t\tminT = t;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0; i <= count; i++)\n\t\t\trefine(i / count);\n\n\t\tvar step = 1 / (count * 2);\n\t\twhile (step > 1e-8) {\n\t\t\tif (!refine(minT - step) && !refine(minT + step))\n\t\t\t\tstep /= 2;\n\t\t}\n\t\treturn minT;\n\t},\n\n\tgetPart: function(v, from, to) {\n\t\tvar flip = from > to;\n\t\tif (flip) {\n\t\t\tvar tmp = from;\n\t\t\tfrom = to;\n\t\t\tto = tmp;\n\t\t}\n\t\tif (from > 0)\n\t\t\tv = Curve.subdivide(v, from)[1];\n\t\tif (to < 1)\n\t\t\tv = Curve.subdivide(v, (to - from) / (1 - from))[0];\n\t\treturn flip\n\t\t\t\t? [v[6], v[7], v[4], v[5], v[2], v[3], v[0], v[1]]\n\t\t\t\t: v;\n\t},\n\n\tisFlatEnough: function(v, flatness) {\n\t\tvar x0 = v[0], y0 = v[1],\n\t\t\tx1 = v[2], y1 = v[3],\n\t\t\tx2 = v[4], y2 = v[5],\n\t\t\tx3 = v[6], y3 = v[7],\n\t\t\tux = 3 * x1 - 2 * x0 - x3,\n\t\t\tuy = 3 * y1 - 2 * y0 - y3,\n\t\t\tvx = 3 * x2 - 2 * x3 - x0,\n\t\t\tvy = 3 * y2 - 2 * y3 - y0;\n\t\treturn Math.max(ux * ux, vx * vx) + Math.max(uy * uy, vy * vy)\n\t\t\t\t<= 16 * flatness * flatness;\n\t},\n\n\tgetArea: function(v) {\n\t\tvar x0 = v[0], y0 = v[1],\n\t\t\tx1 = v[2], y1 = v[3],\n\t\t\tx2 = v[4], y2 = v[5],\n\t\t\tx3 = v[6], y3 = v[7];\n\t\treturn 3 * ((y3 - y0) * (x1 + x2) - (x3 - x0) * (y1 + y2)\n\t\t\t\t+ y1 * (x0 - x2) - x1 * (y0 - y2)\n\t\t\t\t+ y3 * (x2 + x0 / 3) - x3 * (y2 + y0 / 3)) / 20;\n\t},\n\n\tgetBounds: function(v) {\n\t\tvar min = v.slice(0, 2),\n\t\t\tmax = min.slice(),\n\t\t\troots = [0, 0];\n\t\tfor (var i = 0; i < 2; i++)\n\t\t\tCurve._addBounds(v[i], v[i + 2], v[i + 4], v[i + 6],\n\t\t\t\t\ti, 0, min, max, roots);\n\t\treturn new Rectangle(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n\t},\n\n\t_addBounds: function(v0, v1, v2, v3, coord, padding, min, max, roots) {\n\t\tfunction add(value, padding) {\n\t\t\tvar left = value - padding,\n\t\t\t\tright = value + padding;\n\t\t\tif (left < min[coord])\n\t\t\t\tmin[coord] = left;\n\t\t\tif (right > max[coord])\n\t\t\t\tmax[coord] = right;\n\t\t}\n\n\t\tpadding /= 2;\n\t\tvar minPad = min[coord] + padding,\n\t\t\tmaxPad = max[coord] - padding;\n\t\tif (    v0 < minPad || v1 < minPad || v2 < minPad || v3 < minPad ||\n\t\t\t\tv0 > maxPad || v1 > maxPad || v2 > maxPad || v3 > maxPad) {\n\t\t\tif (v1 < v0 != v1 < v3 && v2 < v0 != v2 < v3) {\n\t\t\t\tadd(v0, 0);\n\t\t\t\tadd(v3, 0);\n\t\t\t} else {\n\t\t\t\tvar a = 3 * (v1 - v2) - v0 + v3,\n\t\t\t\t\tb = 2 * (v0 + v2) - 4 * v1,\n\t\t\t\t\tc = v1 - v0,\n\t\t\t\t\tcount = Numerical.solveQuadratic(a, b, c, roots),\n\t\t\t\t\ttMin = 1e-8,\n\t\t\t\t\ttMax = 1 - tMin;\n\t\t\t\tadd(v3, 0);\n\t\t\t\tfor (var i = 0; i < count; i++) {\n\t\t\t\t\tvar t = roots[i],\n\t\t\t\t\t\tu = 1 - t;\n\t\t\t\t\tif (tMin <= t && t <= tMax)\n\t\t\t\t\t\tadd(u * u * u * v0\n\t\t\t\t\t\t\t+ 3 * u * u * t * v1\n\t\t\t\t\t\t\t+ 3 * u * t * t * v2\n\t\t\t\t\t\t\t+ t * t * t * v3,\n\t\t\t\t\t\t\tpadding);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}}, Base.each(\n\t['getBounds', 'getStrokeBounds', 'getHandleBounds'],\n\tfunction(name) {\n\t\tthis[name] = function() {\n\t\t\tif (!this._bounds)\n\t\t\t\tthis._bounds = {};\n\t\t\tvar bounds = this._bounds[name];\n\t\t\tif (!bounds) {\n\t\t\t\tbounds = this._bounds[name] = Path[name](\n\t\t\t\t\t\t[this._segment1, this._segment2], false, this._path);\n\t\t\t}\n\t\t\treturn bounds.clone();\n\t\t};\n\t},\n{\n\n}), Base.each({\n\tisStraight: function(p1, h1, h2, p2) {\n\t\tif (h1.isZero() && h2.isZero()) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tvar v = p2.subtract(p1);\n\t\t\tif (v.isZero()) {\n\t\t\t\treturn false;\n\t\t\t} else if (v.isCollinear(h1) && v.isCollinear(h2)) {\n\t\t\t\tvar l = new Line(p1, p2),\n\t\t\t\t\tepsilon = 1e-7;\n\t\t\t\tif (l.getDistance(p1.add(h1)) < epsilon &&\n\t\t\t\t\tl.getDistance(p2.add(h2)) < epsilon) {\n\t\t\t\t\tvar div = v.dot(v),\n\t\t\t\t\t\ts1 = v.dot(h1) / div,\n\t\t\t\t\t\ts2 = v.dot(h2) / div;\n\t\t\t\t\treturn s1 >= 0 && s1 <= 1 && s2 <= 0 && s2 >= -1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\tisLinear: function(p1, h1, h2, p2) {\n\t\tvar third = p2.subtract(p1).divide(3);\n\t\treturn h1.equals(third) && h2.negate().equals(third);\n\t}\n}, function(test, name) {\n\tthis[name] = function(epsilon) {\n\t\tvar seg1 = this._segment1,\n\t\t\tseg2 = this._segment2;\n\t\treturn test(seg1._point, seg1._handleOut, seg2._handleIn, seg2._point,\n\t\t\t\tepsilon);\n\t};\n\n\tthis.statics[name] = function(v, epsilon) {\n\t\tvar x0 = v[0], y0 = v[1],\n\t\t\tx3 = v[6], y3 = v[7];\n\t\treturn test(\n\t\t\t\tnew Point(x0, y0),\n\t\t\t\tnew Point(v[2] - x0, v[3] - y0),\n\t\t\t\tnew Point(v[4] - x3, v[5] - y3),\n\t\t\t\tnew Point(x3, y3), epsilon);\n\t};\n}, {\n\tstatics: {},\n\n\thasHandles: function() {\n\t\treturn !this._segment1._handleOut.isZero()\n\t\t\t\t|| !this._segment2._handleIn.isZero();\n\t},\n\n\thasLength: function(epsilon) {\n\t\treturn (!this.getPoint1().equals(this.getPoint2()) || this.hasHandles())\n\t\t\t\t&& this.getLength() > (epsilon || 0);\n\t},\n\n\tisCollinear: function(curve) {\n\t\treturn curve && this.isStraight() && curve.isStraight()\n\t\t\t\t&& this.getLine().isCollinear(curve.getLine());\n\t},\n\n\tisHorizontal: function() {\n\t\treturn this.isStraight() && Math.abs(this.getTangentAtTime(0.5).y)\n\t\t\t\t< 1e-8;\n\t},\n\n\tisVertical: function() {\n\t\treturn this.isStraight() && Math.abs(this.getTangentAtTime(0.5).x)\n\t\t\t\t< 1e-8;\n\t}\n}), {\n\tbeans: false,\n\n\tgetLocationAt: function(offset, _isTime) {\n\t\treturn this.getLocationAtTime(\n\t\t\t\t_isTime ? offset : this.getTimeAt(offset));\n\t},\n\n\tgetLocationAtTime: function(t) {\n\t\treturn t != null && t >= 0 && t <= 1\n\t\t\t\t? new CurveLocation(this, t)\n\t\t\t\t: null;\n\t},\n\n\tgetTimeAt: function(offset, start) {\n\t\treturn Curve.getTimeAt(this.getValues(), offset, start);\n\t},\n\n\tgetParameterAt: '#getTimeAt',\n\n\tgetTimesWithTangent: function () {\n\t\tvar tangent = Point.read(arguments);\n\t\treturn tangent.isZero()\n\t\t\t\t? []\n\t\t\t\t: Curve.getTimesWithTangent(this.getValues(), tangent);\n\t},\n\n\tgetOffsetAtTime: function(t) {\n\t\treturn this.getPartLength(0, t);\n\t},\n\n\tgetLocationOf: function() {\n\t\treturn this.getLocationAtTime(this.getTimeOf(Point.read(arguments)));\n\t},\n\n\tgetOffsetOf: function() {\n\t\tvar loc = this.getLocationOf.apply(this, arguments);\n\t\treturn loc ? loc.getOffset() : null;\n\t},\n\n\tgetTimeOf: function() {\n\t\treturn Curve.getTimeOf(this.getValues(), Point.read(arguments));\n\t},\n\n\tgetParameterOf: '#getTimeOf',\n\n\tgetNearestLocation: function() {\n\t\tvar point = Point.read(arguments),\n\t\t\tvalues = this.getValues(),\n\t\t\tt = Curve.getNearestTime(values, point),\n\t\t\tpt = Curve.getPoint(values, t);\n\t\treturn new CurveLocation(this, t, pt, null, point.getDistance(pt));\n\t},\n\n\tgetNearestPoint: function() {\n\t\tvar loc = this.getNearestLocation.apply(this, arguments);\n\t\treturn loc ? loc.getPoint() : loc;\n\t}\n\n},\nnew function() {\n\tvar methods = ['getPoint', 'getTangent', 'getNormal', 'getWeightedTangent',\n\t\t'getWeightedNormal', 'getCurvature'];\n\treturn Base.each(methods,\n\t\tfunction(name) {\n\t\t\tthis[name + 'At'] = function(location, _isTime) {\n\t\t\t\tvar values = this.getValues();\n\t\t\t\treturn Curve[name](values, _isTime ? location\n\t\t\t\t\t\t: Curve.getTimeAt(values, location));\n\t\t\t};\n\n\t\t\tthis[name + 'AtTime'] = function(time) {\n\t\t\t\treturn Curve[name](this.getValues(), time);\n\t\t\t};\n\t\t}, {\n\t\t\tstatics: {\n\t\t\t\t_evaluateMethods: methods\n\t\t\t}\n\t\t}\n\t);\n},\nnew function() {\n\n\tfunction getLengthIntegrand(v) {\n\t\tvar x0 = v[0], y0 = v[1],\n\t\t\tx1 = v[2], y1 = v[3],\n\t\t\tx2 = v[4], y2 = v[5],\n\t\t\tx3 = v[6], y3 = v[7],\n\n\t\t\tax = 9 * (x1 - x2) + 3 * (x3 - x0),\n\t\t\tbx = 6 * (x0 + x2) - 12 * x1,\n\t\t\tcx = 3 * (x1 - x0),\n\n\t\t\tay = 9 * (y1 - y2) + 3 * (y3 - y0),\n\t\t\tby = 6 * (y0 + y2) - 12 * y1,\n\t\t\tcy = 3 * (y1 - y0);\n\n\t\treturn function(t) {\n\t\t\tvar dx = (ax * t + bx) * t + cx,\n\t\t\t\tdy = (ay * t + by) * t + cy;\n\t\t\treturn Math.sqrt(dx * dx + dy * dy);\n\t\t};\n\t}\n\n\tfunction getIterations(a, b) {\n\t\treturn Math.max(2, Math.min(16, Math.ceil(Math.abs(b - a) * 32)));\n\t}\n\n\tfunction evaluate(v, t, type, normalized) {\n\t\tif (t == null || t < 0 || t > 1)\n\t\t\treturn null;\n\t\tvar x0 = v[0], y0 = v[1],\n\t\t\tx1 = v[2], y1 = v[3],\n\t\t\tx2 = v[4], y2 = v[5],\n\t\t\tx3 = v[6], y3 = v[7],\n\t\t\tisZero = Numerical.isZero;\n\t\tif (isZero(x1 - x0) && isZero(y1 - y0)) {\n\t\t\tx1 = x0;\n\t\t\ty1 = y0;\n\t\t}\n\t\tif (isZero(x2 - x3) && isZero(y2 - y3)) {\n\t\t\tx2 = x3;\n\t\t\ty2 = y3;\n\t\t}\n\t\tvar cx = 3 * (x1 - x0),\n\t\t\tbx = 3 * (x2 - x1) - cx,\n\t\t\tax = x3 - x0 - cx - bx,\n\t\t\tcy = 3 * (y1 - y0),\n\t\t\tby = 3 * (y2 - y1) - cy,\n\t\t\tay = y3 - y0 - cy - by,\n\t\t\tx, y;\n\t\tif (type === 0) {\n\t\t\tx = t === 0 ? x0 : t === 1 ? x3\n\t\t\t\t\t: ((ax * t + bx) * t + cx) * t + x0;\n\t\t\ty = t === 0 ? y0 : t === 1 ? y3\n\t\t\t\t\t: ((ay * t + by) * t + cy) * t + y0;\n\t\t} else {\n\t\t\tvar tMin = 1e-8,\n\t\t\t\ttMax = 1 - tMin;\n\t\t\tif (t < tMin) {\n\t\t\t\tx = cx;\n\t\t\t\ty = cy;\n\t\t\t} else if (t > tMax) {\n\t\t\t\tx = 3 * (x3 - x2);\n\t\t\t\ty = 3 * (y3 - y2);\n\t\t\t} else {\n\t\t\t\tx = (3 * ax * t + 2 * bx) * t + cx;\n\t\t\t\ty = (3 * ay * t + 2 * by) * t + cy;\n\t\t\t}\n\t\t\tif (normalized) {\n\t\t\t\tif (x === 0 && y === 0 && (t < tMin || t > tMax)) {\n\t\t\t\t\tx = x2 - x1;\n\t\t\t\t\ty = y2 - y1;\n\t\t\t\t}\n\t\t\t\tvar len = Math.sqrt(x * x + y * y);\n\t\t\t\tif (len) {\n\t\t\t\t\tx /= len;\n\t\t\t\t\ty /= len;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (type === 3) {\n\t\t\t\tvar x2 = 6 * ax * t + 2 * bx,\n\t\t\t\t\ty2 = 6 * ay * t + 2 * by,\n\t\t\t\t\td = Math.pow(x * x + y * y, 3 / 2);\n\t\t\t\tx = d !== 0 ? (x * y2 - y * x2) / d : 0;\n\t\t\t\ty = 0;\n\t\t\t}\n\t\t}\n\t\treturn type === 2 ? new Point(y, -x) : new Point(x, y);\n\t}\n\n\treturn { statics: {\n\n\t\tclassify: function(v) {\n\n\t\t\tvar x0 = v[0], y0 = v[1],\n\t\t\t\tx1 = v[2], y1 = v[3],\n\t\t\t\tx2 = v[4], y2 = v[5],\n\t\t\t\tx3 = v[6], y3 = v[7],\n\t\t\t\ta1 = x0 * (y3 - y2) + y0 * (x2 - x3) + x3 * y2 - y3 * x2,\n\t\t\t\ta2 = x1 * (y0 - y3) + y1 * (x3 - x0) + x0 * y3 - y0 * x3,\n\t\t\t\ta3 = x2 * (y1 - y0) + y2 * (x0 - x1) + x1 * y0 - y1 * x0,\n\t\t\t\td3 = 3 * a3,\n\t\t\t\td2 = d3 - a2,\n\t\t\t\td1 = d2 - a2 + a1,\n\t\t\t\tl = Math.sqrt(d1 * d1 + d2 * d2 + d3 * d3),\n\t\t\t\ts = l !== 0 ? 1 / l : 0,\n\t\t\t\tisZero = Numerical.isZero,\n\t\t\t\tserpentine = 'serpentine';\n\t\t\td1 *= s;\n\t\t\td2 *= s;\n\t\t\td3 *= s;\n\n\t\t\tfunction type(type, t1, t2) {\n\t\t\t\tvar hasRoots = t1 !== undefined,\n\t\t\t\t\tt1Ok = hasRoots && t1 > 0 && t1 < 1,\n\t\t\t\t\tt2Ok = hasRoots && t2 > 0 && t2 < 1;\n\t\t\t\tif (hasRoots && (!(t1Ok || t2Ok)\n\t\t\t\t\t\t|| type === 'loop' && !(t1Ok && t2Ok))) {\n\t\t\t\t\ttype = 'arch';\n\t\t\t\t\tt1Ok = t2Ok = false;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\ttype: type,\n\t\t\t\t\troots: t1Ok || t2Ok\n\t\t\t\t\t\t\t? t1Ok && t2Ok\n\t\t\t\t\t\t\t\t? t1 < t2 ? [t1, t2] : [t2, t1]\n\t\t\t\t\t\t\t\t: [t1Ok ? t1 : t2]\n\t\t\t\t\t\t\t: null\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (isZero(d1)) {\n\t\t\t\treturn isZero(d2)\n\t\t\t\t\t\t? type(isZero(d3) ? 'line' : 'quadratic')\n\t\t\t\t\t\t: type(serpentine, d3 / (3 * d2));\n\t\t\t}\n\t\t\tvar d = 3 * d2 * d2 - 4 * d1 * d3;\n\t\t\tif (isZero(d)) {\n\t\t\t\treturn type('cusp', d2 / (2 * d1));\n\t\t\t}\n\t\t\tvar f1 = d > 0 ? Math.sqrt(d / 3) : Math.sqrt(-d),\n\t\t\t\tf2 = 2 * d1;\n\t\t\treturn type(d > 0 ? serpentine : 'loop',\n\t\t\t\t\t(d2 + f1) / f2,\n\t\t\t\t\t(d2 - f1) / f2);\n\t\t},\n\n\t\tgetLength: function(v, a, b, ds) {\n\t\t\tif (a === undefined)\n\t\t\t\ta = 0;\n\t\t\tif (b === undefined)\n\t\t\t\tb = 1;\n\t\t\tif (Curve.isStraight(v)) {\n\t\t\t\tvar c = v;\n\t\t\t\tif (b < 1) {\n\t\t\t\t\tc = Curve.subdivide(c, b)[0];\n\t\t\t\t\ta /= b;\n\t\t\t\t}\n\t\t\t\tif (a > 0) {\n\t\t\t\t\tc = Curve.subdivide(c, a)[1];\n\t\t\t\t}\n\t\t\t\tvar dx = c[6] - c[0],\n\t\t\t\t\tdy = c[7] - c[1];\n\t\t\t\treturn Math.sqrt(dx * dx + dy * dy);\n\t\t\t}\n\t\t\treturn Numerical.integrate(ds || getLengthIntegrand(v), a, b,\n\t\t\t\t\tgetIterations(a, b));\n\t\t},\n\n\t\tgetTimeAt: function(v, offset, start) {\n\t\t\tif (start === undefined)\n\t\t\t\tstart = offset < 0 ? 1 : 0;\n\t\t\tif (offset === 0)\n\t\t\t\treturn start;\n\t\t\tvar abs = Math.abs,\n\t\t\t\tepsilon = 1e-12,\n\t\t\t\tforward = offset > 0,\n\t\t\t\ta = forward ? start : 0,\n\t\t\t\tb = forward ? 1 : start,\n\t\t\t\tds = getLengthIntegrand(v),\n\t\t\t\trangeLength = Curve.getLength(v, a, b, ds),\n\t\t\t\tdiff = abs(offset) - rangeLength;\n\t\t\tif (abs(diff) < epsilon) {\n\t\t\t\treturn forward ? b : a;\n\t\t\t} else if (diff > epsilon) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tvar guess = offset / rangeLength,\n\t\t\t\tlength = 0;\n\t\t\tfunction f(t) {\n\t\t\t\tlength += Numerical.integrate(ds, start, t,\n\t\t\t\t\t\tgetIterations(start, t));\n\t\t\t\tstart = t;\n\t\t\t\treturn length - offset;\n\t\t\t}\n\t\t\treturn Numerical.findRoot(f, ds, start + guess, a, b, 32,\n\t\t\t\t\t1e-12);\n\t\t},\n\n\t\tgetPoint: function(v, t) {\n\t\t\treturn evaluate(v, t, 0, false);\n\t\t},\n\n\t\tgetTangent: function(v, t) {\n\t\t\treturn evaluate(v, t, 1, true);\n\t\t},\n\n\t\tgetWeightedTangent: function(v, t) {\n\t\t\treturn evaluate(v, t, 1, false);\n\t\t},\n\n\t\tgetNormal: function(v, t) {\n\t\t\treturn evaluate(v, t, 2, true);\n\t\t},\n\n\t\tgetWeightedNormal: function(v, t) {\n\t\t\treturn evaluate(v, t, 2, false);\n\t\t},\n\n\t\tgetCurvature: function(v, t) {\n\t\t\treturn evaluate(v, t, 3, false).x;\n\t\t},\n\n\t\tgetPeaks: function(v) {\n\t\t\tvar x0 = v[0], y0 = v[1],\n\t\t\t\tx1 = v[2], y1 = v[3],\n\t\t\t\tx2 = v[4], y2 = v[5],\n\t\t\t\tx3 = v[6], y3 = v[7],\n\t\t\t\tax =     -x0 + 3 * x1 - 3 * x2 + x3,\n\t\t\t\tbx =  3 * x0 - 6 * x1 + 3 * x2,\n\t\t\t\tcx = -3 * x0 + 3 * x1,\n\t\t\t\tay =     -y0 + 3 * y1 - 3 * y2 + y3,\n\t\t\t\tby =  3 * y0 - 6 * y1 + 3 * y2,\n\t\t\t\tcy = -3 * y0 + 3 * y1,\n\t\t\t\ttMin = 1e-8,\n\t\t\t\ttMax = 1 - tMin,\n\t\t\t\troots = [];\n\t\t\tNumerical.solveCubic(\n\t\t\t\t\t9 * (ax * ax + ay * ay),\n\t\t\t\t\t9 * (ax * bx + by * ay),\n\t\t\t\t\t2 * (bx * bx + by * by) + 3 * (cx * ax + cy * ay),\n\t\t\t\t\t(cx * bx + by * cy),\n\t\t\t\t\troots, tMin, tMax);\n\t\t\treturn roots.sort();\n\t\t}\n\t}};\n},\nnew function() {\n\n\tfunction addLocation(locations, include, c1, t1, c2, t2, overlap) {\n\t\tvar excludeStart = !overlap && c1.getPrevious() === c2,\n\t\t\texcludeEnd = !overlap && c1 !== c2 && c1.getNext() === c2,\n\t\t\ttMin = 1e-8,\n\t\t\ttMax = 1 - tMin;\n\t\tif (t1 !== null && t1 >= (excludeStart ? tMin : 0) &&\n\t\t\tt1 <= (excludeEnd ? tMax : 1)) {\n\t\t\tif (t2 !== null && t2 >= (excludeEnd ? tMin : 0) &&\n\t\t\t\tt2 <= (excludeStart ? tMax : 1)) {\n\t\t\t\tvar loc1 = new CurveLocation(c1, t1, null, overlap),\n\t\t\t\t\tloc2 = new CurveLocation(c2, t2, null, overlap);\n\t\t\t\tloc1._intersection = loc2;\n\t\t\t\tloc2._intersection = loc1;\n\t\t\t\tif (!include || include(loc1)) {\n\t\t\t\t\tCurveLocation.insert(locations, loc1, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction addCurveIntersections(v1, v2, c1, c2, locations, include, flip,\n\t\t\trecursion, calls, tMin, tMax, uMin, uMax) {\n\t\tif (++calls >= 4096 || ++recursion >= 40)\n\t\t\treturn calls;\n\t\tvar fatLineEpsilon = 1e-9,\n\t\t\tq0x = v2[0], q0y = v2[1], q3x = v2[6], q3y = v2[7],\n\t\t\tgetSignedDistance = Line.getSignedDistance,\n\t\t\td1 = getSignedDistance(q0x, q0y, q3x, q3y, v2[2], v2[3]),\n\t\t\td2 = getSignedDistance(q0x, q0y, q3x, q3y, v2[4], v2[5]),\n\t\t\tfactor = d1 * d2 > 0 ? 3 / 4 : 4 / 9,\n\t\t\tdMin = factor * Math.min(0, d1, d2),\n\t\t\tdMax = factor * Math.max(0, d1, d2),\n\t\t\tdp0 = getSignedDistance(q0x, q0y, q3x, q3y, v1[0], v1[1]),\n\t\t\tdp1 = getSignedDistance(q0x, q0y, q3x, q3y, v1[2], v1[3]),\n\t\t\tdp2 = getSignedDistance(q0x, q0y, q3x, q3y, v1[4], v1[5]),\n\t\t\tdp3 = getSignedDistance(q0x, q0y, q3x, q3y, v1[6], v1[7]),\n\t\t\thull = getConvexHull(dp0, dp1, dp2, dp3),\n\t\t\ttop = hull[0],\n\t\t\tbottom = hull[1],\n\t\t\ttMinClip,\n\t\t\ttMaxClip;\n\t\tif (d1 === 0 && d2 === 0\n\t\t\t\t&& dp0 === 0 && dp1 === 0 && dp2 === 0 && dp3 === 0\n\t\t\t|| (tMinClip = clipConvexHull(top, bottom, dMin, dMax)) == null\n\t\t\t|| (tMaxClip = clipConvexHull(top.reverse(), bottom.reverse(),\n\t\t\t\tdMin, dMax)) == null)\n\t\t\treturn calls;\n\t\tvar tMinNew = tMin + (tMax - tMin) * tMinClip,\n\t\t\ttMaxNew = tMin + (tMax - tMin) * tMaxClip;\n\t\tif (Math.max(uMax - uMin, tMaxNew - tMinNew) < fatLineEpsilon) {\n\t\t\tvar t = (tMinNew + tMaxNew) / 2,\n\t\t\t\tu = (uMin + uMax) / 2;\n\t\t\taddLocation(locations, include,\n\t\t\t\t\tflip ? c2 : c1, flip ? u : t,\n\t\t\t\t\tflip ? c1 : c2, flip ? t : u);\n\t\t} else {\n\t\t\tv1 = Curve.getPart(v1, tMinClip, tMaxClip);\n\t\t\tvar uDiff = uMax - uMin;\n\t\t\tif (tMaxClip - tMinClip > 0.8) {\n\t\t\t\tif (tMaxNew - tMinNew > uDiff) {\n\t\t\t\t\tvar parts = Curve.subdivide(v1, 0.5),\n\t\t\t\t\t\tt = (tMinNew + tMaxNew) / 2;\n\t\t\t\t\tcalls = addCurveIntersections(\n\t\t\t\t\t\t\tv2, parts[0], c2, c1, locations, include, !flip,\n\t\t\t\t\t\t\trecursion, calls, uMin, uMax, tMinNew, t);\n\t\t\t\t\tcalls = addCurveIntersections(\n\t\t\t\t\t\t\tv2, parts[1], c2, c1, locations, include, !flip,\n\t\t\t\t\t\t\trecursion, calls, uMin, uMax, t, tMaxNew);\n\t\t\t\t} else {\n\t\t\t\t\tvar parts = Curve.subdivide(v2, 0.5),\n\t\t\t\t\t\tu = (uMin + uMax) / 2;\n\t\t\t\t\tcalls = addCurveIntersections(\n\t\t\t\t\t\t\tparts[0], v1, c2, c1, locations, include, !flip,\n\t\t\t\t\t\t\trecursion, calls, uMin, u, tMinNew, tMaxNew);\n\t\t\t\t\tcalls = addCurveIntersections(\n\t\t\t\t\t\t\tparts[1], v1, c2, c1, locations, include, !flip,\n\t\t\t\t\t\t\trecursion, calls, u, uMax, tMinNew, tMaxNew);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (uDiff === 0 || uDiff >= fatLineEpsilon) {\n\t\t\t\t\tcalls = addCurveIntersections(\n\t\t\t\t\t\t\tv2, v1, c2, c1, locations, include, !flip,\n\t\t\t\t\t\t\trecursion, calls, uMin, uMax, tMinNew, tMaxNew);\n\t\t\t\t} else {\n\t\t\t\t\tcalls = addCurveIntersections(\n\t\t\t\t\t\t\tv1, v2, c1, c2, locations, include, flip,\n\t\t\t\t\t\t\trecursion, calls, tMinNew, tMaxNew, uMin, uMax);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn calls;\n\t}\n\n\tfunction getConvexHull(dq0, dq1, dq2, dq3) {\n\t\tvar p0 = [ 0, dq0 ],\n\t\t\tp1 = [ 1 / 3, dq1 ],\n\t\t\tp2 = [ 2 / 3, dq2 ],\n\t\t\tp3 = [ 1, dq3 ],\n\t\t\tdist1 = dq1 - (2 * dq0 + dq3) / 3,\n\t\t\tdist2 = dq2 - (dq0 + 2 * dq3) / 3,\n\t\t\thull;\n\t\tif (dist1 * dist2 < 0) {\n\t\t\thull = [[p0, p1, p3], [p0, p2, p3]];\n\t\t} else {\n\t\t\tvar distRatio = dist1 / dist2;\n\t\t\thull = [\n\t\t\t\tdistRatio >= 2 ? [p0, p1, p3]\n\t\t\t\t: distRatio <= 0.5 ? [p0, p2, p3]\n\t\t\t\t: [p0, p1, p2, p3],\n\t\t\t\t[p0, p3]\n\t\t\t];\n\t\t}\n\t\treturn (dist1 || dist2) < 0 ? hull.reverse() : hull;\n\t}\n\n\tfunction clipConvexHull(hullTop, hullBottom, dMin, dMax) {\n\t\tif (hullTop[0][1] < dMin) {\n\t\t\treturn clipConvexHullPart(hullTop, true, dMin);\n\t\t} else if (hullBottom[0][1] > dMax) {\n\t\t\treturn clipConvexHullPart(hullBottom, false, dMax);\n\t\t} else {\n\t\t\treturn hullTop[0][0];\n\t\t}\n\t}\n\n\tfunction clipConvexHullPart(part, top, threshold) {\n\t\tvar px = part[0][0],\n\t\t\tpy = part[0][1];\n\t\tfor (var i = 1, l = part.length; i < l; i++) {\n\t\t\tvar qx = part[i][0],\n\t\t\t\tqy = part[i][1];\n\t\t\tif (top ? qy >= threshold : qy <= threshold) {\n\t\t\t\treturn qy === threshold ? qx\n\t\t\t\t\t\t: px + (threshold - py) * (qx - px) / (qy - py);\n\t\t\t}\n\t\t\tpx = qx;\n\t\t\tpy = qy;\n\t\t}\n\t\treturn null;\n\t}\n\n\tfunction getCurveLineIntersections(v, px, py, vx, vy) {\n\t\tvar isZero = Numerical.isZero;\n\t\tif (isZero(vx) && isZero(vy)) {\n\t\t\tvar t = Curve.getTimeOf(v, new Point(px, py));\n\t\t\treturn t === null ? [] : [t];\n\t\t}\n\t\tvar angle = Math.atan2(-vy, vx),\n\t\t\tsin = Math.sin(angle),\n\t\t\tcos = Math.cos(angle),\n\t\t\trv = [],\n\t\t\troots = [];\n\t\tfor (var i = 0; i < 8; i += 2) {\n\t\t\tvar x = v[i] - px,\n\t\t\t\ty = v[i + 1] - py;\n\t\t\trv.push(\n\t\t\t\tx * cos - y * sin,\n\t\t\t\tx * sin + y * cos);\n\t\t}\n\t\tCurve.solveCubic(rv, 1, 0, roots, 0, 1);\n\t\treturn roots;\n\t}\n\n\tfunction addCurveLineIntersections(v1, v2, c1, c2, locations, include,\n\t\t\tflip) {\n\t\tvar x1 = v2[0], y1 = v2[1],\n\t\t\tx2 = v2[6], y2 = v2[7],\n\t\t\troots = getCurveLineIntersections(v1, x1, y1, x2 - x1, y2 - y1);\n\t\tfor (var i = 0, l = roots.length; i < l; i++) {\n\t\t\tvar t1 = roots[i],\n\t\t\t\tp1 = Curve.getPoint(v1, t1),\n\t\t\t\tt2 = Curve.getTimeOf(v2, p1);\n\t\t\tif (t2 !== null) {\n\t\t\t\taddLocation(locations, include,\n\t\t\t\t\t\tflip ? c2 : c1, flip ? t2 : t1,\n\t\t\t\t\t\tflip ? c1 : c2, flip ? t1 : t2);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction addLineIntersection(v1, v2, c1, c2, locations, include) {\n\t\tvar pt = Line.intersect(\n\t\t\t\tv1[0], v1[1], v1[6], v1[7],\n\t\t\t\tv2[0], v2[1], v2[6], v2[7]);\n\t\tif (pt) {\n\t\t\taddLocation(locations, include,\n\t\t\t\t\tc1, Curve.getTimeOf(v1, pt),\n\t\t\t\t\tc2, Curve.getTimeOf(v2, pt));\n\t\t}\n\t}\n\n\tfunction getCurveIntersections(v1, v2, c1, c2, locations, include) {\n\t\tvar epsilon = 1e-12,\n\t\t\tmin = Math.min,\n\t\t\tmax = Math.max;\n\n\t\tif (max(v1[0], v1[2], v1[4], v1[6]) + epsilon >\n\t\t\tmin(v2[0], v2[2], v2[4], v2[6]) &&\n\t\t\tmin(v1[0], v1[2], v1[4], v1[6]) - epsilon <\n\t\t\tmax(v2[0], v2[2], v2[4], v2[6]) &&\n\t\t\tmax(v1[1], v1[3], v1[5], v1[7]) + epsilon >\n\t\t\tmin(v2[1], v2[3], v2[5], v2[7]) &&\n\t\t\tmin(v1[1], v1[3], v1[5], v1[7]) - epsilon <\n\t\t\tmax(v2[1], v2[3], v2[5], v2[7])) {\n\t\t\tvar overlaps = getOverlaps(v1, v2);\n\t\t\tif (overlaps) {\n\t\t\t\tfor (var i = 0; i < 2; i++) {\n\t\t\t\t\tvar overlap = overlaps[i];\n\t\t\t\t\taddLocation(locations, include,\n\t\t\t\t\t\t\tc1, overlap[0],\n\t\t\t\t\t\t\tc2, overlap[1], true);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar straight1 = Curve.isStraight(v1),\n\t\t\t\t\tstraight2 = Curve.isStraight(v2),\n\t\t\t\t\tstraight = straight1 && straight2,\n\t\t\t\t\tflip = straight1 && !straight2,\n\t\t\t\t\tbefore = locations.length;\n\t\t\t\t(straight\n\t\t\t\t\t? addLineIntersection\n\t\t\t\t\t: straight1 || straight2\n\t\t\t\t\t\t? addCurveLineIntersections\n\t\t\t\t\t\t: addCurveIntersections)(\n\t\t\t\t\t\t\tflip ? v2 : v1, flip ? v1 : v2,\n\t\t\t\t\t\t\tflip ? c2 : c1, flip ? c1 : c2,\n\t\t\t\t\t\t\tlocations, include, flip,\n\t\t\t\t\t\t\t0, 0, 0, 1, 0, 1);\n\t\t\t\tif (!straight || locations.length === before) {\n\t\t\t\t\tfor (var i = 0; i < 4; i++) {\n\t\t\t\t\t\tvar t1 = i >> 1,\n\t\t\t\t\t\t\tt2 = i & 1,\n\t\t\t\t\t\t\ti1 = t1 * 6,\n\t\t\t\t\t\t\ti2 = t2 * 6,\n\t\t\t\t\t\t\tp1 = new Point(v1[i1], v1[i1 + 1]),\n\t\t\t\t\t\t\tp2 = new Point(v2[i2], v2[i2 + 1]);\n\t\t\t\t\t\tif (p1.isClose(p2, epsilon)) {\n\t\t\t\t\t\t\taddLocation(locations, include,\n\t\t\t\t\t\t\t\t\tc1, t1,\n\t\t\t\t\t\t\t\t\tc2, t2);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn locations;\n\t}\n\n\tfunction getSelfIntersection(v1, c1, locations, include) {\n\t\tvar info = Curve.classify(v1);\n\t\tif (info.type === 'loop') {\n\t\t\tvar roots = info.roots;\n\t\t\taddLocation(locations, include,\n\t\t\t\t\tc1, roots[0],\n\t\t\t\t\tc1, roots[1]);\n\t\t}\n\t  return locations;\n\t}\n\n\tfunction getIntersections(curves1, curves2, include, matrix1, matrix2,\n\t\t\t_returnFirst) {\n\t\tvar epsilon = 1e-7,\n\t\t\tself = !curves2;\n\t\tif (self)\n\t\t\tcurves2 = curves1;\n\t\tvar length1 = curves1.length,\n\t\t\tlength2 = curves2.length,\n\t\t\tvalues1 = new Array(length1),\n\t\t\tvalues2 = self ? values1 : new Array(length2),\n\t\t\tlocations = [];\n\n\t\tfor (var i = 0; i < length1; i++) {\n\t\t\tvalues1[i] = curves1[i].getValues(matrix1);\n\t\t}\n\t\tif (!self) {\n\t\t\tfor (var i = 0; i < length2; i++) {\n\t\t\t\tvalues2[i] = curves2[i].getValues(matrix2);\n\t\t\t}\n\t\t}\n\t\tvar boundsCollisions = CollisionDetection.findCurveBoundsCollisions(\n\t\t\t\tvalues1, values2, epsilon);\n\t\tfor (var index1 = 0; index1 < length1; index1++) {\n\t\t\tvar curve1 = curves1[index1],\n\t\t\t\tv1 = values1[index1];\n\t\t\tif (self) {\n\t\t\t\tgetSelfIntersection(v1, curve1, locations, include);\n\t\t\t}\n\t\t\tvar collisions1 = boundsCollisions[index1];\n\t\t\tif (collisions1) {\n\t\t\t\tfor (var j = 0; j < collisions1.length; j++) {\n\t\t\t\t\tif (_returnFirst && locations.length)\n\t\t\t\t\t\treturn locations;\n\t\t\t\t\tvar index2 = collisions1[j];\n\t\t\t\t\tif (!self || index2 > index1) {\n\t\t\t\t\t\tvar curve2 = curves2[index2],\n\t\t\t\t\t\t\tv2 = values2[index2];\n\t\t\t\t\t\tgetCurveIntersections(\n\t\t\t\t\t\t\t\tv1, v2, curve1, curve2, locations, include);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn locations;\n\t}\n\n\tfunction getOverlaps(v1, v2) {\n\n\t\tfunction getSquaredLineLength(v) {\n\t\t\tvar x = v[6] - v[0],\n\t\t\t\ty = v[7] - v[1];\n\t\t\treturn x * x + y * y;\n\t\t}\n\n\t\tvar abs = Math.abs,\n\t\t\tgetDistance = Line.getDistance,\n\t\t\ttimeEpsilon = 1e-8,\n\t\t\tgeomEpsilon = 1e-7,\n\t\t\tstraight1 = Curve.isStraight(v1),\n\t\t\tstraight2 = Curve.isStraight(v2),\n\t\t\tstraightBoth = straight1 && straight2,\n\t\t\tflip = getSquaredLineLength(v1) < getSquaredLineLength(v2),\n\t\t\tl1 = flip ? v2 : v1,\n\t\t\tl2 = flip ? v1 : v2,\n\t\t\tpx = l1[0], py = l1[1],\n\t\t\tvx = l1[6] - px, vy = l1[7] - py;\n\t\tif (getDistance(px, py, vx, vy, l2[0], l2[1], true) < geomEpsilon &&\n\t\t\tgetDistance(px, py, vx, vy, l2[6], l2[7], true) < geomEpsilon) {\n\t\t\tif (!straightBoth &&\n\t\t\t\tgetDistance(px, py, vx, vy, l1[2], l1[3], true) < geomEpsilon &&\n\t\t\t\tgetDistance(px, py, vx, vy, l1[4], l1[5], true) < geomEpsilon &&\n\t\t\t\tgetDistance(px, py, vx, vy, l2[2], l2[3], true) < geomEpsilon &&\n\t\t\t\tgetDistance(px, py, vx, vy, l2[4], l2[5], true) < geomEpsilon) {\n\t\t\t\tstraight1 = straight2 = straightBoth = true;\n\t\t\t}\n\t\t} else if (straightBoth) {\n\t\t\treturn null;\n\t\t}\n\t\tif (straight1 ^ straight2) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar v = [v1, v2],\n\t\t\tpairs = [];\n\t\tfor (var i = 0; i < 4 && pairs.length < 2; i++) {\n\t\t\tvar i1 = i & 1,\n\t\t\t\ti2 = i1 ^ 1,\n\t\t\t\tt1 = i >> 1,\n\t\t\t\tt2 = Curve.getTimeOf(v[i1], new Point(\n\t\t\t\t\tv[i2][t1 ? 6 : 0],\n\t\t\t\t\tv[i2][t1 ? 7 : 1]));\n\t\t\tif (t2 != null) {\n\t\t\t\tvar pair = i1 ? [t1, t2] : [t2, t1];\n\t\t\t\tif (!pairs.length ||\n\t\t\t\t\tabs(pair[0] - pairs[0][0]) > timeEpsilon &&\n\t\t\t\t\tabs(pair[1] - pairs[0][1]) > timeEpsilon) {\n\t\t\t\t\tpairs.push(pair);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (i > 2 && !pairs.length)\n\t\t\t\tbreak;\n\t\t}\n\t\tif (pairs.length !== 2) {\n\t\t\tpairs = null;\n\t\t} else if (!straightBoth) {\n\t\t\tvar o1 = Curve.getPart(v1, pairs[0][0], pairs[1][0]),\n\t\t\t\to2 = Curve.getPart(v2, pairs[0][1], pairs[1][1]);\n\t\t\tif (abs(o2[2] - o1[2]) > geomEpsilon ||\n\t\t\t\tabs(o2[3] - o1[3]) > geomEpsilon ||\n\t\t\t\tabs(o2[4] - o1[4]) > geomEpsilon ||\n\t\t\t\tabs(o2[5] - o1[5]) > geomEpsilon)\n\t\t\t\tpairs = null;\n\t\t}\n\t\treturn pairs;\n\t}\n\n\tfunction getTimesWithTangent(v, tangent) {\n\t\tvar x0 = v[0], y0 = v[1],\n\t\t\tx1 = v[2], y1 = v[3],\n\t\t\tx2 = v[4], y2 = v[5],\n\t\t\tx3 = v[6], y3 = v[7],\n\t\t\tnormalized = tangent.normalize(),\n\t\t\ttx = normalized.x,\n\t\t\tty = normalized.y,\n\t\t\tax = 3 * x3 - 9 * x2 + 9 * x1 - 3 * x0,\n\t\t\tay = 3 * y3 - 9 * y2 + 9 * y1 - 3 * y0,\n\t\t\tbx = 6 * x2 - 12 * x1 + 6 * x0,\n\t\t\tby = 6 * y2 - 12 * y1 + 6 * y0,\n\t\t\tcx = 3 * x1 - 3 * x0,\n\t\t\tcy = 3 * y1 - 3 * y0,\n\t\t\tden = 2 * ax * ty - 2 * ay * tx,\n\t\t\ttimes = [];\n\t\tif (Math.abs(den) < Numerical.CURVETIME_EPSILON) {\n\t\t\tvar num = ax * cy - ay * cx,\n\t\t\t\tden = ax * by - ay * bx;\n\t\t\tif (den != 0) {\n\t\t\t\tvar t = -num / den;\n\t\t\t\tif (t >= 0 && t <= 1) times.push(t);\n\t\t\t}\n\t\t} else {\n\t\t\tvar delta = (bx * bx - 4 * ax * cx) * ty * ty +\n\t\t\t\t(-2 * bx * by + 4 * ay * cx + 4 * ax * cy) * tx * ty +\n\t\t\t\t(by * by - 4 * ay * cy) * tx * tx,\n\t\t\t\tk = bx * ty - by * tx;\n\t\t\tif (delta >= 0 && den != 0) {\n\t\t\t\tvar d = Math.sqrt(delta),\n\t\t\t\t\tt0 = -(k + d) / den,\n\t\t\t\t\tt1 = (-k + d) / den;\n\t\t\t\tif (t0 >= 0 && t0 <= 1) times.push(t0);\n\t\t\t\tif (t1 >= 0 && t1 <= 1) times.push(t1);\n\t\t\t}\n\t\t}\n\t\treturn times;\n\t}\n\n\treturn {\n\t\tgetIntersections: function(curve) {\n\t\t\tvar v1 = this.getValues(),\n\t\t\t\tv2 = curve && curve !== this && curve.getValues();\n\t\t\treturn v2 ? getCurveIntersections(v1, v2, this, curve, [])\n\t\t\t\t\t  : getSelfIntersection(v1, this, []);\n\t\t},\n\n\t\tstatics: {\n\t\t\tgetOverlaps: getOverlaps,\n\t\t\tgetIntersections: getIntersections,\n\t\t\tgetCurveLineIntersections: getCurveLineIntersections,\n\t\t\tgetTimesWithTangent: getTimesWithTangent\n\t\t}\n\t};\n});\n\nvar CurveLocation = Base.extend({\n\t_class: 'CurveLocation',\n\n\tinitialize: function CurveLocation(curve, time, point, _overlap, _distance) {\n\t\tif (time >= 0.99999999) {\n\t\t\tvar next = curve.getNext();\n\t\t\tif (next) {\n\t\t\t\ttime = 0;\n\t\t\t\tcurve = next;\n\t\t\t}\n\t\t}\n\t\tthis._setCurve(curve);\n\t\tthis._time = time;\n\t\tthis._point = point || curve.getPointAtTime(time);\n\t\tthis._overlap = _overlap;\n\t\tthis._distance = _distance;\n\t\tthis._intersection = this._next = this._previous = null;\n\t},\n\n\t_setPath: function(path) {\n\t\tthis._path = path;\n\t\tthis._version = path ? path._version : 0;\n\t},\n\n\t_setCurve: function(curve) {\n\t\tthis._setPath(curve._path);\n\t\tthis._curve = curve;\n\t\tthis._segment = null;\n\t\tthis._segment1 = curve._segment1;\n\t\tthis._segment2 = curve._segment2;\n\t},\n\n\t_setSegment: function(segment) {\n\t\tvar curve = segment.getCurve();\n\t\tif (curve) {\n\t\t\tthis._setCurve(curve);\n\t\t} else {\n\t\t\tthis._setPath(segment._path);\n\t\t\tthis._segment1 = segment;\n\t\t\tthis._segment2 = null;\n\t\t}\n\t\tthis._segment = segment;\n\t\tthis._time = segment === this._segment1 ? 0 : 1;\n\t\tthis._point = segment._point.clone();\n\t},\n\n\tgetSegment: function() {\n\t\tvar segment = this._segment;\n\t\tif (!segment) {\n\t\t\tvar curve = this.getCurve(),\n\t\t\t\ttime = this.getTime();\n\t\t\tif (time === 0) {\n\t\t\t\tsegment = curve._segment1;\n\t\t\t} else if (time === 1) {\n\t\t\t\tsegment = curve._segment2;\n\t\t\t} else if (time != null) {\n\t\t\t\tsegment = curve.getPartLength(0, time)\n\t\t\t\t\t< curve.getPartLength(time, 1)\n\t\t\t\t\t\t? curve._segment1\n\t\t\t\t\t\t: curve._segment2;\n\t\t\t}\n\t\t\tthis._segment = segment;\n\t\t}\n\t\treturn segment;\n\t},\n\n\tgetCurve: function() {\n\t\tvar path = this._path,\n\t\t\tthat = this;\n\t\tif (path && path._version !== this._version) {\n\t\t\tthis._time = this._offset = this._curveOffset = this._curve = null;\n\t\t}\n\n\t\tfunction trySegment(segment) {\n\t\t\tvar curve = segment && segment.getCurve();\n\t\t\tif (curve && (that._time = curve.getTimeOf(that._point)) != null) {\n\t\t\t\tthat._setCurve(curve);\n\t\t\t\treturn curve;\n\t\t\t}\n\t\t}\n\n\t\treturn this._curve\n\t\t\t|| trySegment(this._segment)\n\t\t\t|| trySegment(this._segment1)\n\t\t\t|| trySegment(this._segment2.getPrevious());\n\t},\n\n\tgetPath: function() {\n\t\tvar curve = this.getCurve();\n\t\treturn curve && curve._path;\n\t},\n\n\tgetIndex: function() {\n\t\tvar curve = this.getCurve();\n\t\treturn curve && curve.getIndex();\n\t},\n\n\tgetTime: function() {\n\t\tvar curve = this.getCurve(),\n\t\t\ttime = this._time;\n\t\treturn curve && time == null\n\t\t\t? this._time = curve.getTimeOf(this._point)\n\t\t\t: time;\n\t},\n\n\tgetParameter: '#getTime',\n\n\tgetPoint: function() {\n\t\treturn this._point;\n\t},\n\n\tgetOffset: function() {\n\t\tvar offset = this._offset;\n\t\tif (offset == null) {\n\t\t\toffset = 0;\n\t\t\tvar path = this.getPath(),\n\t\t\t\tindex = this.getIndex();\n\t\t\tif (path && index != null) {\n\t\t\t\tvar curves = path.getCurves();\n\t\t\t\tfor (var i = 0; i < index; i++)\n\t\t\t\t\toffset += curves[i].getLength();\n\t\t\t}\n\t\t\tthis._offset = offset += this.getCurveOffset();\n\t\t}\n\t\treturn offset;\n\t},\n\n\tgetCurveOffset: function() {\n\t\tvar offset = this._curveOffset;\n\t\tif (offset == null) {\n\t\t\tvar curve = this.getCurve(),\n\t\t\t\ttime = this.getTime();\n\t\t\tthis._curveOffset = offset = time != null && curve\n\t\t\t\t\t&& curve.getPartLength(0, time);\n\t\t}\n\t\treturn offset;\n\t},\n\n\tgetIntersection: function() {\n\t\treturn this._intersection;\n\t},\n\n\tgetDistance: function() {\n\t\treturn this._distance;\n\t},\n\n\tdivide: function() {\n\t\tvar curve = this.getCurve(),\n\t\t\tres = curve && curve.divideAtTime(this.getTime());\n\t\tif (res) {\n\t\t\tthis._setSegment(res._segment1);\n\t\t}\n\t\treturn res;\n\t},\n\n\tsplit: function() {\n\t\tvar curve = this.getCurve(),\n\t\t\tpath = curve._path,\n\t\t\tres = curve && curve.splitAtTime(this.getTime());\n\t\tif (res) {\n\t\t\tthis._setSegment(path.getLastSegment());\n\t\t}\n\t\treturn  res;\n\t},\n\n\tequals: function(loc, _ignoreOther) {\n\t\tvar res = this === loc;\n\t\tif (!res && loc instanceof CurveLocation) {\n\t\t\tvar c1 = this.getCurve(),\n\t\t\t\tc2 = loc.getCurve(),\n\t\t\t\tp1 = c1._path,\n\t\t\t\tp2 = c2._path;\n\t\t\tif (p1 === p2) {\n\t\t\t\tvar abs = Math.abs,\n\t\t\t\t\tepsilon = 1e-7,\n\t\t\t\t\tdiff = abs(this.getOffset() - loc.getOffset()),\n\t\t\t\t\ti1 = !_ignoreOther && this._intersection,\n\t\t\t\t\ti2 = !_ignoreOther && loc._intersection;\n\t\t\t\tres = (diff < epsilon\n\t\t\t\t\t\t|| p1 && abs(p1.getLength() - diff) < epsilon)\n\t\t\t\t\t&& (!i1 && !i2 || i1 && i2 && i1.equals(i2, true));\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t},\n\n\ttoString: function() {\n\t\tvar parts = [],\n\t\t\tpoint = this.getPoint(),\n\t\t\tf = Formatter.instance;\n\t\tif (point)\n\t\t\tparts.push('point: ' + point);\n\t\tvar index = this.getIndex();\n\t\tif (index != null)\n\t\t\tparts.push('index: ' + index);\n\t\tvar time = this.getTime();\n\t\tif (time != null)\n\t\t\tparts.push('time: ' + f.number(time));\n\t\tif (this._distance != null)\n\t\t\tparts.push('distance: ' + f.number(this._distance));\n\t\treturn '{ ' + parts.join(', ') + ' }';\n\t},\n\n\tisTouching: function() {\n\t\tvar inter = this._intersection;\n\t\tif (inter && this.getTangent().isCollinear(inter.getTangent())) {\n\t\t\tvar curve1 = this.getCurve(),\n\t\t\t\tcurve2 = inter.getCurve();\n\t\t\treturn !(curve1.isStraight() && curve2.isStraight()\n\t\t\t\t\t&& curve1.getLine().intersect(curve2.getLine()));\n\t\t}\n\t\treturn false;\n\t},\n\n\tisCrossing: function() {\n\t\tvar inter = this._intersection;\n\t\tif (!inter)\n\t\t\treturn false;\n\t\tvar t1 = this.getTime(),\n\t\t\tt2 = inter.getTime(),\n\t\t\ttMin = 1e-8,\n\t\t\ttMax = 1 - tMin,\n\t\t\tt1Inside = t1 >= tMin && t1 <= tMax,\n\t\t\tt2Inside = t2 >= tMin && t2 <= tMax;\n\t\tif (t1Inside && t2Inside)\n\t\t\treturn !this.isTouching();\n\t\tvar c2 = this.getCurve(),\n\t\t\tc1 = c2 && t1 < tMin ? c2.getPrevious() : c2,\n\t\t\tc4 = inter.getCurve(),\n\t\t\tc3 = c4 && t2 < tMin ? c4.getPrevious() : c4;\n\t\tif (t1 > tMax)\n\t\t\tc2 = c2.getNext();\n\t\tif (t2 > tMax)\n\t\t\tc4 = c4.getNext();\n\t\tif (!c1 || !c2 || !c3 || !c4)\n\t\t\treturn false;\n\n\t\tvar offsets = [];\n\n\t\tfunction addOffsets(curve, end) {\n\t\t\tvar v = curve.getValues(),\n\t\t\t\troots = Curve.classify(v).roots || Curve.getPeaks(v),\n\t\t\t\tcount = roots.length,\n\t\t\t\toffset = Curve.getLength(v,\n\t\t\t\t\tend && count ? roots[count - 1] : 0,\n\t\t\t\t\t!end && count ? roots[0] : 1);\n\t\t\toffsets.push(count ? offset : offset / 32);\n\t\t}\n\n\t\tfunction isInRange(angle, min, max) {\n\t\t\treturn min < max\n\t\t\t\t\t? angle > min && angle < max\n\t\t\t\t\t: angle > min || angle < max;\n\t\t}\n\n\t\tif (!t1Inside) {\n\t\t\taddOffsets(c1, true);\n\t\t\taddOffsets(c2, false);\n\t\t}\n\t\tif (!t2Inside) {\n\t\t\taddOffsets(c3, true);\n\t\t\taddOffsets(c4, false);\n\t\t}\n\t\tvar pt = this.getPoint(),\n\t\t\toffset = Math.min.apply(Math, offsets),\n\t\t\tv2 = t1Inside ? c2.getTangentAtTime(t1)\n\t\t\t\t\t: c2.getPointAt(offset).subtract(pt),\n\t\t\tv1 = t1Inside ? v2.negate()\n\t\t\t\t\t: c1.getPointAt(-offset).subtract(pt),\n\t\t\tv4 = t2Inside ? c4.getTangentAtTime(t2)\n\t\t\t\t\t: c4.getPointAt(offset).subtract(pt),\n\t\t\tv3 = t2Inside ? v4.negate()\n\t\t\t\t\t: c3.getPointAt(-offset).subtract(pt),\n\t\t\ta1 = v1.getAngle(),\n\t\t\ta2 = v2.getAngle(),\n\t\t\ta3 = v3.getAngle(),\n\t\t\ta4 = v4.getAngle();\n\t\treturn !!(t1Inside\n\t\t\t\t? (isInRange(a1, a3, a4) ^ isInRange(a2, a3, a4)) &&\n\t\t\t\t  (isInRange(a1, a4, a3) ^ isInRange(a2, a4, a3))\n\t\t\t\t: (isInRange(a3, a1, a2) ^ isInRange(a4, a1, a2)) &&\n\t\t\t\t  (isInRange(a3, a2, a1) ^ isInRange(a4, a2, a1)));\n\t},\n\n\thasOverlap: function() {\n\t\treturn !!this._overlap;\n\t}\n}, Base.each(Curve._evaluateMethods, function(name) {\n\tvar get = name + 'At';\n\tthis[name] = function() {\n\t\tvar curve = this.getCurve(),\n\t\t\ttime = this.getTime();\n\t\treturn time != null && curve && curve[get](time, true);\n\t};\n}, {\n\tpreserve: true\n}),\nnew function() {\n\n\tfunction insert(locations, loc, merge) {\n\t\tvar length = locations.length,\n\t\t\tl = 0,\n\t\t\tr = length - 1;\n\n\t\tfunction search(index, dir) {\n\t\t\tfor (var i = index + dir; i >= -1 && i <= length; i += dir) {\n\t\t\t\tvar loc2 = locations[((i % length) + length) % length];\n\t\t\t\tif (!loc.getPoint().isClose(loc2.getPoint(),\n\t\t\t\t\t\t1e-7))\n\t\t\t\t\tbreak;\n\t\t\t\tif (loc.equals(loc2))\n\t\t\t\t\treturn loc2;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\twhile (l <= r) {\n\t\t\tvar m = (l + r) >>> 1,\n\t\t\t\tloc2 = locations[m],\n\t\t\t\tfound;\n\t\t\tif (merge && (found = loc.equals(loc2) ? loc2\n\t\t\t\t\t: (search(m, -1) || search(m, 1)))) {\n\t\t\t\tif (loc._overlap) {\n\t\t\t\t\tfound._overlap = found._intersection._overlap = true;\n\t\t\t\t}\n\t\t\t\treturn found;\n\t\t\t}\n\t\tvar path1 = loc.getPath(),\n\t\t\tpath2 = loc2.getPath(),\n\t\t\tdiff = path1 !== path2\n\t\t\t\t? path1._id - path2._id\n\t\t\t\t: (loc.getIndex() + loc.getTime())\n\t\t\t\t- (loc2.getIndex() + loc2.getTime());\n\t\t\tif (diff < 0) {\n\t\t\t\tr = m - 1;\n\t\t\t} else {\n\t\t\t\tl = m + 1;\n\t\t\t}\n\t\t}\n\t\tlocations.splice(l, 0, loc);\n\t\treturn loc;\n\t}\n\n\treturn { statics: {\n\t\tinsert: insert,\n\n\t\texpand: function(locations) {\n\t\t\tvar expanded = locations.slice();\n\t\t\tfor (var i = locations.length - 1; i >= 0; i--) {\n\t\t\t\tinsert(expanded, locations[i]._intersection, false);\n\t\t\t}\n\t\t\treturn expanded;\n\t\t}\n\t}};\n});\n\nvar PathItem = Item.extend({\n\t_class: 'PathItem',\n\t_selectBounds: false,\n\t_canScaleStroke: true,\n\tbeans: true,\n\n\tinitialize: function PathItem() {\n\t},\n\n\tstatics: {\n\t\tcreate: function(arg) {\n\t\t\tvar data,\n\t\t\t\tsegments,\n\t\t\t\tcompound;\n\t\t\tif (Base.isPlainObject(arg)) {\n\t\t\t\tsegments = arg.segments;\n\t\t\t\tdata = arg.pathData;\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tsegments = arg;\n\t\t\t} else if (typeof arg === 'string') {\n\t\t\t\tdata = arg;\n\t\t\t}\n\t\t\tif (segments) {\n\t\t\t\tvar first = segments[0];\n\t\t\t\tcompound = first && Array.isArray(first[0]);\n\t\t\t} else if (data) {\n\t\t\t\tcompound = (data.match(/m/gi) || []).length > 1\n\t\t\t\t\t\t|| /z\\s*\\S+/i.test(data);\n\t\t\t}\n\t\t\tvar ctor = compound ? CompoundPath : Path;\n\t\t\treturn new ctor(arg);\n\t\t}\n\t},\n\n\t_asPathItem: function() {\n\t\treturn this;\n\t},\n\n\tisClockwise: function() {\n\t\treturn this.getArea() >= 0;\n\t},\n\n\tsetClockwise: function(clockwise) {\n\t\tif (this.isClockwise() != (clockwise = !!clockwise))\n\t\t\tthis.reverse();\n\t},\n\n\tsetPathData: function(data) {\n\n\t\tvar parts = data && data.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),\n\t\t\tcoords,\n\t\t\trelative = false,\n\t\t\tprevious,\n\t\t\tcontrol,\n\t\t\tcurrent = new Point(),\n\t\t\tstart = new Point();\n\n\t\tfunction getCoord(index, coord) {\n\t\t\tvar val = +coords[index];\n\t\t\tif (relative)\n\t\t\t\tval += current[coord];\n\t\t\treturn val;\n\t\t}\n\n\t\tfunction getPoint(index) {\n\t\t\treturn new Point(\n\t\t\t\tgetCoord(index, 'x'),\n\t\t\t\tgetCoord(index + 1, 'y')\n\t\t\t);\n\t\t}\n\n\t\tthis.clear();\n\n\t\tfor (var i = 0, l = parts && parts.length; i < l; i++) {\n\t\t\tvar part = parts[i],\n\t\t\t\tcommand = part[0],\n\t\t\t\tlower = command.toLowerCase();\n\t\t\tcoords = part.match(/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g);\n\t\t\tvar length = coords && coords.length;\n\t\t\trelative = command === lower;\n\t\t\tif (previous === 'z' && !/[mz]/.test(lower))\n\t\t\t\tthis.moveTo(current);\n\t\t\tswitch (lower) {\n\t\t\tcase 'm':\n\t\t\tcase 'l':\n\t\t\t\tvar move = lower === 'm';\n\t\t\t\tfor (var j = 0; j < length; j += 2) {\n\t\t\t\t\tthis[move ? 'moveTo' : 'lineTo'](current = getPoint(j));\n\t\t\t\t\tif (move) {\n\t\t\t\t\t\tstart = current;\n\t\t\t\t\t\tmove = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcontrol = current;\n\t\t\t\tbreak;\n\t\t\tcase 'h':\n\t\t\tcase 'v':\n\t\t\t\tvar coord = lower === 'h' ? 'x' : 'y';\n\t\t\t\tcurrent = current.clone();\n\t\t\t\tfor (var j = 0; j < length; j++) {\n\t\t\t\t\tcurrent[coord] = getCoord(j, coord);\n\t\t\t\t\tthis.lineTo(current);\n\t\t\t\t}\n\t\t\t\tcontrol = current;\n\t\t\t\tbreak;\n\t\t\tcase 'c':\n\t\t\t\tfor (var j = 0; j < length; j += 6) {\n\t\t\t\t\tthis.cubicCurveTo(\n\t\t\t\t\t\t\tgetPoint(j),\n\t\t\t\t\t\t\tcontrol = getPoint(j + 2),\n\t\t\t\t\t\t\tcurrent = getPoint(j + 4));\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 's':\n\t\t\t\tfor (var j = 0; j < length; j += 4) {\n\t\t\t\t\tthis.cubicCurveTo(\n\t\t\t\t\t\t\t/[cs]/.test(previous)\n\t\t\t\t\t\t\t\t\t? current.multiply(2).subtract(control)\n\t\t\t\t\t\t\t\t\t: current,\n\t\t\t\t\t\t\tcontrol = getPoint(j),\n\t\t\t\t\t\t\tcurrent = getPoint(j + 2));\n\t\t\t\t\tprevious = lower;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'q':\n\t\t\t\tfor (var j = 0; j < length; j += 4) {\n\t\t\t\t\tthis.quadraticCurveTo(\n\t\t\t\t\t\t\tcontrol = getPoint(j),\n\t\t\t\t\t\t\tcurrent = getPoint(j + 2));\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 't':\n\t\t\t\tfor (var j = 0; j < length; j += 2) {\n\t\t\t\t\tthis.quadraticCurveTo(\n\t\t\t\t\t\t\tcontrol = (/[qt]/.test(previous)\n\t\t\t\t\t\t\t\t\t? current.multiply(2).subtract(control)\n\t\t\t\t\t\t\t\t\t: current),\n\t\t\t\t\t\t\tcurrent = getPoint(j));\n\t\t\t\t\tprevious = lower;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'a':\n\t\t\t\tfor (var j = 0; j < length; j += 7) {\n\t\t\t\t\tthis.arcTo(current = getPoint(j + 5),\n\t\t\t\t\t\t\tnew Size(+coords[j], +coords[j + 1]),\n\t\t\t\t\t\t\t+coords[j + 2], +coords[j + 4], +coords[j + 3]);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'z':\n\t\t\t\tthis.closePath(1e-12);\n\t\t\t\tcurrent = start;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tprevious = lower;\n\t\t}\n\t},\n\n\t_canComposite: function() {\n\t\treturn !(this.hasFill() && this.hasStroke());\n\t},\n\n\t_contains: function(point) {\n\t\tvar winding = point.isInside(\n\t\t\t\tthis.getBounds({ internal: true, handle: true }))\n\t\t\t\t\t? this._getWinding(point)\n\t\t\t\t\t: {};\n\t\treturn winding.onPath || !!(this.getFillRule() === 'evenodd'\n\t\t\t\t? winding.windingL & 1 || winding.windingR & 1\n\t\t\t\t: winding.winding);\n\t},\n\n\tgetIntersections: function(path, include, _matrix, _returnFirst) {\n\t\tvar self = this === path || !path,\n\t\t\tmatrix1 = this._matrix._orNullIfIdentity(),\n\t\t\tmatrix2 = self ? matrix1\n\t\t\t\t: (_matrix || path._matrix)._orNullIfIdentity();\n\t\treturn self || this.getBounds(matrix1).intersects(\n\t\t\t\tpath.getBounds(matrix2), 1e-12)\n\t\t\t\t? Curve.getIntersections(\n\t\t\t\t\t\tthis.getCurves(), !self && path.getCurves(), include,\n\t\t\t\t\t\tmatrix1, matrix2, _returnFirst)\n\t\t\t\t: [];\n\t},\n\n\tgetCrossings: function(path) {\n\t\treturn this.getIntersections(path, function(inter) {\n\t\t\treturn inter.isCrossing();\n\t\t});\n\t},\n\n\tgetNearestLocation: function() {\n\t\tvar point = Point.read(arguments),\n\t\t\tcurves = this.getCurves(),\n\t\t\tminDist = Infinity,\n\t\t\tminLoc = null;\n\t\tfor (var i = 0, l = curves.length; i < l; i++) {\n\t\t\tvar loc = curves[i].getNearestLocation(point);\n\t\t\tif (loc._distance < minDist) {\n\t\t\t\tminDist = loc._distance;\n\t\t\t\tminLoc = loc;\n\t\t\t}\n\t\t}\n\t\treturn minLoc;\n\t},\n\n\tgetNearestPoint: function() {\n\t\tvar loc = this.getNearestLocation.apply(this, arguments);\n\t\treturn loc ? loc.getPoint() : loc;\n\t},\n\n\tinterpolate: function(from, to, factor) {\n\t\tvar isPath = !this._children,\n\t\t\tname = isPath ? '_segments' : '_children',\n\t\t\titemsFrom = from[name],\n\t\t\titemsTo = to[name],\n\t\t\titems = this[name];\n\t\tif (!itemsFrom || !itemsTo || itemsFrom.length !== itemsTo.length) {\n\t\t\tthrow new Error('Invalid operands in interpolate() call: ' +\n\t\t\t\t\tfrom + ', ' + to);\n\t\t}\n\t\tvar current = items.length,\n\t\t\tlength = itemsTo.length;\n\t\tif (current < length) {\n\t\t\tvar ctor = isPath ? Segment : Path;\n\t\t\tfor (var i = current; i < length; i++) {\n\t\t\t\tthis.add(new ctor());\n\t\t\t}\n\t\t} else if (current > length) {\n\t\t\tthis[isPath ? 'removeSegments' : 'removeChildren'](length, current);\n\t\t}\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\titems[i].interpolate(itemsFrom[i], itemsTo[i], factor);\n\t\t}\n\t\tif (isPath) {\n\t\t\tthis.setClosed(from._closed);\n\t\t\tthis._changed(9);\n\t\t}\n\t},\n\n\tcompare: function(path) {\n\t\tvar ok = false;\n\t\tif (path) {\n\t\t\tvar paths1 = this._children || [this],\n\t\t\t\tpaths2 = path._children ? path._children.slice() : [path],\n\t\t\t\tlength1 = paths1.length,\n\t\t\t\tlength2 = paths2.length,\n\t\t\t\tmatched = [],\n\t\t\t\tcount = 0;\n\t\t\tok = true;\n\t\t\tvar boundsOverlaps = CollisionDetection.findItemBoundsCollisions(paths1, paths2, Numerical.GEOMETRIC_EPSILON);\n\t\t\tfor (var i1 = length1 - 1; i1 >= 0 && ok; i1--) {\n\t\t\t\tvar path1 = paths1[i1];\n\t\t\t\tok = false;\n\t\t\t\tvar pathBoundsOverlaps = boundsOverlaps[i1];\n\t\t\t\tif (pathBoundsOverlaps) {\n\t\t\t\t\tfor (var i2 = pathBoundsOverlaps.length - 1; i2 >= 0 && !ok; i2--) {\n\t\t\t\t\t\tif (path1.compare(paths2[pathBoundsOverlaps[i2]])) {\n\t\t\t\t\t\t\tif (!matched[pathBoundsOverlaps[i2]]) {\n\t\t\t\t\t\t\t\tmatched[pathBoundsOverlaps[i2]] = true;\n\t\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tok = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tok = ok && count === length2;\n\t\t}\n\t\treturn ok;\n\t},\n\n});\n\nvar Path = PathItem.extend({\n\t_class: 'Path',\n\t_serializeFields: {\n\t\tsegments: [],\n\t\tclosed: false\n\t},\n\n\tinitialize: function Path(arg) {\n\t\tthis._closed = false;\n\t\tthis._segments = [];\n\t\tthis._version = 0;\n\t\tvar args = arguments,\n\t\t\tsegments = Array.isArray(arg)\n\t\t\t? typeof arg[0] === 'object'\n\t\t\t\t? arg\n\t\t\t\t: args\n\t\t\t: arg && (arg.size === undefined && (arg.x !== undefined\n\t\t\t\t\t|| arg.point !== undefined))\n\t\t\t\t? args\n\t\t\t\t: null;\n\t\tif (segments && segments.length > 0) {\n\t\t\tthis.setSegments(segments);\n\t\t} else {\n\t\t\tthis._curves = undefined;\n\t\t\tthis._segmentSelection = 0;\n\t\t\tif (!segments && typeof arg === 'string') {\n\t\t\t\tthis.setPathData(arg);\n\t\t\t\targ = null;\n\t\t\t}\n\t\t}\n\t\tthis._initialize(!segments && arg);\n\t},\n\n\t_equals: function(item) {\n\t\treturn this._closed === item._closed\n\t\t\t\t&& Base.equals(this._segments, item._segments);\n\t},\n\n\tcopyContent: function(source) {\n\t\tthis.setSegments(source._segments);\n\t\tthis._closed = source._closed;\n\t},\n\n\t_changed: function _changed(flags) {\n\t\t_changed.base.call(this, flags);\n\t\tif (flags & 8) {\n\t\t\tthis._length = this._area = undefined;\n\t\t\tif (flags & 32) {\n\t\t\t\tthis._version++;\n\t\t\t} else if (this._curves) {\n\t\t\t   for (var i = 0, l = this._curves.length; i < l; i++)\n\t\t\t\t\tthis._curves[i]._changed();\n\t\t\t}\n\t\t} else if (flags & 64) {\n\t\t\tthis._bounds = undefined;\n\t\t}\n\t},\n\n\tgetStyle: function() {\n\t\tvar parent = this._parent;\n\t\treturn (parent instanceof CompoundPath ? parent : this)._style;\n\t},\n\n\tgetSegments: function() {\n\t\treturn this._segments;\n\t},\n\n\tsetSegments: function(segments) {\n\t\tvar fullySelected = this.isFullySelected(),\n\t\t\tlength = segments && segments.length;\n\t\tthis._segments.length = 0;\n\t\tthis._segmentSelection = 0;\n\t\tthis._curves = undefined;\n\t\tif (length) {\n\t\t\tvar last = segments[length - 1];\n\t\t\tif (typeof last === 'boolean') {\n\t\t\t\tthis.setClosed(last);\n\t\t\t\tlength--;\n\t\t\t}\n\t\t\tthis._add(Segment.readList(segments, 0, {}, length));\n\t\t}\n\t\tif (fullySelected)\n\t\t\tthis.setFullySelected(true);\n\t},\n\n\tgetFirstSegment: function() {\n\t\treturn this._segments[0];\n\t},\n\n\tgetLastSegment: function() {\n\t\treturn this._segments[this._segments.length - 1];\n\t},\n\n\tgetCurves: function() {\n\t\tvar curves = this._curves,\n\t\t\tsegments = this._segments;\n\t\tif (!curves) {\n\t\t\tvar length = this._countCurves();\n\t\t\tcurves = this._curves = new Array(length);\n\t\t\tfor (var i = 0; i < length; i++)\n\t\t\t\tcurves[i] = new Curve(this, segments[i],\n\t\t\t\t\tsegments[i + 1] || segments[0]);\n\t\t}\n\t\treturn curves;\n\t},\n\n\tgetFirstCurve: function() {\n\t\treturn this.getCurves()[0];\n\t},\n\n\tgetLastCurve: function() {\n\t\tvar curves = this.getCurves();\n\t\treturn curves[curves.length - 1];\n\t},\n\n\tisClosed: function() {\n\t\treturn this._closed;\n\t},\n\n\tsetClosed: function(closed) {\n\t\tif (this._closed != (closed = !!closed)) {\n\t\t\tthis._closed = closed;\n\t\t\tif (this._curves) {\n\t\t\t\tvar length = this._curves.length = this._countCurves();\n\t\t\t\tif (closed)\n\t\t\t\t\tthis._curves[length - 1] = new Curve(this,\n\t\t\t\t\t\tthis._segments[length - 1], this._segments[0]);\n\t\t\t}\n\t\t\tthis._changed(41);\n\t\t}\n\t}\n}, {\n\tbeans: true,\n\n\tgetPathData: function(_matrix, _precision) {\n\t\tvar segments = this._segments,\n\t\t\tlength = segments.length,\n\t\t\tf = new Formatter(_precision),\n\t\t\tcoords = new Array(6),\n\t\t\tfirst = true,\n\t\t\tcurX, curY,\n\t\t\tprevX, prevY,\n\t\t\tinX, inY,\n\t\t\toutX, outY,\n\t\t\tparts = [];\n\n\t\tfunction addSegment(segment, skipLine) {\n\t\t\tsegment._transformCoordinates(_matrix, coords);\n\t\t\tcurX = coords[0];\n\t\t\tcurY = coords[1];\n\t\t\tif (first) {\n\t\t\t\tparts.push('M' + f.pair(curX, curY));\n\t\t\t\tfirst = false;\n\t\t\t} else {\n\t\t\t\tinX = coords[2];\n\t\t\t\tinY = coords[3];\n\t\t\t\tif (inX === curX && inY === curY\n\t\t\t\t\t\t&& outX === prevX && outY === prevY) {\n\t\t\t\t\tif (!skipLine) {\n\t\t\t\t\t\tvar dx = curX - prevX,\n\t\t\t\t\t\t\tdy = curY - prevY;\n\t\t\t\t\t\tparts.push(\n\t\t\t\t\t\t\t  dx === 0 ? 'v' + f.number(dy)\n\t\t\t\t\t\t\t: dy === 0 ? 'h' + f.number(dx)\n\t\t\t\t\t\t\t: 'l' + f.pair(dx, dy));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tparts.push('c' + f.pair(outX - prevX, outY - prevY)\n\t\t\t\t\t\t\t + ' ' + f.pair( inX - prevX,  inY - prevY)\n\t\t\t\t\t\t\t + ' ' + f.pair(curX - prevX, curY - prevY));\n\t\t\t\t}\n\t\t\t}\n\t\t\tprevX = curX;\n\t\t\tprevY = curY;\n\t\t\toutX = coords[4];\n\t\t\toutY = coords[5];\n\t\t}\n\n\t\tif (!length)\n\t\t\treturn '';\n\n\t\tfor (var i = 0; i < length; i++)\n\t\t\taddSegment(segments[i]);\n\t\tif (this._closed && length > 0) {\n\t\t\taddSegment(segments[0], true);\n\t\t\tparts.push('z');\n\t\t}\n\t\treturn parts.join('');\n\t},\n\n\tisEmpty: function() {\n\t\treturn !this._segments.length;\n\t},\n\n\t_transformContent: function(matrix) {\n\t\tvar segments = this._segments,\n\t\t\tcoords = new Array(6);\n\t\tfor (var i = 0, l = segments.length; i < l; i++)\n\t\t\tsegments[i]._transformCoordinates(matrix, coords, true);\n\t\treturn true;\n\t},\n\n\t_add: function(segs, index) {\n\t\tvar segments = this._segments,\n\t\t\tcurves = this._curves,\n\t\t\tamount = segs.length,\n\t\t\tappend = index == null,\n\t\t\tindex = append ? segments.length : index;\n\t\tfor (var i = 0; i < amount; i++) {\n\t\t\tvar segment = segs[i];\n\t\t\tif (segment._path)\n\t\t\t\tsegment = segs[i] = segment.clone();\n\t\t\tsegment._path = this;\n\t\t\tsegment._index = index + i;\n\t\t\tif (segment._selection)\n\t\t\t\tthis._updateSelection(segment, 0, segment._selection);\n\t\t}\n\t\tif (append) {\n\t\t\tBase.push(segments, segs);\n\t\t} else {\n\t\t\tsegments.splice.apply(segments, [index, 0].concat(segs));\n\t\t\tfor (var i = index + amount, l = segments.length; i < l; i++)\n\t\t\t\tsegments[i]._index = i;\n\t\t}\n\t\tif (curves) {\n\t\t\tvar total = this._countCurves(),\n\t\t\t\tstart = index > 0 && index + amount - 1 === total ? index - 1\n\t\t\t\t\t: index,\n\t\t\t\tinsert = start,\n\t\t\t\tend = Math.min(start + amount, total);\n\t\t\tif (segs._curves) {\n\t\t\t\tcurves.splice.apply(curves, [start, 0].concat(segs._curves));\n\t\t\t\tinsert += segs._curves.length;\n\t\t\t}\n\t\t\tfor (var i = insert; i < end; i++)\n\t\t\t\tcurves.splice(i, 0, new Curve(this, null, null));\n\t\t\tthis._adjustCurves(start, end);\n\t\t}\n\t\tthis._changed(41);\n\t\treturn segs;\n\t},\n\n\t_adjustCurves: function(start, end) {\n\t\tvar segments = this._segments,\n\t\t\tcurves = this._curves,\n\t\t\tcurve;\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tcurve = curves[i];\n\t\t\tcurve._path = this;\n\t\t\tcurve._segment1 = segments[i];\n\t\t\tcurve._segment2 = segments[i + 1] || segments[0];\n\t\t\tcurve._changed();\n\t\t}\n\t\tif (curve = curves[this._closed && !start ? segments.length - 1\n\t\t\t\t: start - 1]) {\n\t\t\tcurve._segment2 = segments[start] || segments[0];\n\t\t\tcurve._changed();\n\t\t}\n\t\tif (curve = curves[end]) {\n\t\t\tcurve._segment1 = segments[end];\n\t\t\tcurve._changed();\n\t\t}\n\t},\n\n\t_countCurves: function() {\n\t\tvar length = this._segments.length;\n\t\treturn !this._closed && length > 0 ? length - 1 : length;\n\t},\n\n\tadd: function(segment1 ) {\n\t\tvar args = arguments;\n\t\treturn args.length > 1 && typeof segment1 !== 'number'\n\t\t\t? this._add(Segment.readList(args))\n\t\t\t: this._add([ Segment.read(args) ])[0];\n\t},\n\n\tinsert: function(index, segment1 ) {\n\t\tvar args = arguments;\n\t\treturn args.length > 2 && typeof segment1 !== 'number'\n\t\t\t? this._add(Segment.readList(args, 1), index)\n\t\t\t: this._add([ Segment.read(args, 1) ], index)[0];\n\t},\n\n\taddSegment: function() {\n\t\treturn this._add([ Segment.read(arguments) ])[0];\n\t},\n\n\tinsertSegment: function(index ) {\n\t\treturn this._add([ Segment.read(arguments, 1) ], index)[0];\n\t},\n\n\taddSegments: function(segments) {\n\t\treturn this._add(Segment.readList(segments));\n\t},\n\n\tinsertSegments: function(index, segments) {\n\t\treturn this._add(Segment.readList(segments), index);\n\t},\n\n\tremoveSegment: function(index) {\n\t\treturn this.removeSegments(index, index + 1)[0] || null;\n\t},\n\n\tremoveSegments: function(start, end, _includeCurves) {\n\t\tstart = start || 0;\n\t\tend = Base.pick(end, this._segments.length);\n\t\tvar segments = this._segments,\n\t\t\tcurves = this._curves,\n\t\t\tcount = segments.length,\n\t\t\tremoved = segments.splice(start, end - start),\n\t\t\tamount = removed.length;\n\t\tif (!amount)\n\t\t\treturn removed;\n\t\tfor (var i = 0; i < amount; i++) {\n\t\t\tvar segment = removed[i];\n\t\t\tif (segment._selection)\n\t\t\t\tthis._updateSelection(segment, segment._selection, 0);\n\t\t\tsegment._index = segment._path = null;\n\t\t}\n\t\tfor (var i = start, l = segments.length; i < l; i++)\n\t\t\tsegments[i]._index = i;\n\t\tif (curves) {\n\t\t\tvar index = start > 0 && end === count + (this._closed ? 1 : 0)\n\t\t\t\t\t? start - 1\n\t\t\t\t\t: start,\n\t\t\t\tcurves = curves.splice(index, amount);\n\t\t\tfor (var i = curves.length - 1; i >= 0; i--)\n\t\t\t\tcurves[i]._path = null;\n\t\t\tif (_includeCurves)\n\t\t\t\tremoved._curves = curves.slice(1);\n\t\t\tthis._adjustCurves(index, index);\n\t\t}\n\t\tthis._changed(41);\n\t\treturn removed;\n\t},\n\n\tclear: '#removeSegments',\n\n\thasHandles: function() {\n\t\tvar segments = this._segments;\n\t\tfor (var i = 0, l = segments.length; i < l; i++) {\n\t\t\tif (segments[i].hasHandles())\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tclearHandles: function() {\n\t\tvar segments = this._segments;\n\t\tfor (var i = 0, l = segments.length; i < l; i++)\n\t\t\tsegments[i].clearHandles();\n\t},\n\n\tgetLength: function() {\n\t\tif (this._length == null) {\n\t\t\tvar curves = this.getCurves(),\n\t\t\t\tlength = 0;\n\t\t\tfor (var i = 0, l = curves.length; i < l; i++)\n\t\t\t\tlength += curves[i].getLength();\n\t\t\tthis._length = length;\n\t\t}\n\t\treturn this._length;\n\t},\n\n\tgetArea: function() {\n\t\tvar area = this._area;\n\t\tif (area == null) {\n\t\t\tvar segments = this._segments,\n\t\t\t\tclosed = this._closed;\n\t\t\tarea = 0;\n\t\t\tfor (var i = 0, l = segments.length; i < l; i++) {\n\t\t\t\tvar last = i + 1 === l;\n\t\t\t\tarea += Curve.getArea(Curve.getValues(\n\t\t\t\t\t\tsegments[i], segments[last ? 0 : i + 1],\n\t\t\t\t\t\tnull, last && !closed));\n\t\t\t}\n\t\t\tthis._area = area;\n\t\t}\n\t\treturn area;\n\t},\n\n\tisFullySelected: function() {\n\t\tvar length = this._segments.length;\n\t\treturn this.isSelected() && length > 0 && this._segmentSelection\n\t\t\t\t=== length * 7;\n\t},\n\n\tsetFullySelected: function(selected) {\n\t\tif (selected)\n\t\t\tthis._selectSegments(true);\n\t\tthis.setSelected(selected);\n\t},\n\n\tsetSelection: function setSelection(selection) {\n\t\tif (!(selection & 1))\n\t\t\tthis._selectSegments(false);\n\t\tsetSelection.base.call(this, selection);\n\t},\n\n\t_selectSegments: function(selected) {\n\t\tvar segments = this._segments,\n\t\t\tlength = segments.length,\n\t\t\tselection = selected ? 7 : 0;\n\t\tthis._segmentSelection = selection * length;\n\t\tfor (var i = 0; i < length; i++)\n\t\t\tsegments[i]._selection = selection;\n\t},\n\n\t_updateSelection: function(segment, oldSelection, newSelection) {\n\t\tsegment._selection = newSelection;\n\t\tvar selection = this._segmentSelection += newSelection - oldSelection;\n\t\tif (selection > 0)\n\t\t\tthis.setSelected(true);\n\t},\n\n\tdivideAt: function(location) {\n\t\tvar loc = this.getLocationAt(location),\n\t\t\tcurve;\n\t\treturn loc && (curve = loc.getCurve().divideAt(loc.getCurveOffset()))\n\t\t\t\t? curve._segment1\n\t\t\t\t: null;\n\t},\n\n\tsplitAt: function(location) {\n\t\tvar loc = this.getLocationAt(location),\n\t\t\tindex = loc && loc.index,\n\t\t\ttime = loc && loc.time,\n\t\t\ttMin = 1e-8,\n\t\t\ttMax = 1 - tMin;\n\t\tif (time > tMax) {\n\t\t\tindex++;\n\t\t\ttime = 0;\n\t\t}\n\t\tvar curves = this.getCurves();\n\t\tif (index >= 0 && index < curves.length) {\n\t\t\tif (time >= tMin) {\n\t\t\t\tcurves[index++].divideAtTime(time);\n\t\t\t}\n\t\t\tvar segs = this.removeSegments(index, this._segments.length, true),\n\t\t\t\tpath;\n\t\t\tif (this._closed) {\n\t\t\t\tthis.setClosed(false);\n\t\t\t\tpath = this;\n\t\t\t} else {\n\t\t\t\tpath = new Path(Item.NO_INSERT);\n\t\t\t\tpath.insertAbove(this);\n\t\t\t\tpath.copyAttributes(this);\n\t\t\t}\n\t\t\tpath._add(segs, 0);\n\t\t\tthis.addSegment(segs[0]);\n\t\t\treturn path;\n\t\t}\n\t\treturn null;\n\t},\n\n\tsplit: function(index, time) {\n\t\tvar curve,\n\t\t\tlocation = time === undefined ? index\n\t\t\t\t: (curve = this.getCurves()[index])\n\t\t\t\t\t&& curve.getLocationAtTime(time);\n\t\treturn location != null ? this.splitAt(location) : null;\n\t},\n\n\tjoin: function(path, tolerance) {\n\t\tvar epsilon = tolerance || 0;\n\t\tif (path && path !== this) {\n\t\t\tvar segments = path._segments,\n\t\t\t\tlast1 = this.getLastSegment(),\n\t\t\t\tlast2 = path.getLastSegment();\n\t\t\tif (!last2)\n\t\t\t\treturn this;\n\t\t\tif (last1 && last1._point.isClose(last2._point, epsilon))\n\t\t\t\tpath.reverse();\n\t\t\tvar first2 = path.getFirstSegment();\n\t\t\tif (last1 && last1._point.isClose(first2._point, epsilon)) {\n\t\t\t\tlast1.setHandleOut(first2._handleOut);\n\t\t\t\tthis._add(segments.slice(1));\n\t\t\t} else {\n\t\t\t\tvar first1 = this.getFirstSegment();\n\t\t\t\tif (first1 && first1._point.isClose(first2._point, epsilon))\n\t\t\t\t\tpath.reverse();\n\t\t\t\tlast2 = path.getLastSegment();\n\t\t\t\tif (first1 && first1._point.isClose(last2._point, epsilon)) {\n\t\t\t\t\tfirst1.setHandleIn(last2._handleIn);\n\t\t\t\t\tthis._add(segments.slice(0, segments.length - 1), 0);\n\t\t\t\t} else {\n\t\t\t\t\tthis._add(segments.slice());\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (path._closed)\n\t\t\t\tthis._add([segments[0]]);\n\t\t\tpath.remove();\n\t\t}\n\t\tvar first = this.getFirstSegment(),\n\t\t\tlast = this.getLastSegment();\n\t\tif (first !== last && first._point.isClose(last._point, epsilon)) {\n\t\t\tfirst.setHandleIn(last._handleIn);\n\t\t\tlast.remove();\n\t\t\tthis.setClosed(true);\n\t\t}\n\t\treturn this;\n\t},\n\n\treduce: function(options) {\n\t\tvar curves = this.getCurves(),\n\t\t\tsimplify = options && options.simplify,\n\t\t\ttolerance = simplify ? 1e-7 : 0;\n\t\tfor (var i = curves.length - 1; i >= 0; i--) {\n\t\t\tvar curve = curves[i];\n\t\t\tif (!curve.hasHandles() && (!curve.hasLength(tolerance)\n\t\t\t\t\t|| simplify && curve.isCollinear(curve.getNext())))\n\t\t\t\tcurve.remove();\n\t\t}\n\t\treturn this;\n\t},\n\n\treverse: function() {\n\t\tthis._segments.reverse();\n\t\tfor (var i = 0, l = this._segments.length; i < l; i++) {\n\t\t\tvar segment = this._segments[i];\n\t\t\tvar handleIn = segment._handleIn;\n\t\t\tsegment._handleIn = segment._handleOut;\n\t\t\tsegment._handleOut = handleIn;\n\t\t\tsegment._index = i;\n\t\t}\n\t\tthis._curves = null;\n\t\tthis._changed(9);\n\t},\n\n\tflatten: function(flatness) {\n\t\tvar flattener = new PathFlattener(this, flatness || 0.25, 256, true),\n\t\t\tparts = flattener.parts,\n\t\t\tlength = parts.length,\n\t\t\tsegments = [];\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tsegments.push(new Segment(parts[i].curve.slice(0, 2)));\n\t\t}\n\t\tif (!this._closed && length > 0) {\n\t\t\tsegments.push(new Segment(parts[length - 1].curve.slice(6)));\n\t\t}\n\t\tthis.setSegments(segments);\n\t},\n\n\tsimplify: function(tolerance) {\n\t\tvar segments = new PathFitter(this).fit(tolerance || 2.5);\n\t\tif (segments)\n\t\t\tthis.setSegments(segments);\n\t\treturn !!segments;\n\t},\n\n\tsmooth: function(options) {\n\t\tvar that = this,\n\t\t\topts = options || {},\n\t\t\ttype = opts.type || 'asymmetric',\n\t\t\tsegments = this._segments,\n\t\t\tlength = segments.length,\n\t\t\tclosed = this._closed;\n\n\t\tfunction getIndex(value, _default) {\n\t\t\tvar index = value && value.index;\n\t\t\tif (index != null) {\n\t\t\t\tvar path = value.path;\n\t\t\t\tif (path && path !== that)\n\t\t\t\t\tthrow new Error(value._class + ' ' + index + ' of ' + path\n\t\t\t\t\t\t\t+ ' is not part of ' + that);\n\t\t\t\tif (_default && value instanceof Curve)\n\t\t\t\t\tindex++;\n\t\t\t} else {\n\t\t\t\tindex = typeof value === 'number' ? value : _default;\n\t\t\t}\n\t\t\treturn Math.min(index < 0 && closed\n\t\t\t\t\t? index % length\n\t\t\t\t\t: index < 0 ? index + length : index, length - 1);\n\t\t}\n\n\t\tvar loop = closed && opts.from === undefined && opts.to === undefined,\n\t\t\tfrom = getIndex(opts.from, 0),\n\t\t\tto = getIndex(opts.to, length - 1);\n\n\t\tif (from > to) {\n\t\t\tif (closed) {\n\t\t\t\tfrom -= length;\n\t\t\t} else {\n\t\t\t\tvar tmp = from;\n\t\t\t\tfrom = to;\n\t\t\t\tto = tmp;\n\t\t\t}\n\t\t}\n\t\tif (/^(?:asymmetric|continuous)$/.test(type)) {\n\t\t\tvar asymmetric = type === 'asymmetric',\n\t\t\t\tmin = Math.min,\n\t\t\t\tamount = to - from + 1,\n\t\t\t\tn = amount - 1,\n\t\t\t\tpadding = loop ? min(amount, 4) : 1,\n\t\t\t\tpaddingLeft = padding,\n\t\t\t\tpaddingRight = padding,\n\t\t\t\tknots = [];\n\t\t\tif (!closed) {\n\t\t\t\tpaddingLeft = min(1, from);\n\t\t\t\tpaddingRight = min(1, length - to - 1);\n\t\t\t}\n\t\t\tn += paddingLeft + paddingRight;\n\t\t\tif (n <= 1)\n\t\t\t\treturn;\n\t\t\tfor (var i = 0, j = from - paddingLeft; i <= n; i++, j++) {\n\t\t\t\tknots[i] = segments[(j < 0 ? j + length : j) % length]._point;\n\t\t\t}\n\n\t\t\tvar x = knots[0]._x + 2 * knots[1]._x,\n\t\t\t\ty = knots[0]._y + 2 * knots[1]._y,\n\t\t\t\tf = 2,\n\t\t\t\tn_1 = n - 1,\n\t\t\t\trx = [x],\n\t\t\t\try = [y],\n\t\t\t\trf = [f],\n\t\t\t\tpx = [],\n\t\t\t\tpy = [];\n\t\t\tfor (var i = 1; i < n; i++) {\n\t\t\t\tvar internal = i < n_1,\n\t\t\t\t\ta = internal ? 1 : asymmetric ? 1 : 2,\n\t\t\t\t\tb = internal ? 4 : asymmetric ? 2 : 7,\n\t\t\t\t\tu = internal ? 4 : asymmetric ? 3 : 8,\n\t\t\t\t\tv = internal ? 2 : asymmetric ? 0 : 1,\n\t\t\t\t\tm = a / f;\n\t\t\t\tf = rf[i] = b - m;\n\t\t\t\tx = rx[i] = u * knots[i]._x + v * knots[i + 1]._x - m * x;\n\t\t\t\ty = ry[i] = u * knots[i]._y + v * knots[i + 1]._y - m * y;\n\t\t\t}\n\n\t\t\tpx[n_1] = rx[n_1] / rf[n_1];\n\t\t\tpy[n_1] = ry[n_1] / rf[n_1];\n\t\t\tfor (var i = n - 2; i >= 0; i--) {\n\t\t\t\tpx[i] = (rx[i] - px[i + 1]) / rf[i];\n\t\t\t\tpy[i] = (ry[i] - py[i + 1]) / rf[i];\n\t\t\t}\n\t\t\tpx[n] = (3 * knots[n]._x - px[n_1]) / 2;\n\t\t\tpy[n] = (3 * knots[n]._y - py[n_1]) / 2;\n\n\t\t\tfor (var i = paddingLeft, max = n - paddingRight, j = from;\n\t\t\t\t\ti <= max; i++, j++) {\n\t\t\t\tvar segment = segments[j < 0 ? j + length : j],\n\t\t\t\t\tpt = segment._point,\n\t\t\t\t\thx = px[i] - pt._x,\n\t\t\t\t\thy = py[i] - pt._y;\n\t\t\t\tif (loop || i < max)\n\t\t\t\t\tsegment.setHandleOut(hx, hy);\n\t\t\t\tif (loop || i > paddingLeft)\n\t\t\t\t\tsegment.setHandleIn(-hx, -hy);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var i = from; i <= to; i++) {\n\t\t\t\tsegments[i < 0 ? i + length : i].smooth(opts,\n\t\t\t\t\t\t!loop && i === from, !loop && i === to);\n\t\t\t}\n\t\t}\n\t},\n\n\ttoShape: function(insert) {\n\t\tif (!this._closed)\n\t\t\treturn null;\n\n\t\tvar segments = this._segments,\n\t\t\ttype,\n\t\t\tsize,\n\t\t\tradius,\n\t\t\ttopCenter;\n\n\t\tfunction isCollinear(i, j) {\n\t\t\tvar seg1 = segments[i],\n\t\t\t\tseg2 = seg1.getNext(),\n\t\t\t\tseg3 = segments[j],\n\t\t\t\tseg4 = seg3.getNext();\n\t\t\treturn seg1._handleOut.isZero() && seg2._handleIn.isZero()\n\t\t\t\t\t&& seg3._handleOut.isZero() && seg4._handleIn.isZero()\n\t\t\t\t\t&& seg2._point.subtract(seg1._point).isCollinear(\n\t\t\t\t\t\tseg4._point.subtract(seg3._point));\n\t\t}\n\n\t\tfunction isOrthogonal(i) {\n\t\t\tvar seg2 = segments[i],\n\t\t\t\tseg1 = seg2.getPrevious(),\n\t\t\t\tseg3 = seg2.getNext();\n\t\t\treturn seg1._handleOut.isZero() && seg2._handleIn.isZero()\n\t\t\t\t\t&& seg2._handleOut.isZero() && seg3._handleIn.isZero()\n\t\t\t\t\t&& seg2._point.subtract(seg1._point).isOrthogonal(\n\t\t\t\t\t\tseg3._point.subtract(seg2._point));\n\t\t}\n\n\t\tfunction isArc(i) {\n\t\t\tvar seg1 = segments[i],\n\t\t\t\tseg2 = seg1.getNext(),\n\t\t\t\thandle1 = seg1._handleOut,\n\t\t\t\thandle2 = seg2._handleIn,\n\t\t\t\tkappa = 0.5522847498307936;\n\t\t\tif (handle1.isOrthogonal(handle2)) {\n\t\t\t\tvar pt1 = seg1._point,\n\t\t\t\t\tpt2 = seg2._point,\n\t\t\t\t\tcorner = new Line(pt1, handle1, true).intersect(\n\t\t\t\t\t\t\tnew Line(pt2, handle2, true), true);\n\t\t\t\treturn corner && Numerical.isZero(handle1.getLength() /\n\t\t\t\t\t\tcorner.subtract(pt1).getLength() - kappa)\n\t\t\t\t\t&& Numerical.isZero(handle2.getLength() /\n\t\t\t\t\t\tcorner.subtract(pt2).getLength() - kappa);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tfunction getDistance(i, j) {\n\t\t\treturn segments[i]._point.getDistance(segments[j]._point);\n\t\t}\n\n\t\tif (!this.hasHandles() && segments.length === 4\n\t\t\t\t&& isCollinear(0, 2) && isCollinear(1, 3) && isOrthogonal(1)) {\n\t\t\ttype = Shape.Rectangle;\n\t\t\tsize = new Size(getDistance(0, 3), getDistance(0, 1));\n\t\t\ttopCenter = segments[1]._point.add(segments[2]._point).divide(2);\n\t\t} else if (segments.length === 8 && isArc(0) && isArc(2) && isArc(4)\n\t\t\t\t&& isArc(6) && isCollinear(1, 5) && isCollinear(3, 7)) {\n\t\t\ttype = Shape.Rectangle;\n\t\t\tsize = new Size(getDistance(1, 6), getDistance(0, 3));\n\t\t\tradius = size.subtract(new Size(getDistance(0, 7),\n\t\t\t\t\tgetDistance(1, 2))).divide(2);\n\t\t\ttopCenter = segments[3]._point.add(segments[4]._point).divide(2);\n\t\t} else if (segments.length === 4\n\t\t\t\t&& isArc(0) && isArc(1) && isArc(2) && isArc(3)) {\n\t\t\tif (Numerical.isZero(getDistance(0, 2) - getDistance(1, 3))) {\n\t\t\t\ttype = Shape.Circle;\n\t\t\t\tradius = getDistance(0, 2) / 2;\n\t\t\t} else {\n\t\t\t\ttype = Shape.Ellipse;\n\t\t\t\tradius = new Size(getDistance(2, 0) / 2, getDistance(3, 1) / 2);\n\t\t\t}\n\t\t\ttopCenter = segments[1]._point;\n\t\t}\n\n\t\tif (type) {\n\t\t\tvar center = this.getPosition(true),\n\t\t\t\tshape = new type({\n\t\t\t\t\tcenter: center,\n\t\t\t\t\tsize: size,\n\t\t\t\t\tradius: radius,\n\t\t\t\t\tinsert: false\n\t\t\t\t});\n\t\t\tshape.copyAttributes(this, true);\n\t\t\tshape._matrix.prepend(this._matrix);\n\t\t\tshape.rotate(topCenter.subtract(center).getAngle() + 90);\n\t\t\tif (insert === undefined || insert)\n\t\t\t\tshape.insertAbove(this);\n\t\t\treturn shape;\n\t\t}\n\t\treturn null;\n\t},\n\n\ttoPath: '#clone',\n\n\tcompare: function compare(path) {\n\t\tif (!path || path instanceof CompoundPath)\n\t\t\treturn compare.base.call(this, path);\n\t\tvar curves1 = this.getCurves(),\n\t\t\tcurves2 = path.getCurves(),\n\t\t\tlength1 = curves1.length,\n\t\t\tlength2 = curves2.length;\n\t\tif (!length1 || !length2) {\n\t\t\treturn length1 == length2;\n\t\t}\n\t\tvar v1 = curves1[0].getValues(),\n\t\t\tvalues2 = [],\n\t\t\tpos1 = 0, pos2,\n\t\t\tend1 = 0, end2;\n\t\tfor (var i = 0; i < length2; i++) {\n\t\t\tvar v2 = curves2[i].getValues();\n\t\t\tvalues2.push(v2);\n\t\t\tvar overlaps = Curve.getOverlaps(v1, v2);\n\t\t\tif (overlaps) {\n\t\t\t\tpos2 = !i && overlaps[0][0] > 0 ? length2 - 1 : i;\n\t\t\t\tend2 = overlaps[0][1];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar abs = Math.abs,\n\t\t\tepsilon = 1e-8,\n\t\t\tv2 = values2[pos2],\n\t\t\tstart2;\n\t\twhile (v1 && v2) {\n\t\t\tvar overlaps = Curve.getOverlaps(v1, v2);\n\t\t\tif (overlaps) {\n\t\t\t\tvar t1 = overlaps[0][0];\n\t\t\t\tif (abs(t1 - end1) < epsilon) {\n\t\t\t\t\tend1 = overlaps[1][0];\n\t\t\t\t\tif (end1 === 1) {\n\t\t\t\t\t\tv1 = ++pos1 < length1 ? curves1[pos1].getValues() : null;\n\t\t\t\t\t\tend1 = 0;\n\t\t\t\t\t}\n\t\t\t\t\tvar t2 = overlaps[0][1];\n\t\t\t\t\tif (abs(t2 - end2) < epsilon) {\n\t\t\t\t\t\tif (!start2)\n\t\t\t\t\t\t\tstart2 = [pos2, t2];\n\t\t\t\t\t\tend2 = overlaps[1][1];\n\t\t\t\t\t\tif (end2 === 1) {\n\t\t\t\t\t\t\tif (++pos2 >= length2)\n\t\t\t\t\t\t\t\tpos2 = 0;\n\t\t\t\t\t\t\tv2 = values2[pos2] || curves2[pos2].getValues();\n\t\t\t\t\t\t\tend2 = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!v1) {\n\t\t\t\t\t\t\treturn start2[0] === pos2 && start2[1] === end2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\treturn false;\n\t},\n\n\t_hitTestSelf: function(point, options, viewMatrix, strokeMatrix) {\n\t\tvar that = this,\n\t\t\tstyle = this.getStyle(),\n\t\t\tsegments = this._segments,\n\t\t\tnumSegments = segments.length,\n\t\t\tclosed = this._closed,\n\t\t\ttolerancePadding = options._tolerancePadding,\n\t\t\tstrokePadding = tolerancePadding,\n\t\t\tjoin, cap, miterLimit,\n\t\t\tarea, loc, res,\n\t\t\thitStroke = options.stroke && style.hasStroke(),\n\t\t\thitFill = options.fill && style.hasFill(),\n\t\t\thitCurves = options.curves,\n\t\t\tstrokeRadius = hitStroke\n\t\t\t\t\t? style.getStrokeWidth() / 2\n\t\t\t\t\t: hitFill && options.tolerance > 0 || hitCurves\n\t\t\t\t\t\t? 0 : null;\n\t\tif (strokeRadius !== null) {\n\t\t\tif (strokeRadius > 0) {\n\t\t\t\tjoin = style.getStrokeJoin();\n\t\t\t\tcap = style.getStrokeCap();\n\t\t\t\tmiterLimit = style.getMiterLimit();\n\t\t\t\tstrokePadding = strokePadding.add(\n\t\t\t\t\tPath._getStrokePadding(strokeRadius, strokeMatrix));\n\t\t\t} else {\n\t\t\t\tjoin = cap = 'round';\n\t\t\t}\n\t\t}\n\n\t\tfunction isCloseEnough(pt, padding) {\n\t\t\treturn point.subtract(pt).divide(padding).length <= 1;\n\t\t}\n\n\t\tfunction checkSegmentPoint(seg, pt, name) {\n\t\t\tif (!options.selected || pt.isSelected()) {\n\t\t\t\tvar anchor = seg._point;\n\t\t\t\tif (pt !== anchor)\n\t\t\t\t\tpt = pt.add(anchor);\n\t\t\t\tif (isCloseEnough(pt, strokePadding)) {\n\t\t\t\t\treturn new HitResult(name, that, {\n\t\t\t\t\t\tsegment: seg,\n\t\t\t\t\t\tpoint: pt\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction checkSegmentPoints(seg, ends) {\n\t\t\treturn (ends || options.segments)\n\t\t\t\t&& checkSegmentPoint(seg, seg._point, 'segment')\n\t\t\t\t|| (!ends && options.handles) && (\n\t\t\t\t\tcheckSegmentPoint(seg, seg._handleIn, 'handle-in') ||\n\t\t\t\t\tcheckSegmentPoint(seg, seg._handleOut, 'handle-out'));\n\t\t}\n\n\t\tfunction addToArea(point) {\n\t\t\tarea.add(point);\n\t\t}\n\n\t\tfunction checkSegmentStroke(segment) {\n\t\t\tvar isJoin = closed || segment._index > 0\n\t\t\t\t\t&& segment._index < numSegments - 1;\n\t\t\tif ((isJoin ? join : cap) === 'round') {\n\t\t\t\treturn isCloseEnough(segment._point, strokePadding);\n\t\t\t} else {\n\t\t\t\tarea = new Path({ internal: true, closed: true });\n\t\t\t\tif (isJoin) {\n\t\t\t\t\tif (!segment.isSmooth()) {\n\t\t\t\t\t\tPath._addBevelJoin(segment, join, strokeRadius,\n\t\t\t\t\t\t\t   miterLimit, null, strokeMatrix, addToArea, true);\n\t\t\t\t\t}\n\t\t\t\t} else if (cap === 'square') {\n\t\t\t\t\tPath._addSquareCap(segment, cap, strokeRadius, null,\n\t\t\t\t\t\t\tstrokeMatrix, addToArea, true);\n\t\t\t\t}\n\t\t\t\tif (!area.isEmpty()) {\n\t\t\t\t\tvar loc;\n\t\t\t\t\treturn area.contains(point)\n\t\t\t\t\t\t|| (loc = area.getNearestLocation(point))\n\t\t\t\t\t\t\t&& isCloseEnough(loc.getPoint(), tolerancePadding);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (options.ends && !options.segments && !closed) {\n\t\t\tif (res = checkSegmentPoints(segments[0], true)\n\t\t\t\t\t|| checkSegmentPoints(segments[numSegments - 1], true))\n\t\t\t\treturn res;\n\t\t} else if (options.segments || options.handles) {\n\t\t\tfor (var i = 0; i < numSegments; i++)\n\t\t\t\tif (res = checkSegmentPoints(segments[i]))\n\t\t\t\t\treturn res;\n\t\t}\n\t\tif (strokeRadius !== null) {\n\t\t\tloc = this.getNearestLocation(point);\n\t\t\tif (loc) {\n\t\t\t\tvar time = loc.getTime();\n\t\t\t\tif (time === 0 || time === 1 && numSegments > 1) {\n\t\t\t\t\tif (!checkSegmentStroke(loc.getSegment()))\n\t\t\t\t\t\tloc = null;\n\t\t\t\t} else if (!isCloseEnough(loc.getPoint(), strokePadding)) {\n\t\t\t\t\tloc = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!loc && join === 'miter' && numSegments > 1) {\n\t\t\t\tfor (var i = 0; i < numSegments; i++) {\n\t\t\t\t\tvar segment = segments[i];\n\t\t\t\t\tif (point.getDistance(segment._point)\n\t\t\t\t\t\t\t<= miterLimit * strokeRadius\n\t\t\t\t\t\t\t&& checkSegmentStroke(segment)) {\n\t\t\t\t\t\tloc = segment.getLocation();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn !loc && hitFill && this._contains(point)\n\t\t\t\t|| loc && !hitStroke && !hitCurves\n\t\t\t\t\t? new HitResult('fill', this)\n\t\t\t\t\t: loc\n\t\t\t\t\t\t? new HitResult(hitStroke ? 'stroke' : 'curve', this, {\n\t\t\t\t\t\t\tlocation: loc,\n\t\t\t\t\t\t\tpoint: loc.getPoint()\n\t\t\t\t\t\t})\n\t\t\t\t\t\t: null;\n\t}\n\n}, Base.each(Curve._evaluateMethods,\n\tfunction(name) {\n\t\tthis[name + 'At'] = function(offset) {\n\t\t\tvar loc = this.getLocationAt(offset);\n\t\t\treturn loc && loc[name]();\n\t\t};\n\t},\n{\n\tbeans: false,\n\n\tgetLocationOf: function() {\n\t\tvar point = Point.read(arguments),\n\t\t\tcurves = this.getCurves();\n\t\tfor (var i = 0, l = curves.length; i < l; i++) {\n\t\t\tvar loc = curves[i].getLocationOf(point);\n\t\t\tif (loc)\n\t\t\t\treturn loc;\n\t\t}\n\t\treturn null;\n\t},\n\n\tgetOffsetOf: function() {\n\t\tvar loc = this.getLocationOf.apply(this, arguments);\n\t\treturn loc ? loc.getOffset() : null;\n\t},\n\n\tgetLocationAt: function(offset) {\n\t\tif (typeof offset === 'number') {\n\t\t\tvar curves = this.getCurves(),\n\t\t\t\tlength = 0;\n\t\t\tfor (var i = 0, l = curves.length; i < l; i++) {\n\t\t\t\tvar start = length,\n\t\t\t\t\tcurve = curves[i];\n\t\t\t\tlength += curve.getLength();\n\t\t\t\tif (length > offset) {\n\t\t\t\t\treturn curve.getLocationAt(offset - start);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (curves.length > 0 && offset <= this.getLength()) {\n\t\t\t\treturn new CurveLocation(curves[curves.length - 1], 1);\n\t\t\t}\n\t\t} else if (offset && offset.getPath && offset.getPath() === this) {\n\t\t\treturn offset;\n\t\t}\n\t\treturn null;\n\t},\n\n\tgetOffsetsWithTangent: function() {\n\t\tvar tangent = Point.read(arguments);\n\t\tif (tangent.isZero()) {\n\t\t\treturn [];\n\t\t}\n\n\t\tvar offsets = [];\n\t\tvar curveStart = 0;\n\t\tvar curves = this.getCurves();\n\t\tfor (var i = 0, l = curves.length; i < l; i++) {\n\t\t\tvar curve = curves[i];\n\t\t\tvar curveTimes = curve.getTimesWithTangent(tangent);\n\t\t\tfor (var j = 0, m = curveTimes.length; j < m; j++) {\n\t\t\t\tvar offset = curveStart + curve.getOffsetAtTime(curveTimes[j]);\n\t\t\t\tif (offsets.indexOf(offset) < 0) {\n\t\t\t\t\toffsets.push(offset);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcurveStart += curve.length;\n\t\t}\n\t\treturn offsets;\n\t}\n}),\nnew function() {\n\n\tfunction drawHandles(ctx, segments, matrix, size) {\n\t\tif (size <= 0) return;\n\n\t\tvar half = size / 2,\n\t\t\tminiSize = size - 2,\n\t\t\tminiHalf = half - 1,\n\t\t\tcoords = new Array(6),\n\t\t\tpX, pY;\n\n\t\tfunction drawHandle(index) {\n\t\t\tvar hX = coords[index],\n\t\t\t\thY = coords[index + 1];\n\t\t\tif (pX != hX || pY != hY) {\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(pX, pY);\n\t\t\t\tctx.lineTo(hX, hY);\n\t\t\t\tctx.stroke();\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.arc(hX, hY, half, 0, Math.PI * 2, true);\n\t\t\t\tctx.fill();\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0, l = segments.length; i < l; i++) {\n\t\t\tvar segment = segments[i],\n\t\t\t\tselection = segment._selection;\n\t\t\tsegment._transformCoordinates(matrix, coords);\n\t\t\tpX = coords[0];\n\t\t\tpY = coords[1];\n\t\t\tif (selection & 2)\n\t\t\t\tdrawHandle(2);\n\t\t\tif (selection & 4)\n\t\t\t\tdrawHandle(4);\n\t\t\tctx.fillRect(pX - half, pY - half, size, size);\n\t\t\tif (miniSize > 0 && !(selection & 1)) {\n\t\t\t\tvar fillStyle = ctx.fillStyle;\n\t\t\t\tctx.fillStyle = '#ffffff';\n\t\t\t\tctx.fillRect(pX - miniHalf, pY - miniHalf, miniSize, miniSize);\n\t\t\t\tctx.fillStyle = fillStyle;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction drawSegments(ctx, path, matrix) {\n\t\tvar segments = path._segments,\n\t\t\tlength = segments.length,\n\t\t\tcoords = new Array(6),\n\t\t\tfirst = true,\n\t\t\tcurX, curY,\n\t\t\tprevX, prevY,\n\t\t\tinX, inY,\n\t\t\toutX, outY;\n\n\t\tfunction drawSegment(segment) {\n\t\t\tif (matrix) {\n\t\t\t\tsegment._transformCoordinates(matrix, coords);\n\t\t\t\tcurX = coords[0];\n\t\t\t\tcurY = coords[1];\n\t\t\t} else {\n\t\t\t\tvar point = segment._point;\n\t\t\t\tcurX = point._x;\n\t\t\t\tcurY = point._y;\n\t\t\t}\n\t\t\tif (first) {\n\t\t\t\tctx.moveTo(curX, curY);\n\t\t\t\tfirst = false;\n\t\t\t} else {\n\t\t\t\tif (matrix) {\n\t\t\t\t\tinX = coords[2];\n\t\t\t\t\tinY = coords[3];\n\t\t\t\t} else {\n\t\t\t\t\tvar handle = segment._handleIn;\n\t\t\t\t\tinX = curX + handle._x;\n\t\t\t\t\tinY = curY + handle._y;\n\t\t\t\t}\n\t\t\t\tif (inX === curX && inY === curY\n\t\t\t\t\t\t&& outX === prevX && outY === prevY) {\n\t\t\t\t\tctx.lineTo(curX, curY);\n\t\t\t\t} else {\n\t\t\t\t\tctx.bezierCurveTo(outX, outY, inX, inY, curX, curY);\n\t\t\t\t}\n\t\t\t}\n\t\t\tprevX = curX;\n\t\t\tprevY = curY;\n\t\t\tif (matrix) {\n\t\t\t\toutX = coords[4];\n\t\t\t\toutY = coords[5];\n\t\t\t} else {\n\t\t\t\tvar handle = segment._handleOut;\n\t\t\t\toutX = prevX + handle._x;\n\t\t\t\toutY = prevY + handle._y;\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0; i < length; i++)\n\t\t\tdrawSegment(segments[i]);\n\t\tif (path._closed && length > 0)\n\t\t\tdrawSegment(segments[0]);\n\t}\n\n\treturn {\n\t\t_draw: function(ctx, param, viewMatrix, strokeMatrix) {\n\t\t\tvar dontStart = param.dontStart,\n\t\t\t\tdontPaint = param.dontFinish || param.clip,\n\t\t\t\tstyle = this.getStyle(),\n\t\t\t\thasFill = style.hasFill(),\n\t\t\t\thasStroke = style.hasStroke(),\n\t\t\t\tdashArray = style.getDashArray(),\n\t\t\t\tdashLength = !paper.support.nativeDash && hasStroke\n\t\t\t\t\t\t&& dashArray && dashArray.length;\n\n\t\t\tif (!dontStart)\n\t\t\t\tctx.beginPath();\n\n\t\t\tif (hasFill || hasStroke && !dashLength || dontPaint) {\n\t\t\t\tdrawSegments(ctx, this, strokeMatrix);\n\t\t\t\tif (this._closed)\n\t\t\t\t\tctx.closePath();\n\t\t\t}\n\n\t\t\tfunction getOffset(i) {\n\t\t\t\treturn dashArray[((i % dashLength) + dashLength) % dashLength];\n\t\t\t}\n\n\t\t\tif (!dontPaint && (hasFill || hasStroke)) {\n\t\t\t\tthis._setStyles(ctx, param, viewMatrix);\n\t\t\t\tif (hasFill) {\n\t\t\t\t\tctx.fill(style.getFillRule());\n\t\t\t\t\tctx.shadowColor = 'rgba(0,0,0,0)';\n\t\t\t\t}\n\t\t\t\tif (hasStroke) {\n\t\t\t\t\tif (dashLength) {\n\t\t\t\t\t\tif (!dontStart)\n\t\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tvar flattener = new PathFlattener(this, 0.25, 32, false,\n\t\t\t\t\t\t\t\tstrokeMatrix),\n\t\t\t\t\t\t\tlength = flattener.length,\n\t\t\t\t\t\t\tfrom = -style.getDashOffset(), to,\n\t\t\t\t\t\t\ti = 0;\n\t\t\t\t\t\twhile (from > 0) {\n\t\t\t\t\t\t\tfrom -= getOffset(i--) + getOffset(i--);\n\t\t\t\t\t\t}\n\t\t\t\t\t\twhile (from < length) {\n\t\t\t\t\t\t\tto = from + getOffset(i++);\n\t\t\t\t\t\t\tif (from > 0 || to > 0)\n\t\t\t\t\t\t\t\tflattener.drawPart(ctx,\n\t\t\t\t\t\t\t\t\t\tMath.max(from, 0), Math.max(to, 0));\n\t\t\t\t\t\t\tfrom = to + getOffset(i++);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tctx.stroke();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_drawSelected: function(ctx, matrix) {\n\t\t\tctx.beginPath();\n\t\t\tdrawSegments(ctx, this, matrix);\n\t\t\tctx.stroke();\n\t\t\tdrawHandles(ctx, this._segments, matrix, paper.settings.handleSize);\n\t\t}\n\t};\n},\nnew function() {\n\tfunction getCurrentSegment(that) {\n\t\tvar segments = that._segments;\n\t\tif (!segments.length)\n\t\t\tthrow new Error('Use a moveTo() command first');\n\t\treturn segments[segments.length - 1];\n\t}\n\n\treturn {\n\t\tmoveTo: function() {\n\t\t\tvar segments = this._segments;\n\t\t\tif (segments.length === 1)\n\t\t\t\tthis.removeSegment(0);\n\t\t\tif (!segments.length)\n\t\t\t\tthis._add([ new Segment(Point.read(arguments)) ]);\n\t\t},\n\n\t\tmoveBy: function() {\n\t\t\tthrow new Error('moveBy() is unsupported on Path items.');\n\t\t},\n\n\t\tlineTo: function() {\n\t\t\tthis._add([ new Segment(Point.read(arguments)) ]);\n\t\t},\n\n\t\tcubicCurveTo: function() {\n\t\t\tvar args = arguments,\n\t\t\t\thandle1 = Point.read(args),\n\t\t\t\thandle2 = Point.read(args),\n\t\t\t\tto = Point.read(args),\n\t\t\t\tcurrent = getCurrentSegment(this);\n\t\t\tcurrent.setHandleOut(handle1.subtract(current._point));\n\t\t\tthis._add([ new Segment(to, handle2.subtract(to)) ]);\n\t\t},\n\n\t\tquadraticCurveTo: function() {\n\t\t\tvar args = arguments,\n\t\t\t\thandle = Point.read(args),\n\t\t\t\tto = Point.read(args),\n\t\t\t\tcurrent = getCurrentSegment(this)._point;\n\t\t\tthis.cubicCurveTo(\n\t\t\t\thandle.add(current.subtract(handle).multiply(1 / 3)),\n\t\t\t\thandle.add(to.subtract(handle).multiply(1 / 3)),\n\t\t\t\tto\n\t\t\t);\n\t\t},\n\n\t\tcurveTo: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tthrough = Point.read(args),\n\t\t\t\tto = Point.read(args),\n\t\t\t\tt = Base.pick(Base.read(args), 0.5),\n\t\t\t\tt1 = 1 - t,\n\t\t\t\tcurrent = getCurrentSegment(this)._point,\n\t\t\t\thandle = through.subtract(current.multiply(t1 * t1))\n\t\t\t\t\t.subtract(to.multiply(t * t)).divide(2 * t * t1);\n\t\t\tif (handle.isNaN())\n\t\t\t\tthrow new Error(\n\t\t\t\t\t'Cannot put a curve through points with parameter = ' + t);\n\t\t\tthis.quadraticCurveTo(handle, to);\n\t\t},\n\n\t\tarcTo: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tabs = Math.abs,\n\t\t\t\tsqrt = Math.sqrt,\n\t\t\t\tcurrent = getCurrentSegment(this),\n\t\t\t\tfrom = current._point,\n\t\t\t\tto = Point.read(args),\n\t\t\t\tthrough,\n\t\t\t\tpeek = Base.peek(args),\n\t\t\t\tclockwise = Base.pick(peek, true),\n\t\t\t\tcenter, extent, vector, matrix;\n\t\t\tif (typeof clockwise === 'boolean') {\n\t\t\t\tvar middle = from.add(to).divide(2),\n\t\t\t\tthrough = middle.add(middle.subtract(from).rotate(\n\t\t\t\t\t\tclockwise ? -90 : 90));\n\t\t\t} else if (Base.remain(args) <= 2) {\n\t\t\t\tthrough = to;\n\t\t\t\tto = Point.read(args);\n\t\t\t} else if (!from.equals(to)) {\n\t\t\t\tvar radius = Size.read(args),\n\t\t\t\t\tisZero = Numerical.isZero;\n\t\t\t\tif (isZero(radius.width) || isZero(radius.height))\n\t\t\t\t\treturn this.lineTo(to);\n\t\t\t\tvar rotation = Base.read(args),\n\t\t\t\t\tclockwise = !!Base.read(args),\n\t\t\t\t\tlarge = !!Base.read(args),\n\t\t\t\t\tmiddle = from.add(to).divide(2),\n\t\t\t\t\tpt = from.subtract(middle).rotate(-rotation),\n\t\t\t\t\tx = pt.x,\n\t\t\t\t\ty = pt.y,\n\t\t\t\t\trx = abs(radius.width),\n\t\t\t\t\try = abs(radius.height),\n\t\t\t\t\trxSq = rx * rx,\n\t\t\t\t\trySq = ry * ry,\n\t\t\t\t\txSq = x * x,\n\t\t\t\t\tySq = y * y;\n\t\t\t\tvar factor = sqrt(xSq / rxSq + ySq / rySq);\n\t\t\t\tif (factor > 1) {\n\t\t\t\t\trx *= factor;\n\t\t\t\t\try *= factor;\n\t\t\t\t\trxSq = rx * rx;\n\t\t\t\t\trySq = ry * ry;\n\t\t\t\t}\n\t\t\t\tfactor = (rxSq * rySq - rxSq * ySq - rySq * xSq) /\n\t\t\t\t\t\t(rxSq * ySq + rySq * xSq);\n\t\t\t\tif (abs(factor) < 1e-12)\n\t\t\t\t\tfactor = 0;\n\t\t\t\tif (factor < 0)\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t'Cannot create an arc with the given arguments');\n\t\t\t\tcenter = new Point(rx * y / ry, -ry * x / rx)\n\t\t\t\t\t\t.multiply((large === clockwise ? -1 : 1) * sqrt(factor))\n\t\t\t\t\t\t.rotate(rotation).add(middle);\n\t\t\t\tmatrix = new Matrix().translate(center).rotate(rotation)\n\t\t\t\t\t\t.scale(rx, ry);\n\t\t\t\tvector = matrix._inverseTransform(from);\n\t\t\t\textent = vector.getDirectedAngle(matrix._inverseTransform(to));\n\t\t\t\tif (!clockwise && extent > 0)\n\t\t\t\t\textent -= 360;\n\t\t\t\telse if (clockwise && extent < 0)\n\t\t\t\t\textent += 360;\n\t\t\t}\n\t\t\tif (through) {\n\t\t\t\tvar l1 = new Line(from.add(through).divide(2),\n\t\t\t\t\t\t\tthrough.subtract(from).rotate(90), true),\n\t\t\t\t\tl2 = new Line(through.add(to).divide(2),\n\t\t\t\t\t\t\tto.subtract(through).rotate(90), true),\n\t\t\t\t\tline = new Line(from, to),\n\t\t\t\t\tthroughSide = line.getSide(through);\n\t\t\t\tcenter = l1.intersect(l2, true);\n\t\t\t\tif (!center) {\n\t\t\t\t\tif (!throughSide)\n\t\t\t\t\t\treturn this.lineTo(to);\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t'Cannot create an arc with the given arguments');\n\t\t\t\t}\n\t\t\t\tvector = from.subtract(center);\n\t\t\t\textent = vector.getDirectedAngle(to.subtract(center));\n\t\t\t\tvar centerSide = line.getSide(center, true);\n\t\t\t\tif (centerSide === 0) {\n\t\t\t\t\textent = throughSide * abs(extent);\n\t\t\t\t} else if (throughSide === centerSide) {\n\t\t\t\t\textent += extent < 0 ? 360 : -360;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (extent) {\n\t\t\t\tvar epsilon = 1e-7,\n\t\t\t\t\text = abs(extent),\n\t\t\t\t\tcount = ext >= 360 ? 4 : Math.ceil((ext - epsilon) / 90),\n\t\t\t\t\tinc = extent / count,\n\t\t\t\t\thalf = inc * Math.PI / 360,\n\t\t\t\t\tz = 4 / 3 * Math.sin(half) / (1 + Math.cos(half)),\n\t\t\t\t\tsegments = [];\n\t\t\t\tfor (var i = 0; i <= count; i++) {\n\t\t\t\t\tvar pt = to,\n\t\t\t\t\t\tout = null;\n\t\t\t\t\tif (i < count) {\n\t\t\t\t\t\tout = vector.rotate(90).multiply(z);\n\t\t\t\t\t\tif (matrix) {\n\t\t\t\t\t\t\tpt = matrix._transformPoint(vector);\n\t\t\t\t\t\t\tout = matrix._transformPoint(vector.add(out))\n\t\t\t\t\t\t\t\t\t.subtract(pt);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpt = center.add(vector);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!i) {\n\t\t\t\t\t\tcurrent.setHandleOut(out);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar _in = vector.rotate(-90).multiply(z);\n\t\t\t\t\t\tif (matrix) {\n\t\t\t\t\t\t\t_in = matrix._transformPoint(vector.add(_in))\n\t\t\t\t\t\t\t\t\t.subtract(pt);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsegments.push(new Segment(pt, _in, out));\n\t\t\t\t\t}\n\t\t\t\t\tvector = vector.rotate(inc);\n\t\t\t\t}\n\t\t\t\tthis._add(segments);\n\t\t\t}\n\t\t},\n\n\t\tlineBy: function() {\n\t\t\tvar to = Point.read(arguments),\n\t\t\t\tcurrent = getCurrentSegment(this)._point;\n\t\t\tthis.lineTo(current.add(to));\n\t\t},\n\n\t\tcurveBy: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tthrough = Point.read(args),\n\t\t\t\tto = Point.read(args),\n\t\t\t\tparameter = Base.read(args),\n\t\t\t\tcurrent = getCurrentSegment(this)._point;\n\t\t\tthis.curveTo(current.add(through), current.add(to), parameter);\n\t\t},\n\n\t\tcubicCurveBy: function() {\n\t\t\tvar args = arguments,\n\t\t\t\thandle1 = Point.read(args),\n\t\t\t\thandle2 = Point.read(args),\n\t\t\t\tto = Point.read(args),\n\t\t\t\tcurrent = getCurrentSegment(this)._point;\n\t\t\tthis.cubicCurveTo(current.add(handle1), current.add(handle2),\n\t\t\t\t\tcurrent.add(to));\n\t\t},\n\n\t\tquadraticCurveBy: function() {\n\t\t\tvar args = arguments,\n\t\t\t\thandle = Point.read(args),\n\t\t\t\tto = Point.read(args),\n\t\t\t\tcurrent = getCurrentSegment(this)._point;\n\t\t\tthis.quadraticCurveTo(current.add(handle), current.add(to));\n\t\t},\n\n\t\tarcBy: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tcurrent = getCurrentSegment(this)._point,\n\t\t\t\tpoint = current.add(Point.read(args)),\n\t\t\t\tclockwise = Base.pick(Base.peek(args), true);\n\t\t\tif (typeof clockwise === 'boolean') {\n\t\t\t\tthis.arcTo(point, clockwise);\n\t\t\t} else {\n\t\t\t\tthis.arcTo(point, current.add(Point.read(args)));\n\t\t\t}\n\t\t},\n\n\t\tclosePath: function(tolerance) {\n\t\t\tthis.setClosed(true);\n\t\t\tthis.join(this, tolerance);\n\t\t}\n\t};\n}, {\n\n\t_getBounds: function(matrix, options) {\n\t\tvar method = options.handle\n\t\t\t\t? 'getHandleBounds'\n\t\t\t\t: options.stroke\n\t\t\t\t? 'getStrokeBounds'\n\t\t\t\t: 'getBounds';\n\t\treturn Path[method](this._segments, this._closed, this, matrix, options);\n\t},\n\nstatics: {\n\tgetBounds: function(segments, closed, path, matrix, options, strokePadding) {\n\t\tvar first = segments[0];\n\t\tif (!first)\n\t\t\treturn new Rectangle();\n\t\tvar coords = new Array(6),\n\t\t\tprevCoords = first._transformCoordinates(matrix, new Array(6)),\n\t\t\tmin = prevCoords.slice(0, 2),\n\t\t\tmax = min.slice(),\n\t\t\troots = new Array(2);\n\n\t\tfunction processSegment(segment) {\n\t\t\tsegment._transformCoordinates(matrix, coords);\n\t\t\tfor (var i = 0; i < 2; i++) {\n\t\t\t\tCurve._addBounds(\n\t\t\t\t\tprevCoords[i],\n\t\t\t\t\tprevCoords[i + 4],\n\t\t\t\t\tcoords[i + 2],\n\t\t\t\t\tcoords[i],\n\t\t\t\t\ti, strokePadding ? strokePadding[i] : 0, min, max, roots);\n\t\t\t}\n\t\t\tvar tmp = prevCoords;\n\t\t\tprevCoords = coords;\n\t\t\tcoords = tmp;\n\t\t}\n\n\t\tfor (var i = 1, l = segments.length; i < l; i++)\n\t\t\tprocessSegment(segments[i]);\n\t\tif (closed)\n\t\t\tprocessSegment(first);\n\t\treturn new Rectangle(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n\t},\n\n\tgetStrokeBounds: function(segments, closed, path, matrix, options) {\n\t\tvar style = path.getStyle(),\n\t\t\tstroke = style.hasStroke(),\n\t\t\tstrokeWidth = style.getStrokeWidth(),\n\t\t\tstrokeMatrix = stroke && path._getStrokeMatrix(matrix, options),\n\t\t\tstrokePadding = stroke && Path._getStrokePadding(strokeWidth,\n\t\t\t\tstrokeMatrix),\n\t\t\tbounds = Path.getBounds(segments, closed, path, matrix, options,\n\t\t\t\tstrokePadding);\n\t\tif (!stroke)\n\t\t\treturn bounds;\n\t\tvar strokeRadius = strokeWidth / 2,\n\t\t\tjoin = style.getStrokeJoin(),\n\t\t\tcap = style.getStrokeCap(),\n\t\t\tmiterLimit = style.getMiterLimit(),\n\t\t\tjoinBounds = new Rectangle(new Size(strokePadding));\n\n\t\tfunction addPoint(point) {\n\t\t\tbounds = bounds.include(point);\n\t\t}\n\n\t\tfunction addRound(segment) {\n\t\t\tbounds = bounds.unite(\n\t\t\t\t\tjoinBounds.setCenter(segment._point.transform(matrix)));\n\t\t}\n\n\t\tfunction addJoin(segment, join) {\n\t\t\tif (join === 'round' || segment.isSmooth()) {\n\t\t\t\taddRound(segment);\n\t\t\t} else {\n\t\t\t\tPath._addBevelJoin(segment, join, strokeRadius, miterLimit,\n\t\t\t\t\t\tmatrix, strokeMatrix, addPoint);\n\t\t\t}\n\t\t}\n\n\t\tfunction addCap(segment, cap) {\n\t\t\tif (cap === 'round') {\n\t\t\t\taddRound(segment);\n\t\t\t} else {\n\t\t\t\tPath._addSquareCap(segment, cap, strokeRadius, matrix,\n\t\t\t\t\t\tstrokeMatrix, addPoint);\n\t\t\t}\n\t\t}\n\n\t\tvar length = segments.length - (closed ? 0 : 1);\n\t\tif (length > 0) {\n\t\t\tfor (var i = 1; i < length; i++) {\n\t\t\t\taddJoin(segments[i], join);\n\t\t\t}\n\t\t\tif (closed) {\n\t\t\t\taddJoin(segments[0], join);\n\t\t\t} else {\n\t\t\t\taddCap(segments[0], cap);\n\t\t\t\taddCap(segments[segments.length - 1], cap);\n\t\t\t}\n\t\t}\n\t\treturn bounds;\n\t},\n\n\t_getStrokePadding: function(radius, matrix) {\n\t\tif (!matrix)\n\t\t\treturn [radius, radius];\n\t\tvar hor = new Point(radius, 0).transform(matrix),\n\t\t\tver = new Point(0, radius).transform(matrix),\n\t\t\tphi = hor.getAngleInRadians(),\n\t\t\ta = hor.getLength(),\n\t\t\tb = ver.getLength();\n\t\tvar sin = Math.sin(phi),\n\t\t\tcos = Math.cos(phi),\n\t\t\ttan = Math.tan(phi),\n\t\t\ttx = Math.atan2(b * tan, a),\n\t\t\tty = Math.atan2(b, tan * a);\n\t\treturn [Math.abs(a * Math.cos(tx) * cos + b * Math.sin(tx) * sin),\n\t\t\t\tMath.abs(b * Math.sin(ty) * cos + a * Math.cos(ty) * sin)];\n\t},\n\n\t_addBevelJoin: function(segment, join, radius, miterLimit, matrix,\n\t\t\tstrokeMatrix, addPoint, isArea) {\n\t\tvar curve2 = segment.getCurve(),\n\t\t\tcurve1 = curve2.getPrevious(),\n\t\t\tpoint = curve2.getPoint1().transform(matrix),\n\t\t\tnormal1 = curve1.getNormalAtTime(1).multiply(radius)\n\t\t\t\t.transform(strokeMatrix),\n\t\t\tnormal2 = curve2.getNormalAtTime(0).multiply(radius)\n\t\t\t\t.transform(strokeMatrix),\n\t\t\t\tangle = normal1.getDirectedAngle(normal2);\n\t\tif (angle < 0 || angle >= 180) {\n\t\t\tnormal1 = normal1.negate();\n\t\t\tnormal2 = normal2.negate();\n\t\t}\n\t\tif (isArea)\n\t\t\taddPoint(point);\n\t\taddPoint(point.add(normal1));\n\t\tif (join === 'miter') {\n\t\t\tvar corner = new Line(point.add(normal1),\n\t\t\t\t\tnew Point(-normal1.y, normal1.x), true\n\t\t\t\t).intersect(new Line(point.add(normal2),\n\t\t\t\t\tnew Point(-normal2.y, normal2.x), true\n\t\t\t\t), true);\n\t\t\tif (corner && point.getDistance(corner) <= miterLimit * radius) {\n\t\t\t\taddPoint(corner);\n\t\t\t}\n\t\t}\n\t\taddPoint(point.add(normal2));\n\t},\n\n\t_addSquareCap: function(segment, cap, radius, matrix, strokeMatrix,\n\t\t\taddPoint, isArea) {\n\t\tvar point = segment._point.transform(matrix),\n\t\t\tloc = segment.getLocation(),\n\t\t\tnormal = loc.getNormal()\n\t\t\t\t\t.multiply(loc.getTime() === 0 ? radius : -radius)\n\t\t\t\t\t.transform(strokeMatrix);\n\t\tif (cap === 'square') {\n\t\t\tif (isArea) {\n\t\t\t\taddPoint(point.subtract(normal));\n\t\t\t\taddPoint(point.add(normal));\n\t\t\t}\n\t\t\tpoint = point.add(normal.rotate(-90));\n\t\t}\n\t\taddPoint(point.add(normal));\n\t\taddPoint(point.subtract(normal));\n\t},\n\n\tgetHandleBounds: function(segments, closed, path, matrix, options) {\n\t\tvar style = path.getStyle(),\n\t\t\tstroke = options.stroke && style.hasStroke(),\n\t\t\tstrokePadding,\n\t\t\tjoinPadding;\n\t\tif (stroke) {\n\t\t\tvar strokeMatrix = path._getStrokeMatrix(matrix, options),\n\t\t\t\tstrokeRadius = style.getStrokeWidth() / 2,\n\t\t\t\tjoinRadius = strokeRadius;\n\t\t\tif (style.getStrokeJoin() === 'miter')\n\t\t\t\tjoinRadius = strokeRadius * style.getMiterLimit();\n\t\t\tif (style.getStrokeCap() === 'square')\n\t\t\t\tjoinRadius = Math.max(joinRadius, strokeRadius * Math.SQRT2);\n\t\t\tstrokePadding = Path._getStrokePadding(strokeRadius, strokeMatrix);\n\t\t\tjoinPadding = Path._getStrokePadding(joinRadius, strokeMatrix);\n\t\t}\n\t\tvar coords = new Array(6),\n\t\t\tx1 = Infinity,\n\t\t\tx2 = -x1,\n\t\t\ty1 = x1,\n\t\t\ty2 = x2;\n\t\tfor (var i = 0, l = segments.length; i < l; i++) {\n\t\t\tvar segment = segments[i];\n\t\t\tsegment._transformCoordinates(matrix, coords);\n\t\t\tfor (var j = 0; j < 6; j += 2) {\n\t\t\t\tvar padding = !j ? joinPadding : strokePadding,\n\t\t\t\t\tpaddingX = padding ? padding[0] : 0,\n\t\t\t\t\tpaddingY = padding ? padding[1] : 0,\n\t\t\t\t\tx = coords[j],\n\t\t\t\t\ty = coords[j + 1],\n\t\t\t\t\txn = x - paddingX,\n\t\t\t\t\txx = x + paddingX,\n\t\t\t\t\tyn = y - paddingY,\n\t\t\t\t\tyx = y + paddingY;\n\t\t\t\tif (xn < x1) x1 = xn;\n\t\t\t\tif (xx > x2) x2 = xx;\n\t\t\t\tif (yn < y1) y1 = yn;\n\t\t\t\tif (yx > y2) y2 = yx;\n\t\t\t}\n\t\t}\n\t\treturn new Rectangle(x1, y1, x2 - x1, y2 - y1);\n\t}\n}});\n\nPath.inject({ statics: new function() {\n\n\tvar kappa = 0.5522847498307936,\n\t\tellipseSegments = [\n\t\t\tnew Segment([-1, 0], [0, kappa ], [0, -kappa]),\n\t\t\tnew Segment([0, -1], [-kappa, 0], [kappa, 0 ]),\n\t\t\tnew Segment([1, 0], [0, -kappa], [0, kappa ]),\n\t\t\tnew Segment([0, 1], [kappa, 0 ], [-kappa, 0])\n\t\t];\n\n\tfunction createPath(segments, closed, args) {\n\t\tvar props = Base.getNamed(args),\n\t\t\tpath = new Path(props && props.insert == false && Item.NO_INSERT);\n\t\tpath._add(segments);\n\t\tpath._closed = closed;\n\t\treturn path.set(props, { insert: true });\n\t}\n\n\tfunction createEllipse(center, radius, args) {\n\t\tvar segments = new Array(4);\n\t\tfor (var i = 0; i < 4; i++) {\n\t\t\tvar segment = ellipseSegments[i];\n\t\t\tsegments[i] = new Segment(\n\t\t\t\tsegment._point.multiply(radius).add(center),\n\t\t\t\tsegment._handleIn.multiply(radius),\n\t\t\t\tsegment._handleOut.multiply(radius)\n\t\t\t);\n\t\t}\n\t\treturn createPath(segments, true, args);\n\t}\n\n\treturn {\n\t\tLine: function() {\n\t\t\tvar args = arguments;\n\t\t\treturn createPath([\n\t\t\t\tnew Segment(Point.readNamed(args, 'from')),\n\t\t\t\tnew Segment(Point.readNamed(args, 'to'))\n\t\t\t], false, args);\n\t\t},\n\n\t\tCircle: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tcenter = Point.readNamed(args, 'center'),\n\t\t\t\tradius = Base.readNamed(args, 'radius');\n\t\t\treturn createEllipse(center, new Size(radius), args);\n\t\t},\n\n\t\tRectangle: function() {\n\t\t\tvar args = arguments,\n\t\t\t\trect = Rectangle.readNamed(args, 'rectangle'),\n\t\t\t\tradius = Size.readNamed(args, 'radius', 0,\n\t\t\t\t\t\t{ readNull: true }),\n\t\t\t\tbl = rect.getBottomLeft(true),\n\t\t\t\ttl = rect.getTopLeft(true),\n\t\t\t\ttr = rect.getTopRight(true),\n\t\t\t\tbr = rect.getBottomRight(true),\n\t\t\t\tsegments;\n\t\t\tif (!radius || radius.isZero()) {\n\t\t\t\tsegments = [\n\t\t\t\t\tnew Segment(bl),\n\t\t\t\t\tnew Segment(tl),\n\t\t\t\t\tnew Segment(tr),\n\t\t\t\t\tnew Segment(br)\n\t\t\t\t];\n\t\t\t} else {\n\t\t\t\tradius = Size.min(radius, rect.getSize(true).divide(2));\n\t\t\t\tvar rx = radius.width,\n\t\t\t\t\try = radius.height,\n\t\t\t\t\thx = rx * kappa,\n\t\t\t\t\thy = ry * kappa;\n\t\t\t\tsegments = [\n\t\t\t\t\tnew Segment(bl.add(rx, 0), null, [-hx, 0]),\n\t\t\t\t\tnew Segment(bl.subtract(0, ry), [0, hy]),\n\t\t\t\t\tnew Segment(tl.add(0, ry), null, [0, -hy]),\n\t\t\t\t\tnew Segment(tl.add(rx, 0), [-hx, 0], null),\n\t\t\t\t\tnew Segment(tr.subtract(rx, 0), null, [hx, 0]),\n\t\t\t\t\tnew Segment(tr.add(0, ry), [0, -hy], null),\n\t\t\t\t\tnew Segment(br.subtract(0, ry), null, [0, hy]),\n\t\t\t\t\tnew Segment(br.subtract(rx, 0), [hx, 0])\n\t\t\t\t];\n\t\t\t}\n\t\t\treturn createPath(segments, true, args);\n\t\t},\n\n\t\tRoundRectangle: '#Rectangle',\n\n\t\tEllipse: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tellipse = Shape._readEllipse(args);\n\t\t\treturn createEllipse(ellipse.center, ellipse.radius, args);\n\t\t},\n\n\t\tOval: '#Ellipse',\n\n\t\tArc: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tfrom = Point.readNamed(args, 'from'),\n\t\t\t\tthrough = Point.readNamed(args, 'through'),\n\t\t\t\tto = Point.readNamed(args, 'to'),\n\t\t\t\tprops = Base.getNamed(args),\n\t\t\t\tpath = new Path(props && props.insert == false\n\t\t\t\t\t\t&& Item.NO_INSERT);\n\t\t\tpath.moveTo(from);\n\t\t\tpath.arcTo(through, to);\n\t\t\treturn path.set(props);\n\t\t},\n\n\t\tRegularPolygon: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tcenter = Point.readNamed(args, 'center'),\n\t\t\t\tsides = Base.readNamed(args, 'sides'),\n\t\t\t\tradius = Base.readNamed(args, 'radius'),\n\t\t\t\tstep = 360 / sides,\n\t\t\t\tthree = sides % 3 === 0,\n\t\t\t\tvector = new Point(0, three ? -radius : radius),\n\t\t\t\toffset = three ? -1 : 0.5,\n\t\t\t\tsegments = new Array(sides);\n\t\t\tfor (var i = 0; i < sides; i++)\n\t\t\t\tsegments[i] = new Segment(center.add(\n\t\t\t\t\tvector.rotate((i + offset) * step)));\n\t\t\treturn createPath(segments, true, args);\n\t\t},\n\n\t\tStar: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tcenter = Point.readNamed(args, 'center'),\n\t\t\t\tpoints = Base.readNamed(args, 'points') * 2,\n\t\t\t\tradius1 = Base.readNamed(args, 'radius1'),\n\t\t\t\tradius2 = Base.readNamed(args, 'radius2'),\n\t\t\t\tstep = 360 / points,\n\t\t\t\tvector = new Point(0, -1),\n\t\t\t\tsegments = new Array(points);\n\t\t\tfor (var i = 0; i < points; i++)\n\t\t\t\tsegments[i] = new Segment(center.add(vector.rotate(step * i)\n\t\t\t\t\t\t.multiply(i % 2 ? radius2 : radius1)));\n\t\t\treturn createPath(segments, true, args);\n\t\t}\n\t};\n}});\n\nvar CompoundPath = PathItem.extend({\n\t_class: 'CompoundPath',\n\t_serializeFields: {\n\t\tchildren: []\n\t},\n\tbeans: true,\n\n\tinitialize: function CompoundPath(arg) {\n\t\tthis._children = [];\n\t\tthis._namedChildren = {};\n\t\tif (!this._initialize(arg)) {\n\t\t\tif (typeof arg === 'string') {\n\t\t\t\tthis.setPathData(arg);\n\t\t\t} else {\n\t\t\t\tthis.addChildren(Array.isArray(arg) ? arg : arguments);\n\t\t\t}\n\t\t}\n\t},\n\n\tinsertChildren: function insertChildren(index, items) {\n\t\tvar list = items,\n\t\t\tfirst = list[0];\n\t\tif (first && typeof first[0] === 'number')\n\t\t\tlist = [list];\n\t\tfor (var i = items.length - 1; i >= 0; i--) {\n\t\t\tvar item = list[i];\n\t\t\tif (list === items && !(item instanceof Path))\n\t\t\t\tlist = Base.slice(list);\n\t\t\tif (Array.isArray(item)) {\n\t\t\t\tlist[i] = new Path({ segments: item, insert: false });\n\t\t\t} else if (item instanceof CompoundPath) {\n\t\t\t\tlist.splice.apply(list, [i, 1].concat(item.removeChildren()));\n\t\t\t\titem.remove();\n\t\t\t}\n\t\t}\n\t\treturn insertChildren.base.call(this, index, list);\n\t},\n\n\treduce: function reduce(options) {\n\t\tvar children = this._children;\n\t\tfor (var i = children.length - 1; i >= 0; i--) {\n\t\t\tvar path = children[i].reduce(options);\n\t\t\tif (path.isEmpty())\n\t\t\t\tpath.remove();\n\t\t}\n\t\tif (!children.length) {\n\t\t\tvar path = new Path(Item.NO_INSERT);\n\t\t\tpath.copyAttributes(this);\n\t\t\tpath.insertAbove(this);\n\t\t\tthis.remove();\n\t\t\treturn path;\n\t\t}\n\t\treturn reduce.base.call(this);\n\t},\n\n\tisClosed: function() {\n\t\tvar children = this._children;\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tif (!children[i]._closed)\n\t\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\tsetClosed: function(closed) {\n\t\tvar children = this._children;\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tchildren[i].setClosed(closed);\n\t\t}\n\t},\n\n\tgetFirstSegment: function() {\n\t\tvar first = this.getFirstChild();\n\t\treturn first && first.getFirstSegment();\n\t},\n\n\tgetLastSegment: function() {\n\t\tvar last = this.getLastChild();\n\t\treturn last && last.getLastSegment();\n\t},\n\n\tgetCurves: function() {\n\t\tvar children = this._children,\n\t\t\tcurves = [];\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tBase.push(curves, children[i].getCurves());\n\t\t}\n\t\treturn curves;\n\t},\n\n\tgetFirstCurve: function() {\n\t\tvar first = this.getFirstChild();\n\t\treturn first && first.getFirstCurve();\n\t},\n\n\tgetLastCurve: function() {\n\t\tvar last = this.getLastChild();\n\t\treturn last && last.getLastCurve();\n\t},\n\n\tgetArea: function() {\n\t\tvar children = this._children,\n\t\t\tarea = 0;\n\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\tarea += children[i].getArea();\n\t\treturn area;\n\t},\n\n\tgetLength: function() {\n\t\tvar children = this._children,\n\t\t\tlength = 0;\n\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\tlength += children[i].getLength();\n\t\treturn length;\n\t},\n\n\tgetPathData: function(_matrix, _precision) {\n\t\tvar children = this._children,\n\t\t\tpaths = [];\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tvar child = children[i],\n\t\t\t\tmx = child._matrix;\n\t\t\tpaths.push(child.getPathData(_matrix && !mx.isIdentity()\n\t\t\t\t\t? _matrix.appended(mx) : _matrix, _precision));\n\t\t}\n\t\treturn paths.join('');\n\t},\n\n\t_hitTestChildren: function _hitTestChildren(point, options, viewMatrix) {\n\t\treturn _hitTestChildren.base.call(this, point,\n\t\t\t\toptions.class === Path || options.type === 'path' ? options\n\t\t\t\t\t: Base.set({}, options, { fill: false }),\n\t\t\t\tviewMatrix);\n\t},\n\n\t_draw: function(ctx, param, viewMatrix, strokeMatrix) {\n\t\tvar children = this._children;\n\t\tif (!children.length)\n\t\t\treturn;\n\n\t\tparam = param.extend({ dontStart: true, dontFinish: true });\n\t\tctx.beginPath();\n\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\tchildren[i].draw(ctx, param, strokeMatrix);\n\n\t\tif (!param.clip) {\n\t\t\tthis._setStyles(ctx, param, viewMatrix);\n\t\t\tvar style = this._style;\n\t\t\tif (style.hasFill()) {\n\t\t\t\tctx.fill(style.getFillRule());\n\t\t\t\tctx.shadowColor = 'rgba(0,0,0,0)';\n\t\t\t}\n\t\t\tif (style.hasStroke())\n\t\t\t\tctx.stroke();\n\t\t}\n\t},\n\n\t_drawSelected: function(ctx, matrix, selectionItems) {\n\t\tvar children = this._children;\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tvar child = children[i],\n\t\t\t\tmx = child._matrix;\n\t\t\tif (!selectionItems[child._id]) {\n\t\t\t\tchild._drawSelected(ctx, mx.isIdentity() ? matrix\n\t\t\t\t\t\t: matrix.appended(mx));\n\t\t\t}\n\t\t}\n\t}\n},\nnew function() {\n\tfunction getCurrentPath(that, check) {\n\t\tvar children = that._children;\n\t\tif (check && !children.length)\n\t\t\tthrow new Error('Use a moveTo() command first');\n\t\treturn children[children.length - 1];\n\t}\n\n\treturn Base.each(['lineTo', 'cubicCurveTo', 'quadraticCurveTo', 'curveTo',\n\t\t\t'arcTo', 'lineBy', 'cubicCurveBy', 'quadraticCurveBy', 'curveBy',\n\t\t\t'arcBy'],\n\t\tfunction(key) {\n\t\t\tthis[key] = function() {\n\t\t\t\tvar path = getCurrentPath(this, true);\n\t\t\t\tpath[key].apply(path, arguments);\n\t\t\t};\n\t\t}, {\n\t\t\tmoveTo: function() {\n\t\t\t\tvar current = getCurrentPath(this),\n\t\t\t\t\tpath = current && current.isEmpty() ? current\n\t\t\t\t\t\t\t: new Path(Item.NO_INSERT);\n\t\t\t\tif (path !== current)\n\t\t\t\t\tthis.addChild(path);\n\t\t\t\tpath.moveTo.apply(path, arguments);\n\t\t\t},\n\n\t\t\tmoveBy: function() {\n\t\t\t\tvar current = getCurrentPath(this, true),\n\t\t\t\t\tlast = current && current.getLastSegment(),\n\t\t\t\t\tpoint = Point.read(arguments);\n\t\t\t\tthis.moveTo(last ? point.add(last._point) : point);\n\t\t\t},\n\n\t\t\tclosePath: function(tolerance) {\n\t\t\t\tgetCurrentPath(this, true).closePath(tolerance);\n\t\t\t}\n\t\t}\n\t);\n}, Base.each(['reverse', 'flatten', 'simplify', 'smooth'], function(key) {\n\tthis[key] = function(param) {\n\t\tvar children = this._children,\n\t\t\tres;\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tres = children[i][key](param) || res;\n\t\t}\n\t\treturn res;\n\t};\n}, {}));\n\nPathItem.inject(new function() {\n\tvar min = Math.min,\n\t\tmax = Math.max,\n\t\tabs = Math.abs,\n\t\toperators = {\n\t\t\tunite:     { '1': true, '2': true },\n\t\t\tintersect: { '2': true },\n\t\t\tsubtract:  { '1': true },\n\t\t\texclude:   { '1': true, '-1': true }\n\t\t};\n\n\tfunction getPaths(path) {\n\t\treturn path._children || [path];\n\t}\n\n\tfunction preparePath(path, resolve) {\n\t\tvar res = path\n\t\t\t.clone(false)\n\t\t\t.reduce({ simplify: true })\n\t\t\t.transform(null, true, true);\n\t\tif (resolve) {\n\t\t\tvar paths = getPaths(res);\n\t\t\tfor (var i = 0, l = paths.length; i < l; i++) {\n\t\t\t\tvar path = paths[i];\n\t\t\t\tif (!path._closed && !path.isEmpty()) {\n\t\t\t\t\tpath.closePath(1e-12);\n\t\t\t\t\tpath.getFirstSegment().setHandleIn(0, 0);\n\t\t\t\t\tpath.getLastSegment().setHandleOut(0, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t\tres = res\n\t\t\t\t.resolveCrossings()\n\t\t\t\t.reorient(res.getFillRule() === 'nonzero', true);\n\t\t}\n\t\treturn res;\n\t}\n\n\tfunction createResult(paths, simplify, path1, path2, options) {\n\t\tvar result = new CompoundPath(Item.NO_INSERT);\n\t\tresult.addChildren(paths, true);\n\t\tresult = result.reduce({ simplify: simplify });\n\t\tif (!(options && options.insert == false)) {\n\t\t\tresult.insertAbove(path2 && path1.isSibling(path2)\n\t\t\t\t\t&& path1.getIndex() < path2.getIndex() ? path2 : path1);\n\t\t}\n\t\tresult.copyAttributes(path1, true);\n\t\treturn result;\n\t}\n\n\tfunction filterIntersection(inter) {\n\t\treturn inter.hasOverlap() || inter.isCrossing();\n\t}\n\n\tfunction traceBoolean(path1, path2, operation, options) {\n\t\tif (options && (options.trace == false || options.stroke) &&\n\t\t\t\t/^(subtract|intersect)$/.test(operation))\n\t\t\treturn splitBoolean(path1, path2, operation);\n\t\tvar _path1 = preparePath(path1, true),\n\t\t\t_path2 = path2 && path1 !== path2 && preparePath(path2, true),\n\t\t\toperator = operators[operation];\n\t\toperator[operation] = true;\n\t\tif (_path2 && (operator.subtract || operator.exclude)\n\t\t\t\t^ (_path2.isClockwise() ^ _path1.isClockwise()))\n\t\t\t_path2.reverse();\n\t\tvar crossings = divideLocations(CurveLocation.expand(\n\t\t\t\t_path1.getIntersections(_path2, filterIntersection))),\n\t\t\tpaths1 = getPaths(_path1),\n\t\t\tpaths2 = _path2 && getPaths(_path2),\n\t\t\tsegments = [],\n\t\t\tcurves = [],\n\t\t\tpaths;\n\n\t\tfunction collectPaths(paths) {\n\t\t\tfor (var i = 0, l = paths.length; i < l; i++) {\n\t\t\t\tvar path = paths[i];\n\t\t\t\tBase.push(segments, path._segments);\n\t\t\t\tBase.push(curves, path.getCurves());\n\t\t\t\tpath._overlapsOnly = true;\n\t\t\t}\n\t\t}\n\n\t\tfunction getCurves(indices) {\n\t\t\tvar list = [];\n\t\t\tfor (var i = 0, l = indices && indices.length; i < l; i++) {\n\t\t\t\tlist.push(curves[indices[i]]);\n\t\t\t}\n\t\t\treturn list;\n\t\t}\n\n\t\tif (crossings.length) {\n\t\t\tcollectPaths(paths1);\n\t\t\tif (paths2)\n\t\t\t\tcollectPaths(paths2);\n\n\t\t\tvar curvesValues = new Array(curves.length);\n\t\t\tfor (var i = 0, l = curves.length; i < l; i++) {\n\t\t\t\tcurvesValues[i] = curves[i].getValues();\n\t\t\t}\n\t\t\tvar curveCollisions = CollisionDetection.findCurveBoundsCollisions(\n\t\t\t\t\tcurvesValues, curvesValues, 0, true);\n\t\t\tvar curveCollisionsMap = {};\n\t\t\tfor (var i = 0; i < curves.length; i++) {\n\t\t\t\tvar curve = curves[i],\n\t\t\t\t\tid = curve._path._id,\n\t\t\t\t\tmap = curveCollisionsMap[id] = curveCollisionsMap[id] || {};\n\t\t\t\tmap[curve.getIndex()] = {\n\t\t\t\t\thor: getCurves(curveCollisions[i].hor),\n\t\t\t\t\tver: getCurves(curveCollisions[i].ver)\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfor (var i = 0, l = crossings.length; i < l; i++) {\n\t\t\t\tpropagateWinding(crossings[i]._segment, _path1, _path2,\n\t\t\t\t\t\tcurveCollisionsMap, operator);\n\t\t\t}\n\t\t\tfor (var i = 0, l = segments.length; i < l; i++) {\n\t\t\t\tvar segment = segments[i],\n\t\t\t\t\tinter = segment._intersection;\n\t\t\t\tif (!segment._winding) {\n\t\t\t\t\tpropagateWinding(segment, _path1, _path2,\n\t\t\t\t\t\t\tcurveCollisionsMap, operator);\n\t\t\t\t}\n\t\t\t\tif (!(inter && inter._overlap))\n\t\t\t\t\tsegment._path._overlapsOnly = false;\n\t\t\t}\n\t\t\tpaths = tracePaths(segments, operator);\n\t\t} else {\n\t\t\tpaths = reorientPaths(\n\t\t\t\t\tpaths2 ? paths1.concat(paths2) : paths1.slice(),\n\t\t\t\t\tfunction(w) {\n\t\t\t\t\t\treturn !!operator[w];\n\t\t\t\t\t});\n\t\t}\n\t\treturn createResult(paths, true, path1, path2, options);\n\t}\n\n\tfunction splitBoolean(path1, path2, operation) {\n\t\tvar _path1 = preparePath(path1),\n\t\t\t_path2 = preparePath(path2),\n\t\t\tcrossings = _path1.getIntersections(_path2, filterIntersection),\n\t\t\tsubtract = operation === 'subtract',\n\t\t\tdivide = operation === 'divide',\n\t\t\tadded = {},\n\t\t\tpaths = [];\n\n\t\tfunction addPath(path) {\n\t\t\tif (!added[path._id] && (divide ||\n\t\t\t\t\t_path2.contains(path.getPointAt(path.getLength() / 2))\n\t\t\t\t\t\t^ subtract)) {\n\t\t\t\tpaths.unshift(path);\n\t\t\t\treturn added[path._id] = true;\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = crossings.length - 1; i >= 0; i--) {\n\t\t\tvar path = crossings[i].split();\n\t\t\tif (path) {\n\t\t\t\tif (addPath(path))\n\t\t\t\t\tpath.getFirstSegment().setHandleIn(0, 0);\n\t\t\t\t_path1.getLastSegment().setHandleOut(0, 0);\n\t\t\t}\n\t\t}\n\t\taddPath(_path1);\n\t\treturn createResult(paths, false, path1, path2);\n\t}\n\n\tfunction linkIntersections(from, to) {\n\t\tvar prev = from;\n\t\twhile (prev) {\n\t\t\tif (prev === to)\n\t\t\t\treturn;\n\t\t\tprev = prev._previous;\n\t\t}\n\t\twhile (from._next && from._next !== to)\n\t\t\tfrom = from._next;\n\t\tif (!from._next) {\n\t\t\twhile (to._previous)\n\t\t\t\tto = to._previous;\n\t\t\tfrom._next = to;\n\t\t\tto._previous = from;\n\t\t}\n\t}\n\n\tfunction clearCurveHandles(curves) {\n\t\tfor (var i = curves.length - 1; i >= 0; i--)\n\t\t\tcurves[i].clearHandles();\n\t}\n\n\tfunction reorientPaths(paths, isInside, clockwise) {\n\t\tvar length = paths && paths.length;\n\t\tif (length) {\n\t\t\tvar lookup = Base.each(paths, function (path, i) {\n\t\t\t\t\tthis[path._id] = {\n\t\t\t\t\t\tcontainer: null,\n\t\t\t\t\t\twinding: path.isClockwise() ? 1 : -1,\n\t\t\t\t\t\tindex: i\n\t\t\t\t\t};\n\t\t\t\t}, {}),\n\t\t\t\tsorted = paths.slice().sort(function (a, b) {\n\t\t\t\t\treturn abs(b.getArea()) - abs(a.getArea());\n\t\t\t\t}),\n\t\t\t\tfirst = sorted[0];\n\t\t\tvar collisions = CollisionDetection.findItemBoundsCollisions(sorted,\n\t\t\t\t\tnull, Numerical.GEOMETRIC_EPSILON);\n\t\t\tif (clockwise == null)\n\t\t\t\tclockwise = first.isClockwise();\n\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\tvar path1 = sorted[i],\n\t\t\t\t\tentry1 = lookup[path1._id],\n\t\t\t\t\tcontainerWinding = 0,\n\t\t\t\t\tindices = collisions[i];\n\t\t\t\tif (indices) {\n\t\t\t\t\tvar point = null;\n\t\t\t\t\tfor (var j = indices.length - 1; j >= 0; j--) {\n\t\t\t\t\t\tif (indices[j] < i) {\n\t\t\t\t\t\t\tpoint = point || path1.getInteriorPoint();\n\t\t\t\t\t\t\tvar path2 = sorted[indices[j]];\n\t\t\t\t\t\t\tif (path2.contains(point)) {\n\t\t\t\t\t\t\t\tvar entry2 = lookup[path2._id];\n\t\t\t\t\t\t\t\tcontainerWinding = entry2.winding;\n\t\t\t\t\t\t\t\tentry1.winding += containerWinding;\n\t\t\t\t\t\t\t\tentry1.container = entry2.exclude\n\t\t\t\t\t\t\t\t\t? entry2.container : path2;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (isInside(entry1.winding) === isInside(containerWinding)) {\n\t\t\t\t\tentry1.exclude = true;\n\t\t\t\t\tpaths[entry1.index] = null;\n\t\t\t\t} else {\n\t\t\t\t\tvar container = entry1.container;\n\t\t\t\t\tpath1.setClockwise(\n\t\t\t\t\t\t\tcontainer ? !container.isClockwise() : clockwise);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn paths;\n\t}\n\n\tfunction divideLocations(locations, include, clearLater) {\n\t\tvar results = include && [],\n\t\t\ttMin = 1e-8,\n\t\t\ttMax = 1 - tMin,\n\t\t\tclearHandles = false,\n\t\t\tclearCurves = clearLater || [],\n\t\t\tclearLookup = clearLater && {},\n\t\t\trenormalizeLocs,\n\t\t\tprevCurve,\n\t\t\tprevTime;\n\n\t\tfunction getId(curve) {\n\t\t\treturn curve._path._id + '.' + curve._segment1._index;\n\t\t}\n\n\t\tfor (var i = (clearLater && clearLater.length) - 1; i >= 0; i--) {\n\t\t\tvar curve = clearLater[i];\n\t\t\tif (curve._path)\n\t\t\t\tclearLookup[getId(curve)] = true;\n\t\t}\n\n\t\tfor (var i = locations.length - 1; i >= 0; i--) {\n\t\t\tvar loc = locations[i],\n\t\t\t\ttime = loc._time,\n\t\t\t\torigTime = time,\n\t\t\t\texclude = include && !include(loc),\n\t\t\t\tcurve = loc._curve,\n\t\t\t\tsegment;\n\t\t\tif (curve) {\n\t\t\t\tif (curve !== prevCurve) {\n\t\t\t\t\tclearHandles = !curve.hasHandles()\n\t\t\t\t\t\t\t|| clearLookup && clearLookup[getId(curve)];\n\t\t\t\t\trenormalizeLocs = [];\n\t\t\t\t\tprevTime = null;\n\t\t\t\t\tprevCurve = curve;\n\t\t\t\t} else if (prevTime >= tMin) {\n\t\t\t\t\ttime /= prevTime;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (exclude) {\n\t\t\t\tif (renormalizeLocs)\n\t\t\t\t\trenormalizeLocs.push(loc);\n\t\t\t\tcontinue;\n\t\t\t} else if (include) {\n\t\t\t\tresults.unshift(loc);\n\t\t\t}\n\t\t\tprevTime = origTime;\n\t\t\tif (time < tMin) {\n\t\t\t\tsegment = curve._segment1;\n\t\t\t} else if (time > tMax) {\n\t\t\t\tsegment = curve._segment2;\n\t\t\t} else {\n\t\t\t\tvar newCurve = curve.divideAtTime(time, true);\n\t\t\t\tif (clearHandles)\n\t\t\t\t\tclearCurves.push(curve, newCurve);\n\t\t\t\tsegment = newCurve._segment1;\n\t\t\t\tfor (var j = renormalizeLocs.length - 1; j >= 0; j--) {\n\t\t\t\t\tvar l = renormalizeLocs[j];\n\t\t\t\t\tl._time = (l._time - time) / (1 - time);\n\t\t\t\t}\n\t\t\t}\n\t\t\tloc._setSegment(segment);\n\t\t\tvar inter = segment._intersection,\n\t\t\t\tdest = loc._intersection;\n\t\t\tif (inter) {\n\t\t\t\tlinkIntersections(inter, dest);\n\t\t\t\tvar other = inter;\n\t\t\t\twhile (other) {\n\t\t\t\t\tlinkIntersections(other._intersection, inter);\n\t\t\t\t\tother = other._next;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsegment._intersection = dest;\n\t\t\t}\n\t\t}\n\t\tif (!clearLater)\n\t\t\tclearCurveHandles(clearCurves);\n\t\treturn results || locations;\n\t}\n\n\tfunction getWinding(point, curves, dir, closed, dontFlip) {\n\t\tvar curvesList = Array.isArray(curves)\n\t\t\t? curves\n\t\t\t: curves[dir ? 'hor' : 'ver'];\n\t\tvar ia = dir ? 1 : 0,\n\t\t\tio = ia ^ 1,\n\t\t\tpv = [point.x, point.y],\n\t\t\tpa = pv[ia],\n\t\t\tpo = pv[io],\n\t\t\twindingEpsilon = 1e-9,\n\t\t\tqualityEpsilon = 1e-6,\n\t\t\tpaL = pa - windingEpsilon,\n\t\t\tpaR = pa + windingEpsilon,\n\t\t\twindingL = 0,\n\t\t\twindingR = 0,\n\t\t\tpathWindingL = 0,\n\t\t\tpathWindingR = 0,\n\t\t\tonPath = false,\n\t\t\tonAnyPath = false,\n\t\t\tquality = 1,\n\t\t\troots = [],\n\t\t\tvPrev,\n\t\t\tvClose;\n\n\t\tfunction addWinding(v) {\n\t\t\tvar o0 = v[io + 0],\n\t\t\t\to3 = v[io + 6];\n\t\t\tif (po < min(o0, o3) || po > max(o0, o3)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar a0 = v[ia + 0],\n\t\t\t\ta1 = v[ia + 2],\n\t\t\t\ta2 = v[ia + 4],\n\t\t\t\ta3 = v[ia + 6];\n\t\t\tif (o0 === o3) {\n\t\t\t\tif (a0 < paR && a3 > paL || a3 < paR && a0 > paL) {\n\t\t\t\t\tonPath = true;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar t =   po === o0 ? 0\n\t\t\t\t\t: po === o3 ? 1\n\t\t\t\t\t: paL > max(a0, a1, a2, a3) || paR < min(a0, a1, a2, a3)\n\t\t\t\t\t? 1\n\t\t\t\t\t: Curve.solveCubic(v, io, po, roots, 0, 1) > 0\n\t\t\t\t\t\t? roots[0]\n\t\t\t\t\t\t: 1,\n\t\t\t\ta =   t === 0 ? a0\n\t\t\t\t\t: t === 1 ? a3\n\t\t\t\t\t: Curve.getPoint(v, t)[dir ? 'y' : 'x'],\n\t\t\t\twinding = o0 > o3 ? 1 : -1,\n\t\t\t\twindingPrev = vPrev[io] > vPrev[io + 6] ? 1 : -1,\n\t\t\t\ta3Prev = vPrev[ia + 6];\n\t\t\tif (po !== o0) {\n\t\t\t\tif (a < paL) {\n\t\t\t\t\tpathWindingL += winding;\n\t\t\t\t} else if (a > paR) {\n\t\t\t\t\tpathWindingR += winding;\n\t\t\t\t} else {\n\t\t\t\t\tonPath = true;\n\t\t\t\t}\n\t\t\t\tif (a > pa - qualityEpsilon && a < pa + qualityEpsilon)\n\t\t\t\t\tquality /= 2;\n\t\t\t} else {\n\t\t\t\tif (winding !== windingPrev) {\n\t\t\t\t\tif (a0 < paL) {\n\t\t\t\t\t\tpathWindingL += winding;\n\t\t\t\t\t} else if (a0 > paR) {\n\t\t\t\t\t\tpathWindingR += winding;\n\t\t\t\t\t}\n\t\t\t\t} else if (a0 != a3Prev) {\n\t\t\t\t\tif (a3Prev < paR && a > paR) {\n\t\t\t\t\t\tpathWindingR += winding;\n\t\t\t\t\t\tonPath = true;\n\t\t\t\t\t} else if (a3Prev > paL && a < paL) {\n\t\t\t\t\t\tpathWindingL += winding;\n\t\t\t\t\t\tonPath = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tquality /= 4;\n\t\t\t}\n\t\t\tvPrev = v;\n\t\t\treturn !dontFlip && a > paL && a < paR\n\t\t\t\t\t&& Curve.getTangent(v, t)[dir ? 'x' : 'y'] === 0\n\t\t\t\t\t&& getWinding(point, curves, !dir, closed, true);\n\t\t}\n\n\t\tfunction handleCurve(v) {\n\t\t\tvar o0 = v[io + 0],\n\t\t\t\to1 = v[io + 2],\n\t\t\t\to2 = v[io + 4],\n\t\t\t\to3 = v[io + 6];\n\t\t\tif (po <= max(o0, o1, o2, o3) && po >= min(o0, o1, o2, o3)) {\n\t\t\t\tvar a0 = v[ia + 0],\n\t\t\t\t\ta1 = v[ia + 2],\n\t\t\t\t\ta2 = v[ia + 4],\n\t\t\t\t\ta3 = v[ia + 6],\n\t\t\t\t\tmonoCurves = paL > max(a0, a1, a2, a3) ||\n\t\t\t\t\t\t\t\t paR < min(a0, a1, a2, a3)\n\t\t\t\t\t\t\t? [v] : Curve.getMonoCurves(v, dir),\n\t\t\t\t\tres;\n\t\t\t\tfor (var i = 0, l = monoCurves.length; i < l; i++) {\n\t\t\t\t\tif (res = addWinding(monoCurves[i]))\n\t\t\t\t\t\treturn res;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0, l = curvesList.length; i < l; i++) {\n\t\t\tvar curve = curvesList[i],\n\t\t\t\tpath = curve._path,\n\t\t\t\tv = curve.getValues(),\n\t\t\t\tres;\n\t\t\tif (!i || curvesList[i - 1]._path !== path) {\n\t\t\t\tvPrev = null;\n\t\t\t\tif (!path._closed) {\n\t\t\t\t\tvClose = Curve.getValues(\n\t\t\t\t\t\t\tpath.getLastCurve().getSegment2(),\n\t\t\t\t\t\t\tcurve.getSegment1(),\n\t\t\t\t\t\t\tnull, !closed);\n\t\t\t\t\tif (vClose[io] !== vClose[io + 6]) {\n\t\t\t\t\t\tvPrev = vClose;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!vPrev) {\n\t\t\t\t\tvPrev = v;\n\t\t\t\t\tvar prev = path.getLastCurve();\n\t\t\t\t\twhile (prev && prev !== curve) {\n\t\t\t\t\t\tvar v2 = prev.getValues();\n\t\t\t\t\t\tif (v2[io] !== v2[io + 6]) {\n\t\t\t\t\t\t\tvPrev = v2;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprev = prev.getPrevious();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (res = handleCurve(v))\n\t\t\t\treturn res;\n\n\t\t\tif (i + 1 === l || curvesList[i + 1]._path !== path) {\n\t\t\t\tif (vClose && (res = handleCurve(vClose)))\n\t\t\t\t\treturn res;\n\t\t\t\tif (onPath && !pathWindingL && !pathWindingR) {\n\t\t\t\t\tpathWindingL = pathWindingR = path.isClockwise(closed) ^ dir\n\t\t\t\t\t\t\t? 1 : -1;\n\t\t\t\t}\n\t\t\t\twindingL += pathWindingL;\n\t\t\t\twindingR += pathWindingR;\n\t\t\t\tpathWindingL = pathWindingR = 0;\n\t\t\t\tif (onPath) {\n\t\t\t\t\tonAnyPath = true;\n\t\t\t\t\tonPath = false;\n\t\t\t\t}\n\t\t\t\tvClose = null;\n\t\t\t}\n\t\t}\n\t\twindingL = abs(windingL);\n\t\twindingR = abs(windingR);\n\t\treturn {\n\t\t\twinding: max(windingL, windingR),\n\t\t\twindingL: windingL,\n\t\t\twindingR: windingR,\n\t\t\tquality: quality,\n\t\t\tonPath: onAnyPath\n\t\t};\n\t}\n\n\tfunction propagateWinding(segment, path1, path2, curveCollisionsMap,\n\t\t\toperator) {\n\t\tvar chain = [],\n\t\t\tstart = segment,\n\t\t\ttotalLength = 0,\n\t\t\twinding;\n\t\tdo {\n\t\t\tvar curve = segment.getCurve();\n\t\t\tif (curve) {\n\t\t\t\tvar length = curve.getLength();\n\t\t\t\tchain.push({ segment: segment, curve: curve, length: length });\n\t\t\t\ttotalLength += length;\n\t\t\t}\n\t\t\tsegment = segment.getNext();\n\t\t} while (segment && !segment._intersection && segment !== start);\n\t\tvar offsets = [0.5, 0.25, 0.75],\n\t\t\twinding = { winding: 0, quality: -1 },\n\t\t\ttMin = 1e-3,\n\t\t\ttMax = 1 - tMin;\n\t\tfor (var i = 0; i < offsets.length && winding.quality < 0.5; i++) {\n\t\t\tvar length = totalLength * offsets[i];\n\t\t\tfor (var j = 0, l = chain.length; j < l; j++) {\n\t\t\t\tvar entry = chain[j],\n\t\t\t\t\tcurveLength = entry.length;\n\t\t\t\tif (length <= curveLength) {\n\t\t\t\t\tvar curve = entry.curve,\n\t\t\t\t\t\tpath = curve._path,\n\t\t\t\t\t\tparent = path._parent,\n\t\t\t\t\t\toperand = parent instanceof CompoundPath ? parent : path,\n\t\t\t\t\t\tt = Numerical.clamp(curve.getTimeAt(length), tMin, tMax),\n\t\t\t\t\t\tpt = curve.getPointAtTime(t),\n\t\t\t\t\t\tdir = abs(curve.getTangentAtTime(t).y) < Math.SQRT1_2;\n\t\t\t\t\tvar wind = null;\n\t\t\t\t\tif (operator.subtract && path2) {\n\t\t\t\t\t\tvar otherPath = operand === path1 ? path2 : path1,\n\t\t\t\t\t\t\tpathWinding = otherPath._getWinding(pt, dir, true);\n\t\t\t\t\t\tif (operand === path1 && pathWinding.winding ||\n\t\t\t\t\t\t\toperand === path2 && !pathWinding.winding) {\n\t\t\t\t\t\t\tif (pathWinding.quality < 1) {\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twind = { winding: 0, quality: 1 };\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\twind =  wind || getWinding(\n\t\t\t\t\t\t\tpt, curveCollisionsMap[path._id][curve.getIndex()],\n\t\t\t\t\t\t\tdir, true);\n\t\t\t\t\tif (wind.quality > winding.quality)\n\t\t\t\t\t\twinding = wind;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlength -= curveLength;\n\t\t\t}\n\t\t}\n\t\tfor (var j = chain.length - 1; j >= 0; j--) {\n\t\t\tchain[j].segment._winding = winding;\n\t\t}\n\t}\n\n\tfunction tracePaths(segments, operator) {\n\t\tvar paths = [],\n\t\t\tstarts;\n\n\t\tfunction isValid(seg) {\n\t\t\tvar winding;\n\t\t\treturn !!(seg && !seg._visited && (!operator\n\t\t\t\t\t|| operator[(winding = seg._winding || {}).winding]\n\t\t\t\t\t\t&& !(operator.unite && winding.winding === 2\n\t\t\t\t\t\t\t&& winding.windingL && winding.windingR)));\n\t\t}\n\n\t\tfunction isStart(seg) {\n\t\t\tif (seg) {\n\t\t\t\tfor (var i = 0, l = starts.length; i < l; i++) {\n\t\t\t\t\tif (seg === starts[i])\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tfunction visitPath(path) {\n\t\t\tvar segments = path._segments;\n\t\t\tfor (var i = 0, l = segments.length; i < l; i++) {\n\t\t\t\tsegments[i]._visited = true;\n\t\t\t}\n\t\t}\n\n\t\tfunction getCrossingSegments(segment, collectStarts) {\n\t\t\tvar inter = segment._intersection,\n\t\t\t\tstart = inter,\n\t\t\t\tcrossings = [];\n\t\t\tif (collectStarts)\n\t\t\t\tstarts = [segment];\n\n\t\t\tfunction collect(inter, end) {\n\t\t\t\twhile (inter && inter !== end) {\n\t\t\t\t\tvar other = inter._segment,\n\t\t\t\t\t\tpath = other && other._path;\n\t\t\t\t\tif (path) {\n\t\t\t\t\t\tvar next = other.getNext() || path.getFirstSegment(),\n\t\t\t\t\t\t\tnextInter = next._intersection;\n\t\t\t\t\t\tif (other !== segment && (isStart(other)\n\t\t\t\t\t\t\t|| isStart(next)\n\t\t\t\t\t\t\t|| next && (isValid(other) && (isValid(next)\n\t\t\t\t\t\t\t\t|| nextInter && isValid(nextInter._segment))))\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tcrossings.push(other);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (collectStarts)\n\t\t\t\t\t\t\tstarts.push(other);\n\t\t\t\t\t}\n\t\t\t\t\tinter = inter._next;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (inter) {\n\t\t\t\tcollect(inter);\n\t\t\t\twhile (inter && inter._previous)\n\t\t\t\t\tinter = inter._previous;\n\t\t\t\tcollect(inter, start);\n\t\t\t}\n\t\t\treturn crossings;\n\t\t}\n\n\t\tsegments.sort(function(seg1, seg2) {\n\t\t\tvar inter1 = seg1._intersection,\n\t\t\t\tinter2 = seg2._intersection,\n\t\t\t\tover1 = !!(inter1 && inter1._overlap),\n\t\t\t\tover2 = !!(inter2 && inter2._overlap),\n\t\t\t\tpath1 = seg1._path,\n\t\t\t\tpath2 = seg2._path;\n\t\t\treturn over1 ^ over2\n\t\t\t\t\t? over1 ? 1 : -1\n\t\t\t\t\t: !inter1 ^ !inter2\n\t\t\t\t\t\t? inter1 ? 1 : -1\n\t\t\t\t\t\t: path1 !== path2\n\t\t\t\t\t\t\t? path1._id - path2._id\n\t\t\t\t\t\t\t: seg1._index - seg2._index;\n\t\t});\n\n\t\tfor (var i = 0, l = segments.length; i < l; i++) {\n\t\t\tvar seg = segments[i],\n\t\t\t\tvalid = isValid(seg),\n\t\t\t\tpath = null,\n\t\t\t\tfinished = false,\n\t\t\t\tclosed = true,\n\t\t\t\tbranches = [],\n\t\t\t\tbranch,\n\t\t\t\tvisited,\n\t\t\t\thandleIn;\n\t\t\tif (valid && seg._path._overlapsOnly) {\n\t\t\t\tvar path1 = seg._path,\n\t\t\t\t\tpath2 = seg._intersection._segment._path;\n\t\t\t\tif (path1.compare(path2)) {\n\t\t\t\t\tif (path1.getArea())\n\t\t\t\t\t\tpaths.push(path1.clone(false));\n\t\t\t\t\tvisitPath(path1);\n\t\t\t\t\tvisitPath(path2);\n\t\t\t\t\tvalid = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\twhile (valid) {\n\t\t\t\tvar first = !path,\n\t\t\t\t\tcrossings = getCrossingSegments(seg, first),\n\t\t\t\t\tother = crossings.shift(),\n\t\t\t\t\tfinished = !first && (isStart(seg) || isStart(other)),\n\t\t\t\t\tcross = !finished && other;\n\t\t\t\tif (first) {\n\t\t\t\t\tpath = new Path(Item.NO_INSERT);\n\t\t\t\t\tbranch = null;\n\t\t\t\t}\n\t\t\t\tif (finished) {\n\t\t\t\t\tif (seg.isFirst() || seg.isLast())\n\t\t\t\t\t\tclosed = seg._path._closed;\n\t\t\t\t\tseg._visited = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (cross && branch) {\n\t\t\t\t\tbranches.push(branch);\n\t\t\t\t\tbranch = null;\n\t\t\t\t}\n\t\t\t\tif (!branch) {\n\t\t\t\t\tif (cross)\n\t\t\t\t\t\tcrossings.push(seg);\n\t\t\t\t\tbranch = {\n\t\t\t\t\t\tstart: path._segments.length,\n\t\t\t\t\t\tcrossings: crossings,\n\t\t\t\t\t\tvisited: visited = [],\n\t\t\t\t\t\thandleIn: handleIn\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (cross)\n\t\t\t\t\tseg = other;\n\t\t\t\tif (!isValid(seg)) {\n\t\t\t\t\tpath.removeSegments(branch.start);\n\t\t\t\t\tfor (var j = 0, k = visited.length; j < k; j++) {\n\t\t\t\t\t\tvisited[j]._visited = false;\n\t\t\t\t\t}\n\t\t\t\t\tvisited.length = 0;\n\t\t\t\t\tdo {\n\t\t\t\t\t\tseg = branch && branch.crossings.shift();\n\t\t\t\t\t\tif (!seg || !seg._path) {\n\t\t\t\t\t\t\tseg = null;\n\t\t\t\t\t\t\tbranch = branches.pop();\n\t\t\t\t\t\t\tif (branch) {\n\t\t\t\t\t\t\t\tvisited = branch.visited;\n\t\t\t\t\t\t\t\thandleIn = branch.handleIn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} while (branch && !isValid(seg));\n\t\t\t\t\tif (!seg)\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tvar next = seg.getNext();\n\t\t\t\tpath.add(new Segment(seg._point, handleIn,\n\t\t\t\t\t\tnext && seg._handleOut));\n\t\t\t\tseg._visited = true;\n\t\t\t\tvisited.push(seg);\n\t\t\t\tseg = next || seg._path.getFirstSegment();\n\t\t\t\thandleIn = next && next._handleIn;\n\t\t\t}\n\t\t\tif (finished) {\n\t\t\t\tif (closed) {\n\t\t\t\t\tpath.getFirstSegment().setHandleIn(handleIn);\n\t\t\t\t\tpath.setClosed(closed);\n\t\t\t\t}\n\t\t\t\tif (path.getArea() !== 0) {\n\t\t\t\t\tpaths.push(path);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn paths;\n\t}\n\n\treturn {\n\t\t_getWinding: function(point, dir, closed) {\n\t\t\treturn getWinding(point, this.getCurves(), dir, closed);\n\t\t},\n\n\t\tunite: function(path, options) {\n\t\t\treturn traceBoolean(this, path, 'unite', options);\n\t\t},\n\n\t\tintersect: function(path, options) {\n\t\t\treturn traceBoolean(this, path, 'intersect', options);\n\t\t},\n\n\t\tsubtract: function(path, options) {\n\t\t\treturn traceBoolean(this, path, 'subtract', options);\n\t\t},\n\n\t\texclude: function(path, options) {\n\t\t\treturn traceBoolean(this, path, 'exclude', options);\n\t\t},\n\n\t\tdivide: function(path, options) {\n\t\t\treturn options && (options.trace == false || options.stroke)\n\t\t\t\t\t? splitBoolean(this, path, 'divide')\n\t\t\t\t\t: createResult([\n\t\t\t\t\t\tthis.subtract(path, options),\n\t\t\t\t\t\tthis.intersect(path, options)\n\t\t\t\t\t], true, this, path, options);\n\t\t},\n\n\t\tresolveCrossings: function() {\n\t\t\tvar children = this._children,\n\t\t\t\tpaths = children || [this];\n\n\t\t\tfunction hasOverlap(seg, path) {\n\t\t\t\tvar inter = seg && seg._intersection;\n\t\t\t\treturn inter && inter._overlap && inter._path === path;\n\t\t\t}\n\n\t\t\tvar hasOverlaps = false,\n\t\t\t\thasCrossings = false,\n\t\t\t\tintersections = this.getIntersections(null, function(inter) {\n\t\t\t\t\treturn inter.hasOverlap() && (hasOverlaps = true) ||\n\t\t\t\t\t\t\tinter.isCrossing() && (hasCrossings = true);\n\t\t\t\t}),\n\t\t\t\tclearCurves = hasOverlaps && hasCrossings && [];\n\t\t\tintersections = CurveLocation.expand(intersections);\n\t\t\tif (hasOverlaps) {\n\t\t\t\tvar overlaps = divideLocations(intersections, function(inter) {\n\t\t\t\t\treturn inter.hasOverlap();\n\t\t\t\t}, clearCurves);\n\t\t\t\tfor (var i = overlaps.length - 1; i >= 0; i--) {\n\t\t\t\t\tvar overlap = overlaps[i],\n\t\t\t\t\t\tpath = overlap._path,\n\t\t\t\t\t\tseg = overlap._segment,\n\t\t\t\t\t\tprev = seg.getPrevious(),\n\t\t\t\t\t\tnext = seg.getNext();\n\t\t\t\t\tif (hasOverlap(prev, path) && hasOverlap(next, path)) {\n\t\t\t\t\t\tseg.remove();\n\t\t\t\t\t\tprev._handleOut._set(0, 0);\n\t\t\t\t\t\tnext._handleIn._set(0, 0);\n\t\t\t\t\t\tif (prev !== seg && !prev.getCurve().hasLength()) {\n\t\t\t\t\t\t\tnext._handleIn.set(prev._handleIn);\n\t\t\t\t\t\t\tprev.remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hasCrossings) {\n\t\t\t\tdivideLocations(intersections, hasOverlaps && function(inter) {\n\t\t\t\t\tvar curve1 = inter.getCurve(),\n\t\t\t\t\t\tseg1 = inter.getSegment(),\n\t\t\t\t\t\tother = inter._intersection,\n\t\t\t\t\t\tcurve2 = other._curve,\n\t\t\t\t\t\tseg2 = other._segment;\n\t\t\t\t\tif (curve1 && curve2 && curve1._path && curve2._path)\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tif (seg1)\n\t\t\t\t\t\tseg1._intersection = null;\n\t\t\t\t\tif (seg2)\n\t\t\t\t\t\tseg2._intersection = null;\n\t\t\t\t}, clearCurves);\n\t\t\t\tif (clearCurves)\n\t\t\t\t\tclearCurveHandles(clearCurves);\n\t\t\t\tpaths = tracePaths(Base.each(paths, function(path) {\n\t\t\t\t\tBase.push(this, path._segments);\n\t\t\t\t}, []));\n\t\t\t}\n\t\t\tvar length = paths.length,\n\t\t\t\titem;\n\t\t\tif (length > 1 && children) {\n\t\t\t\tif (paths !== children)\n\t\t\t\t\tthis.setChildren(paths);\n\t\t\t\titem = this;\n\t\t\t} else if (length === 1 && !children) {\n\t\t\t\tif (paths[0] !== this)\n\t\t\t\t\tthis.setSegments(paths[0].removeSegments());\n\t\t\t\titem = this;\n\t\t\t}\n\t\t\tif (!item) {\n\t\t\t\titem = new CompoundPath(Item.NO_INSERT);\n\t\t\t\titem.addChildren(paths);\n\t\t\t\titem = item.reduce();\n\t\t\t\titem.copyAttributes(this);\n\t\t\t\tthis.replaceWith(item);\n\t\t\t}\n\t\t\treturn item;\n\t\t},\n\n\t\treorient: function(nonZero, clockwise) {\n\t\t\tvar children = this._children;\n\t\t\tif (children && children.length) {\n\t\t\t\tthis.setChildren(reorientPaths(this.removeChildren(),\n\t\t\t\t\t\tfunction(w) {\n\t\t\t\t\t\t\treturn !!(nonZero ? w : w & 1);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tclockwise));\n\t\t\t} else if (clockwise !== undefined) {\n\t\t\t\tthis.setClockwise(clockwise);\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\tgetInteriorPoint: function() {\n\t\t\tvar bounds = this.getBounds(),\n\t\t\t\tpoint = bounds.getCenter(true);\n\t\t\tif (!this.contains(point)) {\n\t\t\t\tvar curves = this.getCurves(),\n\t\t\t\t\ty = point.y,\n\t\t\t\t\tintercepts = [],\n\t\t\t\t\troots = [];\n\t\t\t\tfor (var i = 0, l = curves.length; i < l; i++) {\n\t\t\t\t\tvar v = curves[i].getValues(),\n\t\t\t\t\t\to0 = v[1],\n\t\t\t\t\t\to1 = v[3],\n\t\t\t\t\t\to2 = v[5],\n\t\t\t\t\t\to3 = v[7];\n\t\t\t\t\tif (y >= min(o0, o1, o2, o3) && y <= max(o0, o1, o2, o3)) {\n\t\t\t\t\t\tvar monoCurves = Curve.getMonoCurves(v);\n\t\t\t\t\t\tfor (var j = 0, m = monoCurves.length; j < m; j++) {\n\t\t\t\t\t\t\tvar mv = monoCurves[j],\n\t\t\t\t\t\t\t\tmo0 = mv[1],\n\t\t\t\t\t\t\t\tmo3 = mv[7];\n\t\t\t\t\t\t\tif ((mo0 !== mo3) &&\n\t\t\t\t\t\t\t\t(y >= mo0 && y <= mo3 || y >= mo3 && y <= mo0)){\n\t\t\t\t\t\t\t\tvar x = y === mo0 ? mv[0]\n\t\t\t\t\t\t\t\t\t: y === mo3 ? mv[6]\n\t\t\t\t\t\t\t\t\t: Curve.solveCubic(mv, 1, y, roots, 0, 1)\n\t\t\t\t\t\t\t\t\t\t=== 1\n\t\t\t\t\t\t\t\t\t\t? Curve.getPoint(mv, roots[0]).x\n\t\t\t\t\t\t\t\t\t\t: (mv[0] + mv[6]) / 2;\n\t\t\t\t\t\t\t\tintercepts.push(x);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (intercepts.length > 1) {\n\t\t\t\t\tintercepts.sort(function(a, b) { return a - b; });\n\t\t\t\t\tpoint.x = (intercepts[0] + intercepts[1]) / 2;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn point;\n\t\t}\n\t};\n});\n\nvar PathFlattener = Base.extend({\n\t_class: 'PathFlattener',\n\n\tinitialize: function(path, flatness, maxRecursion, ignoreStraight, matrix) {\n\t\tvar curves = [],\n\t\t\tparts = [],\n\t\t\tlength = 0,\n\t\t\tminSpan = 1 / (maxRecursion || 32),\n\t\t\tsegments = path._segments,\n\t\t\tsegment1 = segments[0],\n\t\t\tsegment2;\n\n\t\tfunction addCurve(segment1, segment2) {\n\t\t\tvar curve = Curve.getValues(segment1, segment2, matrix);\n\t\t\tcurves.push(curve);\n\t\t\tcomputeParts(curve, segment1._index, 0, 1);\n\t\t}\n\n\t\tfunction computeParts(curve, index, t1, t2) {\n\t\t\tif ((t2 - t1) > minSpan\n\t\t\t\t\t&& !(ignoreStraight && Curve.isStraight(curve))\n\t\t\t\t\t&& !Curve.isFlatEnough(curve, flatness || 0.25)) {\n\t\t\t\tvar halves = Curve.subdivide(curve, 0.5),\n\t\t\t\t\ttMid = (t1 + t2) / 2;\n\t\t\t\tcomputeParts(halves[0], index, t1, tMid);\n\t\t\t\tcomputeParts(halves[1], index, tMid, t2);\n\t\t\t} else {\n\t\t\t\tvar dx = curve[6] - curve[0],\n\t\t\t\t\tdy = curve[7] - curve[1],\n\t\t\t\t\tdist = Math.sqrt(dx * dx + dy * dy);\n\t\t\t\tif (dist > 0) {\n\t\t\t\t\tlength += dist;\n\t\t\t\t\tparts.push({\n\t\t\t\t\t\toffset: length,\n\t\t\t\t\t\tcurve: curve,\n\t\t\t\t\t\tindex: index,\n\t\t\t\t\t\ttime: t2,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 1, l = segments.length; i < l; i++) {\n\t\t\tsegment2 = segments[i];\n\t\t\taddCurve(segment1, segment2);\n\t\t\tsegment1 = segment2;\n\t\t}\n\t\tif (path._closed)\n\t\t\taddCurve(segment2 || segment1, segments[0]);\n\t\tthis.curves = curves;\n\t\tthis.parts = parts;\n\t\tthis.length = length;\n\t\tthis.index = 0;\n\t},\n\n\t_get: function(offset) {\n\t\tvar parts = this.parts,\n\t\t\tlength = parts.length,\n\t\t\tstart,\n\t\t\ti, j = this.index;\n\t\tfor (;;) {\n\t\t\ti = j;\n\t\t\tif (!j || parts[--j].offset < offset)\n\t\t\t\tbreak;\n\t\t}\n\t\tfor (; i < length; i++) {\n\t\t\tvar part = parts[i];\n\t\t\tif (part.offset >= offset) {\n\t\t\t\tthis.index = i;\n\t\t\t\tvar prev = parts[i - 1],\n\t\t\t\t\tprevTime = prev && prev.index === part.index ? prev.time : 0,\n\t\t\t\t\tprevOffset = prev ? prev.offset : 0;\n\t\t\t\treturn {\n\t\t\t\t\tindex: part.index,\n\t\t\t\t\ttime: prevTime + (part.time - prevTime)\n\t\t\t\t\t\t* (offset - prevOffset) / (part.offset - prevOffset)\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tindex: parts[length - 1].index,\n\t\t\ttime: 1\n\t\t};\n\t},\n\n\tdrawPart: function(ctx, from, to) {\n\t\tvar start = this._get(from),\n\t\t\tend = this._get(to);\n\t\tfor (var i = start.index, l = end.index; i <= l; i++) {\n\t\t\tvar curve = Curve.getPart(this.curves[i],\n\t\t\t\t\ti === start.index ? start.time : 0,\n\t\t\t\t\ti === end.index ? end.time : 1);\n\t\t\tif (i === start.index)\n\t\t\t\tctx.moveTo(curve[0], curve[1]);\n\t\t\tctx.bezierCurveTo.apply(ctx, curve.slice(2));\n\t\t}\n\t}\n}, Base.each(Curve._evaluateMethods,\n\tfunction(name) {\n\t\tthis[name + 'At'] = function(offset) {\n\t\t\tvar param = this._get(offset);\n\t\t\treturn Curve[name](this.curves[param.index], param.time);\n\t\t};\n\t}, {})\n);\n\nvar PathFitter = Base.extend({\n\tinitialize: function(path) {\n\t\tvar points = this.points = [],\n\t\t\tsegments = path._segments,\n\t\t\tclosed = path._closed;\n\t\tfor (var i = 0, prev, l = segments.length; i < l; i++) {\n\t\t\tvar point = segments[i].point;\n\t\t\tif (!prev || !prev.equals(point)) {\n\t\t\t\tpoints.push(prev = point.clone());\n\t\t\t}\n\t\t}\n\t\tif (closed) {\n\t\t\tpoints.unshift(points[points.length - 1]);\n\t\t\tpoints.push(points[1]);\n\t\t}\n\t\tthis.closed = closed;\n\t},\n\n\tfit: function(error) {\n\t\tvar points = this.points,\n\t\t\tlength = points.length,\n\t\t\tsegments = null;\n\t\tif (length > 0) {\n\t\t\tsegments = [new Segment(points[0])];\n\t\t\tif (length > 1) {\n\t\t\t\tthis.fitCubic(segments, error, 0, length - 1,\n\t\t\t\t\t\tpoints[1].subtract(points[0]),\n\t\t\t\t\t\tpoints[length - 2].subtract(points[length - 1]));\n\t\t\t\tif (this.closed) {\n\t\t\t\t\tsegments.shift();\n\t\t\t\t\tsegments.pop();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn segments;\n\t},\n\n\tfitCubic: function(segments, error, first, last, tan1, tan2) {\n\t\tvar points = this.points;\n\t\tif (last - first === 1) {\n\t\t\tvar pt1 = points[first],\n\t\t\t\tpt2 = points[last],\n\t\t\t\tdist = pt1.getDistance(pt2) / 3;\n\t\t\tthis.addCurve(segments, [pt1, pt1.add(tan1.normalize(dist)),\n\t\t\t\t\tpt2.add(tan2.normalize(dist)), pt2]);\n\t\t\treturn;\n\t\t}\n\t\tvar uPrime = this.chordLengthParameterize(first, last),\n\t\t\tmaxError = Math.max(error, error * error),\n\t\t\tsplit,\n\t\t\tparametersInOrder = true;\n\t\tfor (var i = 0; i <= 4; i++) {\n\t\t\tvar curve = this.generateBezier(first, last, uPrime, tan1, tan2);\n\t\t\tvar max = this.findMaxError(first, last, curve, uPrime);\n\t\t\tif (max.error < error && parametersInOrder) {\n\t\t\t\tthis.addCurve(segments, curve);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsplit = max.index;\n\t\t\tif (max.error >= maxError)\n\t\t\t\tbreak;\n\t\t\tparametersInOrder = this.reparameterize(first, last, uPrime, curve);\n\t\t\tmaxError = max.error;\n\t\t}\n\t\tvar tanCenter = points[split - 1].subtract(points[split + 1]);\n\t\tthis.fitCubic(segments, error, first, split, tan1, tanCenter);\n\t\tthis.fitCubic(segments, error, split, last, tanCenter.negate(), tan2);\n\t},\n\n\taddCurve: function(segments, curve) {\n\t\tvar prev = segments[segments.length - 1];\n\t\tprev.setHandleOut(curve[1].subtract(curve[0]));\n\t\tsegments.push(new Segment(curve[3], curve[2].subtract(curve[3])));\n\t},\n\n\tgenerateBezier: function(first, last, uPrime, tan1, tan2) {\n\t\tvar epsilon = 1e-12,\n\t\t\tabs = Math.abs,\n\t\t\tpoints = this.points,\n\t\t\tpt1 = points[first],\n\t\t\tpt2 = points[last],\n\t\t\tC = [[0, 0], [0, 0]],\n\t\t\tX = [0, 0];\n\n\t\tfor (var i = 0, l = last - first + 1; i < l; i++) {\n\t\t\tvar u = uPrime[i],\n\t\t\t\tt = 1 - u,\n\t\t\t\tb = 3 * u * t,\n\t\t\t\tb0 = t * t * t,\n\t\t\t\tb1 = b * t,\n\t\t\t\tb2 = b * u,\n\t\t\t\tb3 = u * u * u,\n\t\t\t\ta1 = tan1.normalize(b1),\n\t\t\t\ta2 = tan2.normalize(b2),\n\t\t\t\ttmp = points[first + i]\n\t\t\t\t\t.subtract(pt1.multiply(b0 + b1))\n\t\t\t\t\t.subtract(pt2.multiply(b2 + b3));\n\t\t\tC[0][0] += a1.dot(a1);\n\t\t\tC[0][1] += a1.dot(a2);\n\t\t\tC[1][0] = C[0][1];\n\t\t\tC[1][1] += a2.dot(a2);\n\t\t\tX[0] += a1.dot(tmp);\n\t\t\tX[1] += a2.dot(tmp);\n\t\t}\n\n\t\tvar detC0C1 = C[0][0] * C[1][1] - C[1][0] * C[0][1],\n\t\t\talpha1,\n\t\t\talpha2;\n\t\tif (abs(detC0C1) > epsilon) {\n\t\t\tvar detC0X = C[0][0] * X[1]    - C[1][0] * X[0],\n\t\t\t\tdetXC1 = X[0]    * C[1][1] - X[1]    * C[0][1];\n\t\t\talpha1 = detXC1 / detC0C1;\n\t\t\talpha2 = detC0X / detC0C1;\n\t\t} else {\n\t\t\tvar c0 = C[0][0] + C[0][1],\n\t\t\t\tc1 = C[1][0] + C[1][1];\n\t\t\talpha1 = alpha2 = abs(c0) > epsilon ? X[0] / c0\n\t\t\t\t\t\t\t: abs(c1) > epsilon ? X[1] / c1\n\t\t\t\t\t\t\t: 0;\n\t\t}\n\n\t\tvar segLength = pt2.getDistance(pt1),\n\t\t\teps = epsilon * segLength,\n\t\t\thandle1,\n\t\t\thandle2;\n\t\tif (alpha1 < eps || alpha2 < eps) {\n\t\t\talpha1 = alpha2 = segLength / 3;\n\t\t} else {\n\t\t\tvar line = pt2.subtract(pt1);\n\t\t\thandle1 = tan1.normalize(alpha1);\n\t\t\thandle2 = tan2.normalize(alpha2);\n\t\t\tif (handle1.dot(line) - handle2.dot(line) > segLength * segLength) {\n\t\t\t\talpha1 = alpha2 = segLength / 3;\n\t\t\t\thandle1 = handle2 = null;\n\t\t\t}\n\t\t}\n\n\t\treturn [pt1,\n\t\t\t\tpt1.add(handle1 || tan1.normalize(alpha1)),\n\t\t\t\tpt2.add(handle2 || tan2.normalize(alpha2)),\n\t\t\t\tpt2];\n\t},\n\n\treparameterize: function(first, last, u, curve) {\n\t\tfor (var i = first; i <= last; i++) {\n\t\t\tu[i - first] = this.findRoot(curve, this.points[i], u[i - first]);\n\t\t}\n\t\tfor (var i = 1, l = u.length; i < l; i++) {\n\t\t\tif (u[i] <= u[i - 1])\n\t\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\tfindRoot: function(curve, point, u) {\n\t\tvar curve1 = [],\n\t\t\tcurve2 = [];\n\t\tfor (var i = 0; i <= 2; i++) {\n\t\t\tcurve1[i] = curve[i + 1].subtract(curve[i]).multiply(3);\n\t\t}\n\t\tfor (var i = 0; i <= 1; i++) {\n\t\t\tcurve2[i] = curve1[i + 1].subtract(curve1[i]).multiply(2);\n\t\t}\n\t\tvar pt = this.evaluate(3, curve, u),\n\t\t\tpt1 = this.evaluate(2, curve1, u),\n\t\t\tpt2 = this.evaluate(1, curve2, u),\n\t\t\tdiff = pt.subtract(point),\n\t\t\tdf = pt1.dot(pt1) + diff.dot(pt2);\n\t\treturn Numerical.isMachineZero(df) ? u : u - diff.dot(pt1) / df;\n\t},\n\n\tevaluate: function(degree, curve, t) {\n\t\tvar tmp = curve.slice();\n\t\tfor (var i = 1; i <= degree; i++) {\n\t\t\tfor (var j = 0; j <= degree - i; j++) {\n\t\t\t\ttmp[j] = tmp[j].multiply(1 - t).add(tmp[j + 1].multiply(t));\n\t\t\t}\n\t\t}\n\t\treturn tmp[0];\n\t},\n\n\tchordLengthParameterize: function(first, last) {\n\t\tvar u = [0];\n\t\tfor (var i = first + 1; i <= last; i++) {\n\t\t\tu[i - first] = u[i - first - 1]\n\t\t\t\t\t+ this.points[i].getDistance(this.points[i - 1]);\n\t\t}\n\t\tfor (var i = 1, m = last - first; i <= m; i++) {\n\t\t\tu[i] /= u[m];\n\t\t}\n\t\treturn u;\n\t},\n\n\tfindMaxError: function(first, last, curve, u) {\n\t\tvar index = Math.floor((last - first + 1) / 2),\n\t\t\tmaxDist = 0;\n\t\tfor (var i = first + 1; i < last; i++) {\n\t\t\tvar P = this.evaluate(3, curve, u[i - first]);\n\t\t\tvar v = P.subtract(this.points[i]);\n\t\t\tvar dist = v.x * v.x + v.y * v.y;\n\t\t\tif (dist >= maxDist) {\n\t\t\t\tmaxDist = dist;\n\t\t\t\tindex = i;\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\terror: maxDist,\n\t\t\tindex: index\n\t\t};\n\t}\n});\n\nvar TextItem = Item.extend({\n\t_class: 'TextItem',\n\t_applyMatrix: false,\n\t_canApplyMatrix: false,\n\t_serializeFields: {\n\t\tcontent: null\n\t},\n\t_boundsOptions: { stroke: false, handle: false },\n\n\tinitialize: function TextItem(arg) {\n\t\tthis._content = '';\n\t\tthis._lines = [];\n\t\tvar hasProps = arg && Base.isPlainObject(arg)\n\t\t\t\t&& arg.x === undefined && arg.y === undefined;\n\t\tthis._initialize(hasProps && arg, !hasProps && Point.read(arguments));\n\t},\n\n\t_equals: function(item) {\n\t\treturn this._content === item._content;\n\t},\n\n\tcopyContent: function(source) {\n\t\tthis.setContent(source._content);\n\t},\n\n\tgetContent: function() {\n\t\treturn this._content;\n\t},\n\n\tsetContent: function(content) {\n\t\tthis._content = '' + content;\n\t\tthis._lines = this._content.split(/\\r\\n|\\n|\\r/mg);\n\t\tthis._changed(521);\n\t},\n\n\tisEmpty: function() {\n\t\treturn !this._content;\n\t},\n\n\tgetCharacterStyle: '#getStyle',\n\tsetCharacterStyle: '#setStyle',\n\n\tgetParagraphStyle: '#getStyle',\n\tsetParagraphStyle: '#setStyle'\n});\n\nvar PointText = TextItem.extend({\n\t_class: 'PointText',\n\n\tinitialize: function PointText() {\n\t\tTextItem.apply(this, arguments);\n\t},\n\n\tgetPoint: function() {\n\t\tvar point = this._matrix.getTranslation();\n\t\treturn new LinkedPoint(point.x, point.y, this, 'setPoint');\n\t},\n\n\tsetPoint: function() {\n\t\tvar point = Point.read(arguments);\n\t\tthis.translate(point.subtract(this._matrix.getTranslation()));\n\t},\n\n\t_draw: function(ctx, param, viewMatrix) {\n\t\tif (!this._content)\n\t\t\treturn;\n\t\tthis._setStyles(ctx, param, viewMatrix);\n\t\tvar lines = this._lines,\n\t\t\tstyle = this._style,\n\t\t\thasFill = style.hasFill(),\n\t\t\thasStroke = style.hasStroke(),\n\t\t\tleading = style.getLeading(),\n\t\t\tshadowColor = ctx.shadowColor;\n\t\tctx.font = style.getFontStyle();\n\t\tctx.textAlign = style.getJustification();\n\t\tfor (var i = 0, l = lines.length; i < l; i++) {\n\t\t\tctx.shadowColor = shadowColor;\n\t\t\tvar line = lines[i];\n\t\t\tif (hasFill) {\n\t\t\t\tctx.fillText(line, 0, 0);\n\t\t\t\tctx.shadowColor = 'rgba(0,0,0,0)';\n\t\t\t}\n\t\t\tif (hasStroke)\n\t\t\t\tctx.strokeText(line, 0, 0);\n\t\t\tctx.translate(0, leading);\n\t\t}\n\t},\n\n\t_getBounds: function(matrix, options) {\n\t\tvar style = this._style,\n\t\t\tlines = this._lines,\n\t\t\tnumLines = lines.length,\n\t\t\tjustification = style.getJustification(),\n\t\t\tleading = style.getLeading(),\n\t\t\twidth = this.getView().getTextWidth(style.getFontStyle(), lines),\n\t\t\tx = 0;\n\t\tif (justification !== 'left')\n\t\t\tx -= width / (justification === 'center' ? 2: 1);\n\t\tvar rect = new Rectangle(x,\n\t\t\t\t\tnumLines ? - 0.75 * leading : 0,\n\t\t\t\t\twidth, numLines * leading);\n\t\treturn matrix ? matrix._transformBounds(rect, rect) : rect;\n\t}\n});\n\nvar Color = Base.extend(new function() {\n\tvar types = {\n\t\tgray: ['gray'],\n\t\trgb: ['red', 'green', 'blue'],\n\t\thsb: ['hue', 'saturation', 'brightness'],\n\t\thsl: ['hue', 'saturation', 'lightness'],\n\t\tgradient: ['gradient', 'origin', 'destination', 'highlight']\n\t};\n\n\tvar componentParsers = {},\n\t\tnamedColors = {\n\t\t\ttransparent: [0, 0, 0, 0]\n\t\t},\n\t\tcolorCtx;\n\n\tfunction fromCSS(string) {\n\t\tvar match = string.match(\n\t\t\t\t/^#([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})?$/i\n\t\t\t) || string.match(\n\t\t\t\t/^#([\\da-f])([\\da-f])([\\da-f])([\\da-f])?$/i\n\t\t\t),\n\t\t\ttype = 'rgb',\n\t\t\tcomponents;\n\t\tif (match) {\n\t\t\tvar amount = match[4] ? 4 : 3;\n\t\t\tcomponents = new Array(amount);\n\t\t\tfor (var i = 0; i < amount; i++) {\n\t\t\t\tvar value = match[i + 1];\n\t\t\t\tcomponents[i] = parseInt(value.length == 1\n\t\t\t\t\t\t? value + value : value, 16) / 255;\n\t\t\t}\n\t\t} else if (match = string.match(/^(rgb|hsl)a?\\((.*)\\)$/)) {\n\t\t\ttype = match[1];\n\t\t\tcomponents = match[2].trim().split(/[,\\s]+/g);\n\t\t\tvar isHSL = type === 'hsl';\n\t\t\tfor (var i = 0, l = Math.min(components.length, 4); i < l; i++) {\n\t\t\t\tvar component = components[i];\n\t\t\t\tvar value = parseFloat(component);\n\t\t\t\tif (isHSL) {\n\t\t\t\t\tif (i === 0) {\n\t\t\t\t\t\tvar unit = component.match(/([a-z]*)$/)[1];\n\t\t\t\t\t\tvalue *= ({\n\t\t\t\t\t\t\tturn: 360,\n\t\t\t\t\t\t\trad: 180 / Math.PI,\n\t\t\t\t\t\t\tgrad: 0.9\n\t\t\t\t\t\t}[unit] || 1);\n\t\t\t\t\t} else if (i < 3) {\n\t\t\t\t\t\tvalue /= 100;\n\t\t\t\t\t}\n\t\t\t\t} else if (i < 3) {\n\t\t\t\t\tvalue /= /%$/.test(component) ? 100 : 255;\n\t\t\t\t}\n\t\t\t\tcomponents[i] = value;\n\t\t\t}\n\t\t} else {\n\t\t\tvar color = namedColors[string];\n\t\t\tif (!color) {\n\t\t\t\tif (window) {\n\t\t\t\t\tif (!colorCtx) {\n\t\t\t\t\t\tcolorCtx = CanvasProvider.getContext(1, 1);\n\t\t\t\t\t\tcolorCtx.globalCompositeOperation = 'copy';\n\t\t\t\t\t}\n\t\t\t\t\tcolorCtx.fillStyle = 'rgba(0,0,0,0)';\n\t\t\t\t\tcolorCtx.fillStyle = string;\n\t\t\t\t\tcolorCtx.fillRect(0, 0, 1, 1);\n\t\t\t\t\tvar data = colorCtx.getImageData(0, 0, 1, 1).data;\n\t\t\t\t\tcolor = namedColors[string] = [\n\t\t\t\t\t\tdata[0] / 255,\n\t\t\t\t\t\tdata[1] / 255,\n\t\t\t\t\t\tdata[2] / 255\n\t\t\t\t\t];\n\t\t\t\t} else {\n\t\t\t\t\tcolor = [0, 0, 0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tcomponents = color.slice();\n\t\t}\n\t\treturn [type, components];\n\t}\n\n\tvar hsbIndices = [\n\t\t[0, 3, 1],\n\t\t[2, 0, 1],\n\t\t[1, 0, 3],\n\t\t[1, 2, 0],\n\t\t[3, 1, 0],\n\t\t[0, 1, 2]\n\t];\n\n\tvar converters = {\n\t\t'rgb-hsb': function(r, g, b) {\n\t\t\tvar max = Math.max(r, g, b),\n\t\t\t\tmin = Math.min(r, g, b),\n\t\t\t\tdelta = max - min,\n\t\t\t\th = delta === 0 ? 0\n\t\t\t\t\t:   ( max == r ? (g - b) / delta + (g < b ? 6 : 0)\n\t\t\t\t\t\t: max == g ? (b - r) / delta + 2\n\t\t\t\t\t\t:            (r - g) / delta + 4) * 60;\n\t\t\treturn [h, max === 0 ? 0 : delta / max, max];\n\t\t},\n\n\t\t'hsb-rgb': function(h, s, b) {\n\t\t\th = (((h / 60) % 6) + 6) % 6;\n\t\t\tvar i = Math.floor(h),\n\t\t\t\tf = h - i,\n\t\t\t\ti = hsbIndices[i],\n\t\t\t\tv = [\n\t\t\t\t\tb,\n\t\t\t\t\tb * (1 - s),\n\t\t\t\t\tb * (1 - s * f),\n\t\t\t\t\tb * (1 - s * (1 - f))\n\t\t\t\t];\n\t\t\treturn [v[i[0]], v[i[1]], v[i[2]]];\n\t\t},\n\n\t\t'rgb-hsl': function(r, g, b) {\n\t\t\tvar max = Math.max(r, g, b),\n\t\t\t\tmin = Math.min(r, g, b),\n\t\t\t\tdelta = max - min,\n\t\t\t\tachromatic = delta === 0,\n\t\t\t\th = achromatic ? 0\n\t\t\t\t\t:   ( max == r ? (g - b) / delta + (g < b ? 6 : 0)\n\t\t\t\t\t\t: max == g ? (b - r) / delta + 2\n\t\t\t\t\t\t:            (r - g) / delta + 4) * 60,\n\t\t\t\tl = (max + min) / 2,\n\t\t\t\ts = achromatic ? 0 : l < 0.5\n\t\t\t\t\t\t? delta / (max + min)\n\t\t\t\t\t\t: delta / (2 - max - min);\n\t\t\treturn [h, s, l];\n\t\t},\n\n\t\t'hsl-rgb': function(h, s, l) {\n\t\t\th = (((h / 360) % 1) + 1) % 1;\n\t\t\tif (s === 0)\n\t\t\t\treturn [l, l, l];\n\t\t\tvar t3s = [ h + 1 / 3, h, h - 1 / 3 ],\n\t\t\t\tt2 = l < 0.5 ? l * (1 + s) : l + s - l * s,\n\t\t\t\tt1 = 2 * l - t2,\n\t\t\t\tc = [];\n\t\t\tfor (var i = 0; i < 3; i++) {\n\t\t\t\tvar t3 = t3s[i];\n\t\t\t\tif (t3 < 0) t3 += 1;\n\t\t\t\tif (t3 > 1) t3 -= 1;\n\t\t\t\tc[i] = 6 * t3 < 1\n\t\t\t\t\t? t1 + (t2 - t1) * 6 * t3\n\t\t\t\t\t: 2 * t3 < 1\n\t\t\t\t\t\t? t2\n\t\t\t\t\t\t: 3 * t3 < 2\n\t\t\t\t\t\t\t? t1 + (t2 - t1) * ((2 / 3) - t3) * 6\n\t\t\t\t\t\t\t: t1;\n\t\t\t}\n\t\t\treturn c;\n\t\t},\n\n\t\t'rgb-gray': function(r, g, b) {\n\t\t\treturn [r * 0.2989 + g * 0.587 + b * 0.114];\n\t\t},\n\n\t\t'gray-rgb': function(g) {\n\t\t\treturn [g, g, g];\n\t\t},\n\n\t\t'gray-hsb': function(g) {\n\t\t\treturn [0, 0, g];\n\t\t},\n\n\t\t'gray-hsl': function(g) {\n\t\t\treturn [0, 0, g];\n\t\t},\n\n\t\t'gradient-rgb': function() {\n\t\t\treturn [];\n\t\t},\n\n\t\t'rgb-gradient': function() {\n\t\t\treturn [];\n\t\t}\n\n\t};\n\n\treturn Base.each(types, function(properties, type) {\n\t\tcomponentParsers[type] = [];\n\t\tBase.each(properties, function(name, index) {\n\t\t\tvar part = Base.capitalize(name),\n\t\t\t\thasOverlap = /^(hue|saturation)$/.test(name),\n\t\t\t\tparser = componentParsers[type][index] = type === 'gradient'\n\t\t\t\t\t? name === 'gradient'\n\t\t\t\t\t\t? function(value) {\n\t\t\t\t\t\t\tvar current = this._components[0];\n\t\t\t\t\t\t\tvalue = Gradient.read(\n\t\t\t\t\t\t\t\tArray.isArray(value)\n\t\t\t\t\t\t\t\t\t? value\n\t\t\t\t\t\t\t\t\t: arguments, 0, { readNull: true }\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (current !== value) {\n\t\t\t\t\t\t\t\tif (current)\n\t\t\t\t\t\t\t\t\tcurrent._removeOwner(this);\n\t\t\t\t\t\t\t\tif (value)\n\t\t\t\t\t\t\t\t\tvalue._addOwner(this);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t: function() {\n\t\t\t\t\t\t\treturn Point.read(arguments, 0, {\n\t\t\t\t\t\t\t\t\treadNull: name === 'highlight',\n\t\t\t\t\t\t\t\t\tclone: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t: function(value) {\n\t\t\t\t\t\treturn value == null || isNaN(value) ? 0 : +value;\n\t\t\t\t\t};\n\t\t\tthis['get' + part] = function() {\n\t\t\t\treturn this._type === type\n\t\t\t\t\t|| hasOverlap && /^hs[bl]$/.test(this._type)\n\t\t\t\t\t\t? this._components[index]\n\t\t\t\t\t\t: this._convert(type)[index];\n\t\t\t};\n\n\t\t\tthis['set' + part] = function(value) {\n\t\t\t\tif (this._type !== type\n\t\t\t\t\t\t&& !(hasOverlap && /^hs[bl]$/.test(this._type))) {\n\t\t\t\t\tthis._components = this._convert(type);\n\t\t\t\t\tthis._properties = types[type];\n\t\t\t\t\tthis._type = type;\n\t\t\t\t}\n\t\t\t\tthis._components[index] = parser.call(this, value);\n\t\t\t\tthis._changed();\n\t\t\t};\n\t\t}, this);\n\t}, {\n\t\t_class: 'Color',\n\t\t_readIndex: true,\n\n\t\tinitialize: function Color(arg) {\n\t\t\tvar args = arguments,\n\t\t\t\treading = this.__read,\n\t\t\t\tread = 0,\n\t\t\t\ttype,\n\t\t\t\tcomponents,\n\t\t\t\talpha,\n\t\t\t\tvalues;\n\t\t\tif (Array.isArray(arg)) {\n\t\t\t\targs = arg;\n\t\t\t\targ = args[0];\n\t\t\t}\n\t\t\tvar argType = arg != null && typeof arg;\n\t\t\tif (argType === 'string' && arg in types) {\n\t\t\t\ttype = arg;\n\t\t\t\targ = args[1];\n\t\t\t\tif (Array.isArray(arg)) {\n\t\t\t\t\tcomponents = arg;\n\t\t\t\t\talpha = args[2];\n\t\t\t\t} else {\n\t\t\t\t\tif (reading)\n\t\t\t\t\t\tread = 1;\n\t\t\t\t\targs = Base.slice(args, 1);\n\t\t\t\t\targType = typeof arg;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!components) {\n\t\t\t\tvalues = argType === 'number'\n\t\t\t\t\t\t? args\n\t\t\t\t\t\t: argType === 'object' && arg.length != null\n\t\t\t\t\t\t\t? arg\n\t\t\t\t\t\t\t: null;\n\t\t\t\tif (values) {\n\t\t\t\t\tif (!type)\n\t\t\t\t\t\ttype = values.length >= 3\n\t\t\t\t\t\t\t\t? 'rgb'\n\t\t\t\t\t\t\t\t: 'gray';\n\t\t\t\t\tvar length = types[type].length;\n\t\t\t\t\talpha = values[length];\n\t\t\t\t\tif (reading) {\n\t\t\t\t\t\tread += values === arguments\n\t\t\t\t\t\t\t? length + (alpha != null ? 1 : 0)\n\t\t\t\t\t\t\t: 1;\n\t\t\t\t\t}\n\t\t\t\t\tif (values.length > length)\n\t\t\t\t\t\tvalues = Base.slice(values, 0, length);\n\t\t\t\t} else if (argType === 'string') {\n\t\t\t\t\tvar converted = fromCSS(arg);\n\t\t\t\t\ttype = converted[0];\n\t\t\t\t\tcomponents = converted[1];\n\t\t\t\t\tif (components.length === 4) {\n\t\t\t\t\t\talpha = components[3];\n\t\t\t\t\t\tcomponents.length--;\n\t\t\t\t\t}\n\t\t\t\t} else if (argType === 'object') {\n\t\t\t\t\tif (arg.constructor === Color) {\n\t\t\t\t\t\ttype = arg._type;\n\t\t\t\t\t\tcomponents = arg._components.slice();\n\t\t\t\t\t\talpha = arg._alpha;\n\t\t\t\t\t\tif (type === 'gradient') {\n\t\t\t\t\t\t\tfor (var i = 1, l = components.length; i < l; i++) {\n\t\t\t\t\t\t\t\tvar point = components[i];\n\t\t\t\t\t\t\t\tif (point)\n\t\t\t\t\t\t\t\t\tcomponents[i] = point.clone();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (arg.constructor === Gradient) {\n\t\t\t\t\t\ttype = 'gradient';\n\t\t\t\t\t\tvalues = args;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttype = 'hue' in arg\n\t\t\t\t\t\t\t? 'lightness' in arg\n\t\t\t\t\t\t\t\t? 'hsl'\n\t\t\t\t\t\t\t\t: 'hsb'\n\t\t\t\t\t\t\t: 'gradient' in arg || 'stops' in arg\n\t\t\t\t\t\t\t\t\t|| 'radial' in arg\n\t\t\t\t\t\t\t\t? 'gradient'\n\t\t\t\t\t\t\t\t: 'gray' in arg\n\t\t\t\t\t\t\t\t\t? 'gray'\n\t\t\t\t\t\t\t\t\t: 'rgb';\n\t\t\t\t\t\tvar properties = types[type],\n\t\t\t\t\t\t\tparsers = componentParsers[type];\n\t\t\t\t\t\tthis._components = components = [];\n\t\t\t\t\t\tfor (var i = 0, l = properties.length; i < l; i++) {\n\t\t\t\t\t\t\tvar value = arg[properties[i]];\n\t\t\t\t\t\t\tif (value == null && !i && type === 'gradient'\n\t\t\t\t\t\t\t\t\t&& 'stops' in arg) {\n\t\t\t\t\t\t\t\tvalue = {\n\t\t\t\t\t\t\t\t\tstops: arg.stops,\n\t\t\t\t\t\t\t\t\tradial: arg.radial\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvalue = parsers[i].call(this, value);\n\t\t\t\t\t\t\tif (value != null)\n\t\t\t\t\t\t\t\tcomponents[i] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\talpha = arg.alpha;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (reading && type)\n\t\t\t\t\tread = 1;\n\t\t\t}\n\t\t\tthis._type = type || 'rgb';\n\t\t\tif (!components) {\n\t\t\t\tthis._components = components = [];\n\t\t\t\tvar parsers = componentParsers[this._type];\n\t\t\t\tfor (var i = 0, l = parsers.length; i < l; i++) {\n\t\t\t\t\tvar value = parsers[i].call(this, values && values[i]);\n\t\t\t\t\tif (value != null)\n\t\t\t\t\t\tcomponents[i] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._components = components;\n\t\t\tthis._properties = types[this._type];\n\t\t\tthis._alpha = alpha;\n\t\t\tif (reading)\n\t\t\t\tthis.__read = read;\n\t\t\treturn this;\n\t\t},\n\n\t\tset: '#initialize',\n\n\t\t_serialize: function(options, dictionary) {\n\t\t\tvar components = this.getComponents();\n\t\t\treturn Base.serialize(\n\t\t\t\t\t/^(gray|rgb)$/.test(this._type)\n\t\t\t\t\t\t? components\n\t\t\t\t\t\t: [this._type].concat(components),\n\t\t\t\t\toptions, true, dictionary);\n\t\t},\n\n\t\t_changed: function() {\n\t\t\tthis._canvasStyle = null;\n\t\t\tif (this._owner) {\n\t\t\t\tif (this._setter) {\n\t\t\t\t\tthis._owner[this._setter](this);\n\t\t\t\t} else {\n\t\t\t\t\tthis._owner._changed(129);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_convert: function(type) {\n\t\t\tvar converter;\n\t\t\treturn this._type === type\n\t\t\t\t\t? this._components.slice()\n\t\t\t\t\t: (converter = converters[this._type + '-' + type])\n\t\t\t\t\t\t? converter.apply(this, this._components)\n\t\t\t\t\t\t: converters['rgb-' + type].apply(this,\n\t\t\t\t\t\t\tconverters[this._type + '-rgb'].apply(this,\n\t\t\t\t\t\t\t\tthis._components));\n\t\t},\n\n\t\tconvert: function(type) {\n\t\t\treturn new Color(type, this._convert(type), this._alpha);\n\t\t},\n\n\t\tgetType: function() {\n\t\t\treturn this._type;\n\t\t},\n\n\t\tsetType: function(type) {\n\t\t\tthis._components = this._convert(type);\n\t\t\tthis._properties = types[type];\n\t\t\tthis._type = type;\n\t\t},\n\n\t\tgetComponents: function() {\n\t\t\tvar components = this._components.slice();\n\t\t\tif (this._alpha != null)\n\t\t\t\tcomponents.push(this._alpha);\n\t\t\treturn components;\n\t\t},\n\n\t\tgetAlpha: function() {\n\t\t\treturn this._alpha != null ? this._alpha : 1;\n\t\t},\n\n\t\tsetAlpha: function(alpha) {\n\t\t\tthis._alpha = alpha == null ? null : Math.min(Math.max(alpha, 0), 1);\n\t\t\tthis._changed();\n\t\t},\n\n\t\thasAlpha: function() {\n\t\t\treturn this._alpha != null;\n\t\t},\n\n\t\tequals: function(color) {\n\t\t\tvar col = Base.isPlainValue(color, true)\n\t\t\t\t\t? Color.read(arguments)\n\t\t\t\t\t: color;\n\t\t\treturn col === this || col && this._class === col._class\n\t\t\t\t\t&& this._type === col._type\n\t\t\t\t\t&& this.getAlpha() === col.getAlpha()\n\t\t\t\t\t&& Base.equals(this._components, col._components)\n\t\t\t\t\t|| false;\n\t\t},\n\n\t\ttoString: function() {\n\t\t\tvar properties = this._properties,\n\t\t\t\tparts = [],\n\t\t\t\tisGradient = this._type === 'gradient',\n\t\t\t\tf = Formatter.instance;\n\t\t\tfor (var i = 0, l = properties.length; i < l; i++) {\n\t\t\t\tvar value = this._components[i];\n\t\t\t\tif (value != null)\n\t\t\t\t\tparts.push(properties[i] + ': '\n\t\t\t\t\t\t\t+ (isGradient ? value : f.number(value)));\n\t\t\t}\n\t\t\tif (this._alpha != null)\n\t\t\t\tparts.push('alpha: ' + f.number(this._alpha));\n\t\t\treturn '{ ' + parts.join(', ') + ' }';\n\t\t},\n\n\t\ttoCSS: function(hex) {\n\t\t\tvar components = this._convert('rgb'),\n\t\t\t\talpha = hex || this._alpha == null ? 1 : this._alpha;\n\t\t\tfunction convert(val) {\n\t\t\t\treturn Math.round((val < 0 ? 0 : val > 1 ? 1 : val) * 255);\n\t\t\t}\n\t\t\tcomponents = [\n\t\t\t\tconvert(components[0]),\n\t\t\t\tconvert(components[1]),\n\t\t\t\tconvert(components[2])\n\t\t\t];\n\t\t\tif (alpha < 1)\n\t\t\t\tcomponents.push(alpha < 0 ? 0 : alpha);\n\t\t\treturn hex\n\t\t\t\t\t? '#' + ((1 << 24) + (components[0] << 16)\n\t\t\t\t\t\t+ (components[1] << 8)\n\t\t\t\t\t\t+ components[2]).toString(16).slice(1)\n\t\t\t\t\t: (components.length == 4 ? 'rgba(' : 'rgb(')\n\t\t\t\t\t\t+ components.join(',') + ')';\n\t\t},\n\n\t\ttoCanvasStyle: function(ctx, matrix) {\n\t\t\tif (this._canvasStyle)\n\t\t\t\treturn this._canvasStyle;\n\t\t\tif (this._type !== 'gradient')\n\t\t\t\treturn this._canvasStyle = this.toCSS();\n\t\t\tvar components = this._components,\n\t\t\t\tgradient = components[0],\n\t\t\t\tstops = gradient._stops,\n\t\t\t\torigin = components[1],\n\t\t\t\tdestination = components[2],\n\t\t\t\thighlight = components[3],\n\t\t\t\tinverse = matrix && matrix.inverted(),\n\t\t\t\tcanvasGradient;\n\t\t\tif (inverse) {\n\t\t\t\torigin = inverse._transformPoint(origin);\n\t\t\t\tdestination = inverse._transformPoint(destination);\n\t\t\t\tif (highlight)\n\t\t\t\t\thighlight = inverse._transformPoint(highlight);\n\t\t\t}\n\t\t\tif (gradient._radial) {\n\t\t\t\tvar radius = destination.getDistance(origin);\n\t\t\t\tif (highlight) {\n\t\t\t\t\tvar vector = highlight.subtract(origin);\n\t\t\t\t\tif (vector.getLength() > radius)\n\t\t\t\t\t\thighlight = origin.add(vector.normalize(radius - 0.1));\n\t\t\t\t}\n\t\t\t\tvar start = highlight || origin;\n\t\t\t\tcanvasGradient = ctx.createRadialGradient(start.x, start.y,\n\t\t\t\t\t\t0, origin.x, origin.y, radius);\n\t\t\t} else {\n\t\t\t\tcanvasGradient = ctx.createLinearGradient(origin.x, origin.y,\n\t\t\t\t\t\tdestination.x, destination.y);\n\t\t\t}\n\t\t\tfor (var i = 0, l = stops.length; i < l; i++) {\n\t\t\t\tvar stop = stops[i],\n\t\t\t\t\toffset = stop._offset;\n\t\t\t\tcanvasGradient.addColorStop(\n\t\t\t\t\t\toffset == null ? i / (l - 1) : offset,\n\t\t\t\t\t\tstop._color.toCanvasStyle());\n\t\t\t}\n\t\t\treturn this._canvasStyle = canvasGradient;\n\t\t},\n\n\t\ttransform: function(matrix) {\n\t\t\tif (this._type === 'gradient') {\n\t\t\t\tvar components = this._components;\n\t\t\t\tfor (var i = 1, l = components.length; i < l; i++) {\n\t\t\t\t\tvar point = components[i];\n\t\t\t\t\tmatrix._transformPoint(point, point, true);\n\t\t\t\t}\n\t\t\t\tthis._changed();\n\t\t\t}\n\t\t},\n\n\t\tstatics: {\n\t\t\t_types: types,\n\n\t\t\trandom: function() {\n\t\t\t\tvar random = Math.random;\n\t\t\t\treturn new Color(random(), random(), random());\n\t\t\t},\n\n\t\t\t_setOwner: function(color, owner, setter) {\n\t\t\t\tif (color) {\n\t\t\t\t\tif (color._owner && owner && color._owner !== owner) {\n\t\t\t\t\t\tcolor = color.clone();\n\t\t\t\t\t}\n\t\t\t\t\tif (!color._owner ^ !owner) {\n\t\t\t\t\t\tcolor._owner = owner || null;\n\t\t\t\t\t\tcolor._setter = setter || null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn color;\n\t\t\t}\n\t\t}\n\t});\n},\nnew function() {\n\tvar operators = {\n\t\tadd: function(a, b) {\n\t\t\treturn a + b;\n\t\t},\n\n\t\tsubtract: function(a, b) {\n\t\t\treturn a - b;\n\t\t},\n\n\t\tmultiply: function(a, b) {\n\t\t\treturn a * b;\n\t\t},\n\n\t\tdivide: function(a, b) {\n\t\t\treturn a / b;\n\t\t}\n\t};\n\n\treturn Base.each(operators, function(operator, name) {\n\t\tthis[name] = function(color) {\n\t\t\tcolor = Color.read(arguments);\n\t\t\tvar type = this._type,\n\t\t\t\tcomponents1 = this._components,\n\t\t\t\tcomponents2 = color._convert(type);\n\t\t\tfor (var i = 0, l = components1.length; i < l; i++)\n\t\t\t\tcomponents2[i] = operator(components1[i], components2[i]);\n\t\t\treturn new Color(type, components2,\n\t\t\t\t\tthis._alpha != null\n\t\t\t\t\t\t\t? operator(this._alpha, color.getAlpha())\n\t\t\t\t\t\t\t: null);\n\t\t};\n\t}, {\n\t});\n});\n\nvar Gradient = Base.extend({\n\t_class: 'Gradient',\n\n\tinitialize: function Gradient(stops, radial) {\n\t\tthis._id = UID.get();\n\t\tif (stops && Base.isPlainObject(stops)) {\n\t\t\tthis.set(stops);\n\t\t\tstops = radial = null;\n\t\t}\n\t\tif (this._stops == null) {\n\t\t\tthis.setStops(stops || ['white', 'black']);\n\t\t}\n\t\tif (this._radial == null) {\n\t\t\tthis.setRadial(typeof radial === 'string' && radial === 'radial'\n\t\t\t\t\t|| radial || false);\n\t\t}\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\treturn dictionary.add(this, function() {\n\t\t\treturn Base.serialize([this._stops, this._radial],\n\t\t\t\t\toptions, true, dictionary);\n\t\t});\n\t},\n\n\t_changed: function() {\n\t\tfor (var i = 0, l = this._owners && this._owners.length; i < l; i++) {\n\t\t\tthis._owners[i]._changed();\n\t\t}\n\t},\n\n\t_addOwner: function(color) {\n\t\tif (!this._owners)\n\t\t\tthis._owners = [];\n\t\tthis._owners.push(color);\n\t},\n\n\t_removeOwner: function(color) {\n\t\tvar index = this._owners ? this._owners.indexOf(color) : -1;\n\t\tif (index != -1) {\n\t\t\tthis._owners.splice(index, 1);\n\t\t\tif (!this._owners.length)\n\t\t\t\tthis._owners = undefined;\n\t\t}\n\t},\n\n\tclone: function() {\n\t\tvar stops = [];\n\t\tfor (var i = 0, l = this._stops.length; i < l; i++) {\n\t\t\tstops[i] = this._stops[i].clone();\n\t\t}\n\t\treturn new Gradient(stops, this._radial);\n\t},\n\n\tgetStops: function() {\n\t\treturn this._stops;\n\t},\n\n\tsetStops: function(stops) {\n\t\tif (stops.length < 2) {\n\t\t\tthrow new Error(\n\t\t\t\t\t'Gradient stop list needs to contain at least two stops.');\n\t\t}\n\t\tvar _stops = this._stops;\n\t\tif (_stops) {\n\t\t\tfor (var i = 0, l = _stops.length; i < l; i++)\n\t\t\t\t_stops[i]._owner = undefined;\n\t\t}\n\t\t_stops = this._stops = GradientStop.readList(stops, 0, { clone: true });\n\t\tfor (var i = 0, l = _stops.length; i < l; i++)\n\t\t\t_stops[i]._owner = this;\n\t\tthis._changed();\n\t},\n\n\tgetRadial: function() {\n\t\treturn this._radial;\n\t},\n\n\tsetRadial: function(radial) {\n\t\tthis._radial = radial;\n\t\tthis._changed();\n\t},\n\n\tequals: function(gradient) {\n\t\tif (gradient === this)\n\t\t\treturn true;\n\t\tif (gradient && this._class === gradient._class) {\n\t\t\tvar stops1 = this._stops,\n\t\t\t\tstops2 = gradient._stops,\n\t\t\t\tlength = stops1.length;\n\t\t\tif (length === stops2.length) {\n\t\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\t\tif (!stops1[i].equals(stops2[i]))\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n});\n\nvar GradientStop = Base.extend({\n\t_class: 'GradientStop',\n\n\tinitialize: function GradientStop(arg0, arg1) {\n\t\tvar color = arg0,\n\t\t\toffset = arg1;\n\t\tif (typeof arg0 === 'object' && arg1 === undefined) {\n\t\t\tif (Array.isArray(arg0) && typeof arg0[0] !== 'number') {\n\t\t\t\tcolor = arg0[0];\n\t\t\t\toffset = arg0[1];\n\t\t\t} else if ('color' in arg0 || 'offset' in arg0\n\t\t\t\t\t|| 'rampPoint' in arg0) {\n\t\t\t\tcolor = arg0.color;\n\t\t\t\toffset = arg0.offset || arg0.rampPoint || 0;\n\t\t\t}\n\t\t}\n\t\tthis.setColor(color);\n\t\tthis.setOffset(offset);\n\t},\n\n\tclone: function() {\n\t\treturn new GradientStop(this._color.clone(), this._offset);\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\tvar color = this._color,\n\t\t\toffset = this._offset;\n\t\treturn Base.serialize(offset == null ? [color] : [color, offset],\n\t\t\t\toptions, true, dictionary);\n\t},\n\n\t_changed: function() {\n\t\tif (this._owner)\n\t\t\tthis._owner._changed(129);\n\t},\n\n\tgetOffset: function() {\n\t\treturn this._offset;\n\t},\n\n\tsetOffset: function(offset) {\n\t\tthis._offset = offset;\n\t\tthis._changed();\n\t},\n\n\tgetRampPoint: '#getOffset',\n\tsetRampPoint: '#setOffset',\n\n\tgetColor: function() {\n\t\treturn this._color;\n\t},\n\n\tsetColor: function() {\n\t\tColor._setOwner(this._color, null);\n\t\tthis._color = Color._setOwner(Color.read(arguments, 0), this,\n\t\t\t\t'setColor');\n\t\tthis._changed();\n\t},\n\n\tequals: function(stop) {\n\t\treturn stop === this || stop && this._class === stop._class\n\t\t\t\t&& this._color.equals(stop._color)\n\t\t\t\t&& this._offset == stop._offset\n\t\t\t\t|| false;\n\t}\n});\n\nvar Style = Base.extend(new function() {\n\tvar itemDefaults = {\n\t\tfillColor: null,\n\t\tfillRule: 'nonzero',\n\t\tstrokeColor: null,\n\t\tstrokeWidth: 1,\n\t\tstrokeCap: 'butt',\n\t\tstrokeJoin: 'miter',\n\t\tstrokeScaling: true,\n\t\tmiterLimit: 10,\n\t\tdashOffset: 0,\n\t\tdashArray: [],\n\t\tshadowColor: null,\n\t\tshadowBlur: 0,\n\t\tshadowOffset: new Point(),\n\t\tselectedColor: null\n\t},\n\tgroupDefaults = Base.set({}, itemDefaults, {\n\t\tfontFamily: 'sans-serif',\n\t\tfontWeight: 'normal',\n\t\tfontSize: 12,\n\t\tleading: null,\n\t\tjustification: 'left'\n\t}),\n\ttextDefaults = Base.set({}, groupDefaults, {\n\t\tfillColor: new Color()\n\t}),\n\tflags = {\n\t\tstrokeWidth: 193,\n\t\tstrokeCap: 193,\n\t\tstrokeJoin: 193,\n\t\tstrokeScaling: 201,\n\t\tmiterLimit: 193,\n\t\tfontFamily: 9,\n\t\tfontWeight: 9,\n\t\tfontSize: 9,\n\t\tfont: 9,\n\t\tleading: 9,\n\t\tjustification: 9\n\t},\n\titem = {\n\t\tbeans: true\n\t},\n\tfields = {\n\t\t_class: 'Style',\n\t\tbeans: true,\n\n\t\tinitialize: function Style(style, _owner, _project) {\n\t\t\tthis._values = {};\n\t\t\tthis._owner = _owner;\n\t\t\tthis._project = _owner && _owner._project || _project\n\t\t\t\t\t|| paper.project;\n\t\t\tthis._defaults = !_owner || _owner instanceof Group ? groupDefaults\n\t\t\t\t\t: _owner instanceof TextItem ? textDefaults\n\t\t\t\t\t: itemDefaults;\n\t\t\tif (style)\n\t\t\t\tthis.set(style);\n\t\t}\n\t};\n\n\tBase.each(groupDefaults, function(value, key) {\n\t\tvar isColor = /Color$/.test(key),\n\t\t\tisPoint = key === 'shadowOffset',\n\t\t\tpart = Base.capitalize(key),\n\t\t\tflag = flags[key],\n\t\t\tset = 'set' + part,\n\t\t\tget = 'get' + part;\n\n\t\tfields[set] = function(value) {\n\t\t\tvar owner = this._owner,\n\t\t\t\tchildren = owner && owner._children,\n\t\t\t\tapplyToChildren = children && children.length > 0\n\t\t\t\t\t&& !(owner instanceof CompoundPath);\n\t\t\tif (applyToChildren) {\n\t\t\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\t\t\tchildren[i]._style[set](value);\n\t\t\t}\n\t\t\tif ((key === 'selectedColor' || !applyToChildren)\n\t\t\t\t\t&& key in this._defaults) {\n\t\t\t\tvar old = this._values[key];\n\t\t\t\tif (old !== value) {\n\t\t\t\t\tif (isColor) {\n\t\t\t\t\t\tif (old) {\n\t\t\t\t\t\t\tColor._setOwner(old, null);\n\t\t\t\t\t\t\told._canvasStyle = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (value && value.constructor === Color) {\n\t\t\t\t\t\t\tvalue = Color._setOwner(value, owner,\n\t\t\t\t\t\t\t\t\tapplyToChildren && set);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis._values[key] = value;\n\t\t\t\t\tif (owner)\n\t\t\t\t\t\towner._changed(flag || 129);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tfields[get] = function(_dontMerge) {\n\t\t\tvar owner = this._owner,\n\t\t\t\tchildren = owner && owner._children,\n\t\t\t\tapplyToChildren = children && children.length > 0\n\t\t\t\t\t&& !(owner instanceof CompoundPath),\n\t\t\t\tvalue;\n\t\t\tif (applyToChildren && !_dontMerge) {\n\t\t\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\t\t\tvar childValue = children[i]._style[get]();\n\t\t\t\t\tif (!i) {\n\t\t\t\t\t\tvalue = childValue;\n\t\t\t\t\t} else if (!Base.equals(value, childValue)) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (key in this._defaults) {\n\t\t\t\tvar value = this._values[key];\n\t\t\t\tif (value === undefined) {\n\t\t\t\t\tvalue = this._defaults[key];\n\t\t\t\t\tif (value && value.clone) {\n\t\t\t\t\t\tvalue = value.clone();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar ctor = isColor ? Color : isPoint ? Point : null;\n\t\t\t\t\tif (ctor && !(value && value.constructor === ctor)) {\n\t\t\t\t\t\tthis._values[key] = value = ctor.read([value], 0,\n\t\t\t\t\t\t\t\t{ readNull: true, clone: true });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (value && isColor) {\n\t\t\t\tvalue = Color._setOwner(value, owner, applyToChildren && set);\n\t\t\t}\n\t\t\treturn value;\n\t\t};\n\n\t\titem[get] = function(_dontMerge) {\n\t\t\treturn this._style[get](_dontMerge);\n\t\t};\n\n\t\titem[set] = function(value) {\n\t\t\tthis._style[set](value);\n\t\t};\n\t});\n\n\tBase.each({\n\t\tFont: 'FontFamily',\n\t\tWindingRule: 'FillRule'\n\t}, function(value, key) {\n\t\tvar get = 'get' + key,\n\t\t\tset = 'set' + key;\n\t\tfields[get] = item[get] = '#get' + value;\n\t\tfields[set] = item[set] = '#set' + value;\n\t});\n\n\tItem.inject(item);\n\treturn fields;\n}, {\n\tset: function(style) {\n\t\tvar isStyle = style instanceof Style,\n\t\t\tvalues = isStyle ? style._values : style;\n\t\tif (values) {\n\t\t\tfor (var key in values) {\n\t\t\t\tif (key in this._defaults) {\n\t\t\t\t\tvar value = values[key];\n\t\t\t\t\tthis[key] = value && isStyle && value.clone\n\t\t\t\t\t\t\t? value.clone() : value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tequals: function(style) {\n\t\tfunction compare(style1, style2, secondary) {\n\t\t\tvar values1 = style1._values,\n\t\t\t\tvalues2 = style2._values,\n\t\t\t\tdefaults2 = style2._defaults;\n\t\t\tfor (var key in values1) {\n\t\t\t\tvar value1 = values1[key],\n\t\t\t\t\tvalue2 = values2[key];\n\t\t\t\tif (!(secondary && key in values2) && !Base.equals(value1,\n\t\t\t\t\t\tvalue2 === undefined ? defaults2[key] : value2))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\treturn style === this || style && this._class === style._class\n\t\t\t\t&& compare(this, style)\n\t\t\t\t&& compare(style, this, true)\n\t\t\t\t|| false;\n\t},\n\n\t_dispose: function() {\n\t\tvar color;\n\t\tcolor = this.getFillColor();\n\t\tif (color) color._canvasStyle = null;\n\t\tcolor = this.getStrokeColor();\n\t\tif (color) color._canvasStyle = null;\n\t\tcolor = this.getShadowColor();\n\t\tif (color) color._canvasStyle = null;\n\t},\n\n\thasFill: function() {\n\t\tvar color = this.getFillColor();\n\t\treturn !!color && color.alpha > 0;\n\t},\n\n\thasStroke: function() {\n\t\tvar color = this.getStrokeColor();\n\t\treturn !!color && color.alpha > 0 && this.getStrokeWidth() > 0;\n\t},\n\n\thasShadow: function() {\n\t\tvar color = this.getShadowColor();\n\t\treturn !!color && color.alpha > 0 && (this.getShadowBlur() > 0\n\t\t\t\t|| !this.getShadowOffset().isZero());\n\t},\n\n\tgetView: function() {\n\t\treturn this._project._view;\n\t},\n\n\tgetFontStyle: function() {\n\t\tvar fontSize = this.getFontSize();\n\t\treturn this.getFontWeight()\n\t\t\t\t+ ' ' + fontSize + (/[a-z]/i.test(fontSize + '') ? ' ' : 'px ')\n\t\t\t\t+ this.getFontFamily();\n\t},\n\n\tgetFont: '#getFontFamily',\n\tsetFont: '#setFontFamily',\n\n\tgetLeading: function getLeading() {\n\t\tvar leading = getLeading.base.call(this),\n\t\t\tfontSize = this.getFontSize();\n\t\tif (/pt|em|%|px/.test(fontSize))\n\t\t\tfontSize = this.getView().getPixelSize(fontSize);\n\t\treturn leading != null ? leading : fontSize * 1.2;\n\t}\n\n});\n\nvar DomElement = new function() {\n\tfunction handlePrefix(el, name, set, value) {\n\t\tvar prefixes = ['', 'webkit', 'moz', 'Moz', 'ms', 'o'],\n\t\t\tsuffix = name[0].toUpperCase() + name.substring(1);\n\t\tfor (var i = 0; i < 6; i++) {\n\t\t\tvar prefix = prefixes[i],\n\t\t\t\tkey = prefix ? prefix + suffix : name;\n\t\t\tif (key in el) {\n\t\t\t\tif (set) {\n\t\t\t\t\tel[key] = value;\n\t\t\t\t} else {\n\t\t\t\t\treturn el[key];\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn {\n\t\tgetStyles: function(el) {\n\t\t\tvar doc = el && el.nodeType !== 9 ? el.ownerDocument : el,\n\t\t\t\tview = doc && doc.defaultView;\n\t\t\treturn view && view.getComputedStyle(el, '');\n\t\t},\n\n\t\tgetBounds: function(el, viewport) {\n\t\t\tvar doc = el.ownerDocument,\n\t\t\t\tbody = doc.body,\n\t\t\t\thtml = doc.documentElement,\n\t\t\t\trect;\n\t\t\ttry {\n\t\t\t\trect = el.getBoundingClientRect();\n\t\t\t} catch (e) {\n\t\t\t\trect = { left: 0, top: 0, width: 0, height: 0 };\n\t\t\t}\n\t\t\tvar x = rect.left - (html.clientLeft || body.clientLeft || 0),\n\t\t\t\ty = rect.top - (html.clientTop || body.clientTop || 0);\n\t\t\tif (!viewport) {\n\t\t\t\tvar view = doc.defaultView;\n\t\t\t\tx += view.pageXOffset || html.scrollLeft || body.scrollLeft;\n\t\t\t\ty += view.pageYOffset || html.scrollTop || body.scrollTop;\n\t\t\t}\n\t\t\treturn new Rectangle(x, y, rect.width, rect.height);\n\t\t},\n\n\t\tgetViewportBounds: function(el) {\n\t\t\tvar doc = el.ownerDocument,\n\t\t\t\tview = doc.defaultView,\n\t\t\t\thtml = doc.documentElement;\n\t\t\treturn new Rectangle(0, 0,\n\t\t\t\tview.innerWidth || html.clientWidth,\n\t\t\t\tview.innerHeight || html.clientHeight\n\t\t\t);\n\t\t},\n\n\t\tgetOffset: function(el, viewport) {\n\t\t\treturn DomElement.getBounds(el, viewport).getPoint();\n\t\t},\n\n\t\tgetSize: function(el) {\n\t\t\treturn DomElement.getBounds(el, true).getSize();\n\t\t},\n\n\t\tisInvisible: function(el) {\n\t\t\treturn DomElement.getSize(el).equals(new Size(0, 0));\n\t\t},\n\n\t\tisInView: function(el) {\n\t\t\treturn !DomElement.isInvisible(el)\n\t\t\t\t\t&& DomElement.getViewportBounds(el).intersects(\n\t\t\t\t\t\tDomElement.getBounds(el, true));\n\t\t},\n\n\t\tisInserted: function(el) {\n\t\t\treturn document.body.contains(el);\n\t\t},\n\n\t\tgetPrefixed: function(el, name) {\n\t\t\treturn el && handlePrefix(el, name);\n\t\t},\n\n\t\tsetPrefixed: function(el, name, value) {\n\t\t\tif (typeof name === 'object') {\n\t\t\t\tfor (var key in name)\n\t\t\t\t\thandlePrefix(el, key, true, name[key]);\n\t\t\t} else {\n\t\t\t\thandlePrefix(el, name, true, value);\n\t\t\t}\n\t\t}\n\t};\n};\n\nvar DomEvent = {\n\tadd: function(el, events) {\n\t\tif (el) {\n\t\t\tfor (var type in events) {\n\t\t\t\tvar func = events[type],\n\t\t\t\t\tparts = type.split(/[\\s,]+/g);\n\t\t\t\tfor (var i = 0, l = parts.length; i < l; i++) {\n\t\t\t\t\tvar name = parts[i];\n\t\t\t\t\tvar options = (\n\t\t\t\t\t\tel === document\n\t\t\t\t\t\t&& (name === 'touchstart' || name === 'touchmove')\n\t\t\t\t\t) ? { passive: false } : false;\n\t\t\t\t\tel.addEventListener(name, func, options);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tremove: function(el, events) {\n\t\tif (el) {\n\t\t\tfor (var type in events) {\n\t\t\t\tvar func = events[type],\n\t\t\t\t\tparts = type.split(/[\\s,]+/g);\n\t\t\t\tfor (var i = 0, l = parts.length; i < l; i++)\n\t\t\t\t\tel.removeEventListener(parts[i], func, false);\n\t\t\t}\n\t\t}\n\t},\n\n\tgetPoint: function(event) {\n\t\tvar pos = event.targetTouches\n\t\t\t\t? event.targetTouches.length\n\t\t\t\t\t? event.targetTouches[0]\n\t\t\t\t\t: event.changedTouches[0]\n\t\t\t\t: event;\n\t\treturn new Point(\n\t\t\tpos.pageX || pos.clientX + document.documentElement.scrollLeft,\n\t\t\tpos.pageY || pos.clientY + document.documentElement.scrollTop\n\t\t);\n\t},\n\n\tgetTarget: function(event) {\n\t\treturn event.target || event.srcElement;\n\t},\n\n\tgetRelatedTarget: function(event) {\n\t\treturn event.relatedTarget || event.toElement;\n\t},\n\n\tgetOffset: function(event, target) {\n\t\treturn DomEvent.getPoint(event).subtract(DomElement.getOffset(\n\t\t\t\ttarget || DomEvent.getTarget(event)));\n\t}\n};\n\nDomEvent.requestAnimationFrame = new function() {\n\tvar nativeRequest = DomElement.getPrefixed(window, 'requestAnimationFrame'),\n\t\trequested = false,\n\t\tcallbacks = [],\n\t\ttimer;\n\n\tfunction handleCallbacks() {\n\t\tvar functions = callbacks;\n\t\tcallbacks = [];\n\t\tfor (var i = 0, l = functions.length; i < l; i++)\n\t\t\tfunctions[i]();\n\t\trequested = nativeRequest && callbacks.length;\n\t\tif (requested)\n\t\t\tnativeRequest(handleCallbacks);\n\t}\n\n\treturn function(callback) {\n\t\tcallbacks.push(callback);\n\t\tif (nativeRequest) {\n\t\t\tif (!requested) {\n\t\t\t\tnativeRequest(handleCallbacks);\n\t\t\t\trequested = true;\n\t\t\t}\n\t\t} else if (!timer) {\n\t\t\ttimer = setInterval(handleCallbacks, 1000 / 60);\n\t\t}\n\t};\n};\n\nvar View = Base.extend(Emitter, {\n\t_class: 'View',\n\n\tinitialize: function View(project, element) {\n\n\t\tfunction getSize(name) {\n\t\t\treturn element[name] || parseInt(element.getAttribute(name), 10);\n\t\t}\n\n\t\tfunction getCanvasSize() {\n\t\t\tvar size = DomElement.getSize(element);\n\t\t\treturn size.isNaN() || size.isZero()\n\t\t\t\t\t? new Size(getSize('width'), getSize('height'))\n\t\t\t\t\t: size;\n\t\t}\n\n\t\tvar size;\n\t\tif (window && element) {\n\t\t\tthis._id = element.getAttribute('id');\n\t\t\tif (this._id == null)\n\t\t\t\telement.setAttribute('id', this._id = 'paper-view-' + View._id++);\n\t\t\tDomEvent.add(element, this._viewEvents);\n\t\t\tvar none = 'none';\n\t\t\tDomElement.setPrefixed(element.style, {\n\t\t\t\tuserDrag: none,\n\t\t\t\tuserSelect: none,\n\t\t\t\ttouchCallout: none,\n\t\t\t\tcontentZooming: none,\n\t\t\t\ttapHighlightColor: 'rgba(0,0,0,0)'\n\t\t\t});\n\n\t\t\tif (PaperScope.hasAttribute(element, 'resize')) {\n\t\t\t\tvar that = this;\n\t\t\t\tDomEvent.add(window, this._windowEvents = {\n\t\t\t\t\tresize: function() {\n\t\t\t\t\t\tthat.setViewSize(getCanvasSize());\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tsize = getCanvasSize();\n\n\t\t\tif (PaperScope.hasAttribute(element, 'stats')\n\t\t\t\t\t&& typeof Stats !== 'undefined') {\n\t\t\t\tthis._stats = new Stats();\n\t\t\t\tvar stats = this._stats.domElement,\n\t\t\t\t\tstyle = stats.style,\n\t\t\t\t\toffset = DomElement.getOffset(element);\n\t\t\t\tstyle.position = 'absolute';\n\t\t\t\tstyle.left = offset.x + 'px';\n\t\t\t\tstyle.top = offset.y + 'px';\n\t\t\t\tdocument.body.appendChild(stats);\n\t\t\t}\n\t\t} else {\n\t\t\tsize = new Size(element);\n\t\t\telement = null;\n\t\t}\n\t\tthis._project = project;\n\t\tthis._scope = project._scope;\n\t\tthis._element = element;\n\t\tif (!this._pixelRatio)\n\t\t\tthis._pixelRatio = window && window.devicePixelRatio || 1;\n\t\tthis._setElementSize(size.width, size.height);\n\t\tthis._viewSize = size;\n\t\tView._views.push(this);\n\t\tView._viewsById[this._id] = this;\n\t\t(this._matrix = new Matrix())._owner = this;\n\t\tif (!View._focused)\n\t\t\tView._focused = this;\n\t\tthis._frameItems = {};\n\t\tthis._frameItemCount = 0;\n\t\tthis._itemEvents = { native: {}, virtual: {} };\n\t\tthis._autoUpdate = !paper.agent.node;\n\t\tthis._needsUpdate = false;\n\t},\n\n\tremove: function() {\n\t\tif (!this._project)\n\t\t\treturn false;\n\t\tif (View._focused === this)\n\t\t\tView._focused = null;\n\t\tView._views.splice(View._views.indexOf(this), 1);\n\t\tdelete View._viewsById[this._id];\n\t\tvar project = this._project;\n\t\tif (project._view === this)\n\t\t\tproject._view = null;\n\t\tDomEvent.remove(this._element, this._viewEvents);\n\t\tDomEvent.remove(window, this._windowEvents);\n\t\tthis._element = this._project = null;\n\t\tthis.off('frame');\n\t\tthis._animate = false;\n\t\tthis._frameItems = {};\n\t\treturn true;\n\t},\n\n\t_events: Base.each(\n\t\tItem._itemHandlers.concat(['onResize', 'onKeyDown', 'onKeyUp']),\n\t\tfunction(name) {\n\t\t\tthis[name] = {};\n\t\t}, {\n\t\t\tonFrame: {\n\t\t\t\tinstall: function() {\n\t\t\t\t\tthis.play();\n\t\t\t\t},\n\n\t\t\t\tuninstall: function() {\n\t\t\t\t\tthis.pause();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t),\n\n\t_animate: false,\n\t_time: 0,\n\t_count: 0,\n\n\tgetAutoUpdate: function() {\n\t\treturn this._autoUpdate;\n\t},\n\n\tsetAutoUpdate: function(autoUpdate) {\n\t\tthis._autoUpdate = autoUpdate;\n\t\tif (autoUpdate)\n\t\t\tthis.requestUpdate();\n\t},\n\n\tupdate: function() {\n\t},\n\n\tdraw: function() {\n\t\tthis.update();\n\t},\n\n\trequestUpdate: function() {\n\t\tif (!this._requested) {\n\t\t\tvar that = this;\n\t\t\tDomEvent.requestAnimationFrame(function() {\n\t\t\t\tthat._requested = false;\n\t\t\t\tif (that._animate) {\n\t\t\t\t\tthat.requestUpdate();\n\t\t\t\t\tvar element = that._element;\n\t\t\t\t\tif ((!DomElement.getPrefixed(document, 'hidden')\n\t\t\t\t\t\t\t|| PaperScope.getAttribute(element, 'keepalive')\n\t\t\t\t\t\t\t\t=== 'true') && DomElement.isInView(element)) {\n\t\t\t\t\t\tthat._handleFrame();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (that._autoUpdate)\n\t\t\t\t\tthat.update();\n\t\t\t});\n\t\t\tthis._requested = true;\n\t\t}\n\t},\n\n\tplay: function() {\n\t\tthis._animate = true;\n\t\tthis.requestUpdate();\n\t},\n\n\tpause: function() {\n\t\tthis._animate = false;\n\t},\n\n\t_handleFrame: function() {\n\t\tpaper = this._scope;\n\t\tvar now = Date.now() / 1000,\n\t\t\tdelta = this._last ? now - this._last : 0;\n\t\tthis._last = now;\n\t\tthis.emit('frame', new Base({\n\t\t\tdelta: delta,\n\t\t\ttime: this._time += delta,\n\t\t\tcount: this._count++\n\t\t}));\n\t\tif (this._stats)\n\t\t\tthis._stats.update();\n\t},\n\n\t_animateItem: function(item, animate) {\n\t\tvar items = this._frameItems;\n\t\tif (animate) {\n\t\t\titems[item._id] = {\n\t\t\t\titem: item,\n\t\t\t\ttime: 0,\n\t\t\t\tcount: 0\n\t\t\t};\n\t\t\tif (++this._frameItemCount === 1)\n\t\t\t\tthis.on('frame', this._handleFrameItems);\n\t\t} else {\n\t\t\tdelete items[item._id];\n\t\t\tif (--this._frameItemCount === 0) {\n\t\t\t\tthis.off('frame', this._handleFrameItems);\n\t\t\t}\n\t\t}\n\t},\n\n\t_handleFrameItems: function(event) {\n\t\tfor (var i in this._frameItems) {\n\t\t\tvar entry = this._frameItems[i];\n\t\t\tentry.item.emit('frame', new Base(event, {\n\t\t\t\ttime: entry.time += event.delta,\n\t\t\t\tcount: entry.count++\n\t\t\t}));\n\t\t}\n\t},\n\n\t_changed: function() {\n\t\tthis._project._changed(4097);\n\t\tthis._bounds = this._decomposed = undefined;\n\t},\n\n\tgetElement: function() {\n\t\treturn this._element;\n\t},\n\n\tgetPixelRatio: function() {\n\t\treturn this._pixelRatio;\n\t},\n\n\tgetResolution: function() {\n\t\treturn this._pixelRatio * 72;\n\t},\n\n\tgetViewSize: function() {\n\t\tvar size = this._viewSize;\n\t\treturn new LinkedSize(size.width, size.height, this, 'setViewSize');\n\t},\n\n\tsetViewSize: function() {\n\t\tvar size = Size.read(arguments),\n\t\t\tdelta = size.subtract(this._viewSize);\n\t\tif (delta.isZero())\n\t\t\treturn;\n\t\tthis._setElementSize(size.width, size.height);\n\t\tthis._viewSize.set(size);\n\t\tthis._changed();\n\t\tthis.emit('resize', { size: size, delta: delta });\n\t\tif (this._autoUpdate) {\n\t\t\tthis.update();\n\t\t}\n\t},\n\n\t_setElementSize: function(width, height) {\n\t\tvar element = this._element;\n\t\tif (element) {\n\t\t\tif (element.width !== width)\n\t\t\t\telement.width = width;\n\t\t\tif (element.height !== height)\n\t\t\t\telement.height = height;\n\t\t}\n\t},\n\n\tgetBounds: function() {\n\t\tif (!this._bounds)\n\t\t\tthis._bounds = this._matrix.inverted()._transformBounds(\n\t\t\t\t\tnew Rectangle(new Point(), this._viewSize));\n\t\treturn this._bounds;\n\t},\n\n\tgetSize: function() {\n\t\treturn this.getBounds().getSize();\n\t},\n\n\tisVisible: function() {\n\t\treturn DomElement.isInView(this._element);\n\t},\n\n\tisInserted: function() {\n\t\treturn DomElement.isInserted(this._element);\n\t},\n\n\tgetPixelSize: function(size) {\n\t\tvar element = this._element,\n\t\t\tpixels;\n\t\tif (element) {\n\t\t\tvar parent = element.parentNode,\n\t\t\t\ttemp = document.createElement('div');\n\t\t\ttemp.style.fontSize = size;\n\t\t\tparent.appendChild(temp);\n\t\t\tpixels = parseFloat(DomElement.getStyles(temp).fontSize);\n\t\t\tparent.removeChild(temp);\n\t\t} else {\n\t\t\tpixels = parseFloat(pixels);\n\t\t}\n\t\treturn pixels;\n\t},\n\n\tgetTextWidth: function(font, lines) {\n\t\treturn 0;\n\t}\n}, Base.each(['rotate', 'scale', 'shear', 'skew'], function(key) {\n\tvar rotate = key === 'rotate';\n\tthis[key] = function() {\n\t\tvar args = arguments,\n\t\t\tvalue = (rotate ? Base : Point).read(args),\n\t\t\tcenter = Point.read(args, 0, { readNull: true });\n\t\treturn this.transform(new Matrix()[key](value,\n\t\t\t\tcenter || this.getCenter(true)));\n\t};\n}, {\n\t_decompose: function() {\n\t\treturn this._decomposed || (this._decomposed = this._matrix.decompose());\n\t},\n\n\ttranslate: function() {\n\t\tvar mx = new Matrix();\n\t\treturn this.transform(mx.translate.apply(mx, arguments));\n\t},\n\n\tgetCenter: function() {\n\t\treturn this.getBounds().getCenter();\n\t},\n\n\tsetCenter: function() {\n\t\tvar center = Point.read(arguments);\n\t\tthis.translate(this.getCenter().subtract(center));\n\t},\n\n\tgetZoom: function() {\n\t\tvar scaling = this._decompose().scaling;\n\t\treturn (scaling.x + scaling.y) / 2;\n\t},\n\n\tsetZoom: function(zoom) {\n\t\tthis.transform(new Matrix().scale(zoom / this.getZoom(),\n\t\t\tthis.getCenter()));\n\t},\n\n\tgetRotation: function() {\n\t\treturn this._decompose().rotation;\n\t},\n\n\tsetRotation: function(rotation) {\n\t\tvar current = this.getRotation();\n\t\tif (current != null && rotation != null) {\n\t\t\tthis.rotate(rotation - current);\n\t\t}\n\t},\n\n\tgetScaling: function() {\n\t\tvar scaling = this._decompose().scaling;\n\t\treturn new LinkedPoint(scaling.x, scaling.y, this, 'setScaling');\n\t},\n\n\tsetScaling: function() {\n\t\tvar current = this.getScaling(),\n\t\t\tscaling = Point.read(arguments, 0, { clone: true, readNull: true });\n\t\tif (current && scaling) {\n\t\t\tthis.scale(scaling.x / current.x, scaling.y / current.y);\n\t\t}\n\t},\n\n\tgetMatrix: function() {\n\t\treturn this._matrix;\n\t},\n\n\tsetMatrix: function() {\n\t\tvar matrix = this._matrix;\n\t\tmatrix.set.apply(matrix, arguments);\n\t},\n\n\ttransform: function(matrix) {\n\t\tthis._matrix.append(matrix);\n\t},\n\n\tscrollBy: function() {\n\t\tthis.translate(Point.read(arguments).negate());\n\t}\n}), {\n\n\tprojectToView: function() {\n\t\treturn this._matrix._transformPoint(Point.read(arguments));\n\t},\n\n\tviewToProject: function() {\n\t\treturn this._matrix._inverseTransform(Point.read(arguments));\n\t},\n\n\tgetEventPoint: function(event) {\n\t\treturn this.viewToProject(DomEvent.getOffset(event, this._element));\n\t},\n\n}, {\n\tstatics: {\n\t\t_views: [],\n\t\t_viewsById: {},\n\t\t_id: 0,\n\n\t\tcreate: function(project, element) {\n\t\t\tif (document && typeof element === 'string')\n\t\t\t\telement = document.getElementById(element);\n\t\t\tvar ctor = window ? CanvasView : View;\n\t\t\treturn new ctor(project, element);\n\t\t}\n\t}\n},\nnew function() {\n\tif (!window)\n\t\treturn;\n\tvar prevFocus,\n\t\ttempFocus,\n\t\tdragging = false,\n\t\tmouseDown = false;\n\n\tfunction getView(event) {\n\t\tvar target = DomEvent.getTarget(event);\n\t\treturn target.getAttribute && View._viewsById[\n\t\t\t\ttarget.getAttribute('id')];\n\t}\n\n\tfunction updateFocus() {\n\t\tvar view = View._focused;\n\t\tif (!view || !view.isVisible()) {\n\t\t\tfor (var i = 0, l = View._views.length; i < l; i++) {\n\t\t\t\tif ((view = View._views[i]).isVisible()) {\n\t\t\t\t\tView._focused = tempFocus = view;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction handleMouseMove(view, event, point) {\n\t\tview._handleMouseEvent('mousemove', event, point);\n\t}\n\n\tvar navigator = window.navigator,\n\t\tmousedown, mousemove, mouseup;\n\tif (navigator.pointerEnabled || navigator.msPointerEnabled) {\n\t\tmousedown = 'pointerdown MSPointerDown';\n\t\tmousemove = 'pointermove MSPointerMove';\n\t\tmouseup = 'pointerup pointercancel MSPointerUp MSPointerCancel';\n\t} else {\n\t\tmousedown = 'touchstart';\n\t\tmousemove = 'touchmove';\n\t\tmouseup = 'touchend touchcancel';\n\t\tif (!('ontouchstart' in window && navigator.userAgent.match(\n\t\t\t\t/mobile|tablet|ip(ad|hone|od)|android|silk/i))) {\n\t\t\tmousedown += ' mousedown';\n\t\t\tmousemove += ' mousemove';\n\t\t\tmouseup += ' mouseup';\n\t\t}\n\t}\n\n\tvar viewEvents = {},\n\t\tdocEvents = {\n\t\t\tmouseout: function(event) {\n\t\t\t\tvar view = View._focused,\n\t\t\t\t\ttarget = DomEvent.getRelatedTarget(event);\n\t\t\t\tif (view && (!target || target.nodeName === 'HTML')) {\n\t\t\t\t\tvar offset = DomEvent.getOffset(event, view._element),\n\t\t\t\t\t\tx = offset.x,\n\t\t\t\t\t\tabs = Math.abs,\n\t\t\t\t\t\tax = abs(x),\n\t\t\t\t\t\tmax = 1 << 25,\n\t\t\t\t\t\tdiff = ax - max;\n\t\t\t\t\toffset.x = abs(diff) < ax ? diff * (x < 0 ? -1 : 1) : x;\n\t\t\t\t\thandleMouseMove(view, event, view.viewToProject(offset));\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tscroll: updateFocus\n\t\t};\n\n\tviewEvents[mousedown] = function(event) {\n\t\tvar view = View._focused = getView(event);\n\t\tif (!dragging) {\n\t\t\tdragging = true;\n\t\t\tview._handleMouseEvent('mousedown', event);\n\t\t}\n\t};\n\n\tdocEvents[mousemove] = function(event) {\n\t\tvar view = View._focused;\n\t\tif (!mouseDown) {\n\t\t\tvar target = getView(event);\n\t\t\tif (target) {\n\t\t\t\tif (view !== target) {\n\t\t\t\t\tif (view)\n\t\t\t\t\t\thandleMouseMove(view, event);\n\t\t\t\t\tif (!prevFocus)\n\t\t\t\t\t\tprevFocus = view;\n\t\t\t\t\tview = View._focused = tempFocus = target;\n\t\t\t\t}\n\t\t\t} else if (tempFocus && tempFocus === view) {\n\t\t\t\tif (prevFocus && !prevFocus.isInserted())\n\t\t\t\t\tprevFocus = null;\n\t\t\t\tview = View._focused = prevFocus;\n\t\t\t\tprevFocus = null;\n\t\t\t\tupdateFocus();\n\t\t\t}\n\t\t}\n\t\tif (view)\n\t\t\thandleMouseMove(view, event);\n\t};\n\n\tdocEvents[mousedown] = function() {\n\t\tmouseDown = true;\n\t};\n\n\tdocEvents[mouseup] = function(event) {\n\t\tvar view = View._focused;\n\t\tif (view && dragging)\n\t\t\tview._handleMouseEvent('mouseup', event);\n\t\tmouseDown = dragging = false;\n\t};\n\n\tDomEvent.add(document, docEvents);\n\n\tDomEvent.add(window, {\n\t\tload: updateFocus\n\t});\n\n\tvar called = false,\n\t\tprevented = false,\n\t\tfallbacks = {\n\t\t\tdoubleclick: 'click',\n\t\t\tmousedrag: 'mousemove'\n\t\t},\n\t\twasInView = false,\n\t\toverView,\n\t\tdownPoint,\n\t\tlastPoint,\n\t\tdownItem,\n\t\toverItem,\n\t\tdragItem,\n\t\tclickItem,\n\t\tclickTime,\n\t\tdblClick;\n\n\tfunction emitMouseEvent(obj, target, type, event, point, prevPoint,\n\t\t\tstopItem) {\n\t\tvar stopped = false,\n\t\t\tmouseEvent;\n\n\t\tfunction emit(obj, type) {\n\t\t\tif (obj.responds(type)) {\n\t\t\t\tif (!mouseEvent) {\n\t\t\t\t\tmouseEvent = new MouseEvent(type, event, point,\n\t\t\t\t\t\t\ttarget || obj,\n\t\t\t\t\t\t\tprevPoint ? point.subtract(prevPoint) : null);\n\t\t\t\t}\n\t\t\t\tif (obj.emit(type, mouseEvent)) {\n\t\t\t\t\tcalled = true;\n\t\t\t\t\tif (mouseEvent.prevented)\n\t\t\t\t\t\tprevented = true;\n\t\t\t\t\tif (mouseEvent.stopped)\n\t\t\t\t\t\treturn stopped = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar fallback = fallbacks[type];\n\t\t\t\tif (fallback)\n\t\t\t\t\treturn emit(obj, fallback);\n\t\t\t}\n\t\t}\n\n\t\twhile (obj && obj !== stopItem) {\n\t\t\tif (emit(obj, type))\n\t\t\t\tbreak;\n\t\t\tobj = obj._parent;\n\t\t}\n\t\treturn stopped;\n\t}\n\n\tfunction emitMouseEvents(view, hitItem, type, event, point, prevPoint) {\n\t\tview._project.removeOn(type);\n\t\tprevented = called = false;\n\t\treturn (dragItem && emitMouseEvent(dragItem, null, type, event,\n\t\t\t\t\tpoint, prevPoint)\n\t\t\t|| hitItem && hitItem !== dragItem\n\t\t\t\t&& !hitItem.isDescendant(dragItem)\n\t\t\t\t&& emitMouseEvent(hitItem, null, type === 'mousedrag' ?\n\t\t\t\t\t'mousemove' : type, event, point, prevPoint, dragItem)\n\t\t\t|| emitMouseEvent(view, dragItem || hitItem || view, type, event,\n\t\t\t\t\tpoint, prevPoint));\n\t}\n\n\tvar itemEventsMap = {\n\t\tmousedown: {\n\t\t\tmousedown: 1,\n\t\t\tmousedrag: 1,\n\t\t\tclick: 1,\n\t\t\tdoubleclick: 1\n\t\t},\n\t\tmouseup: {\n\t\t\tmouseup: 1,\n\t\t\tmousedrag: 1,\n\t\t\tclick: 1,\n\t\t\tdoubleclick: 1\n\t\t},\n\t\tmousemove: {\n\t\t\tmousedrag: 1,\n\t\t\tmousemove: 1,\n\t\t\tmouseenter: 1,\n\t\t\tmouseleave: 1\n\t\t}\n\t};\n\n\treturn {\n\t\t_viewEvents: viewEvents,\n\n\t\t_handleMouseEvent: function(type, event, point) {\n\t\t\tvar itemEvents = this._itemEvents,\n\t\t\t\thitItems = itemEvents.native[type],\n\t\t\t\tnativeMove = type === 'mousemove',\n\t\t\t\ttool = this._scope.tool,\n\t\t\t\tview = this;\n\n\t\t\tfunction responds(type) {\n\t\t\t\treturn itemEvents.virtual[type] || view.responds(type)\n\t\t\t\t\t\t|| tool && tool.responds(type);\n\t\t\t}\n\n\t\t\tif (nativeMove && dragging && responds('mousedrag'))\n\t\t\t\ttype = 'mousedrag';\n\t\t\tif (!point)\n\t\t\t\tpoint = this.getEventPoint(event);\n\n\t\t\tvar inView = this.getBounds().contains(point),\n\t\t\t\thit = hitItems && inView && view._project.hitTest(point, {\n\t\t\t\t\ttolerance: 0,\n\t\t\t\t\tfill: true,\n\t\t\t\t\tstroke: true\n\t\t\t\t}),\n\t\t\t\thitItem = hit && hit.item || null,\n\t\t\t\thandle = false,\n\t\t\t\tmouse = {};\n\t\t\tmouse[type.substr(5)] = true;\n\n\t\t\tif (hitItems && hitItem !== overItem) {\n\t\t\t\tif (overItem) {\n\t\t\t\t\temitMouseEvent(overItem, null, 'mouseleave', event, point);\n\t\t\t\t}\n\t\t\t\tif (hitItem) {\n\t\t\t\t\temitMouseEvent(hitItem, null, 'mouseenter', event, point);\n\t\t\t\t}\n\t\t\t\toverItem = hitItem;\n\t\t\t}\n\t\t\tif (wasInView ^ inView) {\n\t\t\t\temitMouseEvent(this, null, inView ? 'mouseenter' : 'mouseleave',\n\t\t\t\t\t\tevent, point);\n\t\t\t\toverView = inView ? this : null;\n\t\t\t\thandle = true;\n\t\t\t}\n\t\t\tif ((inView || mouse.drag) && !point.equals(lastPoint)) {\n\t\t\t\temitMouseEvents(this, hitItem, nativeMove ? type : 'mousemove',\n\t\t\t\t\t\tevent, point, lastPoint);\n\t\t\t\thandle = true;\n\t\t\t}\n\t\t\twasInView = inView;\n\t\t\tif (mouse.down && inView || mouse.up && downPoint) {\n\t\t\t\temitMouseEvents(this, hitItem, type, event, point, downPoint);\n\t\t\t\tif (mouse.down) {\n\t\t\t\t\tdblClick = hitItem === clickItem\n\t\t\t\t\t\t&& (Date.now() - clickTime < 300);\n\t\t\t\t\tdownItem = clickItem = hitItem;\n\t\t\t\t\tif (!prevented && hitItem) {\n\t\t\t\t\t\tvar item = hitItem;\n\t\t\t\t\t\twhile (item && !item.responds('mousedrag'))\n\t\t\t\t\t\t\titem = item._parent;\n\t\t\t\t\t\tif (item)\n\t\t\t\t\t\t\tdragItem = hitItem;\n\t\t\t\t\t}\n\t\t\t\t\tdownPoint = point;\n\t\t\t\t} else if (mouse.up) {\n\t\t\t\t\tif (!prevented && hitItem === downItem) {\n\t\t\t\t\t\tclickTime = Date.now();\n\t\t\t\t\t\temitMouseEvents(this, hitItem, dblClick ? 'doubleclick'\n\t\t\t\t\t\t\t\t: 'click', event, point, downPoint);\n\t\t\t\t\t\tdblClick = false;\n\t\t\t\t\t}\n\t\t\t\t\tdownItem = dragItem = null;\n\t\t\t\t}\n\t\t\t\twasInView = false;\n\t\t\t\thandle = true;\n\t\t\t}\n\t\t\tlastPoint = point;\n\t\t\tif (handle && tool) {\n\t\t\t\tcalled = tool._handleMouseEvent(type, event, point, mouse)\n\t\t\t\t\t|| called;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tevent.cancelable !== false\n\t\t\t\t&& (called && !mouse.move || mouse.down && responds('mouseup'))\n\t\t\t) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t},\n\n\t\t_handleKeyEvent: function(type, event, key, character) {\n\t\t\tvar scope = this._scope,\n\t\t\t\ttool = scope.tool,\n\t\t\t\tkeyEvent;\n\n\t\t\tfunction emit(obj) {\n\t\t\t\tif (obj.responds(type)) {\n\t\t\t\t\tpaper = scope;\n\t\t\t\t\tobj.emit(type, keyEvent = keyEvent\n\t\t\t\t\t\t\t|| new KeyEvent(type, event, key, character));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.isVisible()) {\n\t\t\t\temit(this);\n\t\t\t\tif (tool && tool.responds(type))\n\t\t\t\t\temit(tool);\n\t\t\t}\n\t\t},\n\n\t\t_countItemEvent: function(type, sign) {\n\t\t\tvar itemEvents = this._itemEvents,\n\t\t\t\tnative = itemEvents.native,\n\t\t\t\tvirtual = itemEvents.virtual;\n\t\t\tfor (var key in itemEventsMap) {\n\t\t\t\tnative[key] = (native[key] || 0)\n\t\t\t\t\t\t+ (itemEventsMap[key][type] || 0) * sign;\n\t\t\t}\n\t\t\tvirtual[type] = (virtual[type] || 0) + sign;\n\t\t},\n\n\t\tstatics: {\n\t\t\tupdateFocus: updateFocus,\n\n\t\t\t_resetState: function() {\n\t\t\t\tdragging = mouseDown = called = wasInView = false;\n\t\t\t\tprevFocus = tempFocus = overView = downPoint = lastPoint =\n\t\t\t\t\tdownItem = overItem = dragItem = clickItem = clickTime =\n\t\t\t\t\tdblClick = null;\n\t\t\t}\n\t\t}\n\t};\n});\n\nvar CanvasView = View.extend({\n\t_class: 'CanvasView',\n\n\tinitialize: function CanvasView(project, canvas) {\n\t\tif (!(canvas instanceof window.HTMLCanvasElement)) {\n\t\t\tvar size = Size.read(arguments, 1);\n\t\t\tif (size.isZero())\n\t\t\t\tthrow new Error(\n\t\t\t\t\t\t'Cannot create CanvasView with the provided argument: '\n\t\t\t\t\t\t+ Base.slice(arguments, 1));\n\t\t\tcanvas = CanvasProvider.getCanvas(size);\n\t\t}\n\t\tvar ctx = this._context = canvas.getContext('2d');\n\t\tctx.save();\n\t\tthis._pixelRatio = 1;\n\t\tif (!/^off|false$/.test(PaperScope.getAttribute(canvas, 'hidpi'))) {\n\t\t\tvar deviceRatio = window.devicePixelRatio || 1,\n\t\t\t\tbackingStoreRatio = DomElement.getPrefixed(ctx,\n\t\t\t\t\t\t'backingStorePixelRatio') || 1;\n\t\t\tthis._pixelRatio = deviceRatio / backingStoreRatio;\n\t\t}\n\t\tView.call(this, project, canvas);\n\t\tthis._needsUpdate = true;\n\t},\n\n\tremove: function remove() {\n\t\tthis._context.restore();\n\t\treturn remove.base.call(this);\n\t},\n\n\t_setElementSize: function _setElementSize(width, height) {\n\t\tvar pixelRatio = this._pixelRatio;\n\t\t_setElementSize.base.call(this, width * pixelRatio, height * pixelRatio);\n\t\tif (pixelRatio !== 1) {\n\t\t\tvar element = this._element,\n\t\t\t\tctx = this._context;\n\t\t\tif (!PaperScope.hasAttribute(element, 'resize')) {\n\t\t\t\tvar style = element.style;\n\t\t\t\tstyle.width = width + 'px';\n\t\t\t\tstyle.height = height + 'px';\n\t\t\t}\n\t\t\tctx.restore();\n\t\t\tctx.save();\n\t\t\tctx.scale(pixelRatio, pixelRatio);\n\t\t}\n\t},\n\n\tgetContext: function() {\n\t\treturn this._context;\n\t},\n\n\tgetPixelSize: function getPixelSize(size) {\n\t\tvar agent = paper.agent,\n\t\t\tpixels;\n\t\tif (agent && agent.firefox) {\n\t\t\tpixels = getPixelSize.base.call(this, size);\n\t\t} else {\n\t\t\tvar ctx = this._context,\n\t\t\t\tprevFont = ctx.font;\n\t\t\tctx.font = size + ' serif';\n\t\t\tpixels = parseFloat(ctx.font);\n\t\t\tctx.font = prevFont;\n\t\t}\n\t\treturn pixels;\n\t},\n\n\tgetTextWidth: function(font, lines) {\n\t\tvar ctx = this._context,\n\t\t\tprevFont = ctx.font,\n\t\t\twidth = 0;\n\t\tctx.font = font;\n\t\tfor (var i = 0, l = lines.length; i < l; i++)\n\t\t\twidth = Math.max(width, ctx.measureText(lines[i]).width);\n\t\tctx.font = prevFont;\n\t\treturn width;\n\t},\n\n\tupdate: function() {\n\t\tif (!this._needsUpdate)\n\t\t\treturn false;\n\t\tvar project = this._project,\n\t\t\tctx = this._context,\n\t\t\tsize = this._viewSize;\n\t\tctx.clearRect(0, 0, size.width + 1, size.height + 1);\n\t\tif (project)\n\t\t\tproject.draw(ctx, this._matrix, this._pixelRatio);\n\t\tthis._needsUpdate = false;\n\t\treturn true;\n\t}\n});\n\nvar Event = Base.extend({\n\t_class: 'Event',\n\n\tinitialize: function Event(event) {\n\t\tthis.event = event;\n\t\tthis.type = event && event.type;\n\t},\n\n\tprevented: false,\n\tstopped: false,\n\n\tpreventDefault: function() {\n\t\tthis.prevented = true;\n\t\tthis.event.preventDefault();\n\t},\n\n\tstopPropagation: function() {\n\t\tthis.stopped = true;\n\t\tthis.event.stopPropagation();\n\t},\n\n\tstop: function() {\n\t\tthis.stopPropagation();\n\t\tthis.preventDefault();\n\t},\n\n\tgetTimeStamp: function() {\n\t\treturn this.event.timeStamp;\n\t},\n\n\tgetModifiers: function() {\n\t\treturn Key.modifiers;\n\t}\n});\n\nvar KeyEvent = Event.extend({\n\t_class: 'KeyEvent',\n\n\tinitialize: function KeyEvent(type, event, key, character) {\n\t\tthis.type = type;\n\t\tthis.event = event;\n\t\tthis.key = key;\n\t\tthis.character = character;\n\t},\n\n\ttoString: function() {\n\t\treturn \"{ type: '\" + this.type\n\t\t\t\t+ \"', key: '\" + this.key\n\t\t\t\t+ \"', character: '\" + this.character\n\t\t\t\t+ \"', modifiers: \" + this.getModifiers()\n\t\t\t\t+ \" }\";\n\t}\n});\n\nvar Key = new function() {\n\tvar keyLookup = {\n\t\t\t'\\t': 'tab',\n\t\t\t' ': 'space',\n\t\t\t'\\b': 'backspace',\n\t\t\t'\\x7f': 'delete',\n\t\t\t'Spacebar': 'space',\n\t\t\t'Del': 'delete',\n\t\t\t'Win': 'meta',\n\t\t\t'Esc': 'escape'\n\t\t},\n\n\t\tcharLookup = {\n\t\t\t'tab': '\\t',\n\t\t\t'space': ' ',\n\t\t\t'enter': '\\r'\n\t\t},\n\n\t\tkeyMap = {},\n\t\tcharMap = {},\n\t\tmetaFixMap,\n\t\tdownKey,\n\n\t\tmodifiers = new Base({\n\t\t\tshift: false,\n\t\t\tcontrol: false,\n\t\t\talt: false,\n\t\t\tmeta: false,\n\t\t\tcapsLock: false,\n\t\t\tspace: false\n\t\t}).inject({\n\t\t\toption: {\n\t\t\t\tget: function() {\n\t\t\t\t\treturn this.alt;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcommand: {\n\t\t\t\tget: function() {\n\t\t\t\t\tvar agent = paper && paper.agent;\n\t\t\t\t\treturn agent && agent.mac ? this.meta : this.control;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\tfunction getKey(event) {\n\t\tvar key = event.key || event.keyIdentifier;\n\t\tkey = /^U\\+/.test(key)\n\t\t\t\t? String.fromCharCode(parseInt(key.substr(2), 16))\n\t\t\t\t: /^Arrow[A-Z]/.test(key) ? key.substr(5)\n\t\t\t\t: key === 'Unidentified'  || key === undefined\n\t\t\t\t\t? String.fromCharCode(event.keyCode)\n\t\t\t\t\t: key;\n\t\treturn keyLookup[key] ||\n\t\t\t\t(key.length > 1 ? Base.hyphenate(key) : key.toLowerCase());\n\t}\n\n\tfunction handleKey(down, key, character, event) {\n\t\tvar type = down ? 'keydown' : 'keyup',\n\t\t\tview = View._focused,\n\t\t\tname;\n\t\tkeyMap[key] = down;\n\t\tif (down) {\n\t\t\tcharMap[key] = character;\n\t\t} else {\n\t\t\tdelete charMap[key];\n\t\t}\n\t\tif (key.length > 1 && (name = Base.camelize(key)) in modifiers) {\n\t\t\tmodifiers[name] = down;\n\t\t\tvar agent = paper && paper.agent;\n\t\t\tif (name === 'meta' && agent && agent.mac) {\n\t\t\t\tif (down) {\n\t\t\t\t\tmetaFixMap = {};\n\t\t\t\t} else {\n\t\t\t\t\tfor (var k in metaFixMap) {\n\t\t\t\t\t\tif (k in charMap)\n\t\t\t\t\t\t\thandleKey(false, k, metaFixMap[k], event);\n\t\t\t\t\t}\n\t\t\t\t\tmetaFixMap = null;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (down && metaFixMap) {\n\t\t\tmetaFixMap[key] = character;\n\t\t}\n\t\tif (view) {\n\t\t\tview._handleKeyEvent(down ? 'keydown' : 'keyup', event, key,\n\t\t\t\t\tcharacter);\n\t\t}\n\t}\n\n\tDomEvent.add(document, {\n\t\tkeydown: function(event) {\n\t\t\tvar key = getKey(event),\n\t\t\t\tagent = paper && paper.agent;\n\t\t\tif (key.length > 1 || agent && (agent.chrome && (event.altKey\n\t\t\t\t\t\t|| agent.mac && event.metaKey\n\t\t\t\t\t\t|| !agent.mac && event.ctrlKey))) {\n\t\t\t\thandleKey(true, key,\n\t\t\t\t\t\tcharLookup[key] || (key.length > 1 ? '' : key), event);\n\t\t\t} else {\n\t\t\t\tdownKey = key;\n\t\t\t}\n\t\t},\n\n\t\tkeypress: function(event) {\n\t\t\tif (downKey) {\n\t\t\t\tvar key = getKey(event),\n\t\t\t\t\tcode = event.charCode,\n\t\t\t\t\tcharacter = code >= 32 ? String.fromCharCode(code)\n\t\t\t\t\t\t: key.length > 1 ? '' : key;\n\t\t\t\tif (key !== downKey) {\n\t\t\t\t\tkey = character.toLowerCase();\n\t\t\t\t}\n\t\t\t\thandleKey(true, key, character, event);\n\t\t\t\tdownKey = null;\n\t\t\t}\n\t\t},\n\n\t\tkeyup: function(event) {\n\t\t\tvar key = getKey(event);\n\t\t\tif (key in charMap)\n\t\t\t\thandleKey(false, key, charMap[key], event);\n\t\t}\n\t});\n\n\tDomEvent.add(window, {\n\t\tblur: function(event) {\n\t\t\tfor (var key in charMap)\n\t\t\t\thandleKey(false, key, charMap[key], event);\n\t\t}\n\t});\n\n\treturn {\n\t\tmodifiers: modifiers,\n\n\t\tisDown: function(key) {\n\t\t\treturn !!keyMap[key];\n\t\t}\n\t};\n};\n\nvar MouseEvent = Event.extend({\n\t_class: 'MouseEvent',\n\n\tinitialize: function MouseEvent(type, event, point, target, delta) {\n\t\tthis.type = type;\n\t\tthis.event = event;\n\t\tthis.point = point;\n\t\tthis.target = target;\n\t\tthis.delta = delta;\n\t},\n\n\ttoString: function() {\n\t\treturn \"{ type: '\" + this.type\n\t\t\t\t+ \"', point: \" + this.point\n\t\t\t\t+ ', target: ' + this.target\n\t\t\t\t+ (this.delta ? ', delta: ' + this.delta : '')\n\t\t\t\t+ ', modifiers: ' + this.getModifiers()\n\t\t\t\t+ ' }';\n\t}\n});\n\nvar ToolEvent = Event.extend({\n\t_class: 'ToolEvent',\n\t_item: null,\n\n\tinitialize: function ToolEvent(tool, type, event) {\n\t\tthis.tool = tool;\n\t\tthis.type = type;\n\t\tthis.event = event;\n\t},\n\n\t_choosePoint: function(point, toolPoint) {\n\t\treturn point ? point : toolPoint ? toolPoint.clone() : null;\n\t},\n\n\tgetPoint: function() {\n\t\treturn this._choosePoint(this._point, this.tool._point);\n\t},\n\n\tsetPoint: function(point) {\n\t\tthis._point = point;\n\t},\n\n\tgetLastPoint: function() {\n\t\treturn this._choosePoint(this._lastPoint, this.tool._lastPoint);\n\t},\n\n\tsetLastPoint: function(lastPoint) {\n\t\tthis._lastPoint = lastPoint;\n\t},\n\n\tgetDownPoint: function() {\n\t\treturn this._choosePoint(this._downPoint, this.tool._downPoint);\n\t},\n\n\tsetDownPoint: function(downPoint) {\n\t\tthis._downPoint = downPoint;\n\t},\n\n\tgetMiddlePoint: function() {\n\t\tif (!this._middlePoint && this.tool._lastPoint) {\n\t\t\treturn this.tool._point.add(this.tool._lastPoint).divide(2);\n\t\t}\n\t\treturn this._middlePoint;\n\t},\n\n\tsetMiddlePoint: function(middlePoint) {\n\t\tthis._middlePoint = middlePoint;\n\t},\n\n\tgetDelta: function() {\n\t\treturn !this._delta && this.tool._lastPoint\n\t\t\t\t? this.tool._point.subtract(this.tool._lastPoint)\n\t\t\t\t: this._delta;\n\t},\n\n\tsetDelta: function(delta) {\n\t\tthis._delta = delta;\n\t},\n\n\tgetCount: function() {\n\t\treturn this.tool[/^mouse(down|up)$/.test(this.type)\n\t\t\t\t? '_downCount' : '_moveCount'];\n\t},\n\n\tsetCount: function(count) {\n\t\tthis.tool[/^mouse(down|up)$/.test(this.type) ? 'downCount' : 'count']\n\t\t\t= count;\n\t},\n\n\tgetItem: function() {\n\t\tif (!this._item) {\n\t\t\tvar result = this.tool._scope.project.hitTest(this.getPoint());\n\t\t\tif (result) {\n\t\t\t\tvar item = result.item,\n\t\t\t\t\tparent = item._parent;\n\t\t\t\twhile (/^(Group|CompoundPath)$/.test(parent._class)) {\n\t\t\t\t\titem = parent;\n\t\t\t\t\tparent = parent._parent;\n\t\t\t\t}\n\t\t\t\tthis._item = item;\n\t\t\t}\n\t\t}\n\t\treturn this._item;\n\t},\n\n\tsetItem: function(item) {\n\t\tthis._item = item;\n\t},\n\n\ttoString: function() {\n\t\treturn '{ type: ' + this.type\n\t\t\t\t+ ', point: ' + this.getPoint()\n\t\t\t\t+ ', count: ' + this.getCount()\n\t\t\t\t+ ', modifiers: ' + this.getModifiers()\n\t\t\t\t+ ' }';\n\t}\n});\n\nvar Tool = PaperScopeItem.extend({\n\t_class: 'Tool',\n\t_list: 'tools',\n\t_reference: 'tool',\n\t_events: ['onMouseDown', 'onMouseUp', 'onMouseDrag', 'onMouseMove',\n\t\t\t'onActivate', 'onDeactivate', 'onEditOptions', 'onKeyDown',\n\t\t\t'onKeyUp'],\n\n\tinitialize: function Tool(props) {\n\t\tPaperScopeItem.call(this);\n\t\tthis._moveCount = -1;\n\t\tthis._downCount = -1;\n\t\tthis.set(props);\n\t},\n\n\tgetMinDistance: function() {\n\t\treturn this._minDistance;\n\t},\n\n\tsetMinDistance: function(minDistance) {\n\t\tthis._minDistance = minDistance;\n\t\tif (minDistance != null && this._maxDistance != null\n\t\t\t\t&& minDistance > this._maxDistance) {\n\t\t\tthis._maxDistance = minDistance;\n\t\t}\n\t},\n\n\tgetMaxDistance: function() {\n\t\treturn this._maxDistance;\n\t},\n\n\tsetMaxDistance: function(maxDistance) {\n\t\tthis._maxDistance = maxDistance;\n\t\tif (this._minDistance != null && maxDistance != null\n\t\t\t\t&& maxDistance < this._minDistance) {\n\t\t\tthis._minDistance = maxDistance;\n\t\t}\n\t},\n\n\tgetFixedDistance: function() {\n\t\treturn this._minDistance == this._maxDistance\n\t\t\t? this._minDistance : null;\n\t},\n\n\tsetFixedDistance: function(distance) {\n\t\tthis._minDistance = this._maxDistance = distance;\n\t},\n\n\t_handleMouseEvent: function(type, event, point, mouse) {\n\t\tpaper = this._scope;\n\t\tif (mouse.drag && !this.responds(type))\n\t\t\ttype = 'mousemove';\n\t\tvar move = mouse.move || mouse.drag,\n\t\t\tresponds = this.responds(type),\n\t\t\tminDistance = this.minDistance,\n\t\t\tmaxDistance = this.maxDistance,\n\t\t\tcalled = false,\n\t\t\ttool = this;\n\t\tfunction update(minDistance, maxDistance) {\n\t\t\tvar pt = point,\n\t\t\t\ttoolPoint = move ? tool._point : (tool._downPoint || pt);\n\t\t\tif (move) {\n\t\t\t\tif (tool._moveCount >= 0 && pt.equals(toolPoint)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (toolPoint && (minDistance != null || maxDistance != null)) {\n\t\t\t\t\tvar vector = pt.subtract(toolPoint),\n\t\t\t\t\t\tdistance = vector.getLength();\n\t\t\t\t\tif (distance < (minDistance || 0))\n\t\t\t\t\t\treturn false;\n\t\t\t\t\tif (maxDistance) {\n\t\t\t\t\t\tpt = toolPoint.add(vector.normalize(\n\t\t\t\t\t\t\t\tMath.min(distance, maxDistance)));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttool._moveCount++;\n\t\t\t}\n\t\t\ttool._point = pt;\n\t\t\ttool._lastPoint = toolPoint || pt;\n\t\t\tif (mouse.down) {\n\t\t\t\ttool._moveCount = -1;\n\t\t\t\ttool._downPoint = pt;\n\t\t\t\ttool._downCount++;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tfunction emit() {\n\t\t\tif (responds) {\n\t\t\t\tcalled = tool.emit(type, new ToolEvent(tool, type, event))\n\t\t\t\t\t\t|| called;\n\t\t\t}\n\t\t}\n\n\t\tif (mouse.down) {\n\t\t\tupdate();\n\t\t\temit();\n\t\t} else if (mouse.up) {\n\t\t\tupdate(null, maxDistance);\n\t\t\temit();\n\t\t} else if (responds) {\n\t\t\twhile (update(minDistance, maxDistance))\n\t\t\t\temit();\n\t\t}\n\t\treturn called;\n\t}\n\n});\n\nvar Tween = Base.extend(Emitter, {\n\t_class: 'Tween',\n\n\tstatics: {\n\t\teasings: new Base({\n\t\t\tlinear: function(t) {\n\t\t\t\treturn t;\n\t\t\t},\n\n\t\t\teaseInQuad: function(t) {\n\t\t\t\treturn t * t;\n\t\t\t},\n\n\t\t\teaseOutQuad: function(t) {\n\t\t\t\treturn t * (2 - t);\n\t\t\t},\n\n\t\t\teaseInOutQuad: function(t) {\n\t\t\t\treturn t < 0.5\n\t\t\t\t\t? 2 * t * t\n\t\t\t\t\t: -1 + 2 * (2 - t) * t;\n\t\t\t},\n\n\t\t\teaseInCubic: function(t) {\n\t\t\t\treturn t * t * t;\n\t\t\t},\n\n\t\t\teaseOutCubic: function(t) {\n\t\t\t\treturn --t * t * t + 1;\n\t\t\t},\n\n\t\t\teaseInOutCubic: function(t) {\n\t\t\t\treturn t < 0.5\n\t\t\t\t\t? 4 * t * t * t\n\t\t\t\t\t: (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n\t\t\t},\n\n\t\t\teaseInQuart: function(t) {\n\t\t\t\treturn t * t * t * t;\n\t\t\t},\n\n\t\t\teaseOutQuart: function(t) {\n\t\t\t\treturn 1 - (--t) * t * t * t;\n\t\t\t},\n\n\t\t\teaseInOutQuart: function(t) {\n\t\t\t\treturn t < 0.5\n\t\t\t\t\t? 8 * t * t * t * t\n\t\t\t\t\t: 1 - 8 * (--t) * t * t * t;\n\t\t\t},\n\n\t\t\teaseInQuint: function(t) {\n\t\t\t\treturn t * t * t * t * t;\n\t\t\t},\n\n\t\t\teaseOutQuint: function(t) {\n\t\t\t\treturn 1 + --t * t * t * t * t;\n\t\t\t},\n\n\t\t\teaseInOutQuint: function(t) {\n\t\t\t\treturn t < 0.5\n\t\t\t\t\t? 16 * t * t * t * t * t\n\t\t\t\t\t: 1 + 16 * (--t) * t * t * t * t;\n\t\t\t}\n\t\t})\n\t},\n\n\tinitialize: function Tween(object, from, to, duration, easing, start) {\n\t\tthis.object = object;\n\t\tvar type = typeof easing;\n\t\tvar isFunction = type === 'function';\n\t\tthis.type = isFunction\n\t\t\t? type\n\t\t\t: type === 'string'\n\t\t\t\t? easing\n\t\t\t\t: 'linear';\n\t\tthis.easing = isFunction ? easing : Tween.easings[this.type];\n\t\tthis.duration = duration;\n\t\tthis.running = false;\n\n\t\tthis._then = null;\n\t\tthis._startTime = null;\n\t\tvar state = from || to;\n\t\tthis._keys = state ? Object.keys(state) : [];\n\t\tthis._parsedKeys = this._parseKeys(this._keys);\n\t\tthis._from = state && this._getState(from);\n\t\tthis._to = state && this._getState(to);\n\t\tif (start !== false) {\n\t\t\tthis.start();\n\t\t}\n\t},\n\n\tthen: function(then) {\n\t\tthis._then = then;\n\t\treturn this;\n\t},\n\n\tstart: function() {\n\t\tthis._startTime = null;\n\t\tthis.running = true;\n\t\treturn this;\n\t},\n\n\tstop: function() {\n\t\tthis.running = false;\n\t\treturn this;\n\t},\n\n\tupdate: function(progress) {\n\t\tif (this.running) {\n\t\t\tif (progress >= 1) {\n\t\t\t\tprogress = 1;\n\t\t\t\tthis.running = false;\n\t\t\t}\n\n\t\t\tvar factor = this.easing(progress),\n\t\t\t\tkeys = this._keys,\n\t\t\t\tgetValue = function(value) {\n\t\t\t\t\treturn typeof value === 'function'\n\t\t\t\t\t\t? value(factor, progress)\n\t\t\t\t\t\t: value;\n\t\t\t\t};\n\t\t\tfor (var i = 0, l = keys && keys.length; i < l; i++) {\n\t\t\t\tvar key = keys[i],\n\t\t\t\t\tfrom = getValue(this._from[key]),\n\t\t\t\t\tto = getValue(this._to[key]),\n\t\t\t\t\tvalue = (from && to && from.__add && to.__add)\n\t\t\t\t\t\t? to.__subtract(from).__multiply(factor).__add(from)\n\t\t\t\t\t\t: ((to - from) * factor) + from;\n\t\t\t\tthis._setProperty(this._parsedKeys[key], value);\n\t\t\t}\n\n\t\t\tif (this.responds('update')) {\n\t\t\t\tthis.emit('update', new Base({\n\t\t\t\t\tprogress: progress,\n\t\t\t\t\tfactor: factor\n\t\t\t\t}));\n\t\t\t}\n\t\t\tif (!this.running && this._then) {\n\t\t\t\tthis._then(this.object);\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t},\n\n\t_events: {\n\t\tonUpdate: {}\n\t},\n\n\t_handleFrame: function(time) {\n\t\tvar startTime = this._startTime,\n\t\t\tprogress = startTime\n\t\t\t\t? (time - startTime) / this.duration\n\t\t\t\t: 0;\n\t\tif (!startTime) {\n\t\t\tthis._startTime = time;\n\t\t}\n\t\tthis.update(progress);\n\t},\n\n\t_getState: function(state) {\n\t\tvar keys = this._keys,\n\t\t\tresult = {};\n\t\tfor (var i = 0, l = keys.length; i < l; i++) {\n\t\t\tvar key = keys[i],\n\t\t\t\tpath = this._parsedKeys[key],\n\t\t\t\tcurrent = this._getProperty(path),\n\t\t\t\tvalue;\n\t\t\tif (state) {\n\t\t\t\tvar resolved = this._resolveValue(current, state[key]);\n\t\t\t\tthis._setProperty(path, resolved);\n\t\t\t\tvalue = this._getProperty(path);\n\t\t\t\tvalue = value && value.clone ? value.clone() : value;\n\t\t\t\tthis._setProperty(path, current);\n\t\t\t} else {\n\t\t\t\tvalue = current && current.clone ? current.clone() : current;\n\t\t\t}\n\t\t\tresult[key] = value;\n\t\t}\n\t\treturn result;\n\t},\n\n\t_resolveValue: function(current, value) {\n\t\tif (value) {\n\t\t\tif (Array.isArray(value) && value.length === 2) {\n\t\t\t\tvar operator = value[0];\n\t\t\t\treturn (\n\t\t\t\t\toperator &&\n\t\t\t\t\toperator.match &&\n\t\t\t\t\toperator.match(/^[+\\-\\*\\/]=/)\n\t\t\t\t)\n\t\t\t\t\t? this._calculate(current, operator[0], value[1])\n\t\t\t\t\t: value;\n\t\t\t} else if (typeof value === 'string') {\n\t\t\t\tvar match = value.match(/^[+\\-*/]=(.*)/);\n\t\t\t\tif (match) {\n\t\t\t\t\tvar parsed = JSON.parse(match[1].replace(\n\t\t\t\t\t\t/(['\"])?([a-zA-Z0-9_]+)(['\"])?:/g,\n\t\t\t\t\t\t'\"$2\": '\n\t\t\t\t\t));\n\t\t\t\t\treturn this._calculate(current, value[0], parsed);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t},\n\n\t_calculate: function(left, operator, right) {\n\t\treturn paper.PaperScript.calculateBinary(left, operator, right);\n\t},\n\n\t_parseKeys: function(keys) {\n\t\tvar parsed = {};\n\t\tfor (var i = 0, l = keys.length; i < l; i++) {\n\t\t\tvar key = keys[i],\n\t\t\t\tpath = key\n\t\t\t\t\t.replace(/\\.([^.]*)/g, '/$1')\n\t\t\t\t\t.replace(/\\[['\"]?([^'\"\\]]*)['\"]?\\]/g, '/$1');\n\t\t\tparsed[key] = path.split('/');\n\t\t}\n\t\treturn parsed;\n\t},\n\n\t_getProperty: function(path, offset) {\n\t\tvar obj = this.object;\n\t\tfor (var i = 0, l = path.length - (offset || 0); i < l && obj; i++) {\n\t\t\tobj = obj[path[i]];\n\t\t}\n\t\treturn obj;\n\t},\n\n\t_setProperty: function(path, value) {\n\t\tvar dest = this._getProperty(path, 1);\n\t\tif (dest) {\n\t\t\tdest[path[path.length - 1]] = value;\n\t\t}\n\t}\n});\n\nvar Http = {\n\trequest: function(options) {\n\t\tvar xhr = new self.XMLHttpRequest();\n\t\txhr.open((options.method || 'get').toUpperCase(), options.url,\n\t\t\t\tBase.pick(options.async, true));\n\t\tif (options.mimeType)\n\t\t\txhr.overrideMimeType(options.mimeType);\n\t\txhr.onload = function() {\n\t\t\tvar status = xhr.status;\n\t\t\tif (status === 0 || status === 200) {\n\t\t\t\tif (options.onLoad) {\n\t\t\t\t\toptions.onLoad.call(xhr, xhr.responseText);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\txhr.onerror();\n\t\t\t}\n\t\t};\n\t\txhr.onerror = function() {\n\t\t\tvar status = xhr.status,\n\t\t\t\tmessage = 'Could not load \"' + options.url + '\" (Status: '\n\t\t\t\t\t\t+ status + ')';\n\t\t\tif (options.onError) {\n\t\t\t\toptions.onError(message, status);\n\t\t\t} else {\n\t\t\t\tthrow new Error(message);\n\t\t\t}\n\t\t};\n\t\treturn xhr.send(null);\n\t}\n};\n\nvar CanvasProvider = Base.exports.CanvasProvider = {\n\tcanvases: [],\n\n\tgetCanvas: function(width, height) {\n\t\tif (!window)\n\t\t\treturn null;\n\t\tvar canvas,\n\t\t\tclear = true;\n\t\tif (typeof width === 'object') {\n\t\t\theight = width.height;\n\t\t\twidth = width.width;\n\t\t}\n\t\tif (this.canvases.length) {\n\t\t\tcanvas = this.canvases.pop();\n\t\t} else {\n\t\t\tcanvas = document.createElement('canvas');\n\t\t\tclear = false;\n\t\t}\n\t\tvar ctx = canvas.getContext('2d');\n\t\tif (!ctx) {\n\t\t\tthrow new Error('Canvas ' + canvas +\n\t\t\t\t\t' is unable to provide a 2D context.');\n\t\t}\n\t\tif (canvas.width === width && canvas.height === height) {\n\t\t\tif (clear)\n\t\t\t\tctx.clearRect(0, 0, width + 1, height + 1);\n\t\t} else {\n\t\t\tcanvas.width = width;\n\t\t\tcanvas.height = height;\n\t\t}\n\t\tctx.save();\n\t\treturn canvas;\n\t},\n\n\tgetContext: function(width, height) {\n\t\tvar canvas = this.getCanvas(width, height);\n\t\treturn canvas ? canvas.getContext('2d') : null;\n\t},\n\n\trelease: function(obj) {\n\t\tvar canvas = obj && obj.canvas ? obj.canvas : obj;\n\t\tif (canvas && canvas.getContext) {\n\t\t\tcanvas.getContext('2d').restore();\n\t\t\tthis.canvases.push(canvas);\n\t\t}\n\t}\n};\n\nvar BlendMode = new function() {\n\tvar min = Math.min,\n\t\tmax = Math.max,\n\t\tabs = Math.abs,\n\t\tsr, sg, sb, sa,\n\t\tbr, bg, bb, ba,\n\t\tdr, dg, db;\n\n\tfunction getLum(r, g, b) {\n\t\treturn 0.2989 * r + 0.587 * g + 0.114 * b;\n\t}\n\n\tfunction setLum(r, g, b, l) {\n\t\tvar d = l - getLum(r, g, b);\n\t\tdr = r + d;\n\t\tdg = g + d;\n\t\tdb = b + d;\n\t\tvar l = getLum(dr, dg, db),\n\t\t\tmn = min(dr, dg, db),\n\t\t\tmx = max(dr, dg, db);\n\t\tif (mn < 0) {\n\t\t\tvar lmn = l - mn;\n\t\t\tdr = l + (dr - l) * l / lmn;\n\t\t\tdg = l + (dg - l) * l / lmn;\n\t\t\tdb = l + (db - l) * l / lmn;\n\t\t}\n\t\tif (mx > 255) {\n\t\t\tvar ln = 255 - l,\n\t\t\t\tmxl = mx - l;\n\t\t\tdr = l + (dr - l) * ln / mxl;\n\t\t\tdg = l + (dg - l) * ln / mxl;\n\t\t\tdb = l + (db - l) * ln / mxl;\n\t\t}\n\t}\n\n\tfunction getSat(r, g, b) {\n\t\treturn max(r, g, b) - min(r, g, b);\n\t}\n\n\tfunction setSat(r, g, b, s) {\n\t\tvar col = [r, g, b],\n\t\t\tmx = max(r, g, b),\n\t\t\tmn = min(r, g, b),\n\t\t\tmd;\n\t\tmn = mn === r ? 0 : mn === g ? 1 : 2;\n\t\tmx = mx === r ? 0 : mx === g ? 1 : 2;\n\t\tmd = min(mn, mx) === 0 ? max(mn, mx) === 1 ? 2 : 1 : 0;\n\t\tif (col[mx] > col[mn]) {\n\t\t\tcol[md] = (col[md] - col[mn]) * s / (col[mx] - col[mn]);\n\t\t\tcol[mx] = s;\n\t\t} else {\n\t\t\tcol[md] = col[mx] = 0;\n\t\t}\n\t\tcol[mn] = 0;\n\t\tdr = col[0];\n\t\tdg = col[1];\n\t\tdb = col[2];\n\t}\n\n\tvar modes = {\n\t\tmultiply: function() {\n\t\t\tdr = br * sr / 255;\n\t\t\tdg = bg * sg / 255;\n\t\t\tdb = bb * sb / 255;\n\t\t},\n\n\t\tscreen: function() {\n\t\t\tdr = br + sr - (br * sr / 255);\n\t\t\tdg = bg + sg - (bg * sg / 255);\n\t\t\tdb = bb + sb - (bb * sb / 255);\n\t\t},\n\n\t\toverlay: function() {\n\t\t\tdr = br < 128 ? 2 * br * sr / 255 : 255 - 2 * (255 - br) * (255 - sr) / 255;\n\t\t\tdg = bg < 128 ? 2 * bg * sg / 255 : 255 - 2 * (255 - bg) * (255 - sg) / 255;\n\t\t\tdb = bb < 128 ? 2 * bb * sb / 255 : 255 - 2 * (255 - bb) * (255 - sb) / 255;\n\t\t},\n\n\t\t'soft-light': function() {\n\t\t\tvar t = sr * br / 255;\n\t\t\tdr = t + br * (255 - (255 - br) * (255 - sr) / 255 - t) / 255;\n\t\t\tt = sg * bg / 255;\n\t\t\tdg = t + bg * (255 - (255 - bg) * (255 - sg) / 255 - t) / 255;\n\t\t\tt = sb * bb / 255;\n\t\t\tdb = t + bb * (255 - (255 - bb) * (255 - sb) / 255 - t) / 255;\n\t\t},\n\n\t\t'hard-light': function() {\n\t\t\tdr = sr < 128 ? 2 * sr * br / 255 : 255 - 2 * (255 - sr) * (255 - br) / 255;\n\t\t\tdg = sg < 128 ? 2 * sg * bg / 255 : 255 - 2 * (255 - sg) * (255 - bg) / 255;\n\t\t\tdb = sb < 128 ? 2 * sb * bb / 255 : 255 - 2 * (255 - sb) * (255 - bb) / 255;\n\t\t},\n\n\t\t'color-dodge': function() {\n\t\t\tdr = br === 0 ? 0 : sr === 255 ? 255 : min(255, 255 * br / (255 - sr));\n\t\t\tdg = bg === 0 ? 0 : sg === 255 ? 255 : min(255, 255 * bg / (255 - sg));\n\t\t\tdb = bb === 0 ? 0 : sb === 255 ? 255 : min(255, 255 * bb / (255 - sb));\n\t\t},\n\n\t\t'color-burn': function() {\n\t\t\tdr = br === 255 ? 255 : sr === 0 ? 0 : max(0, 255 - (255 - br) * 255 / sr);\n\t\t\tdg = bg === 255 ? 255 : sg === 0 ? 0 : max(0, 255 - (255 - bg) * 255 / sg);\n\t\t\tdb = bb === 255 ? 255 : sb === 0 ? 0 : max(0, 255 - (255 - bb) * 255 / sb);\n\t\t},\n\n\t\tdarken: function() {\n\t\t\tdr = br < sr ? br : sr;\n\t\t\tdg = bg < sg ? bg : sg;\n\t\t\tdb = bb < sb ? bb : sb;\n\t\t},\n\n\t\tlighten: function() {\n\t\t\tdr = br > sr ? br : sr;\n\t\t\tdg = bg > sg ? bg : sg;\n\t\t\tdb = bb > sb ? bb : sb;\n\t\t},\n\n\t\tdifference: function() {\n\t\t\tdr = br - sr;\n\t\t\tif (dr < 0)\n\t\t\t\tdr = -dr;\n\t\t\tdg = bg - sg;\n\t\t\tif (dg < 0)\n\t\t\t\tdg = -dg;\n\t\t\tdb = bb - sb;\n\t\t\tif (db < 0)\n\t\t\t\tdb = -db;\n\t\t},\n\n\t\texclusion: function() {\n\t\t\tdr = br + sr * (255 - br - br) / 255;\n\t\t\tdg = bg + sg * (255 - bg - bg) / 255;\n\t\t\tdb = bb + sb * (255 - bb - bb) / 255;\n\t\t},\n\n\t\thue: function() {\n\t\t\tsetSat(sr, sg, sb, getSat(br, bg, bb));\n\t\t\tsetLum(dr, dg, db, getLum(br, bg, bb));\n\t\t},\n\n\t\tsaturation: function() {\n\t\t\tsetSat(br, bg, bb, getSat(sr, sg, sb));\n\t\t\tsetLum(dr, dg, db, getLum(br, bg, bb));\n\t\t},\n\n\t\tluminosity: function() {\n\t\t\tsetLum(br, bg, bb, getLum(sr, sg, sb));\n\t\t},\n\n\t\tcolor: function() {\n\t\t\tsetLum(sr, sg, sb, getLum(br, bg, bb));\n\t\t},\n\n\t\tadd: function() {\n\t\t\tdr = min(br + sr, 255);\n\t\t\tdg = min(bg + sg, 255);\n\t\t\tdb = min(bb + sb, 255);\n\t\t},\n\n\t\tsubtract: function() {\n\t\t\tdr = max(br - sr, 0);\n\t\t\tdg = max(bg - sg, 0);\n\t\t\tdb = max(bb - sb, 0);\n\t\t},\n\n\t\taverage: function() {\n\t\t\tdr = (br + sr) / 2;\n\t\t\tdg = (bg + sg) / 2;\n\t\t\tdb = (bb + sb) / 2;\n\t\t},\n\n\t\tnegation: function() {\n\t\t\tdr = 255 - abs(255 - sr - br);\n\t\t\tdg = 255 - abs(255 - sg - bg);\n\t\t\tdb = 255 - abs(255 - sb - bb);\n\t\t}\n\t};\n\n\tvar nativeModes = this.nativeModes = Base.each([\n\t\t'source-over', 'source-in', 'source-out', 'source-atop',\n\t\t'destination-over', 'destination-in', 'destination-out',\n\t\t'destination-atop', 'lighter', 'darker', 'copy', 'xor'\n\t], function(mode) {\n\t\tthis[mode] = true;\n\t}, {});\n\n\tvar ctx = CanvasProvider.getContext(1, 1);\n\tif (ctx) {\n\t\tBase.each(modes, function(func, mode) {\n\t\t\tvar darken = mode === 'darken',\n\t\t\t\tok = false;\n\t\t\tctx.save();\n\t\t\ttry {\n\t\t\t\tctx.fillStyle = darken ? '#300' : '#a00';\n\t\t\t\tctx.fillRect(0, 0, 1, 1);\n\t\t\t\tctx.globalCompositeOperation = mode;\n\t\t\t\tif (ctx.globalCompositeOperation === mode) {\n\t\t\t\t\tctx.fillStyle = darken ? '#a00' : '#300';\n\t\t\t\t\tctx.fillRect(0, 0, 1, 1);\n\t\t\t\t\tok = ctx.getImageData(0, 0, 1, 1).data[0] !== darken\n\t\t\t\t\t\t\t? 170 : 51;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\t\t\tctx.restore();\n\t\t\tnativeModes[mode] = ok;\n\t\t});\n\t\tCanvasProvider.release(ctx);\n\t}\n\n\tthis.process = function(mode, srcContext, dstContext, alpha, offset) {\n\t\tvar srcCanvas = srcContext.canvas,\n\t\t\tnormal = mode === 'normal';\n\t\tif (normal || nativeModes[mode]) {\n\t\t\tdstContext.save();\n\t\t\tdstContext.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\tdstContext.globalAlpha = alpha;\n\t\t\tif (!normal)\n\t\t\t\tdstContext.globalCompositeOperation = mode;\n\t\t\tdstContext.drawImage(srcCanvas, offset.x, offset.y);\n\t\t\tdstContext.restore();\n\t\t} else {\n\t\t\tvar process = modes[mode];\n\t\t\tif (!process)\n\t\t\t\treturn;\n\t\t\tvar dstData = dstContext.getImageData(offset.x, offset.y,\n\t\t\t\t\tsrcCanvas.width, srcCanvas.height),\n\t\t\t\tdst = dstData.data,\n\t\t\t\tsrc = srcContext.getImageData(0, 0,\n\t\t\t\t\tsrcCanvas.width, srcCanvas.height).data;\n\t\t\tfor (var i = 0, l = dst.length; i < l; i += 4) {\n\t\t\t\tsr = src[i];\n\t\t\t\tbr = dst[i];\n\t\t\t\tsg = src[i + 1];\n\t\t\t\tbg = dst[i + 1];\n\t\t\t\tsb = src[i + 2];\n\t\t\t\tbb = dst[i + 2];\n\t\t\t\tsa = src[i + 3];\n\t\t\t\tba = dst[i + 3];\n\t\t\t\tprocess();\n\t\t\t\tvar a1 = sa * alpha / 255,\n\t\t\t\t\ta2 = 1 - a1;\n\t\t\t\tdst[i] = a1 * dr + a2 * br;\n\t\t\t\tdst[i + 1] = a1 * dg + a2 * bg;\n\t\t\t\tdst[i + 2] = a1 * db + a2 * bb;\n\t\t\t\tdst[i + 3] = sa * alpha + a2 * ba;\n\t\t\t}\n\t\t\tdstContext.putImageData(dstData, offset.x, offset.y);\n\t\t}\n\t};\n};\n\nvar SvgElement = new function() {\n\tvar svg = 'http://www.w3.org/2000/svg',\n\t\txmlns = 'http://www.w3.org/2000/xmlns',\n\t\txlink = 'http://www.w3.org/1999/xlink',\n\t\tattributeNamespace = {\n\t\t\thref: xlink,\n\t\t\txlink: xmlns,\n\t\t\txmlns: xmlns + '/',\n\t\t\t'xmlns:xlink': xmlns + '/'\n\t\t};\n\n\tfunction create(tag, attributes, formatter) {\n\t\treturn set(document.createElementNS(svg, tag), attributes, formatter);\n\t}\n\n\tfunction get(node, name) {\n\t\tvar namespace = attributeNamespace[name],\n\t\t\tvalue = namespace\n\t\t\t\t? node.getAttributeNS(namespace, name)\n\t\t\t\t: node.getAttribute(name);\n\t\treturn value === 'null' ? null : value;\n\t}\n\n\tfunction set(node, attributes, formatter) {\n\t\tfor (var name in attributes) {\n\t\t\tvar value = attributes[name],\n\t\t\t\tnamespace = attributeNamespace[name];\n\t\t\tif (typeof value === 'number' && formatter)\n\t\t\t\tvalue = formatter.number(value);\n\t\t\tif (namespace) {\n\t\t\t\tnode.setAttributeNS(namespace, name, value);\n\t\t\t} else {\n\t\t\t\tnode.setAttribute(name, value);\n\t\t\t}\n\t\t}\n\t\treturn node;\n\t}\n\n\treturn {\n\t\tsvg: svg,\n\t\txmlns: xmlns,\n\t\txlink: xlink,\n\n\t\tcreate: create,\n\t\tget: get,\n\t\tset: set\n\t};\n};\n\nvar SvgStyles = Base.each({\n\tfillColor: ['fill', 'color'],\n\tfillRule: ['fill-rule', 'string'],\n\tstrokeColor: ['stroke', 'color'],\n\tstrokeWidth: ['stroke-width', 'number'],\n\tstrokeCap: ['stroke-linecap', 'string'],\n\tstrokeJoin: ['stroke-linejoin', 'string'],\n\tstrokeScaling: ['vector-effect', 'lookup', {\n\t\ttrue: 'none',\n\t\tfalse: 'non-scaling-stroke'\n\t}, function(item, value) {\n\t\treturn !value\n\t\t\t\t&& (item instanceof PathItem\n\t\t\t\t\t|| item instanceof Shape\n\t\t\t\t\t|| item instanceof TextItem);\n\t}],\n\tmiterLimit: ['stroke-miterlimit', 'number'],\n\tdashArray: ['stroke-dasharray', 'array'],\n\tdashOffset: ['stroke-dashoffset', 'number'],\n\tfontFamily: ['font-family', 'string'],\n\tfontWeight: ['font-weight', 'string'],\n\tfontSize: ['font-size', 'number'],\n\tjustification: ['text-anchor', 'lookup', {\n\t\tleft: 'start',\n\t\tcenter: 'middle',\n\t\tright: 'end'\n\t}],\n\topacity: ['opacity', 'number'],\n\tblendMode: ['mix-blend-mode', 'style']\n}, function(entry, key) {\n\tvar part = Base.capitalize(key),\n\t\tlookup = entry[2];\n\tthis[key] = {\n\t\ttype: entry[1],\n\t\tproperty: key,\n\t\tattribute: entry[0],\n\t\ttoSVG: lookup,\n\t\tfromSVG: lookup && Base.each(lookup, function(value, name) {\n\t\t\tthis[value] = name;\n\t\t}, {}),\n\t\texportFilter: entry[3],\n\t\tget: 'get' + part,\n\t\tset: 'set' + part\n\t};\n}, {});\n\nnew function() {\n\tvar formatter;\n\n\tfunction getTransform(matrix, coordinates, center) {\n\t\tvar attrs = new Base(),\n\t\t\ttrans = matrix.getTranslation();\n\t\tif (coordinates) {\n\t\t\tvar point;\n\t\t\tif (matrix.isInvertible()) {\n\t\t\t\tmatrix = matrix._shiftless();\n\t\t\t\tpoint = matrix._inverseTransform(trans);\n\t\t\t\ttrans = null;\n\t\t\t} else {\n\t\t\t\tpoint = new Point();\n\t\t\t}\n\t\t\tattrs[center ? 'cx' : 'x'] = point.x;\n\t\t\tattrs[center ? 'cy' : 'y'] = point.y;\n\t\t}\n\t\tif (!matrix.isIdentity()) {\n\t\t\tvar decomposed = matrix.decompose();\n\t\t\tif (decomposed) {\n\t\t\t\tvar parts = [],\n\t\t\t\t\tangle = decomposed.rotation,\n\t\t\t\t\tscale = decomposed.scaling,\n\t\t\t\t\tskew = decomposed.skewing;\n\t\t\t\tif (trans && !trans.isZero())\n\t\t\t\t\tparts.push('translate(' + formatter.point(trans) + ')');\n\t\t\t\tif (angle)\n\t\t\t\t\tparts.push('rotate(' + formatter.number(angle) + ')');\n\t\t\t\tif (!Numerical.isZero(scale.x - 1)\n\t\t\t\t\t\t|| !Numerical.isZero(scale.y - 1))\n\t\t\t\t\tparts.push('scale(' + formatter.point(scale) +')');\n\t\t\t\tif (skew.x)\n\t\t\t\t\tparts.push('skewX(' + formatter.number(skew.x) + ')');\n\t\t\t\tif (skew.y)\n\t\t\t\t\tparts.push('skewY(' + formatter.number(skew.y) + ')');\n\t\t\t\tattrs.transform = parts.join(' ');\n\t\t\t} else {\n\t\t\t\tattrs.transform = 'matrix(' + matrix.getValues().join(',') + ')';\n\t\t\t}\n\t\t}\n\t\treturn attrs;\n\t}\n\n\tfunction exportGroup(item, options) {\n\t\tvar attrs = getTransform(item._matrix),\n\t\t\tchildren = item._children;\n\t\tvar node = SvgElement.create('g', attrs, formatter);\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tvar child = children[i];\n\t\t\tvar childNode = exportSVG(child, options);\n\t\t\tif (childNode) {\n\t\t\t\tif (child.isClipMask()) {\n\t\t\t\t\tvar clip = SvgElement.create('clipPath');\n\t\t\t\t\tclip.appendChild(childNode);\n\t\t\t\t\tsetDefinition(child, clip, 'clip');\n\t\t\t\t\tSvgElement.set(node, {\n\t\t\t\t\t\t'clip-path': 'url(#' + clip.id + ')'\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tnode.appendChild(childNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn node;\n\t}\n\n\tfunction exportRaster(item, options) {\n\t\tvar attrs = getTransform(item._matrix, true),\n\t\t\tsize = item.getSize(),\n\t\t\timage = item.getImage();\n\t\tattrs.x -= size.width / 2;\n\t\tattrs.y -= size.height / 2;\n\t\tattrs.width = size.width;\n\t\tattrs.height = size.height;\n\t\tattrs.href = options.embedImages == false && image && image.src\n\t\t\t\t|| item.toDataURL();\n\t\treturn SvgElement.create('image', attrs, formatter);\n\t}\n\n\tfunction exportPath(item, options) {\n\t\tvar matchShapes = options.matchShapes;\n\t\tif (matchShapes) {\n\t\t\tvar shape = item.toShape(false);\n\t\t\tif (shape)\n\t\t\t\treturn exportShape(shape, options);\n\t\t}\n\t\tvar segments = item._segments,\n\t\t\tlength = segments.length,\n\t\t\ttype,\n\t\t\tattrs = getTransform(item._matrix);\n\t\tif (matchShapes && length >= 2 && !item.hasHandles()) {\n\t\t\tif (length > 2) {\n\t\t\t\ttype = item._closed ? 'polygon' : 'polyline';\n\t\t\t\tvar parts = [];\n\t\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\t\tparts.push(formatter.point(segments[i]._point));\n\t\t\t\t}\n\t\t\t\tattrs.points = parts.join(' ');\n\t\t\t} else {\n\t\t\t\ttype = 'line';\n\t\t\t\tvar start = segments[0]._point,\n\t\t\t\t\tend = segments[1]._point;\n\t\t\t\tattrs.set({\n\t\t\t\t\tx1: start.x,\n\t\t\t\t\ty1: start.y,\n\t\t\t\t\tx2: end.x,\n\t\t\t\t\ty2: end.y\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\ttype = 'path';\n\t\t\tattrs.d = item.getPathData(null, options.precision);\n\t\t}\n\t\treturn SvgElement.create(type, attrs, formatter);\n\t}\n\n\tfunction exportShape(item) {\n\t\tvar type = item._type,\n\t\t\tradius = item._radius,\n\t\t\tattrs = getTransform(item._matrix, true, type !== 'rectangle');\n\t\tif (type === 'rectangle') {\n\t\t\ttype = 'rect';\n\t\t\tvar size = item._size,\n\t\t\t\twidth = size.width,\n\t\t\t\theight = size.height;\n\t\t\tattrs.x -= width / 2;\n\t\t\tattrs.y -= height / 2;\n\t\t\tattrs.width = width;\n\t\t\tattrs.height = height;\n\t\t\tif (radius.isZero())\n\t\t\t\tradius = null;\n\t\t}\n\t\tif (radius) {\n\t\t\tif (type === 'circle') {\n\t\t\t\tattrs.r = radius;\n\t\t\t} else {\n\t\t\t\tattrs.rx = radius.width;\n\t\t\t\tattrs.ry = radius.height;\n\t\t\t}\n\t\t}\n\t\treturn SvgElement.create(type, attrs, formatter);\n\t}\n\n\tfunction exportCompoundPath(item, options) {\n\t\tvar attrs = getTransform(item._matrix);\n\t\tvar data = item.getPathData(null, options.precision);\n\t\tif (data)\n\t\t\tattrs.d = data;\n\t\treturn SvgElement.create('path', attrs, formatter);\n\t}\n\n\tfunction exportSymbolItem(item, options) {\n\t\tvar attrs = getTransform(item._matrix, true),\n\t\t\tdefinition = item._definition,\n\t\t\tnode = getDefinition(definition, 'symbol'),\n\t\t\tdefinitionItem = definition._item,\n\t\t\tbounds = definitionItem.getStrokeBounds();\n\t\tif (!node) {\n\t\t\tnode = SvgElement.create('symbol', {\n\t\t\t\tviewBox: formatter.rectangle(bounds)\n\t\t\t});\n\t\t\tnode.appendChild(exportSVG(definitionItem, options));\n\t\t\tsetDefinition(definition, node, 'symbol');\n\t\t}\n\t\tattrs.href = '#' + node.id;\n\t\tattrs.x += bounds.x;\n\t\tattrs.y += bounds.y;\n\t\tattrs.width = bounds.width;\n\t\tattrs.height = bounds.height;\n\t\tattrs.overflow = 'visible';\n\t\treturn SvgElement.create('use', attrs, formatter);\n\t}\n\n\tfunction exportGradient(color) {\n\t\tvar gradientNode = getDefinition(color, 'color');\n\t\tif (!gradientNode) {\n\t\t\tvar gradient = color.getGradient(),\n\t\t\t\tradial = gradient._radial,\n\t\t\t\torigin = color.getOrigin(),\n\t\t\t\tdestination = color.getDestination(),\n\t\t\t\tattrs;\n\t\t\tif (radial) {\n\t\t\t\tattrs = {\n\t\t\t\t\tcx: origin.x,\n\t\t\t\t\tcy: origin.y,\n\t\t\t\t\tr: origin.getDistance(destination)\n\t\t\t\t};\n\t\t\t\tvar highlight = color.getHighlight();\n\t\t\t\tif (highlight) {\n\t\t\t\t\tattrs.fx = highlight.x;\n\t\t\t\t\tattrs.fy = highlight.y;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tattrs = {\n\t\t\t\t\tx1: origin.x,\n\t\t\t\t\ty1: origin.y,\n\t\t\t\t\tx2: destination.x,\n\t\t\t\t\ty2: destination.y\n\t\t\t\t};\n\t\t\t}\n\t\t\tattrs.gradientUnits = 'userSpaceOnUse';\n\t\t\tgradientNode = SvgElement.create((radial ? 'radial' : 'linear')\n\t\t\t\t\t+ 'Gradient', attrs, formatter);\n\t\t\tvar stops = gradient._stops;\n\t\t\tfor (var i = 0, l = stops.length; i < l; i++) {\n\t\t\t\tvar stop = stops[i],\n\t\t\t\t\tstopColor = stop._color,\n\t\t\t\t\talpha = stopColor.getAlpha(),\n\t\t\t\t\toffset = stop._offset;\n\t\t\t\tattrs = {\n\t\t\t\t\toffset: offset == null ? i / (l - 1) : offset\n\t\t\t\t};\n\t\t\t\tif (stopColor)\n\t\t\t\t\tattrs['stop-color'] = stopColor.toCSS(true);\n\t\t\t\tif (alpha < 1)\n\t\t\t\t\tattrs['stop-opacity'] = alpha;\n\t\t\t\tgradientNode.appendChild(\n\t\t\t\t\t\tSvgElement.create('stop', attrs, formatter));\n\t\t\t}\n\t\t\tsetDefinition(color, gradientNode, 'color');\n\t\t}\n\t\treturn 'url(#' + gradientNode.id + ')';\n\t}\n\n\tfunction exportText(item) {\n\t\tvar node = SvgElement.create('text', getTransform(item._matrix, true),\n\t\t\t\tformatter);\n\t\tnode.textContent = item._content;\n\t\treturn node;\n\t}\n\n\tvar exporters = {\n\t\tGroup: exportGroup,\n\t\tLayer: exportGroup,\n\t\tRaster: exportRaster,\n\t\tPath: exportPath,\n\t\tShape: exportShape,\n\t\tCompoundPath: exportCompoundPath,\n\t\tSymbolItem: exportSymbolItem,\n\t\tPointText: exportText\n\t};\n\n\tfunction applyStyle(item, node, isRoot) {\n\t\tvar attrs = {},\n\t\t\tparent = !isRoot && item.getParent(),\n\t\t\tstyle = [];\n\n\t\tif (item._name != null)\n\t\t\tattrs.id = item._name;\n\n\t\tBase.each(SvgStyles, function(entry) {\n\t\t\tvar get = entry.get,\n\t\t\t\ttype = entry.type,\n\t\t\t\tvalue = item[get]();\n\t\t\tif (entry.exportFilter\n\t\t\t\t\t? entry.exportFilter(item, value)\n\t\t\t\t\t: !parent || !Base.equals(parent[get](), value)) {\n\t\t\t\tif (type === 'color' && value != null) {\n\t\t\t\t\tvar alpha = value.getAlpha();\n\t\t\t\t\tif (alpha < 1)\n\t\t\t\t\t\tattrs[entry.attribute + '-opacity'] = alpha;\n\t\t\t\t}\n\t\t\t\tif (type === 'style') {\n\t\t\t\t\tstyle.push(entry.attribute + ': ' + value);\n\t\t\t\t} else {\n\t\t\t\t\tattrs[entry.attribute] = value == null ? 'none'\n\t\t\t\t\t\t\t: type === 'color' ? value.gradient\n\t\t\t\t\t\t\t\t? exportGradient(value, item)\n\t\t\t\t\t\t\t\t: value.toCSS(true)\n\t\t\t\t\t\t\t: type === 'array' ? value.join(',')\n\t\t\t\t\t\t\t: type === 'lookup' ? entry.toSVG[value]\n\t\t\t\t\t\t\t: value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (style.length)\n\t\t\tattrs.style = style.join(';');\n\n\t\tif (attrs.opacity === 1)\n\t\t\tdelete attrs.opacity;\n\n\t\tif (!item._visible)\n\t\t\tattrs.visibility = 'hidden';\n\n\t\treturn SvgElement.set(node, attrs, formatter);\n\t}\n\n\tvar definitions;\n\tfunction getDefinition(item, type) {\n\t\tif (!definitions)\n\t\t\tdefinitions = { ids: {}, svgs: {} };\n\t\treturn item && definitions.svgs[type + '-'\n\t\t\t\t+ (item._id || item.__id || (item.__id = UID.get('svg')))];\n\t}\n\n\tfunction setDefinition(item, node, type) {\n\t\tif (!definitions)\n\t\t\tgetDefinition();\n\t\tvar typeId = definitions.ids[type] = (definitions.ids[type] || 0) + 1;\n\t\tnode.id = type + '-' + typeId;\n\t\tdefinitions.svgs[type + '-' + (item._id || item.__id)] = node;\n\t}\n\n\tfunction exportDefinitions(node, options) {\n\t\tvar svg = node,\n\t\t\tdefs = null;\n\t\tif (definitions) {\n\t\t\tsvg = node.nodeName.toLowerCase() === 'svg' && node;\n\t\t\tfor (var i in definitions.svgs) {\n\t\t\t\tif (!defs) {\n\t\t\t\t\tif (!svg) {\n\t\t\t\t\t\tsvg = SvgElement.create('svg');\n\t\t\t\t\t\tsvg.appendChild(node);\n\t\t\t\t\t}\n\t\t\t\t\tdefs = svg.insertBefore(SvgElement.create('defs'),\n\t\t\t\t\t\t\tsvg.firstChild);\n\t\t\t\t}\n\t\t\t\tdefs.appendChild(definitions.svgs[i]);\n\t\t\t}\n\t\t\tdefinitions = null;\n\t\t}\n\t\treturn options.asString\n\t\t\t\t? new self.XMLSerializer().serializeToString(svg)\n\t\t\t\t: svg;\n\t}\n\n\tfunction exportSVG(item, options, isRoot) {\n\t\tvar exporter = exporters[item._class],\n\t\t\tnode = exporter && exporter(item, options);\n\t\tif (node) {\n\t\t\tvar onExport = options.onExport;\n\t\t\tif (onExport)\n\t\t\t\tnode = onExport(item, node, options) || node;\n\t\t\tvar data = JSON.stringify(item._data);\n\t\t\tif (data && data !== '{}' && data !== 'null')\n\t\t\t\tnode.setAttribute('data-paper-data', data);\n\t\t}\n\t\treturn node && applyStyle(item, node, isRoot);\n\t}\n\n\tfunction setOptions(options) {\n\t\tif (!options)\n\t\t\toptions = {};\n\t\tformatter = new Formatter(options.precision);\n\t\treturn options;\n\t}\n\n\tItem.inject({\n\t\texportSVG: function(options) {\n\t\t\toptions = setOptions(options);\n\t\t\treturn exportDefinitions(exportSVG(this, options, true), options);\n\t\t}\n\t});\n\n\tProject.inject({\n\t\texportSVG: function(options) {\n\t\t\toptions = setOptions(options);\n\t\t\tvar children = this._children,\n\t\t\t\tview = this.getView(),\n\t\t\t\tbounds = Base.pick(options.bounds, 'view'),\n\t\t\t\tmx = options.matrix || bounds === 'view' && view._matrix,\n\t\t\t\tmatrix = mx && Matrix.read([mx]),\n\t\t\t\trect = bounds === 'view'\n\t\t\t\t\t? new Rectangle([0, 0], view.getViewSize())\n\t\t\t\t\t: bounds === 'content'\n\t\t\t\t\t\t? Item._getBounds(children, matrix, { stroke: true })\n\t\t\t\t\t\t\t.rect\n\t\t\t\t\t\t: Rectangle.read([bounds], 0, { readNull: true }),\n\t\t\t\tattrs = {\n\t\t\t\t\tversion: '1.1',\n\t\t\t\t\txmlns: SvgElement.svg,\n\t\t\t\t\t'xmlns:xlink': SvgElement.xlink,\n\t\t\t\t};\n\t\t\tif (rect) {\n\t\t\t\tattrs.width = rect.width;\n\t\t\t\tattrs.height = rect.height;\n\t\t\t\tif (rect.x || rect.x === 0 || rect.y || rect.y === 0)\n\t\t\t\t\tattrs.viewBox = formatter.rectangle(rect);\n\t\t\t}\n\t\t\tvar node = SvgElement.create('svg', attrs, formatter),\n\t\t\t\tparent = node;\n\t\t\tif (matrix && !matrix.isIdentity()) {\n\t\t\t\tparent = node.appendChild(SvgElement.create('g',\n\t\t\t\t\t\tgetTransform(matrix), formatter));\n\t\t\t}\n\t\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\t\tparent.appendChild(exportSVG(children[i], options, true));\n\t\t\t}\n\t\t\treturn exportDefinitions(node, options);\n\t\t}\n\t});\n};\n\nnew function() {\n\n\tvar definitions = {},\n\t\trootSize;\n\n\tfunction getValue(node, name, isString, allowNull, allowPercent,\n\t\t\tdefaultValue) {\n\t\tvar value = SvgElement.get(node, name) || defaultValue,\n\t\t\tres = value == null\n\t\t\t\t? allowNull\n\t\t\t\t\t? null\n\t\t\t\t\t: isString ? '' : 0\n\t\t\t\t: isString\n\t\t\t\t\t? value\n\t\t\t\t\t: parseFloat(value);\n\t\treturn /%\\s*$/.test(value)\n\t\t\t? (res / 100) * (allowPercent ? 1\n\t\t\t\t: rootSize[/x|^width/.test(name) ? 'width' : 'height'])\n\t\t\t: res;\n\t}\n\n\tfunction getPoint(node, x, y, allowNull, allowPercent, defaultX, defaultY) {\n\t\tx = getValue(node, x || 'x', false, allowNull, allowPercent, defaultX);\n\t\ty = getValue(node, y || 'y', false, allowNull, allowPercent, defaultY);\n\t\treturn allowNull && (x == null || y == null) ? null\n\t\t\t\t: new Point(x, y);\n\t}\n\n\tfunction getSize(node, w, h, allowNull, allowPercent) {\n\t\tw = getValue(node, w || 'width', false, allowNull, allowPercent);\n\t\th = getValue(node, h || 'height', false, allowNull, allowPercent);\n\t\treturn allowNull && (w == null || h == null) ? null\n\t\t\t\t: new Size(w, h);\n\t}\n\n\tfunction convertValue(value, type, lookup) {\n\t\treturn value === 'none' ? null\n\t\t\t\t: type === 'number' ? parseFloat(value)\n\t\t\t\t: type === 'array' ?\n\t\t\t\t\tvalue ? value.split(/[\\s,]+/g).map(parseFloat) : []\n\t\t\t\t: type === 'color' ? getDefinition(value) || value\n\t\t\t\t: type === 'lookup' ? lookup[value]\n\t\t\t\t: value;\n\t}\n\n\tfunction importGroup(node, type, options, isRoot) {\n\t\tvar nodes = node.childNodes,\n\t\t\tisClip = type === 'clippath',\n\t\t\tisDefs = type === 'defs',\n\t\t\titem = new Group(),\n\t\t\tproject = item._project,\n\t\t\tcurrentStyle = project._currentStyle,\n\t\t\tchildren = [];\n\t\tif (!isClip && !isDefs) {\n\t\t\titem = applyAttributes(item, node, isRoot);\n\t\t\tproject._currentStyle = item._style.clone();\n\t\t}\n\t\tif (isRoot) {\n\t\t\tvar defs = node.querySelectorAll('defs');\n\t\t\tfor (var i = 0, l = defs.length; i < l; i++) {\n\t\t\t\timportNode(defs[i], options, false);\n\t\t\t}\n\t\t}\n\t\tfor (var i = 0, l = nodes.length; i < l; i++) {\n\t\t\tvar childNode = nodes[i],\n\t\t\t\tchild;\n\t\t\tif (childNode.nodeType === 1\n\t\t\t\t\t&& !/^defs$/i.test(childNode.nodeName)\n\t\t\t\t\t&& (child = importNode(childNode, options, false))\n\t\t\t\t\t&& !(child instanceof SymbolDefinition))\n\t\t\t\tchildren.push(child);\n\t\t}\n\t\titem.addChildren(children);\n\t\tif (isClip)\n\t\t\titem = applyAttributes(item.reduce(), node, isRoot);\n\t\tproject._currentStyle = currentStyle;\n\t\tif (isClip || isDefs) {\n\t\t\titem.remove();\n\t\t\titem = null;\n\t\t}\n\t\treturn item;\n\t}\n\n\tfunction importPoly(node, type) {\n\t\tvar coords = node.getAttribute('points').match(\n\t\t\t\t\t/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g),\n\t\t\tpoints = [];\n\t\tfor (var i = 0, l = coords.length; i < l; i += 2)\n\t\t\tpoints.push(new Point(\n\t\t\t\t\tparseFloat(coords[i]),\n\t\t\t\t\tparseFloat(coords[i + 1])));\n\t\tvar path = new Path(points);\n\t\tif (type === 'polygon')\n\t\t\tpath.closePath();\n\t\treturn path;\n\t}\n\n\tfunction importPath(node) {\n\t\treturn PathItem.create(node.getAttribute('d'));\n\t}\n\n\tfunction importGradient(node, type) {\n\t\tvar id = (getValue(node, 'href', true) || '').substring(1),\n\t\t\tradial = type === 'radialgradient',\n\t\t\tgradient;\n\t\tif (id) {\n\t\t\tgradient = definitions[id].getGradient();\n\t\t\tif (gradient._radial ^ radial) {\n\t\t\t\tgradient = gradient.clone();\n\t\t\t\tgradient._radial = radial;\n\t\t\t}\n\t\t} else {\n\t\t\tvar nodes = node.childNodes,\n\t\t\t\tstops = [];\n\t\t\tfor (var i = 0, l = nodes.length; i < l; i++) {\n\t\t\t\tvar child = nodes[i];\n\t\t\t\tif (child.nodeType === 1)\n\t\t\t\t\tstops.push(applyAttributes(new GradientStop(), child));\n\t\t\t}\n\t\t\tgradient = new Gradient(stops, radial);\n\t\t}\n\t\tvar origin, destination, highlight,\n\t\t\tscaleToBounds = getValue(node, 'gradientUnits', true) !==\n\t\t\t\t'userSpaceOnUse';\n\t\tif (radial) {\n\t\t\torigin = getPoint(node, 'cx', 'cy', false, scaleToBounds,\n\t\t\t\t'50%', '50%');\n\t\t\tdestination = origin.add(\n\t\t\t\tgetValue(node, 'r', false, false, scaleToBounds, '50%'), 0);\n\t\t\thighlight = getPoint(node, 'fx', 'fy', true, scaleToBounds);\n\t\t} else {\n\t\t\torigin = getPoint(node, 'x1', 'y1', false, scaleToBounds,\n\t\t\t\t'0%', '0%');\n\t\t\tdestination = getPoint(node, 'x2', 'y2', false, scaleToBounds,\n\t\t\t\t'100%', '0%');\n\t\t}\n\t\tvar color = applyAttributes(\n\t\t\t\tnew Color(gradient, origin, destination, highlight), node);\n\t\tcolor._scaleToBounds = scaleToBounds;\n\t\treturn null;\n\t}\n\n\tvar importers = {\n\t\t'#document': function (node, type, options, isRoot) {\n\t\t\tvar nodes = node.childNodes;\n\t\t\tfor (var i = 0, l = nodes.length; i < l; i++) {\n\t\t\t\tvar child = nodes[i];\n\t\t\t\tif (child.nodeType === 1)\n\t\t\t\t\treturn importNode(child, options, isRoot);\n\t\t\t}\n\t\t},\n\t\tg: importGroup,\n\t\tsvg: importGroup,\n\t\tclippath: importGroup,\n\t\tpolygon: importPoly,\n\t\tpolyline: importPoly,\n\t\tpath: importPath,\n\t\tlineargradient: importGradient,\n\t\tradialgradient: importGradient,\n\n\t\timage: function (node) {\n\t\t\tvar raster = new Raster(getValue(node, 'href', true));\n\t\t\traster.on('load', function() {\n\t\t\t\tvar size = getSize(node);\n\t\t\t\tthis.setSize(size);\n\t\t\t\tvar center = getPoint(node).add(size.divide(2));\n\t\t\t\tthis._matrix.append(new Matrix().translate(center));\n\t\t\t});\n\t\t\treturn raster;\n\t\t},\n\n\t\tsymbol: function(node, type, options, isRoot) {\n\t\t\treturn new SymbolDefinition(\n\t\t\t\t\timportGroup(node, type, options, isRoot), true);\n\t\t},\n\n\t\tdefs: importGroup,\n\n\t\tuse: function(node) {\n\t\t\tvar id = (getValue(node, 'href', true) || '').substring(1),\n\t\t\t\tdefinition = definitions[id],\n\t\t\t\tpoint = getPoint(node);\n\t\t\treturn definition\n\t\t\t\t\t? definition instanceof SymbolDefinition\n\t\t\t\t\t\t? definition.place(point)\n\t\t\t\t\t\t: definition.clone().translate(point)\n\t\t\t\t\t: null;\n\t\t},\n\n\t\tcircle: function(node) {\n\t\t\treturn new Shape.Circle(\n\t\t\t\t\tgetPoint(node, 'cx', 'cy'),\n\t\t\t\t\tgetValue(node, 'r'));\n\t\t},\n\n\t\tellipse: function(node) {\n\t\t\treturn new Shape.Ellipse({\n\t\t\t\tcenter: getPoint(node, 'cx', 'cy'),\n\t\t\t\tradius: getSize(node, 'rx', 'ry')\n\t\t\t});\n\t\t},\n\n\t\trect: function(node) {\n\t\t\treturn new Shape.Rectangle(new Rectangle(\n\t\t\t\t\t\tgetPoint(node),\n\t\t\t\t\t\tgetSize(node)\n\t\t\t\t\t), getSize(node, 'rx', 'ry'));\n\t\t\t},\n\n\t\tline: function(node) {\n\t\t\treturn new Path.Line(\n\t\t\t\t\tgetPoint(node, 'x1', 'y1'),\n\t\t\t\t\tgetPoint(node, 'x2', 'y2'));\n\t\t},\n\n\t\ttext: function(node) {\n\t\t\tvar text = new PointText(getPoint(node).add(\n\t\t\t\t\tgetPoint(node, 'dx', 'dy')));\n\t\t\ttext.setContent(node.textContent.trim() || '');\n\t\t\treturn text;\n\t\t},\n\n\t\tswitch: importGroup\n\t};\n\n\tfunction applyTransform(item, value, name, node) {\n\t\tif (item.transform) {\n\t\t\tvar transforms = (node.getAttribute(name) || '').split(/\\)\\s*/g),\n\t\t\t\tmatrix = new Matrix();\n\t\t\tfor (var i = 0, l = transforms.length; i < l; i++) {\n\t\t\t\tvar transform = transforms[i];\n\t\t\t\tif (!transform)\n\t\t\t\t\tbreak;\n\t\t\t\tvar parts = transform.split(/\\(\\s*/),\n\t\t\t\t\tcommand = parts[0],\n\t\t\t\t\tv = parts[1].split(/[\\s,]+/g);\n\t\t\t\tfor (var j = 0, m = v.length; j < m; j++)\n\t\t\t\t\tv[j] = parseFloat(v[j]);\n\t\t\t\tswitch (command) {\n\t\t\t\tcase 'matrix':\n\t\t\t\t\tmatrix.append(\n\t\t\t\t\t\t\tnew Matrix(v[0], v[1], v[2], v[3], v[4], v[5]));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'rotate':\n\t\t\t\t\tmatrix.rotate(v[0], v[1] || 0, v[2] || 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'translate':\n\t\t\t\t\tmatrix.translate(v[0], v[1] || 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'scale':\n\t\t\t\t\tmatrix.scale(v);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'skewX':\n\t\t\t\t\tmatrix.skew(v[0], 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'skewY':\n\t\t\t\t\tmatrix.skew(0, v[0]);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\titem.transform(matrix);\n\t\t}\n\t}\n\n\tfunction applyOpacity(item, value, name) {\n\t\tvar key = name === 'fill-opacity' ? 'getFillColor' : 'getStrokeColor',\n\t\t\tcolor = item[key] && item[key]();\n\t\tif (color)\n\t\t\tcolor.setAlpha(parseFloat(value));\n\t}\n\n\tvar attributes = Base.set(Base.each(SvgStyles, function(entry) {\n\t\tthis[entry.attribute] = function(item, value) {\n\t\t\tif (item[entry.set]) {\n\t\t\t\titem[entry.set](convertValue(value, entry.type, entry.fromSVG));\n\t\t\t\tif (entry.type === 'color') {\n\t\t\t\t\tvar color = item[entry.get]();\n\t\t\t\t\tif (color) {\n\t\t\t\t\t\tif (color._scaleToBounds) {\n\t\t\t\t\t\t\tvar bounds = item.getBounds();\n\t\t\t\t\t\t\tcolor.transform(new Matrix()\n\t\t\t\t\t\t\t\t.translate(bounds.getPoint())\n\t\t\t\t\t\t\t\t.scale(bounds.getSize()));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}, {}), {\n\t\tid: function(item, value) {\n\t\t\tdefinitions[value] = item;\n\t\t\tif (item.setName)\n\t\t\t\titem.setName(value);\n\t\t},\n\n\t\t'clip-path': function(item, value) {\n\t\t\tvar clip = getDefinition(value);\n\t\t\tif (clip) {\n\t\t\t\tclip = clip.clone();\n\t\t\t\tclip.setClipMask(true);\n\t\t\t\tif (item instanceof Group) {\n\t\t\t\t\titem.insertChild(0, clip);\n\t\t\t\t} else {\n\t\t\t\t\treturn new Group(clip, item);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgradientTransform: applyTransform,\n\t\ttransform: applyTransform,\n\n\t\t'fill-opacity': applyOpacity,\n\t\t'stroke-opacity': applyOpacity,\n\n\t\tvisibility: function(item, value) {\n\t\t\tif (item.setVisible)\n\t\t\t\titem.setVisible(value === 'visible');\n\t\t},\n\n\t\tdisplay: function(item, value) {\n\t\t\tif (item.setVisible)\n\t\t\t\titem.setVisible(value !== null);\n\t\t},\n\n\t\t'stop-color': function(item, value) {\n\t\t\tif (item.setColor)\n\t\t\t\titem.setColor(value);\n\t\t},\n\n\t\t'stop-opacity': function(item, value) {\n\t\t\tif (item._color)\n\t\t\t\titem._color.setAlpha(parseFloat(value));\n\t\t},\n\n\t\toffset: function(item, value) {\n\t\t\tif (item.setOffset) {\n\t\t\t\tvar percent = value.match(/(.*)%$/);\n\t\t\t\titem.setOffset(percent ? percent[1] / 100 : parseFloat(value));\n\t\t\t}\n\t\t},\n\n\t\tviewBox: function(item, value, name, node, styles) {\n\t\t\tvar rect = new Rectangle(convertValue(value, 'array')),\n\t\t\t\tsize = getSize(node, null, null, true),\n\t\t\t\tgroup,\n\t\t\t\tmatrix;\n\t\t\tif (item instanceof Group) {\n\t\t\t\tvar scale = size ? size.divide(rect.getSize()) : 1,\n\t\t\t\tmatrix = new Matrix().scale(scale)\n\t\t\t\t\t\t.translate(rect.getPoint().negate());\n\t\t\t\tgroup = item;\n\t\t\t} else if (item instanceof SymbolDefinition) {\n\t\t\t\tif (size)\n\t\t\t\t\trect.setSize(size);\n\t\t\t\tgroup = item._item;\n\t\t\t}\n\t\t\tif (group)  {\n\t\t\t\tif (getAttribute(node, 'overflow', styles) !== 'visible') {\n\t\t\t\t\tvar clip = new Shape.Rectangle(rect);\n\t\t\t\t\tclip.setClipMask(true);\n\t\t\t\t\tgroup.addChild(clip);\n\t\t\t\t}\n\t\t\t\tif (matrix)\n\t\t\t\t\tgroup.transform(matrix);\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction getAttribute(node, name, styles) {\n\t\tvar attr = node.attributes[name],\n\t\t\tvalue = attr && attr.value;\n\t\tif (!value && node.style) {\n\t\t\tvar style = Base.camelize(name);\n\t\t\tvalue = node.style[style];\n\t\t\tif (!value && styles.node[style] !== styles.parent[style])\n\t\t\t\tvalue = styles.node[style];\n\t\t}\n\t\treturn !value ? undefined\n\t\t\t\t: value === 'none' ? null\n\t\t\t\t: value;\n\t}\n\n\tfunction applyAttributes(item, node, isRoot) {\n\t\tvar parent = node.parentNode,\n\t\t\tstyles = {\n\t\t\t\tnode: DomElement.getStyles(node) || {},\n\t\t\t\tparent: !isRoot && !/^defs$/i.test(parent.tagName)\n\t\t\t\t\t\t&& DomElement.getStyles(parent) || {}\n\t\t\t};\n\t\tBase.each(attributes, function(apply, name) {\n\t\t\tvar value = getAttribute(node, name, styles);\n\t\t\titem = value !== undefined\n\t\t\t\t\t&& apply(item, value, name, node, styles) || item;\n\t\t});\n\t\treturn item;\n\t}\n\n\tfunction getDefinition(value) {\n\t\tvar match = value && value.match(/\\((?:[\"'#]*)([^\"')]+)/),\n\t\t\tname = match && match[1],\n\t\t\tres = name && definitions[window\n\t\t\t\t\t? name.replace(window.location.href.split('#')[0] + '#', '')\n\t\t\t\t\t: name];\n\t\tif (res && res._scaleToBounds) {\n\t\t\tres = res.clone();\n\t\t\tres._scaleToBounds = true;\n\t\t}\n\t\treturn res;\n\t}\n\n\tfunction importNode(node, options, isRoot) {\n\t\tvar type = node.nodeName.toLowerCase(),\n\t\t\tisElement = type !== '#document',\n\t\t\tbody = document.body,\n\t\t\tcontainer,\n\t\t\tparent,\n\t\t\tnext;\n\t\tif (isRoot && isElement) {\n\t\t\trootSize = paper.getView().getSize();\n\t\t\trootSize = getSize(node, null, null, true) || rootSize;\n\t\t\tcontainer = SvgElement.create('svg', {\n\t\t\t\tstyle: 'stroke-width: 1px; stroke-miterlimit: 10'\n\t\t\t});\n\t\t\tparent = node.parentNode;\n\t\t\tnext = node.nextSibling;\n\t\t\tcontainer.appendChild(node);\n\t\t\tbody.appendChild(container);\n\t\t}\n\t\tvar settings = paper.settings,\n\t\t\tapplyMatrix = settings.applyMatrix,\n\t\t\tinsertItems = settings.insertItems;\n\t\tsettings.applyMatrix = false;\n\t\tsettings.insertItems = false;\n\t\tvar importer = importers[type],\n\t\t\titem = importer && importer(node, type, options, isRoot) || null;\n\t\tsettings.insertItems = insertItems;\n\t\tsettings.applyMatrix = applyMatrix;\n\t\tif (item) {\n\t\t\tif (isElement && !(item instanceof Group))\n\t\t\t\titem = applyAttributes(item, node, isRoot);\n\t\t\tvar onImport = options.onImport,\n\t\t\t\tdata = isElement && node.getAttribute('data-paper-data');\n\t\t\tif (onImport)\n\t\t\t\titem = onImport(node, item, options) || item;\n\t\t\tif (options.expandShapes && item instanceof Shape) {\n\t\t\t\titem.remove();\n\t\t\t\titem = item.toPath();\n\t\t\t}\n\t\t\tif (data)\n\t\t\t\titem._data = JSON.parse(data);\n\t\t}\n\t\tif (container) {\n\t\t\tbody.removeChild(container);\n\t\t\tif (parent) {\n\t\t\t\tif (next) {\n\t\t\t\t\tparent.insertBefore(node, next);\n\t\t\t\t} else {\n\t\t\t\t\tparent.appendChild(node);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (isRoot) {\n\t\t\tdefinitions = {};\n\t\t\tif (item && Base.pick(options.applyMatrix, applyMatrix))\n\t\t\t\titem.matrix.apply(true, true);\n\t\t}\n\t\treturn item;\n\t}\n\n\tfunction importSVG(source, options, owner) {\n\t\tif (!source)\n\t\t\treturn null;\n\t\toptions = typeof options === 'function' ? { onLoad: options }\n\t\t\t\t: options || {};\n\t\tvar scope = paper,\n\t\t\titem = null;\n\n\t\tfunction onLoad(svg) {\n\t\t\ttry {\n\t\t\t\tvar node = typeof svg === 'object'\n\t\t\t\t\t? svg\n\t\t\t\t\t: new self.DOMParser().parseFromString(\n\t\t\t\t\t\tsvg.trim(),\n\t\t\t\t\t\t'image/svg+xml'\n\t\t\t\t\t);\n\t\t\t\tif (!node.nodeName) {\n\t\t\t\t\tnode = null;\n\t\t\t\t\tthrow new Error('Unsupported SVG source: ' + source);\n\t\t\t\t}\n\t\t\t\tpaper = scope;\n\t\t\t\titem = importNode(node, options, true);\n\t\t\t\tif (!options || options.insert !== false) {\n\t\t\t\t\towner._insertItem(undefined, item);\n\t\t\t\t}\n\t\t\t\tvar onLoad = options.onLoad;\n\t\t\t\tif (onLoad)\n\t\t\t\t\tonLoad(item, svg);\n\t\t\t} catch (e) {\n\t\t\t\tonError(e);\n\t\t\t}\n\t\t}\n\n\t\tfunction onError(message, status) {\n\t\t\tvar onError = options.onError;\n\t\t\tif (onError) {\n\t\t\t\tonError(message, status);\n\t\t\t} else {\n\t\t\t\tthrow new Error(message);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof source === 'string' && !/^[\\s\\S]*</.test(source)) {\n\t\t\tvar node = document.getElementById(source);\n\t\t\tif (node) {\n\t\t\t\tonLoad(node);\n\t\t\t} else {\n\t\t\t\tHttp.request({\n\t\t\t\t\turl: source,\n\t\t\t\t\tasync: true,\n\t\t\t\t\tonLoad: onLoad,\n\t\t\t\t\tonError: onError\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (typeof File !== 'undefined' && source instanceof File) {\n\t\t\tvar reader = new FileReader();\n\t\t\treader.onload = function() {\n\t\t\t\tonLoad(reader.result);\n\t\t\t};\n\t\t\treader.onerror = function() {\n\t\t\t\tonError(reader.error);\n\t\t\t};\n\t\t\treturn reader.readAsText(source);\n\t\t} else {\n\t\t\tonLoad(source);\n\t\t}\n\n\t\treturn item;\n\t}\n\n\tItem.inject({\n\t\timportSVG: function(node, options) {\n\t\t\treturn importSVG(node, options, this);\n\t\t}\n\t});\n\n\tProject.inject({\n\t\timportSVG: function(node, options) {\n\t\t\tthis.activate();\n\t\t\treturn importSVG(node, options, this);\n\t\t}\n\t});\n};\n\nBase.exports.PaperScript = function() {\n\tvar global = this,\n\t\tacorn = global.acorn;\n\tif (!acorn && typeof require !== 'undefined') {\n\t\ttry { acorn = require('acorn'); } catch(e) {}\n\t}\n\tif (!acorn) {\n\t\tvar exports, module;\n\t\tacorn = exports = module = {};\n\n(function(root, mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") return mod(exports);\n  if (typeof define == \"function\" && define.amd) return define([\"exports\"], mod);\n  mod(root.acorn || (root.acorn = {}));\n})(this, function(exports) {\n  \"use strict\";\n\n  exports.version = \"0.5.0\";\n\n  var options, input, inputLen, sourceFile;\n\n  exports.parse = function(inpt, opts) {\n\tinput = String(inpt); inputLen = input.length;\n\tsetOptions(opts);\n\tinitTokenState();\n\treturn parseTopLevel(options.program);\n  };\n\n  var defaultOptions = exports.defaultOptions = {\n\tecmaVersion: 5,\n\tstrictSemicolons: false,\n\tallowTrailingCommas: true,\n\tforbidReserved: false,\n\tallowReturnOutsideFunction: false,\n\tlocations: false,\n\tonComment: null,\n\tranges: false,\n\tprogram: null,\n\tsourceFile: null,\n\tdirectSourceFile: null\n  };\n\n  function setOptions(opts) {\n\toptions = opts || {};\n\tfor (var opt in defaultOptions) if (!Object.prototype.hasOwnProperty.call(options, opt))\n\t  options[opt] = defaultOptions[opt];\n\tsourceFile = options.sourceFile || null;\n  }\n\n  var getLineInfo = exports.getLineInfo = function(input, offset) {\n\tfor (var line = 1, cur = 0;;) {\n\t  lineBreak.lastIndex = cur;\n\t  var match = lineBreak.exec(input);\n\t  if (match && match.index < offset) {\n\t\t++line;\n\t\tcur = match.index + match[0].length;\n\t  } else break;\n\t}\n\treturn {line: line, column: offset - cur};\n  };\n\n  exports.tokenize = function(inpt, opts) {\n\tinput = String(inpt); inputLen = input.length;\n\tsetOptions(opts);\n\tinitTokenState();\n\n\tvar t = {};\n\tfunction getToken(forceRegexp) {\n\t  lastEnd = tokEnd;\n\t  readToken(forceRegexp);\n\t  t.start = tokStart; t.end = tokEnd;\n\t  t.startLoc = tokStartLoc; t.endLoc = tokEndLoc;\n\t  t.type = tokType; t.value = tokVal;\n\t  return t;\n\t}\n\tgetToken.jumpTo = function(pos, reAllowed) {\n\t  tokPos = pos;\n\t  if (options.locations) {\n\t\ttokCurLine = 1;\n\t\ttokLineStart = lineBreak.lastIndex = 0;\n\t\tvar match;\n\t\twhile ((match = lineBreak.exec(input)) && match.index < pos) {\n\t\t  ++tokCurLine;\n\t\t  tokLineStart = match.index + match[0].length;\n\t\t}\n\t  }\n\t  tokRegexpAllowed = reAllowed;\n\t  skipSpace();\n\t};\n\treturn getToken;\n  };\n\n  var tokPos;\n\n  var tokStart, tokEnd;\n\n  var tokStartLoc, tokEndLoc;\n\n  var tokType, tokVal;\n\n  var tokRegexpAllowed;\n\n  var tokCurLine, tokLineStart;\n\n  var lastStart, lastEnd, lastEndLoc;\n\n  var inFunction, labels, strict;\n\n  function raise(pos, message) {\n\tvar loc = getLineInfo(input, pos);\n\tmessage += \" (\" + loc.line + \":\" + loc.column + \")\";\n\tvar err = new SyntaxError(message);\n\terr.pos = pos; err.loc = loc; err.raisedAt = tokPos;\n\tthrow err;\n  }\n\n  var empty = [];\n\n  var _num = {type: \"num\"}, _regexp = {type: \"regexp\"}, _string = {type: \"string\"};\n  var _name = {type: \"name\"}, _eof = {type: \"eof\"};\n\n  var _break = {keyword: \"break\"}, _case = {keyword: \"case\", beforeExpr: true}, _catch = {keyword: \"catch\"};\n  var _continue = {keyword: \"continue\"}, _debugger = {keyword: \"debugger\"}, _default = {keyword: \"default\"};\n  var _do = {keyword: \"do\", isLoop: true}, _else = {keyword: \"else\", beforeExpr: true};\n  var _finally = {keyword: \"finally\"}, _for = {keyword: \"for\", isLoop: true}, _function = {keyword: \"function\"};\n  var _if = {keyword: \"if\"}, _return = {keyword: \"return\", beforeExpr: true}, _switch = {keyword: \"switch\"};\n  var _throw = {keyword: \"throw\", beforeExpr: true}, _try = {keyword: \"try\"}, _var = {keyword: \"var\"};\n  var _while = {keyword: \"while\", isLoop: true}, _with = {keyword: \"with\"}, _new = {keyword: \"new\", beforeExpr: true};\n  var _this = {keyword: \"this\"};\n\n  var _null = {keyword: \"null\", atomValue: null}, _true = {keyword: \"true\", atomValue: true};\n  var _false = {keyword: \"false\", atomValue: false};\n\n  var _in = {keyword: \"in\", binop: 7, beforeExpr: true};\n\n  var keywordTypes = {\"break\": _break, \"case\": _case, \"catch\": _catch,\n\t\t\t\t\t  \"continue\": _continue, \"debugger\": _debugger, \"default\": _default,\n\t\t\t\t\t  \"do\": _do, \"else\": _else, \"finally\": _finally, \"for\": _for,\n\t\t\t\t\t  \"function\": _function, \"if\": _if, \"return\": _return, \"switch\": _switch,\n\t\t\t\t\t  \"throw\": _throw, \"try\": _try, \"var\": _var, \"while\": _while, \"with\": _with,\n\t\t\t\t\t  \"null\": _null, \"true\": _true, \"false\": _false, \"new\": _new, \"in\": _in,\n\t\t\t\t\t  \"instanceof\": {keyword: \"instanceof\", binop: 7, beforeExpr: true}, \"this\": _this,\n\t\t\t\t\t  \"typeof\": {keyword: \"typeof\", prefix: true, beforeExpr: true},\n\t\t\t\t\t  \"void\": {keyword: \"void\", prefix: true, beforeExpr: true},\n\t\t\t\t\t  \"delete\": {keyword: \"delete\", prefix: true, beforeExpr: true}};\n\n  var _bracketL = {type: \"[\", beforeExpr: true}, _bracketR = {type: \"]\"}, _braceL = {type: \"{\", beforeExpr: true};\n  var _braceR = {type: \"}\"}, _parenL = {type: \"(\", beforeExpr: true}, _parenR = {type: \")\"};\n  var _comma = {type: \",\", beforeExpr: true}, _semi = {type: \";\", beforeExpr: true};\n  var _colon = {type: \":\", beforeExpr: true}, _dot = {type: \".\"}, _question = {type: \"?\", beforeExpr: true};\n\n  var _slash = {binop: 10, beforeExpr: true}, _eq = {isAssign: true, beforeExpr: true};\n  var _assign = {isAssign: true, beforeExpr: true};\n  var _incDec = {postfix: true, prefix: true, isUpdate: true}, _prefix = {prefix: true, beforeExpr: true};\n  var _logicalOR = {binop: 1, beforeExpr: true};\n  var _logicalAND = {binop: 2, beforeExpr: true};\n  var _bitwiseOR = {binop: 3, beforeExpr: true};\n  var _bitwiseXOR = {binop: 4, beforeExpr: true};\n  var _bitwiseAND = {binop: 5, beforeExpr: true};\n  var _equality = {binop: 6, beforeExpr: true};\n  var _relational = {binop: 7, beforeExpr: true};\n  var _bitShift = {binop: 8, beforeExpr: true};\n  var _plusMin = {binop: 9, prefix: true, beforeExpr: true};\n  var _multiplyModulo = {binop: 10, beforeExpr: true};\n\n  exports.tokTypes = {bracketL: _bracketL, bracketR: _bracketR, braceL: _braceL, braceR: _braceR,\n\t\t\t\t\t  parenL: _parenL, parenR: _parenR, comma: _comma, semi: _semi, colon: _colon,\n\t\t\t\t\t  dot: _dot, question: _question, slash: _slash, eq: _eq, name: _name, eof: _eof,\n\t\t\t\t\t  num: _num, regexp: _regexp, string: _string};\n  for (var kw in keywordTypes) exports.tokTypes[\"_\" + kw] = keywordTypes[kw];\n\n  function makePredicate(words) {\n\twords = words.split(\" \");\n\tvar f = \"\", cats = [];\n\tout: for (var i = 0; i < words.length; ++i) {\n\t  for (var j = 0; j < cats.length; ++j)\n\t\tif (cats[j][0].length == words[i].length) {\n\t\t  cats[j].push(words[i]);\n\t\t  continue out;\n\t\t}\n\t  cats.push([words[i]]);\n\t}\n\tfunction compareTo(arr) {\n\t  if (arr.length == 1) return f += \"return str === \" + JSON.stringify(arr[0]) + \";\";\n\t  f += \"switch(str){\";\n\t  for (var i = 0; i < arr.length; ++i) f += \"case \" + JSON.stringify(arr[i]) + \":\";\n\t  f += \"return true}return false;\";\n\t}\n\n\tif (cats.length > 3) {\n\t  cats.sort(function(a, b) {return b.length - a.length;});\n\t  f += \"switch(str.length){\";\n\t  for (var i = 0; i < cats.length; ++i) {\n\t\tvar cat = cats[i];\n\t\tf += \"case \" + cat[0].length + \":\";\n\t\tcompareTo(cat);\n\t  }\n\t  f += \"}\";\n\n\t} else {\n\t  compareTo(words);\n\t}\n\treturn new Function(\"str\", f);\n  }\n\n  var isReservedWord3 = makePredicate(\"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile\");\n\n  var isReservedWord5 = makePredicate(\"class enum extends super const export import\");\n\n  var isStrictReservedWord = makePredicate(\"implements interface let package private protected public static yield\");\n\n  var isStrictBadIdWord = makePredicate(\"eval arguments\");\n\n  var isKeyword = makePredicate(\"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this\");\n\n  var nonASCIIwhitespace = /[\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/;\n  var nonASCIIidentifierStartChars = \"\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\";\n  var nonASCIIidentifierChars = \"\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f\";\n  var nonASCIIidentifierStart = new RegExp(\"[\" + nonASCIIidentifierStartChars + \"]\");\n  var nonASCIIidentifier = new RegExp(\"[\" + nonASCIIidentifierStartChars + nonASCIIidentifierChars + \"]\");\n\n  var newline = /[\\n\\r\\u2028\\u2029]/;\n\n  var lineBreak = /\\r\\n|[\\n\\r\\u2028\\u2029]/g;\n\n  var isIdentifierStart = exports.isIdentifierStart = function(code) {\n\tif (code < 65) return code === 36;\n\tif (code < 91) return true;\n\tif (code < 97) return code === 95;\n\tif (code < 123)return true;\n\treturn code >= 0xaa && nonASCIIidentifierStart.test(String.fromCharCode(code));\n  };\n\n  var isIdentifierChar = exports.isIdentifierChar = function(code) {\n\tif (code < 48) return code === 36;\n\tif (code < 58) return true;\n\tif (code < 65) return false;\n\tif (code < 91) return true;\n\tif (code < 97) return code === 95;\n\tif (code < 123)return true;\n\treturn code >= 0xaa && nonASCIIidentifier.test(String.fromCharCode(code));\n  };\n\n  function line_loc_t() {\n\tthis.line = tokCurLine;\n\tthis.column = tokPos - tokLineStart;\n  }\n\n  function initTokenState() {\n\ttokCurLine = 1;\n\ttokPos = tokLineStart = 0;\n\ttokRegexpAllowed = true;\n\tskipSpace();\n  }\n\n  function finishToken(type, val) {\n\ttokEnd = tokPos;\n\tif (options.locations) tokEndLoc = new line_loc_t;\n\ttokType = type;\n\tskipSpace();\n\ttokVal = val;\n\ttokRegexpAllowed = type.beforeExpr;\n  }\n\n  function skipBlockComment() {\n\tvar startLoc = options.onComment && options.locations && new line_loc_t;\n\tvar start = tokPos, end = input.indexOf(\"*/\", tokPos += 2);\n\tif (end === -1) raise(tokPos - 2, \"Unterminated comment\");\n\ttokPos = end + 2;\n\tif (options.locations) {\n\t  lineBreak.lastIndex = start;\n\t  var match;\n\t  while ((match = lineBreak.exec(input)) && match.index < tokPos) {\n\t\t++tokCurLine;\n\t\ttokLineStart = match.index + match[0].length;\n\t  }\n\t}\n\tif (options.onComment)\n\t  options.onComment(true, input.slice(start + 2, end), start, tokPos,\n\t\t\t\t\t\tstartLoc, options.locations && new line_loc_t);\n  }\n\n  function skipLineComment() {\n\tvar start = tokPos;\n\tvar startLoc = options.onComment && options.locations && new line_loc_t;\n\tvar ch = input.charCodeAt(tokPos+=2);\n\twhile (tokPos < inputLen && ch !== 10 && ch !== 13 && ch !== 8232 && ch !== 8233) {\n\t  ++tokPos;\n\t  ch = input.charCodeAt(tokPos);\n\t}\n\tif (options.onComment)\n\t  options.onComment(false, input.slice(start + 2, tokPos), start, tokPos,\n\t\t\t\t\t\tstartLoc, options.locations && new line_loc_t);\n  }\n\n  function skipSpace() {\n\twhile (tokPos < inputLen) {\n\t  var ch = input.charCodeAt(tokPos);\n\t  if (ch === 32) {\n\t\t++tokPos;\n\t  } else if (ch === 13) {\n\t\t++tokPos;\n\t\tvar next = input.charCodeAt(tokPos);\n\t\tif (next === 10) {\n\t\t  ++tokPos;\n\t\t}\n\t\tif (options.locations) {\n\t\t  ++tokCurLine;\n\t\t  tokLineStart = tokPos;\n\t\t}\n\t  } else if (ch === 10 || ch === 8232 || ch === 8233) {\n\t\t++tokPos;\n\t\tif (options.locations) {\n\t\t  ++tokCurLine;\n\t\t  tokLineStart = tokPos;\n\t\t}\n\t  } else if (ch > 8 && ch < 14) {\n\t\t++tokPos;\n\t  } else if (ch === 47) {\n\t\tvar next = input.charCodeAt(tokPos + 1);\n\t\tif (next === 42) {\n\t\t  skipBlockComment();\n\t\t} else if (next === 47) {\n\t\t  skipLineComment();\n\t\t} else break;\n\t  } else if (ch === 160) {\n\t\t++tokPos;\n\t  } else if (ch >= 5760 && nonASCIIwhitespace.test(String.fromCharCode(ch))) {\n\t\t++tokPos;\n\t  } else {\n\t\tbreak;\n\t  }\n\t}\n  }\n\n  function readToken_dot() {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tif (next >= 48 && next <= 57) return readNumber(true);\n\t++tokPos;\n\treturn finishToken(_dot);\n  }\n\n  function readToken_slash() {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tif (tokRegexpAllowed) {++tokPos; return readRegexp();}\n\tif (next === 61) return finishOp(_assign, 2);\n\treturn finishOp(_slash, 1);\n  }\n\n  function readToken_mult_modulo() {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tif (next === 61) return finishOp(_assign, 2);\n\treturn finishOp(_multiplyModulo, 1);\n  }\n\n  function readToken_pipe_amp(code) {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tif (next === code) return finishOp(code === 124 ? _logicalOR : _logicalAND, 2);\n\tif (next === 61) return finishOp(_assign, 2);\n\treturn finishOp(code === 124 ? _bitwiseOR : _bitwiseAND, 1);\n  }\n\n  function readToken_caret() {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tif (next === 61) return finishOp(_assign, 2);\n\treturn finishOp(_bitwiseXOR, 1);\n  }\n\n  function readToken_plus_min(code) {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tif (next === code) {\n\t  if (next == 45 && input.charCodeAt(tokPos + 2) == 62 &&\n\t\t  newline.test(input.slice(lastEnd, tokPos))) {\n\t\ttokPos += 3;\n\t\tskipLineComment();\n\t\tskipSpace();\n\t\treturn readToken();\n\t  }\n\t  return finishOp(_incDec, 2);\n\t}\n\tif (next === 61) return finishOp(_assign, 2);\n\treturn finishOp(_plusMin, 1);\n  }\n\n  function readToken_lt_gt(code) {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tvar size = 1;\n\tif (next === code) {\n\t  size = code === 62 && input.charCodeAt(tokPos + 2) === 62 ? 3 : 2;\n\t  if (input.charCodeAt(tokPos + size) === 61) return finishOp(_assign, size + 1);\n\t  return finishOp(_bitShift, size);\n\t}\n\tif (next == 33 && code == 60 && input.charCodeAt(tokPos + 2) == 45 &&\n\t\tinput.charCodeAt(tokPos + 3) == 45) {\n\t  tokPos += 4;\n\t  skipLineComment();\n\t  skipSpace();\n\t  return readToken();\n\t}\n\tif (next === 61)\n\t  size = input.charCodeAt(tokPos + 2) === 61 ? 3 : 2;\n\treturn finishOp(_relational, size);\n  }\n\n  function readToken_eq_excl(code) {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tif (next === 61) return finishOp(_equality, input.charCodeAt(tokPos + 2) === 61 ? 3 : 2);\n\treturn finishOp(code === 61 ? _eq : _prefix, 1);\n  }\n\n  function getTokenFromCode(code) {\n\tswitch(code) {\n\tcase 46:\n\t  return readToken_dot();\n\n\tcase 40: ++tokPos; return finishToken(_parenL);\n\tcase 41: ++tokPos; return finishToken(_parenR);\n\tcase 59: ++tokPos; return finishToken(_semi);\n\tcase 44: ++tokPos; return finishToken(_comma);\n\tcase 91: ++tokPos; return finishToken(_bracketL);\n\tcase 93: ++tokPos; return finishToken(_bracketR);\n\tcase 123: ++tokPos; return finishToken(_braceL);\n\tcase 125: ++tokPos; return finishToken(_braceR);\n\tcase 58: ++tokPos; return finishToken(_colon);\n\tcase 63: ++tokPos; return finishToken(_question);\n\n\tcase 48:\n\t  var next = input.charCodeAt(tokPos + 1);\n\t  if (next === 120 || next === 88) return readHexNumber();\n\tcase 49: case 50: case 51: case 52: case 53: case 54: case 55: case 56: case 57:\n\t  return readNumber(false);\n\n\tcase 34: case 39:\n\t  return readString(code);\n\n\tcase 47:\n\t  return readToken_slash(code);\n\n\tcase 37: case 42:\n\t  return readToken_mult_modulo();\n\n\tcase 124: case 38:\n\t  return readToken_pipe_amp(code);\n\n\tcase 94:\n\t  return readToken_caret();\n\n\tcase 43: case 45:\n\t  return readToken_plus_min(code);\n\n\tcase 60: case 62:\n\t  return readToken_lt_gt(code);\n\n\tcase 61: case 33:\n\t  return readToken_eq_excl(code);\n\n\tcase 126:\n\t  return finishOp(_prefix, 1);\n\t}\n\n\treturn false;\n  }\n\n  function readToken(forceRegexp) {\n\tif (!forceRegexp) tokStart = tokPos;\n\telse tokPos = tokStart + 1;\n\tif (options.locations) tokStartLoc = new line_loc_t;\n\tif (forceRegexp) return readRegexp();\n\tif (tokPos >= inputLen) return finishToken(_eof);\n\n\tvar code = input.charCodeAt(tokPos);\n\tif (isIdentifierStart(code) || code === 92 ) return readWord();\n\n\tvar tok = getTokenFromCode(code);\n\n\tif (tok === false) {\n\t  var ch = String.fromCharCode(code);\n\t  if (ch === \"\\\\\" || nonASCIIidentifierStart.test(ch)) return readWord();\n\t  raise(tokPos, \"Unexpected character '\" + ch + \"'\");\n\t}\n\treturn tok;\n  }\n\n  function finishOp(type, size) {\n\tvar str = input.slice(tokPos, tokPos + size);\n\ttokPos += size;\n\tfinishToken(type, str);\n  }\n\n  function readRegexp() {\n\tvar content = \"\", escaped, inClass, start = tokPos;\n\tfor (;;) {\n\t  if (tokPos >= inputLen) raise(start, \"Unterminated regular expression\");\n\t  var ch = input.charAt(tokPos);\n\t  if (newline.test(ch)) raise(start, \"Unterminated regular expression\");\n\t  if (!escaped) {\n\t\tif (ch === \"[\") inClass = true;\n\t\telse if (ch === \"]\" && inClass) inClass = false;\n\t\telse if (ch === \"/\" && !inClass) break;\n\t\tescaped = ch === \"\\\\\";\n\t  } else escaped = false;\n\t  ++tokPos;\n\t}\n\tvar content = input.slice(start, tokPos);\n\t++tokPos;\n\tvar mods = readWord1();\n\tif (mods && !/^[gmsiy]*$/.test(mods)) raise(start, \"Invalid regexp flag\");\n\ttry {\n\t  var value = new RegExp(content, mods);\n\t} catch (e) {\n\t  if (e instanceof SyntaxError) raise(start, e.message);\n\t  raise(e);\n\t}\n\treturn finishToken(_regexp, value);\n  }\n\n  function readInt(radix, len) {\n\tvar start = tokPos, total = 0;\n\tfor (var i = 0, e = len == null ? Infinity : len; i < e; ++i) {\n\t  var code = input.charCodeAt(tokPos), val;\n\t  if (code >= 97) val = code - 97 + 10;\n\t  else if (code >= 65) val = code - 65 + 10;\n\t  else if (code >= 48 && code <= 57) val = code - 48;\n\t  else val = Infinity;\n\t  if (val >= radix) break;\n\t  ++tokPos;\n\t  total = total * radix + val;\n\t}\n\tif (tokPos === start || len != null && tokPos - start !== len) return null;\n\n\treturn total;\n  }\n\n  function readHexNumber() {\n\ttokPos += 2;\n\tvar val = readInt(16);\n\tif (val == null) raise(tokStart + 2, \"Expected hexadecimal number\");\n\tif (isIdentifierStart(input.charCodeAt(tokPos))) raise(tokPos, \"Identifier directly after number\");\n\treturn finishToken(_num, val);\n  }\n\n  function readNumber(startsWithDot) {\n\tvar start = tokPos, isFloat = false, octal = input.charCodeAt(tokPos) === 48;\n\tif (!startsWithDot && readInt(10) === null) raise(start, \"Invalid number\");\n\tif (input.charCodeAt(tokPos) === 46) {\n\t  ++tokPos;\n\t  readInt(10);\n\t  isFloat = true;\n\t}\n\tvar next = input.charCodeAt(tokPos);\n\tif (next === 69 || next === 101) {\n\t  next = input.charCodeAt(++tokPos);\n\t  if (next === 43 || next === 45) ++tokPos;\n\t  if (readInt(10) === null) raise(start, \"Invalid number\");\n\t  isFloat = true;\n\t}\n\tif (isIdentifierStart(input.charCodeAt(tokPos))) raise(tokPos, \"Identifier directly after number\");\n\n\tvar str = input.slice(start, tokPos), val;\n\tif (isFloat) val = parseFloat(str);\n\telse if (!octal || str.length === 1) val = parseInt(str, 10);\n\telse if (/[89]/.test(str) || strict) raise(start, \"Invalid number\");\n\telse val = parseInt(str, 8);\n\treturn finishToken(_num, val);\n  }\n\n  function readString(quote) {\n\ttokPos++;\n\tvar out = \"\";\n\tfor (;;) {\n\t  if (tokPos >= inputLen) raise(tokStart, \"Unterminated string constant\");\n\t  var ch = input.charCodeAt(tokPos);\n\t  if (ch === quote) {\n\t\t++tokPos;\n\t\treturn finishToken(_string, out);\n\t  }\n\t  if (ch === 92) {\n\t\tch = input.charCodeAt(++tokPos);\n\t\tvar octal = /^[0-7]+/.exec(input.slice(tokPos, tokPos + 3));\n\t\tif (octal) octal = octal[0];\n\t\twhile (octal && parseInt(octal, 8) > 255) octal = octal.slice(0, -1);\n\t\tif (octal === \"0\") octal = null;\n\t\t++tokPos;\n\t\tif (octal) {\n\t\t  if (strict) raise(tokPos - 2, \"Octal literal in strict mode\");\n\t\t  out += String.fromCharCode(parseInt(octal, 8));\n\t\t  tokPos += octal.length - 1;\n\t\t} else {\n\t\t  switch (ch) {\n\t\t  case 110: out += \"\\n\"; break;\n\t\t  case 114: out += \"\\r\"; break;\n\t\t  case 120: out += String.fromCharCode(readHexChar(2)); break;\n\t\t  case 117: out += String.fromCharCode(readHexChar(4)); break;\n\t\t  case 85: out += String.fromCharCode(readHexChar(8)); break;\n\t\t  case 116: out += \"\\t\"; break;\n\t\t  case 98: out += \"\\b\"; break;\n\t\t  case 118: out += \"\\u000b\"; break;\n\t\t  case 102: out += \"\\f\"; break;\n\t\t  case 48: out += \"\\0\"; break;\n\t\t  case 13: if (input.charCodeAt(tokPos) === 10) ++tokPos;\n\t\t  case 10:\n\t\t\tif (options.locations) { tokLineStart = tokPos; ++tokCurLine; }\n\t\t\tbreak;\n\t\t  default: out += String.fromCharCode(ch); break;\n\t\t  }\n\t\t}\n\t  } else {\n\t\tif (ch === 13 || ch === 10 || ch === 8232 || ch === 8233) raise(tokStart, \"Unterminated string constant\");\n\t\tout += String.fromCharCode(ch);\n\t\t++tokPos;\n\t  }\n\t}\n  }\n\n  function readHexChar(len) {\n\tvar n = readInt(16, len);\n\tif (n === null) raise(tokStart, \"Bad character escape sequence\");\n\treturn n;\n  }\n\n  var containsEsc;\n\n  function readWord1() {\n\tcontainsEsc = false;\n\tvar word, first = true, start = tokPos;\n\tfor (;;) {\n\t  var ch = input.charCodeAt(tokPos);\n\t  if (isIdentifierChar(ch)) {\n\t\tif (containsEsc) word += input.charAt(tokPos);\n\t\t++tokPos;\n\t  } else if (ch === 92) {\n\t\tif (!containsEsc) word = input.slice(start, tokPos);\n\t\tcontainsEsc = true;\n\t\tif (input.charCodeAt(++tokPos) != 117)\n\t\t  raise(tokPos, \"Expecting Unicode escape sequence \\\\uXXXX\");\n\t\t++tokPos;\n\t\tvar esc = readHexChar(4);\n\t\tvar escStr = String.fromCharCode(esc);\n\t\tif (!escStr) raise(tokPos - 1, \"Invalid Unicode escape\");\n\t\tif (!(first ? isIdentifierStart(esc) : isIdentifierChar(esc)))\n\t\t  raise(tokPos - 4, \"Invalid Unicode escape\");\n\t\tword += escStr;\n\t  } else {\n\t\tbreak;\n\t  }\n\t  first = false;\n\t}\n\treturn containsEsc ? word : input.slice(start, tokPos);\n  }\n\n  function readWord() {\n\tvar word = readWord1();\n\tvar type = _name;\n\tif (!containsEsc && isKeyword(word))\n\t  type = keywordTypes[word];\n\treturn finishToken(type, word);\n  }\n\n  function next() {\n\tlastStart = tokStart;\n\tlastEnd = tokEnd;\n\tlastEndLoc = tokEndLoc;\n\treadToken();\n  }\n\n  function setStrict(strct) {\n\tstrict = strct;\n\ttokPos = tokStart;\n\tif (options.locations) {\n\t  while (tokPos < tokLineStart) {\n\t\ttokLineStart = input.lastIndexOf(\"\\n\", tokLineStart - 2) + 1;\n\t\t--tokCurLine;\n\t  }\n\t}\n\tskipSpace();\n\treadToken();\n  }\n\n  function node_t() {\n\tthis.type = null;\n\tthis.start = tokStart;\n\tthis.end = null;\n  }\n\n  function node_loc_t() {\n\tthis.start = tokStartLoc;\n\tthis.end = null;\n\tif (sourceFile !== null) this.source = sourceFile;\n  }\n\n  function startNode() {\n\tvar node = new node_t();\n\tif (options.locations)\n\t  node.loc = new node_loc_t();\n\tif (options.directSourceFile)\n\t  node.sourceFile = options.directSourceFile;\n\tif (options.ranges)\n\t  node.range = [tokStart, 0];\n\treturn node;\n  }\n\n  function startNodeFrom(other) {\n\tvar node = new node_t();\n\tnode.start = other.start;\n\tif (options.locations) {\n\t  node.loc = new node_loc_t();\n\t  node.loc.start = other.loc.start;\n\t}\n\tif (options.ranges)\n\t  node.range = [other.range[0], 0];\n\n\treturn node;\n  }\n\n  function finishNode(node, type) {\n\tnode.type = type;\n\tnode.end = lastEnd;\n\tif (options.locations)\n\t  node.loc.end = lastEndLoc;\n\tif (options.ranges)\n\t  node.range[1] = lastEnd;\n\treturn node;\n  }\n\n  function isUseStrict(stmt) {\n\treturn options.ecmaVersion >= 5 && stmt.type === \"ExpressionStatement\" &&\n\t  stmt.expression.type === \"Literal\" && stmt.expression.value === \"use strict\";\n  }\n\n  function eat(type) {\n\tif (tokType === type) {\n\t  next();\n\t  return true;\n\t}\n  }\n\n  function canInsertSemicolon() {\n\treturn !options.strictSemicolons &&\n\t  (tokType === _eof || tokType === _braceR || newline.test(input.slice(lastEnd, tokStart)));\n  }\n\n  function semicolon() {\n\tif (!eat(_semi) && !canInsertSemicolon()) unexpected();\n  }\n\n  function expect(type) {\n\tif (tokType === type) next();\n\telse unexpected();\n  }\n\n  function unexpected() {\n\traise(tokStart, \"Unexpected token\");\n  }\n\n  function checkLVal(expr) {\n\tif (expr.type !== \"Identifier\" && expr.type !== \"MemberExpression\")\n\t  raise(expr.start, \"Assigning to rvalue\");\n\tif (strict && expr.type === \"Identifier\" && isStrictBadIdWord(expr.name))\n\t  raise(expr.start, \"Assigning to \" + expr.name + \" in strict mode\");\n  }\n\n  function parseTopLevel(program) {\n\tlastStart = lastEnd = tokPos;\n\tif (options.locations) lastEndLoc = new line_loc_t;\n\tinFunction = strict = null;\n\tlabels = [];\n\treadToken();\n\n\tvar node = program || startNode(), first = true;\n\tif (!program) node.body = [];\n\twhile (tokType !== _eof) {\n\t  var stmt = parseStatement();\n\t  node.body.push(stmt);\n\t  if (first && isUseStrict(stmt)) setStrict(true);\n\t  first = false;\n\t}\n\treturn finishNode(node, \"Program\");\n  }\n\n  var loopLabel = {kind: \"loop\"}, switchLabel = {kind: \"switch\"};\n\n  function parseStatement() {\n\tif (tokType === _slash || tokType === _assign && tokVal == \"/=\")\n\t  readToken(true);\n\n\tvar starttype = tokType, node = startNode();\n\n\tswitch (starttype) {\n\tcase _break: case _continue:\n\t  next();\n\t  var isBreak = starttype === _break;\n\t  if (eat(_semi) || canInsertSemicolon()) node.label = null;\n\t  else if (tokType !== _name) unexpected();\n\t  else {\n\t\tnode.label = parseIdent();\n\t\tsemicolon();\n\t  }\n\n\t  for (var i = 0; i < labels.length; ++i) {\n\t\tvar lab = labels[i];\n\t\tif (node.label == null || lab.name === node.label.name) {\n\t\t  if (lab.kind != null && (isBreak || lab.kind === \"loop\")) break;\n\t\t  if (node.label && isBreak) break;\n\t\t}\n\t  }\n\t  if (i === labels.length) raise(node.start, \"Unsyntactic \" + starttype.keyword);\n\t  return finishNode(node, isBreak ? \"BreakStatement\" : \"ContinueStatement\");\n\n\tcase _debugger:\n\t  next();\n\t  semicolon();\n\t  return finishNode(node, \"DebuggerStatement\");\n\n\tcase _do:\n\t  next();\n\t  labels.push(loopLabel);\n\t  node.body = parseStatement();\n\t  labels.pop();\n\t  expect(_while);\n\t  node.test = parseParenExpression();\n\t  semicolon();\n\t  return finishNode(node, \"DoWhileStatement\");\n\n\tcase _for:\n\t  next();\n\t  labels.push(loopLabel);\n\t  expect(_parenL);\n\t  if (tokType === _semi) return parseFor(node, null);\n\t  if (tokType === _var) {\n\t\tvar init = startNode();\n\t\tnext();\n\t\tparseVar(init, true);\n\t\tfinishNode(init, \"VariableDeclaration\");\n\t\tif (init.declarations.length === 1 && eat(_in))\n\t\t  return parseForIn(node, init);\n\t\treturn parseFor(node, init);\n\t  }\n\t  var init = parseExpression(false, true);\n\t  if (eat(_in)) {checkLVal(init); return parseForIn(node, init);}\n\t  return parseFor(node, init);\n\n\tcase _function:\n\t  next();\n\t  return parseFunction(node, true);\n\n\tcase _if:\n\t  next();\n\t  node.test = parseParenExpression();\n\t  node.consequent = parseStatement();\n\t  node.alternate = eat(_else) ? parseStatement() : null;\n\t  return finishNode(node, \"IfStatement\");\n\n\tcase _return:\n\t  if (!inFunction && !options.allowReturnOutsideFunction)\n\t\traise(tokStart, \"'return' outside of function\");\n\t  next();\n\n\t  if (eat(_semi) || canInsertSemicolon()) node.argument = null;\n\t  else { node.argument = parseExpression(); semicolon(); }\n\t  return finishNode(node, \"ReturnStatement\");\n\n\tcase _switch:\n\t  next();\n\t  node.discriminant = parseParenExpression();\n\t  node.cases = [];\n\t  expect(_braceL);\n\t  labels.push(switchLabel);\n\n\t  for (var cur, sawDefault; tokType != _braceR;) {\n\t\tif (tokType === _case || tokType === _default) {\n\t\t  var isCase = tokType === _case;\n\t\t  if (cur) finishNode(cur, \"SwitchCase\");\n\t\t  node.cases.push(cur = startNode());\n\t\t  cur.consequent = [];\n\t\t  next();\n\t\t  if (isCase) cur.test = parseExpression();\n\t\t  else {\n\t\t\tif (sawDefault) raise(lastStart, \"Multiple default clauses\"); sawDefault = true;\n\t\t\tcur.test = null;\n\t\t  }\n\t\t  expect(_colon);\n\t\t} else {\n\t\t  if (!cur) unexpected();\n\t\t  cur.consequent.push(parseStatement());\n\t\t}\n\t  }\n\t  if (cur) finishNode(cur, \"SwitchCase\");\n\t  next();\n\t  labels.pop();\n\t  return finishNode(node, \"SwitchStatement\");\n\n\tcase _throw:\n\t  next();\n\t  if (newline.test(input.slice(lastEnd, tokStart)))\n\t\traise(lastEnd, \"Illegal newline after throw\");\n\t  node.argument = parseExpression();\n\t  semicolon();\n\t  return finishNode(node, \"ThrowStatement\");\n\n\tcase _try:\n\t  next();\n\t  node.block = parseBlock();\n\t  node.handler = null;\n\t  if (tokType === _catch) {\n\t\tvar clause = startNode();\n\t\tnext();\n\t\texpect(_parenL);\n\t\tclause.param = parseIdent();\n\t\tif (strict && isStrictBadIdWord(clause.param.name))\n\t\t  raise(clause.param.start, \"Binding \" + clause.param.name + \" in strict mode\");\n\t\texpect(_parenR);\n\t\tclause.guard = null;\n\t\tclause.body = parseBlock();\n\t\tnode.handler = finishNode(clause, \"CatchClause\");\n\t  }\n\t  node.guardedHandlers = empty;\n\t  node.finalizer = eat(_finally) ? parseBlock() : null;\n\t  if (!node.handler && !node.finalizer)\n\t\traise(node.start, \"Missing catch or finally clause\");\n\t  return finishNode(node, \"TryStatement\");\n\n\tcase _var:\n\t  next();\n\t  parseVar(node);\n\t  semicolon();\n\t  return finishNode(node, \"VariableDeclaration\");\n\n\tcase _while:\n\t  next();\n\t  node.test = parseParenExpression();\n\t  labels.push(loopLabel);\n\t  node.body = parseStatement();\n\t  labels.pop();\n\t  return finishNode(node, \"WhileStatement\");\n\n\tcase _with:\n\t  if (strict) raise(tokStart, \"'with' in strict mode\");\n\t  next();\n\t  node.object = parseParenExpression();\n\t  node.body = parseStatement();\n\t  return finishNode(node, \"WithStatement\");\n\n\tcase _braceL:\n\t  return parseBlock();\n\n\tcase _semi:\n\t  next();\n\t  return finishNode(node, \"EmptyStatement\");\n\n\tdefault:\n\t  var maybeName = tokVal, expr = parseExpression();\n\t  if (starttype === _name && expr.type === \"Identifier\" && eat(_colon)) {\n\t\tfor (var i = 0; i < labels.length; ++i)\n\t\t  if (labels[i].name === maybeName) raise(expr.start, \"Label '\" + maybeName + \"' is already declared\");\n\t\tvar kind = tokType.isLoop ? \"loop\" : tokType === _switch ? \"switch\" : null;\n\t\tlabels.push({name: maybeName, kind: kind});\n\t\tnode.body = parseStatement();\n\t\tlabels.pop();\n\t\tnode.label = expr;\n\t\treturn finishNode(node, \"LabeledStatement\");\n\t  } else {\n\t\tnode.expression = expr;\n\t\tsemicolon();\n\t\treturn finishNode(node, \"ExpressionStatement\");\n\t  }\n\t}\n  }\n\n  function parseParenExpression() {\n\texpect(_parenL);\n\tvar val = parseExpression();\n\texpect(_parenR);\n\treturn val;\n  }\n\n  function parseBlock(allowStrict) {\n\tvar node = startNode(), first = true, strict = false, oldStrict;\n\tnode.body = [];\n\texpect(_braceL);\n\twhile (!eat(_braceR)) {\n\t  var stmt = parseStatement();\n\t  node.body.push(stmt);\n\t  if (first && allowStrict && isUseStrict(stmt)) {\n\t\toldStrict = strict;\n\t\tsetStrict(strict = true);\n\t  }\n\t  first = false;\n\t}\n\tif (strict && !oldStrict) setStrict(false);\n\treturn finishNode(node, \"BlockStatement\");\n  }\n\n  function parseFor(node, init) {\n\tnode.init = init;\n\texpect(_semi);\n\tnode.test = tokType === _semi ? null : parseExpression();\n\texpect(_semi);\n\tnode.update = tokType === _parenR ? null : parseExpression();\n\texpect(_parenR);\n\tnode.body = parseStatement();\n\tlabels.pop();\n\treturn finishNode(node, \"ForStatement\");\n  }\n\n  function parseForIn(node, init) {\n\tnode.left = init;\n\tnode.right = parseExpression();\n\texpect(_parenR);\n\tnode.body = parseStatement();\n\tlabels.pop();\n\treturn finishNode(node, \"ForInStatement\");\n  }\n\n  function parseVar(node, noIn) {\n\tnode.declarations = [];\n\tnode.kind = \"var\";\n\tfor (;;) {\n\t  var decl = startNode();\n\t  decl.id = parseIdent();\n\t  if (strict && isStrictBadIdWord(decl.id.name))\n\t\traise(decl.id.start, \"Binding \" + decl.id.name + \" in strict mode\");\n\t  decl.init = eat(_eq) ? parseExpression(true, noIn) : null;\n\t  node.declarations.push(finishNode(decl, \"VariableDeclarator\"));\n\t  if (!eat(_comma)) break;\n\t}\n\treturn node;\n  }\n\n  function parseExpression(noComma, noIn) {\n\tvar expr = parseMaybeAssign(noIn);\n\tif (!noComma && tokType === _comma) {\n\t  var node = startNodeFrom(expr);\n\t  node.expressions = [expr];\n\t  while (eat(_comma)) node.expressions.push(parseMaybeAssign(noIn));\n\t  return finishNode(node, \"SequenceExpression\");\n\t}\n\treturn expr;\n  }\n\n  function parseMaybeAssign(noIn) {\n\tvar left = parseMaybeConditional(noIn);\n\tif (tokType.isAssign) {\n\t  var node = startNodeFrom(left);\n\t  node.operator = tokVal;\n\t  node.left = left;\n\t  next();\n\t  node.right = parseMaybeAssign(noIn);\n\t  checkLVal(left);\n\t  return finishNode(node, \"AssignmentExpression\");\n\t}\n\treturn left;\n  }\n\n  function parseMaybeConditional(noIn) {\n\tvar expr = parseExprOps(noIn);\n\tif (eat(_question)) {\n\t  var node = startNodeFrom(expr);\n\t  node.test = expr;\n\t  node.consequent = parseExpression(true);\n\t  expect(_colon);\n\t  node.alternate = parseExpression(true, noIn);\n\t  return finishNode(node, \"ConditionalExpression\");\n\t}\n\treturn expr;\n  }\n\n  function parseExprOps(noIn) {\n\treturn parseExprOp(parseMaybeUnary(), -1, noIn);\n  }\n\n  function parseExprOp(left, minPrec, noIn) {\n\tvar prec = tokType.binop;\n\tif (prec != null && (!noIn || tokType !== _in)) {\n\t  if (prec > minPrec) {\n\t\tvar node = startNodeFrom(left);\n\t\tnode.left = left;\n\t\tnode.operator = tokVal;\n\t\tvar op = tokType;\n\t\tnext();\n\t\tnode.right = parseExprOp(parseMaybeUnary(), prec, noIn);\n\t\tvar exprNode = finishNode(node, (op === _logicalOR || op === _logicalAND) ? \"LogicalExpression\" : \"BinaryExpression\");\n\t\treturn parseExprOp(exprNode, minPrec, noIn);\n\t  }\n\t}\n\treturn left;\n  }\n\n  function parseMaybeUnary() {\n\tif (tokType.prefix) {\n\t  var node = startNode(), update = tokType.isUpdate;\n\t  node.operator = tokVal;\n\t  node.prefix = true;\n\t  tokRegexpAllowed = true;\n\t  next();\n\t  node.argument = parseMaybeUnary();\n\t  if (update) checkLVal(node.argument);\n\t  else if (strict && node.operator === \"delete\" &&\n\t\t\t   node.argument.type === \"Identifier\")\n\t\traise(node.start, \"Deleting local variable in strict mode\");\n\t  return finishNode(node, update ? \"UpdateExpression\" : \"UnaryExpression\");\n\t}\n\tvar expr = parseExprSubscripts();\n\twhile (tokType.postfix && !canInsertSemicolon()) {\n\t  var node = startNodeFrom(expr);\n\t  node.operator = tokVal;\n\t  node.prefix = false;\n\t  node.argument = expr;\n\t  checkLVal(expr);\n\t  next();\n\t  expr = finishNode(node, \"UpdateExpression\");\n\t}\n\treturn expr;\n  }\n\n  function parseExprSubscripts() {\n\treturn parseSubscripts(parseExprAtom());\n  }\n\n  function parseSubscripts(base, noCalls) {\n\tif (eat(_dot)) {\n\t  var node = startNodeFrom(base);\n\t  node.object = base;\n\t  node.property = parseIdent(true);\n\t  node.computed = false;\n\t  return parseSubscripts(finishNode(node, \"MemberExpression\"), noCalls);\n\t} else if (eat(_bracketL)) {\n\t  var node = startNodeFrom(base);\n\t  node.object = base;\n\t  node.property = parseExpression();\n\t  node.computed = true;\n\t  expect(_bracketR);\n\t  return parseSubscripts(finishNode(node, \"MemberExpression\"), noCalls);\n\t} else if (!noCalls && eat(_parenL)) {\n\t  var node = startNodeFrom(base);\n\t  node.callee = base;\n\t  node.arguments = parseExprList(_parenR, false);\n\t  return parseSubscripts(finishNode(node, \"CallExpression\"), noCalls);\n\t} else return base;\n  }\n\n  function parseExprAtom() {\n\tswitch (tokType) {\n\tcase _this:\n\t  var node = startNode();\n\t  next();\n\t  return finishNode(node, \"ThisExpression\");\n\tcase _name:\n\t  return parseIdent();\n\tcase _num: case _string: case _regexp:\n\t  var node = startNode();\n\t  node.value = tokVal;\n\t  node.raw = input.slice(tokStart, tokEnd);\n\t  next();\n\t  return finishNode(node, \"Literal\");\n\n\tcase _null: case _true: case _false:\n\t  var node = startNode();\n\t  node.value = tokType.atomValue;\n\t  node.raw = tokType.keyword;\n\t  next();\n\t  return finishNode(node, \"Literal\");\n\n\tcase _parenL:\n\t  var tokStartLoc1 = tokStartLoc, tokStart1 = tokStart;\n\t  next();\n\t  var val = parseExpression();\n\t  val.start = tokStart1;\n\t  val.end = tokEnd;\n\t  if (options.locations) {\n\t\tval.loc.start = tokStartLoc1;\n\t\tval.loc.end = tokEndLoc;\n\t  }\n\t  if (options.ranges)\n\t\tval.range = [tokStart1, tokEnd];\n\t  expect(_parenR);\n\t  return val;\n\n\tcase _bracketL:\n\t  var node = startNode();\n\t  next();\n\t  node.elements = parseExprList(_bracketR, true, true);\n\t  return finishNode(node, \"ArrayExpression\");\n\n\tcase _braceL:\n\t  return parseObj();\n\n\tcase _function:\n\t  var node = startNode();\n\t  next();\n\t  return parseFunction(node, false);\n\n\tcase _new:\n\t  return parseNew();\n\n\tdefault:\n\t  unexpected();\n\t}\n  }\n\n  function parseNew() {\n\tvar node = startNode();\n\tnext();\n\tnode.callee = parseSubscripts(parseExprAtom(), true);\n\tif (eat(_parenL)) node.arguments = parseExprList(_parenR, false);\n\telse node.arguments = empty;\n\treturn finishNode(node, \"NewExpression\");\n  }\n\n  function parseObj() {\n\tvar node = startNode(), first = true, sawGetSet = false;\n\tnode.properties = [];\n\tnext();\n\twhile (!eat(_braceR)) {\n\t  if (!first) {\n\t\texpect(_comma);\n\t\tif (options.allowTrailingCommas && eat(_braceR)) break;\n\t  } else first = false;\n\n\t  var prop = {key: parsePropertyName()}, isGetSet = false, kind;\n\t  if (eat(_colon)) {\n\t\tprop.value = parseExpression(true);\n\t\tkind = prop.kind = \"init\";\n\t  } else if (options.ecmaVersion >= 5 && prop.key.type === \"Identifier\" &&\n\t\t\t\t (prop.key.name === \"get\" || prop.key.name === \"set\")) {\n\t\tisGetSet = sawGetSet = true;\n\t\tkind = prop.kind = prop.key.name;\n\t\tprop.key = parsePropertyName();\n\t\tif (tokType !== _parenL) unexpected();\n\t\tprop.value = parseFunction(startNode(), false);\n\t  } else unexpected();\n\n\t  if (prop.key.type === \"Identifier\" && (strict || sawGetSet)) {\n\t\tfor (var i = 0; i < node.properties.length; ++i) {\n\t\t  var other = node.properties[i];\n\t\t  if (other.key.name === prop.key.name) {\n\t\t\tvar conflict = kind == other.kind || isGetSet && other.kind === \"init\" ||\n\t\t\t  kind === \"init\" && (other.kind === \"get\" || other.kind === \"set\");\n\t\t\tif (conflict && !strict && kind === \"init\" && other.kind === \"init\") conflict = false;\n\t\t\tif (conflict) raise(prop.key.start, \"Redefinition of property\");\n\t\t  }\n\t\t}\n\t  }\n\t  node.properties.push(prop);\n\t}\n\treturn finishNode(node, \"ObjectExpression\");\n  }\n\n  function parsePropertyName() {\n\tif (tokType === _num || tokType === _string) return parseExprAtom();\n\treturn parseIdent(true);\n  }\n\n  function parseFunction(node, isStatement) {\n\tif (tokType === _name) node.id = parseIdent();\n\telse if (isStatement) unexpected();\n\telse node.id = null;\n\tnode.params = [];\n\tvar first = true;\n\texpect(_parenL);\n\twhile (!eat(_parenR)) {\n\t  if (!first) expect(_comma); else first = false;\n\t  node.params.push(parseIdent());\n\t}\n\n\tvar oldInFunc = inFunction, oldLabels = labels;\n\tinFunction = true; labels = [];\n\tnode.body = parseBlock(true);\n\tinFunction = oldInFunc; labels = oldLabels;\n\n\tif (strict || node.body.body.length && isUseStrict(node.body.body[0])) {\n\t  for (var i = node.id ? -1 : 0; i < node.params.length; ++i) {\n\t\tvar id = i < 0 ? node.id : node.params[i];\n\t\tif (isStrictReservedWord(id.name) || isStrictBadIdWord(id.name))\n\t\t  raise(id.start, \"Defining '\" + id.name + \"' in strict mode\");\n\t\tif (i >= 0) for (var j = 0; j < i; ++j) if (id.name === node.params[j].name)\n\t\t  raise(id.start, \"Argument name clash in strict mode\");\n\t  }\n\t}\n\n\treturn finishNode(node, isStatement ? \"FunctionDeclaration\" : \"FunctionExpression\");\n  }\n\n  function parseExprList(close, allowTrailingComma, allowEmpty) {\n\tvar elts = [], first = true;\n\twhile (!eat(close)) {\n\t  if (!first) {\n\t\texpect(_comma);\n\t\tif (allowTrailingComma && options.allowTrailingCommas && eat(close)) break;\n\t  } else first = false;\n\n\t  if (allowEmpty && tokType === _comma) elts.push(null);\n\t  else elts.push(parseExpression(true));\n\t}\n\treturn elts;\n  }\n\n  function parseIdent(liberal) {\n\tvar node = startNode();\n\tif (liberal && options.forbidReserved == \"everywhere\") liberal = false;\n\tif (tokType === _name) {\n\t  if (!liberal &&\n\t\t  (options.forbidReserved &&\n\t\t   (options.ecmaVersion === 3 ? isReservedWord3 : isReservedWord5)(tokVal) ||\n\t\t   strict && isStrictReservedWord(tokVal)) &&\n\t\t  input.slice(tokStart, tokEnd).indexOf(\"\\\\\") == -1)\n\t\traise(tokStart, \"The keyword '\" + tokVal + \"' is reserved\");\n\t  node.name = tokVal;\n\t} else if (liberal && tokType.keyword) {\n\t  node.name = tokType.keyword;\n\t} else {\n\t  unexpected();\n\t}\n\ttokRegexpAllowed = false;\n\tnext();\n\treturn finishNode(node, \"Identifier\");\n  }\n\n});\n\n\t\tif (!acorn.version)\n\t\t\tacorn = null;\n\t}\n\n\tfunction parse(code, options) {\n\t\treturn (global.acorn || acorn).parse(code, options);\n\t}\n\n\tvar binaryOperators = {\n\t\t'+': '__add',\n\t\t'-': '__subtract',\n\t\t'*': '__multiply',\n\t\t'/': '__divide',\n\t\t'%': '__modulo',\n\t\t'==': '__equals',\n\t\t'!=': '__equals'\n\t};\n\n\tvar unaryOperators = {\n\t\t'-': '__negate',\n\t\t'+': '__self'\n\t};\n\n\tvar fields = Base.each(\n\t\t['add', 'subtract', 'multiply', 'divide', 'modulo', 'equals', 'negate'],\n\t\tfunction(name) {\n\t\t\tthis['__' + name] = '#' + name;\n\t\t},\n\t\t{\n\t\t\t__self: function() {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t);\n\tPoint.inject(fields);\n\tSize.inject(fields);\n\tColor.inject(fields);\n\n\tfunction __$__(left, operator, right) {\n\t\tvar handler = binaryOperators[operator];\n\t\tif (left && left[handler]) {\n\t\t\tvar res = left[handler](right);\n\t\t\treturn operator === '!=' ? !res : res;\n\t\t}\n\t\tswitch (operator) {\n\t\tcase '+': return left + right;\n\t\tcase '-': return left - right;\n\t\tcase '*': return left * right;\n\t\tcase '/': return left / right;\n\t\tcase '%': return left % right;\n\t\tcase '==': return left == right;\n\t\tcase '!=': return left != right;\n\t\t}\n\t}\n\n\tfunction $__(operator, value) {\n\t\tvar handler = unaryOperators[operator];\n\t\tif (value && value[handler])\n\t\t\treturn value[handler]();\n\t\tswitch (operator) {\n\t\tcase '+': return +value;\n\t\tcase '-': return -value;\n\t\t}\n\t}\n\n\tfunction compile(code, options) {\n\t\tif (!code)\n\t\t\treturn '';\n\t\toptions = options || {};\n\n\t\tvar insertions = [];\n\n\t\tfunction getOffset(offset) {\n\t\t\tfor (var i = 0, l = insertions.length; i < l; i++) {\n\t\t\t\tvar insertion = insertions[i];\n\t\t\t\tif (insertion[0] >= offset)\n\t\t\t\t\tbreak;\n\t\t\t\toffset += insertion[1];\n\t\t\t}\n\t\t\treturn offset;\n\t\t}\n\n\t\tfunction getCode(node) {\n\t\t\treturn code.substring(getOffset(node.range[0]),\n\t\t\t\t\tgetOffset(node.range[1]));\n\t\t}\n\n\t\tfunction getBetween(left, right) {\n\t\t\treturn code.substring(getOffset(left.range[1]),\n\t\t\t\t\tgetOffset(right.range[0]));\n\t\t}\n\n\t\tfunction replaceCode(node, str) {\n\t\t\tvar start = getOffset(node.range[0]),\n\t\t\t\tend = getOffset(node.range[1]),\n\t\t\t\tinsert = 0;\n\t\t\tfor (var i = insertions.length - 1; i >= 0; i--) {\n\t\t\t\tif (start > insertions[i][0]) {\n\t\t\t\t\tinsert = i + 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tinsertions.splice(insert, 0, [start, str.length - end + start]);\n\t\t\tcode = code.substring(0, start) + str + code.substring(end);\n\t\t}\n\n\t\tfunction handleOverloading(node, parent) {\n\t\t\tswitch (node.type) {\n\t\t\tcase 'UnaryExpression':\n\t\t\t\tif (node.operator in unaryOperators\n\t\t\t\t\t\t&& node.argument.type !== 'Literal') {\n\t\t\t\t\tvar arg = getCode(node.argument);\n\t\t\t\t\treplaceCode(node, '$__(\"' + node.operator + '\", '\n\t\t\t\t\t\t\t+ arg + ')');\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'BinaryExpression':\n\t\t\t\tif (node.operator in binaryOperators\n\t\t\t\t\t\t&& node.left.type !== 'Literal') {\n\t\t\t\t\tvar left = getCode(node.left),\n\t\t\t\t\t\tright = getCode(node.right),\n\t\t\t\t\t\tbetween = getBetween(node.left, node.right),\n\t\t\t\t\t\toperator = node.operator;\n\t\t\t\t\treplaceCode(node, '__$__(' + left + ','\n\t\t\t\t\t\t\t+ between.replace(new RegExp('\\\\' + operator),\n\t\t\t\t\t\t\t\t'\"' + operator + '\"')\n\t\t\t\t\t\t\t+ ', ' + right + ')');\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'UpdateExpression':\n\t\t\tcase 'AssignmentExpression':\n\t\t\t\tvar parentType = parent && parent.type;\n\t\t\t\tif (!(\n\t\t\t\t\t\tparentType === 'ForStatement'\n\t\t\t\t\t\t|| parentType === 'BinaryExpression'\n\t\t\t\t\t\t\t&& /^[=!<>]/.test(parent.operator)\n\t\t\t\t\t\t|| parentType === 'MemberExpression' && parent.computed\n\t\t\t\t)) {\n\t\t\t\t\tif (node.type === 'UpdateExpression') {\n\t\t\t\t\t\tvar arg = getCode(node.argument),\n\t\t\t\t\t\t\texp = '__$__(' + arg + ', \"' + node.operator[0]\n\t\t\t\t\t\t\t\t\t+ '\", 1)',\n\t\t\t\t\t\t\tstr = arg + ' = ' + exp;\n\t\t\t\t\t\tif (node.prefix) {\n\t\t\t\t\t\t\tstr = '(' + str + ')';\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\tparentType === 'AssignmentExpression' ||\n\t\t\t\t\t\t\tparentType === 'VariableDeclarator' ||\n\t\t\t\t\t\t\tparentType === 'BinaryExpression'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (getCode(parent.left || parent.id) === arg)\n\t\t\t\t\t\t\t\tstr = exp;\n\t\t\t\t\t\t\tstr = arg + '; ' + str;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treplaceCode(node, str);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (/^.=$/.test(node.operator)\n\t\t\t\t\t\t\t\t&& node.left.type !== 'Literal') {\n\t\t\t\t\t\t\tvar left = getCode(node.left),\n\t\t\t\t\t\t\t\tright = getCode(node.right),\n\t\t\t\t\t\t\t\texp = left + ' = __$__(' + left + ', \"'\n\t\t\t\t\t\t\t\t\t+ node.operator[0] + '\", ' + right + ')';\n\t\t\t\t\t\t\treplaceCode(node, /^\\(.*\\)$/.test(getCode(node))\n\t\t\t\t\t\t\t\t\t? '(' + exp + ')' : exp);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tfunction handleExports(node) {\n\t\t\tswitch (node.type) {\n\t\t\tcase 'ExportDefaultDeclaration':\n\t\t\t\treplaceCode({\n\t\t\t\t\trange: [node.start, node.declaration.start]\n\t\t\t\t}, 'module.exports = ');\n\t\t\t\tbreak;\n\t\t\tcase 'ExportNamedDeclaration':\n\t\t\t\tvar declaration = node.declaration;\n\t\t\t\tvar specifiers = node.specifiers;\n\t\t\t\tif (declaration) {\n\t\t\t\t\tvar declarations = declaration.declarations;\n\t\t\t\t\tif (declarations) {\n\t\t\t\t\t\tdeclarations.forEach(function(dec) {\n\t\t\t\t\t\t\treplaceCode(dec, 'module.exports.' + getCode(dec));\n\t\t\t\t\t\t});\n\t\t\t\t\t\treplaceCode({\n\t\t\t\t\t\t\trange: [\n\t\t\t\t\t\t\t\tnode.start,\n\t\t\t\t\t\t\t\tdeclaration.start + declaration.kind.length\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}, '');\n\t\t\t\t\t}\n\t\t\t\t} else if (specifiers) {\n\t\t\t\t\tvar exports = specifiers.map(function(specifier) {\n\t\t\t\t\t\tvar name = getCode(specifier);\n\t\t\t\t\t\treturn 'module.exports.' + name + ' = ' + name + '; ';\n\t\t\t\t\t}).join('');\n\t\t\t\t\tif (exports) {\n\t\t\t\t\t\treplaceCode(node, exports);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tfunction walkAST(node, parent, paperFeatures) {\n\t\t\tif (node) {\n\t\t\t\tfor (var key in node) {\n\t\t\t\t\tif (key !== 'range' && key !== 'loc') {\n\t\t\t\t\t\tvar value = node[key];\n\t\t\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\t\t\tfor (var i = 0, l = value.length; i < l; i++) {\n\t\t\t\t\t\t\t\twalkAST(value[i], node, paperFeatures);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (value && typeof value === 'object') {\n\t\t\t\t\t\t\twalkAST(value, node, paperFeatures);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (paperFeatures.operatorOverloading !== false) {\n\t\t\t\t\thandleOverloading(node, parent);\n\t\t\t\t}\n\t\t\t\tif (paperFeatures.moduleExports !== false) {\n\t\t\t\t\thandleExports(node);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction encodeVLQ(value) {\n\t\t\tvar res = '',\n\t\t\t\tbase64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\t\t\tvalue = (Math.abs(value) << 1) + (value < 0 ? 1 : 0);\n\t\t\twhile (value || !res) {\n\t\t\t\tvar next = value & (32 - 1);\n\t\t\t\tvalue >>= 5;\n\t\t\t\tif (value)\n\t\t\t\t\tnext |= 32;\n\t\t\t\tres += base64[next];\n\t\t\t}\n\t\t\treturn res;\n\t\t}\n\n\t\tvar url = options.url || '',\n\t\t\tsourceMaps = options.sourceMaps,\n\t\t\tpaperFeatures = options.paperFeatures || {},\n\t\t\tsource = options.source || code,\n\t\t\toffset = options.offset || 0,\n\t\t\tagent = paper.agent,\n\t\t\tversion = agent.versionNumber,\n\t\t\toffsetCode = false,\n\t\t\tlineBreaks = /\\r\\n|\\n|\\r/mg,\n\t\t\tmap;\n\t\tif (sourceMaps && (agent.chrome && version >= 30\n\t\t\t\t|| agent.webkit && version >= 537.76\n\t\t\t\t|| agent.firefox && version >= 23\n\t\t\t\t|| agent.node)) {\n\t\t\tif (agent.node) {\n\t\t\t\toffset -= 2;\n\t\t\t} else if (window && url && !window.location.href.indexOf(url)) {\n\t\t\t\tvar html = document.getElementsByTagName('html')[0].innerHTML;\n\t\t\t\toffset = html.substr(0, html.indexOf(code) + 1).match(\n\t\t\t\t\t\tlineBreaks).length + 1;\n\t\t\t}\n\t\t\toffsetCode = offset > 0 && !(\n\t\t\t\t\tagent.chrome && version >= 36 ||\n\t\t\t\t\tagent.safari && version >= 600 ||\n\t\t\t\t\tagent.firefox && version >= 40 ||\n\t\t\t\t\tagent.node);\n\t\t\tvar mappings = ['AA' + encodeVLQ(offsetCode ? 0 : offset) + 'A'];\n\t\t\tmappings.length = (code.match(lineBreaks) || []).length + 1\n\t\t\t\t\t+ (offsetCode ? offset : 0);\n\t\t\tmap = {\n\t\t\t\tversion: 3,\n\t\t\t\tfile: url,\n\t\t\t\tnames:[],\n\t\t\t\tmappings: mappings.join(';AACA'),\n\t\t\t\tsourceRoot: '',\n\t\t\t\tsources: [url],\n\t\t\t\tsourcesContent: [source]\n\t\t\t};\n\t\t}\n\t\tif (\n\t\t\tpaperFeatures.operatorOverloading !== false ||\n\t\t\tpaperFeatures.moduleExports !== false\n\t\t) {\n\t\t\twalkAST(parse(code, {\n\t\t\t\tranges: true,\n\t\t\t\tpreserveParens: true,\n\t\t\t\tsourceType: 'module'\n\t\t\t}), null, paperFeatures);\n\t\t}\n\t\tif (map) {\n\t\t\tif (offsetCode) {\n\t\t\t\tcode = new Array(offset + 1).join('\\n') + code;\n\t\t\t}\n\t\t\tif (/^(inline|both)$/.test(sourceMaps)) {\n\t\t\t\tcode += \"\\n//# sourceMappingURL=data:application/json;base64,\"\n\t\t\t\t\t\t+ self.btoa(unescape(encodeURIComponent(\n\t\t\t\t\t\t\tJSON.stringify(map))));\n\t\t\t}\n\t\t\tcode += \"\\n//# sourceURL=\" + (url || 'paperscript');\n\t\t}\n\t\treturn {\n\t\t\turl: url,\n\t\t\tsource: source,\n\t\t\tcode: code,\n\t\t\tmap: map\n\t\t};\n\t}\n\n\tfunction execute(code, scope, options) {\n\t\tpaper = scope;\n\t\tvar view = scope.getView(),\n\t\t\ttool = /\\btool\\.\\w+|\\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\\b/\n\t\t\t\t\t.test(code) && !/\\bnew\\s+Tool\\b/.test(code)\n\t\t\t\t\t\t? new Tool() : null,\n\t\t\ttoolHandlers = tool ? tool._events : [],\n\t\t\thandlers = ['onFrame', 'onResize'].concat(toolHandlers),\n\t\t\tparams = [],\n\t\t\targs = [],\n\t\t\tfunc,\n\t\t\tcompiled = typeof code === 'object' ? code : compile(code, options);\n\t\tcode = compiled.code;\n\t\tfunction expose(scope, hidden) {\n\t\t\tfor (var key in scope) {\n\t\t\t\tif ((hidden || !/^_/.test(key)) && new RegExp('([\\\\b\\\\s\\\\W]|^)'\n\t\t\t\t\t\t+ key.replace(/\\$/g, '\\\\$') + '\\\\b').test(code)) {\n\t\t\t\t\tparams.push(key);\n\t\t\t\t\targs.push(scope[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\texpose({ __$__: __$__, $__: $__, paper: scope, tool: tool },\n\t\t\t\ttrue);\n\t\texpose(scope);\n\t\tcode = 'var module = { exports: {} }; ' + code;\n\t\tvar exports = Base.each(handlers, function(key) {\n\t\t\tif (new RegExp('\\\\s+' + key + '\\\\b').test(code)) {\n\t\t\t\tparams.push(key);\n\t\t\t\tthis.push('module.exports.' + key + ' = ' + key + ';');\n\t\t\t}\n\t\t}, []).join('\\n');\n\t\tif (exports) {\n\t\t\tcode += '\\n' + exports;\n\t\t}\n\t\tcode += '\\nreturn module.exports;';\n\t\tvar agent = paper.agent;\n\t\tif (document && (agent.chrome\n\t\t\t\t|| agent.firefox && agent.versionNumber < 40)) {\n\t\t\tvar script = document.createElement('script'),\n\t\t\t\thead = document.head || document.getElementsByTagName('head')[0];\n\t\t\tif (agent.firefox)\n\t\t\t\tcode = '\\n' + code;\n\t\t\tscript.appendChild(document.createTextNode(\n\t\t\t\t'document.__paperscript__ = function(' + params + ') {' +\n\t\t\t\t\tcode +\n\t\t\t\t'\\n}'\n\t\t\t));\n\t\t\thead.appendChild(script);\n\t\t\tfunc = document.__paperscript__;\n\t\t\tdelete document.__paperscript__;\n\t\t\thead.removeChild(script);\n\t\t} else {\n\t\t\tfunc = Function(params, code);\n\t\t}\n\t\tvar exports = func && func.apply(scope, args);\n\t\tvar obj = exports || {};\n\t\tBase.each(toolHandlers, function(key) {\n\t\t\tvar value = obj[key];\n\t\t\tif (value)\n\t\t\t\ttool[key] = value;\n\t\t});\n\t\tif (view) {\n\t\t\tif (obj.onResize)\n\t\t\t\tview.setOnResize(obj.onResize);\n\t\t\tview.emit('resize', {\n\t\t\t\tsize: view.size,\n\t\t\t\tdelta: new Point()\n\t\t\t});\n\t\t\tif (obj.onFrame)\n\t\t\t\tview.setOnFrame(obj.onFrame);\n\t\t\tview.requestUpdate();\n\t\t}\n\t\treturn exports;\n\t}\n\n\tfunction loadScript(script) {\n\t\tif (/^text\\/(?:x-|)paperscript$/.test(script.type)\n\t\t\t\t&& PaperScope.getAttribute(script, 'ignore') !== 'true') {\n\t\t\tvar canvasId = PaperScope.getAttribute(script, 'canvas'),\n\t\t\t\tcanvas = document.getElementById(canvasId),\n\t\t\t\tsrc = script.src || script.getAttribute('data-src'),\n\t\t\t\tasync = PaperScope.hasAttribute(script, 'async'),\n\t\t\t\tscopeAttribute = 'data-paper-scope';\n\t\t\tif (!canvas)\n\t\t\t\tthrow new Error('Unable to find canvas with id \"'\n\t\t\t\t\t\t+ canvasId + '\"');\n\t\t\tvar scope = PaperScope.get(canvas.getAttribute(scopeAttribute))\n\t\t\t\t\t\t|| new PaperScope().setup(canvas);\n\t\t\tcanvas.setAttribute(scopeAttribute, scope._id);\n\t\t\tif (src) {\n\t\t\t\tHttp.request({\n\t\t\t\t\turl: src,\n\t\t\t\t\tasync: async,\n\t\t\t\t\tmimeType: 'text/plain',\n\t\t\t\t\tonLoad: function(code) {\n\t\t\t\t\t\texecute(code, scope, src);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\texecute(script.innerHTML, scope, script.baseURI);\n\t\t\t}\n\t\t\tscript.setAttribute('data-paper-ignore', 'true');\n\t\t\treturn scope;\n\t\t}\n\t}\n\n\tfunction loadAll() {\n\t\tBase.each(document && document.getElementsByTagName('script'),\n\t\t\t\tloadScript);\n\t}\n\n\tfunction load(script) {\n\t\treturn script ? loadScript(script) : loadAll();\n\t}\n\n\tif (window) {\n\t\tif (document.readyState === 'complete') {\n\t\t\tsetTimeout(loadAll);\n\t\t} else {\n\t\t\tDomEvent.add(window, { load: loadAll });\n\t\t}\n\t}\n\n\treturn {\n\t\tcompile: compile,\n\t\texecute: execute,\n\t\tload: load,\n\t\tparse: parse,\n\t\tcalculateBinary: __$__,\n\t\tcalculateUnary: $__\n\t};\n\n}.call(this);\n\nvar paper = new (PaperScope.inject(Base.exports, {\n\tBase: Base,\n\tNumerical: Numerical,\n\tKey: Key,\n\tDomEvent: DomEvent,\n\tDomElement: DomElement,\n\tdocument: document,\n\twindow: window,\n\tSymbol: SymbolDefinition,\n\tPlacedSymbol: SymbolItem\n}))();\n\nif (paper.agent.node) {\n\trequire('./node/extend.js')(paper);\n}\n\nif (typeof define === 'function' && define.amd) {\n\tdefine('paper', paper);\n} else if (typeof module === 'object' && module) {\n\tmodule.exports = paper;\n}\n\nreturn paper;\n}.call(this, typeof self === 'object' ? self : null);\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}