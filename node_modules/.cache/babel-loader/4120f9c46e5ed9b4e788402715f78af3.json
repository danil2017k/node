{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.error.cause.js\");\n\nconst vm = require(\"vm\");\n\nconst webIDLConversions = require(\"webidl-conversions\");\n\nconst {\n  CSSStyleDeclaration\n} = require(\"cssstyle\");\n\nconst {\n  Performance: RawPerformance\n} = require(\"w3c-hr-time\");\n\nconst notImplemented = require(\"./not-implemented\");\n\nconst {\n  installInterfaces\n} = require(\"../living/interfaces\");\n\nconst {\n  define,\n  mixin\n} = require(\"../utils\");\n\nconst Element = require(\"../living/generated/Element\");\n\nconst EventTarget = require(\"../living/generated/EventTarget\");\n\nconst EventHandlerNonNull = require(\"../living/generated/EventHandlerNonNull\");\n\nconst IDLFunction = require(\"../living/generated/Function\");\n\nconst OnBeforeUnloadEventHandlerNonNull = require(\"../living/generated/OnBeforeUnloadEventHandlerNonNull\");\n\nconst OnErrorEventHandlerNonNull = require(\"../living/generated/OnErrorEventHandlerNonNull\");\n\nconst {\n  fireAPageTransitionEvent\n} = require(\"../living/helpers/page-transition-event\");\n\nconst namedPropertiesWindow = require(\"../living/named-properties-window\");\n\nconst postMessage = require(\"../living/post-message\");\n\nconst DOMException = require(\"domexception/webidl2js-wrapper\");\n\nconst {\n  btoa,\n  atob\n} = require(\"abab\");\n\nconst idlUtils = require(\"../living/generated/utils\");\n\nconst WebSocketImpl = require(\"../living/websockets/WebSocket-impl\").implementation;\n\nconst BarProp = require(\"../living/generated/BarProp\");\n\nconst documents = require(\"../living/documents.js\");\n\nconst External = require(\"../living/generated/External\");\n\nconst Navigator = require(\"../living/generated/Navigator\");\n\nconst Performance = require(\"../living/generated/Performance\");\n\nconst Screen = require(\"../living/generated/Screen\");\n\nconst Crypto = require(\"../living/generated/Crypto\");\n\nconst Storage = require(\"../living/generated/Storage\");\n\nconst Selection = require(\"../living/generated/Selection\");\n\nconst reportException = require(\"../living/helpers/runtime-script-errors\");\n\nconst {\n  getCurrentEventHandlerValue\n} = require(\"../living/helpers/create-event-accessor.js\");\n\nconst {\n  fireAnEvent\n} = require(\"../living/helpers/events\");\n\nconst SessionHistory = require(\"../living/window/SessionHistory\");\n\nconst {\n  forEachMatchingSheetRuleOfElement,\n  getResolvedValue,\n  propertiesWithResolvedValueImplemented,\n  SHADOW_DOM_PSEUDO_REGEXP\n} = require(\"../living/helpers/style-rules.js\");\n\nconst CustomElementRegistry = require(\"../living/generated/CustomElementRegistry\");\n\nconst jsGlobals = require(\"./js-globals.json\");\n\nconst GlobalEventHandlersImpl = require(\"../living/nodes/GlobalEventHandlers-impl\").implementation;\n\nconst WindowEventHandlersImpl = require(\"../living/nodes/WindowEventHandlers-impl\").implementation;\n\nconst events = new Set([// GlobalEventHandlers\n\"abort\", \"autocomplete\", \"autocompleteerror\", \"blur\", \"cancel\", \"canplay\", \"canplaythrough\", \"change\", \"click\", \"close\", \"contextmenu\", \"cuechange\", \"dblclick\", \"drag\", \"dragend\", \"dragenter\", \"dragleave\", \"dragover\", \"dragstart\", \"drop\", \"durationchange\", \"emptied\", \"ended\", \"focus\", \"input\", \"invalid\", \"keydown\", \"keypress\", \"keyup\", \"load\", \"loadeddata\", \"loadedmetadata\", \"loadstart\", \"mousedown\", \"mouseenter\", \"mouseleave\", \"mousemove\", \"mouseout\", \"mouseover\", \"mouseup\", \"wheel\", \"pause\", \"play\", \"playing\", \"progress\", \"ratechange\", \"reset\", \"resize\", \"scroll\", \"securitypolicyviolation\", \"seeked\", \"seeking\", \"select\", \"sort\", \"stalled\", \"submit\", \"suspend\", \"timeupdate\", \"toggle\", \"volumechange\", \"waiting\", // WindowEventHandlers\n\"afterprint\", \"beforeprint\", \"hashchange\", \"languagechange\", \"message\", \"messageerror\", \"offline\", \"online\", \"pagehide\", \"pageshow\", \"popstate\", \"rejectionhandled\", \"storage\", \"unhandledrejection\", \"unload\" // \"error\" and \"beforeunload\" are added separately\n]);\n\nexports.createWindow = function (options) {\n  return new Window(options);\n};\n\nconst jsGlobalEntriesToInstall = Object.entries(jsGlobals).filter(([name]) => name in global); // https://html.spec.whatwg.org/#the-window-object\n\nfunction setupWindow(windowInstance, {\n  runScripts\n}) {\n  if (runScripts === \"outside-only\" || runScripts === \"dangerously\") {\n    contextifyWindow(windowInstance); // Without this, these globals will only appear to scripts running inside the context using vm.runScript; they will\n    // not appear to scripts running from the outside, including to JSDOM implementation code.\n\n    for (const [globalName, globalPropDesc] of jsGlobalEntriesToInstall) {\n      const propDesc = { ...globalPropDesc,\n        value: vm.runInContext(globalName, windowInstance)\n      };\n      Object.defineProperty(windowInstance, globalName, propDesc);\n    }\n  } else {\n    // Without contextifying the window, none of the globals will exist. So, let's at least alias them from the Node.js\n    // context. See https://github.com/jsdom/jsdom/issues/2727 for more background and discussion.\n    for (const [globalName, globalPropDesc] of jsGlobalEntriesToInstall) {\n      const propDesc = { ...globalPropDesc,\n        value: global[globalName]\n      };\n      Object.defineProperty(windowInstance, globalName, propDesc);\n    }\n  }\n\n  installInterfaces(windowInstance, [\"Window\"]);\n  const EventTargetConstructor = windowInstance.EventTarget; // eslint-disable-next-line func-name-matching, func-style, no-shadow\n\n  const windowConstructor = function Window() {\n    throw new TypeError(\"Illegal constructor\");\n  };\n\n  Object.setPrototypeOf(windowConstructor, EventTargetConstructor);\n  Object.defineProperty(windowInstance, \"Window\", {\n    configurable: true,\n    writable: true,\n    value: windowConstructor\n  });\n  const windowPrototype = Object.create(EventTargetConstructor.prototype);\n  Object.defineProperties(windowPrototype, {\n    constructor: {\n      value: windowConstructor,\n      writable: true,\n      configurable: true\n    },\n    [Symbol.toStringTag]: {\n      value: \"Window\",\n      configurable: true\n    }\n  });\n  windowConstructor.prototype = windowPrototype;\n  Object.setPrototypeOf(windowInstance, windowPrototype);\n  EventTarget.setup(windowInstance, windowInstance);\n  mixin(windowInstance, WindowEventHandlersImpl.prototype);\n  mixin(windowInstance, GlobalEventHandlersImpl.prototype);\n\n  windowInstance._initGlobalEvents();\n\n  Object.defineProperty(windowInstance, \"onbeforeunload\", {\n    configurable: true,\n    enumerable: true,\n\n    get() {\n      return idlUtils.tryWrapperForImpl(getCurrentEventHandlerValue(this, \"beforeunload\"));\n    },\n\n    set(V) {\n      if (!idlUtils.isObject(V)) {\n        V = null;\n      } else {\n        V = OnBeforeUnloadEventHandlerNonNull.convert(windowInstance, V, {\n          context: \"Failed to set the 'onbeforeunload' property on 'Window': The provided value\"\n        });\n      }\n\n      this._setEventHandlerFor(\"beforeunload\", V);\n    }\n\n  });\n  Object.defineProperty(windowInstance, \"onerror\", {\n    configurable: true,\n    enumerable: true,\n\n    get() {\n      return idlUtils.tryWrapperForImpl(getCurrentEventHandlerValue(this, \"error\"));\n    },\n\n    set(V) {\n      if (!idlUtils.isObject(V)) {\n        V = null;\n      } else {\n        V = OnErrorEventHandlerNonNull.convert(windowInstance, V, {\n          context: \"Failed to set the 'onerror' property on 'Window': The provided value\"\n        });\n      }\n\n      this._setEventHandlerFor(\"error\", V);\n    }\n\n  });\n\n  for (const event of events) {\n    Object.defineProperty(windowInstance, `on${event}`, {\n      configurable: true,\n      enumerable: true,\n\n      get() {\n        return idlUtils.tryWrapperForImpl(getCurrentEventHandlerValue(this, event));\n      },\n\n      set(V) {\n        if (!idlUtils.isObject(V)) {\n          V = null;\n        } else {\n          V = EventHandlerNonNull.convert(windowInstance, V, {\n            context: `Failed to set the 'on${event}' property on 'Window': The provided value`\n          });\n        }\n\n        this._setEventHandlerFor(event, V);\n      }\n\n    });\n  }\n\n  windowInstance._globalObject = windowInstance;\n} // NOTE: per https://heycam.github.io/webidl/#Global, all properties on the Window object must be own-properties.\n// That is why we assign everything inside of the constructor, instead of using a shared prototype.\n// You can verify this in e.g. Firefox or Internet Explorer, which do a good job with Web IDL compliance.\n\n\nfunction Window(options) {\n  setupWindow(this, {\n    runScripts: options.runScripts\n  });\n  const rawPerformance = new RawPerformance();\n  const windowInitialized = rawPerformance.now();\n  const window = this; // ### PRIVATE DATA PROPERTIES\n\n  this._resourceLoader = options.resourceLoader; // vm initialization is deferred until script processing is activated\n\n  this._globalProxy = this;\n  Object.defineProperty(idlUtils.implForWrapper(this), idlUtils.wrapperSymbol, {\n    get: () => this._globalProxy\n  }); // List options explicitly to be clear which are passed through\n\n  this._document = documents.createWrapper(window, {\n    parsingMode: options.parsingMode,\n    contentType: options.contentType,\n    encoding: options.encoding,\n    cookieJar: options.cookieJar,\n    url: options.url,\n    lastModified: options.lastModified,\n    referrer: options.referrer,\n    parseOptions: options.parseOptions,\n    defaultView: this._globalProxy,\n    global: this,\n    parentOrigin: options.parentOrigin\n  }, {\n    alwaysUseDocumentClass: true\n  });\n\n  if (vm.isContext(window)) {\n    const documentImpl = idlUtils.implForWrapper(window._document);\n    documentImpl._defaultView = window._globalProxy = vm.runInContext(\"this\", window);\n  }\n\n  const documentOrigin = idlUtils.implForWrapper(this._document)._origin;\n\n  this._origin = documentOrigin; // https://html.spec.whatwg.org/#session-history\n\n  this._sessionHistory = new SessionHistory({\n    document: idlUtils.implForWrapper(this._document),\n    url: idlUtils.implForWrapper(this._document)._URL,\n    stateObject: null\n  }, this);\n  this._virtualConsole = options.virtualConsole;\n  this._runScripts = options.runScripts; // Set up the window as if it's a top level window.\n  // If it's not, then references will be corrected by frame/iframe code.\n\n  this._parent = this._top = this._globalProxy;\n  this._frameElement = null; // This implements window.frames.length, since window.frames returns a\n  // self reference to the window object.  This value is incremented in the\n  // HTMLFrameElement implementation.\n\n  this._length = 0; // https://dom.spec.whatwg.org/#window-current-event\n\n  this._currentEvent = undefined;\n  this._pretendToBeVisual = options.pretendToBeVisual;\n  this._storageQuota = options.storageQuota; // Some properties (such as localStorage and sessionStorage) share data\n  // between windows in the same origin. This object is intended\n  // to contain such data.\n\n  if (options.commonForOrigin && options.commonForOrigin[documentOrigin]) {\n    this._commonForOrigin = options.commonForOrigin;\n  } else {\n    this._commonForOrigin = {\n      [documentOrigin]: {\n        localStorageArea: new Map(),\n        sessionStorageArea: new Map(),\n        windowsInSameOrigin: [this]\n      }\n    };\n  }\n\n  this._currentOriginData = this._commonForOrigin[documentOrigin]; // ### WEB STORAGE\n\n  this._localStorage = Storage.create(window, [], {\n    associatedWindow: this,\n    storageArea: this._currentOriginData.localStorageArea,\n    type: \"localStorage\",\n    url: this._document.documentURI,\n    storageQuota: this._storageQuota\n  });\n  this._sessionStorage = Storage.create(window, [], {\n    associatedWindow: this,\n    storageArea: this._currentOriginData.sessionStorageArea,\n    type: \"sessionStorage\",\n    url: this._document.documentURI,\n    storageQuota: this._storageQuota\n  }); // ### SELECTION\n  // https://w3c.github.io/selection-api/#dfn-selection\n\n  this._selection = Selection.createImpl(window); // https://w3c.github.io/selection-api/#dom-window\n\n  this.getSelection = function () {\n    return window._selection;\n  }; // ### GETTERS\n\n\n  const locationbar = BarProp.create(window);\n  const menubar = BarProp.create(window);\n  const personalbar = BarProp.create(window);\n  const scrollbars = BarProp.create(window);\n  const statusbar = BarProp.create(window);\n  const toolbar = BarProp.create(window);\n  const external = External.create(window);\n  const navigator = Navigator.create(window, [], {\n    userAgent: this._resourceLoader._userAgent\n  });\n  const performance = Performance.create(window, [], {\n    rawPerformance\n  });\n  const screen = Screen.create(window);\n  const crypto = Crypto.create(window);\n  const customElementRegistry = CustomElementRegistry.create(window);\n  define(this, {\n    get length() {\n      return window._length;\n    },\n\n    get window() {\n      return window._globalProxy;\n    },\n\n    get frameElement() {\n      return idlUtils.wrapperForImpl(window._frameElement);\n    },\n\n    get frames() {\n      return window._globalProxy;\n    },\n\n    get self() {\n      return window._globalProxy;\n    },\n\n    get parent() {\n      return window._parent;\n    },\n\n    get top() {\n      return window._top;\n    },\n\n    get document() {\n      return window._document;\n    },\n\n    get external() {\n      return external;\n    },\n\n    get location() {\n      return idlUtils.wrapperForImpl(idlUtils.implForWrapper(window._document)._location);\n    },\n\n    get history() {\n      return idlUtils.wrapperForImpl(idlUtils.implForWrapper(window._document)._history);\n    },\n\n    get navigator() {\n      return navigator;\n    },\n\n    get locationbar() {\n      return locationbar;\n    },\n\n    get menubar() {\n      return menubar;\n    },\n\n    get personalbar() {\n      return personalbar;\n    },\n\n    get scrollbars() {\n      return scrollbars;\n    },\n\n    get statusbar() {\n      return statusbar;\n    },\n\n    get toolbar() {\n      return toolbar;\n    },\n\n    get performance() {\n      return performance;\n    },\n\n    get screen() {\n      return screen;\n    },\n\n    get crypto() {\n      return crypto;\n    },\n\n    get origin() {\n      return window._origin;\n    },\n\n    // The origin IDL attribute is defined with [Replaceable].\n    set origin(value) {\n      Object.defineProperty(this, \"origin\", {\n        value,\n        writable: true,\n        enumerable: true,\n        configurable: true\n      });\n    },\n\n    get localStorage() {\n      if (idlUtils.implForWrapper(this._document)._origin === \"null\") {\n        throw DOMException.create(window, [\"localStorage is not available for opaque origins\", \"SecurityError\"]);\n      }\n\n      return this._localStorage;\n    },\n\n    get sessionStorage() {\n      if (idlUtils.implForWrapper(this._document)._origin === \"null\") {\n        throw DOMException.create(window, [\"sessionStorage is not available for opaque origins\", \"SecurityError\"]);\n      }\n\n      return this._sessionStorage;\n    },\n\n    get customElements() {\n      return customElementRegistry;\n    },\n\n    get event() {\n      return window._currentEvent ? idlUtils.wrapperForImpl(window._currentEvent) : undefined;\n    },\n\n    set event(value) {\n      Object.defineProperty(window, \"event\", {\n        configurable: true,\n        enumerable: true,\n        writable: true,\n        value\n      });\n    }\n\n  });\n  namedPropertiesWindow.initializeWindow(this, this._globalProxy); // ### METHODS\n  // https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#timers\n  // In the spec the list of active timers is a set of IDs. We make it a map of IDs to Node.js timer objects, so that\n  // we can call Node.js-side clearTimeout() when clearing, and thus allow process shutdown faster.\n\n  const listOfActiveTimers = new Map();\n  let latestTimerId = 0;\n\n  this.setTimeout = function (handler, timeout = 0, ...args) {\n    if (typeof handler !== \"function\") {\n      handler = webIDLConversions.DOMString(handler);\n    }\n\n    timeout = webIDLConversions.long(timeout);\n    return timerInitializationSteps(handler, timeout, args, {\n      methodContext: window,\n      repeat: false\n    });\n  };\n\n  this.setInterval = function (handler, timeout = 0, ...args) {\n    if (typeof handler !== \"function\") {\n      handler = webIDLConversions.DOMString(handler);\n    }\n\n    timeout = webIDLConversions.long(timeout);\n    return timerInitializationSteps(handler, timeout, args, {\n      methodContext: window,\n      repeat: true\n    });\n  };\n\n  this.clearTimeout = function (handle = 0) {\n    handle = webIDLConversions.long(handle);\n    const nodejsTimer = listOfActiveTimers.get(handle);\n\n    if (nodejsTimer) {\n      clearTimeout(nodejsTimer);\n      listOfActiveTimers.delete(handle);\n    }\n  };\n\n  this.clearInterval = function (handle = 0) {\n    handle = webIDLConversions.long(handle);\n    const nodejsTimer = listOfActiveTimers.get(handle);\n\n    if (nodejsTimer) {\n      // We use setTimeout() in timerInitializationSteps even for this.setInterval().\n      clearTimeout(nodejsTimer);\n      listOfActiveTimers.delete(handle);\n    }\n  };\n\n  function timerInitializationSteps(handler, timeout, args, {\n    methodContext,\n    repeat,\n    previousHandle\n  }) {\n    // This appears to be unspecced, but matches browser behavior for close()ed windows.\n    if (!methodContext._document) {\n      return 0;\n    } // TODO: implement timer nesting level behavior.\n\n\n    const methodContextProxy = methodContext._globalProxy;\n    const handle = previousHandle !== undefined ? previousHandle : ++latestTimerId;\n\n    function task() {\n      if (!listOfActiveTimers.has(handle)) {\n        return;\n      }\n\n      try {\n        if (typeof handler === \"function\") {\n          handler.apply(methodContextProxy, args);\n        } else if (window._runScripts === \"dangerously\") {\n          vm.runInContext(handler, window, {\n            filename: window.location.href,\n            displayErrors: false\n          });\n        }\n      } catch (e) {\n        reportException(window, e, window.location.href);\n      }\n\n      if (listOfActiveTimers.has(handle)) {\n        if (repeat) {\n          timerInitializationSteps(handler, timeout, args, {\n            methodContext,\n            repeat: true,\n            previousHandle: handle\n          });\n        } else {\n          listOfActiveTimers.delete(handle);\n        }\n      }\n    }\n\n    if (timeout < 0) {\n      timeout = 0;\n    }\n\n    const nodejsTimer = setTimeout(task, timeout);\n    listOfActiveTimers.set(handle, nodejsTimer);\n    return handle;\n  } // https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#microtask-queuing\n\n\n  this.queueMicrotask = function (callback) {\n    callback = IDLFunction.convert(this, callback);\n    queueMicrotask(() => {\n      try {\n        callback();\n      } catch (e) {\n        reportException(window, e, window.location.href);\n      }\n    });\n  }; // https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#animation-frames\n\n\n  let animationFrameCallbackId = 0;\n  const mapOfAnimationFrameCallbacks = new Map();\n  let animationFrameNodejsInterval = null; // Unlike the spec, where an animation frame happens every 60 Hz regardless, we optimize so that if there are no\n  // requestAnimationFrame() calls outstanding, we don't fire the timer. This helps us track that.\n\n  let numberOfOngoingAnimationFrameCallbacks = 0;\n\n  if (this._pretendToBeVisual) {\n    this.requestAnimationFrame = function (callback) {\n      callback = IDLFunction.convert(this, callback);\n      const handle = ++animationFrameCallbackId;\n      mapOfAnimationFrameCallbacks.set(handle, callback);\n      ++numberOfOngoingAnimationFrameCallbacks;\n\n      if (numberOfOngoingAnimationFrameCallbacks === 1) {\n        animationFrameNodejsInterval = setInterval(() => {\n          runAnimationFrameCallbacks(rawPerformance.now() - windowInitialized);\n        }, 1000 / 60);\n      }\n\n      return handle;\n    };\n\n    this.cancelAnimationFrame = function (handle) {\n      handle = webIDLConversions[\"unsigned long\"](handle);\n      removeAnimationFrameCallback(handle);\n    };\n\n    function runAnimationFrameCallbacks(now) {\n      // Converting to an array is important to get a sync snapshot and thus match spec semantics.\n      const callbackHandles = [...mapOfAnimationFrameCallbacks.keys()];\n\n      for (const handle of callbackHandles) {\n        // This has() can be false if a callback calls cancelAnimationFrame().\n        if (mapOfAnimationFrameCallbacks.has(handle)) {\n          const callback = mapOfAnimationFrameCallbacks.get(handle);\n          removeAnimationFrameCallback(handle);\n\n          try {\n            callback(now);\n          } catch (e) {\n            reportException(window, e, window.location.href);\n          }\n        }\n      }\n    }\n\n    function removeAnimationFrameCallback(handle) {\n      if (mapOfAnimationFrameCallbacks.has(handle)) {\n        --numberOfOngoingAnimationFrameCallbacks;\n\n        if (numberOfOngoingAnimationFrameCallbacks === 0) {\n          clearInterval(animationFrameNodejsInterval);\n        }\n      }\n\n      mapOfAnimationFrameCallbacks.delete(handle);\n    }\n  }\n\n  function stopAllTimers() {\n    for (const nodejsTimer of listOfActiveTimers.values()) {\n      clearTimeout(nodejsTimer);\n    }\n\n    listOfActiveTimers.clear();\n    clearInterval(animationFrameNodejsInterval);\n  }\n\n  function Option(text, value, defaultSelected, selected) {\n    if (text === undefined) {\n      text = \"\";\n    }\n\n    text = webIDLConversions.DOMString(text);\n\n    if (value !== undefined) {\n      value = webIDLConversions.DOMString(value);\n    }\n\n    defaultSelected = webIDLConversions.boolean(defaultSelected);\n    selected = webIDLConversions.boolean(selected);\n\n    const option = window._document.createElement(\"option\");\n\n    const impl = idlUtils.implForWrapper(option);\n\n    if (text !== \"\") {\n      impl.text = text;\n    }\n\n    if (value !== undefined) {\n      impl.setAttributeNS(null, \"value\", value);\n    }\n\n    if (defaultSelected) {\n      impl.setAttributeNS(null, \"selected\", \"\");\n    }\n\n    impl._selectedness = selected;\n    return option;\n  }\n\n  Object.defineProperty(Option, \"prototype\", {\n    value: this.HTMLOptionElement.prototype,\n    configurable: false,\n    enumerable: false,\n    writable: false\n  });\n  Object.defineProperty(window, \"Option\", {\n    value: Option,\n    configurable: true,\n    enumerable: false,\n    writable: true\n  });\n\n  function Image(...args) {\n    const img = window._document.createElement(\"img\");\n\n    const impl = idlUtils.implForWrapper(img);\n\n    if (args.length > 0) {\n      impl.setAttributeNS(null, \"width\", String(args[0]));\n    }\n\n    if (args.length > 1) {\n      impl.setAttributeNS(null, \"height\", String(args[1]));\n    }\n\n    return img;\n  }\n\n  Object.defineProperty(Image, \"prototype\", {\n    value: this.HTMLImageElement.prototype,\n    configurable: false,\n    enumerable: false,\n    writable: false\n  });\n  Object.defineProperty(window, \"Image\", {\n    value: Image,\n    configurable: true,\n    enumerable: false,\n    writable: true\n  });\n\n  function Audio(src) {\n    const audio = window._document.createElement(\"audio\");\n\n    const impl = idlUtils.implForWrapper(audio);\n    impl.setAttributeNS(null, \"preload\", \"auto\");\n\n    if (src !== undefined) {\n      impl.setAttributeNS(null, \"src\", String(src));\n    }\n\n    return audio;\n  }\n\n  Object.defineProperty(Audio, \"prototype\", {\n    value: this.HTMLAudioElement.prototype,\n    configurable: false,\n    enumerable: false,\n    writable: false\n  });\n  Object.defineProperty(window, \"Audio\", {\n    value: Audio,\n    configurable: true,\n    enumerable: false,\n    writable: true\n  });\n  this.postMessage = postMessage(window);\n\n  this.atob = function (str) {\n    const result = atob(str);\n\n    if (result === null) {\n      throw DOMException.create(window, [\"The string to be decoded contains invalid characters.\", \"InvalidCharacterError\"]);\n    }\n\n    return result;\n  };\n\n  this.btoa = function (str) {\n    const result = btoa(str);\n\n    if (result === null) {\n      throw DOMException.create(window, [\"The string to be encoded contains invalid characters.\", \"InvalidCharacterError\"]);\n    }\n\n    return result;\n  };\n\n  this.stop = function () {\n    const manager = idlUtils.implForWrapper(this._document)._requestManager;\n\n    if (manager) {\n      manager.close();\n    }\n  };\n\n  this.close = function () {\n    // Recursively close child frame windows, then ourselves (depth-first).\n    for (let i = 0; i < this.length; ++i) {\n      this[i].close();\n    } // Clear out all listeners. Any in-flight or upcoming events should not get delivered.\n\n\n    idlUtils.implForWrapper(this)._eventListeners = Object.create(null);\n\n    if (this._document) {\n      if (this._document.body) {\n        this._document.body.innerHTML = \"\";\n      }\n\n      if (this._document.close) {\n        // It's especially important to clear out the listeners here because document.close() causes a \"load\" event to\n        // fire.\n        idlUtils.implForWrapper(this._document)._eventListeners = Object.create(null);\n\n        this._document.close();\n      }\n\n      const doc = idlUtils.implForWrapper(this._document);\n\n      if (doc._requestManager) {\n        doc._requestManager.close();\n      }\n\n      delete this._document;\n    }\n\n    stopAllTimers();\n    WebSocketImpl.cleanUpWindow(this);\n  };\n\n  this.getComputedStyle = function (elt, pseudoElt = undefined) {\n    elt = Element.convert(this, elt);\n\n    if (pseudoElt !== undefined && pseudoElt !== null) {\n      pseudoElt = webIDLConversions.DOMString(pseudoElt);\n    }\n\n    if (pseudoElt !== undefined && pseudoElt !== null && pseudoElt !== \"\") {\n      // TODO: Parse pseudoElt\n      if (SHADOW_DOM_PSEUDO_REGEXP.test(pseudoElt)) {\n        throw new TypeError(\"Tried to get the computed style of a Shadow DOM pseudo-element.\");\n      }\n\n      notImplemented(\"window.computedStyle(elt, pseudoElt)\", this);\n    }\n\n    const declaration = new CSSStyleDeclaration();\n    const {\n      forEach\n    } = Array.prototype;\n    const {\n      style\n    } = elt;\n    forEachMatchingSheetRuleOfElement(elt, rule => {\n      forEach.call(rule.style, property => {\n        declaration.setProperty(property, rule.style.getPropertyValue(property), rule.style.getPropertyPriority(property));\n      });\n    }); // https://drafts.csswg.org/cssom/#dom-window-getcomputedstyle\n\n    const declarations = Object.keys(propertiesWithResolvedValueImplemented);\n    forEach.call(declarations, property => {\n      declaration.setProperty(property, getResolvedValue(elt, property));\n    });\n    forEach.call(style, property => {\n      declaration.setProperty(property, style.getPropertyValue(property), style.getPropertyPriority(property));\n    });\n    return declaration;\n  };\n\n  this.getSelection = function () {\n    return window._document.getSelection();\n  }; // The captureEvents() and releaseEvents() methods must do nothing\n\n\n  this.captureEvents = function () {};\n\n  this.releaseEvents = function () {}; // ### PUBLIC DATA PROPERTIES (TODO: should be getters)\n\n\n  function wrapConsoleMethod(method) {\n    return (...args) => {\n      window._virtualConsole.emit(method, ...args);\n    };\n  }\n\n  this.console = {\n    assert: wrapConsoleMethod(\"assert\"),\n    clear: wrapConsoleMethod(\"clear\"),\n    count: wrapConsoleMethod(\"count\"),\n    countReset: wrapConsoleMethod(\"countReset\"),\n    debug: wrapConsoleMethod(\"debug\"),\n    dir: wrapConsoleMethod(\"dir\"),\n    dirxml: wrapConsoleMethod(\"dirxml\"),\n    error: wrapConsoleMethod(\"error\"),\n    group: wrapConsoleMethod(\"group\"),\n    groupCollapsed: wrapConsoleMethod(\"groupCollapsed\"),\n    groupEnd: wrapConsoleMethod(\"groupEnd\"),\n    info: wrapConsoleMethod(\"info\"),\n    log: wrapConsoleMethod(\"log\"),\n    table: wrapConsoleMethod(\"table\"),\n    time: wrapConsoleMethod(\"time\"),\n    timeLog: wrapConsoleMethod(\"timeLog\"),\n    timeEnd: wrapConsoleMethod(\"timeEnd\"),\n    trace: wrapConsoleMethod(\"trace\"),\n    warn: wrapConsoleMethod(\"warn\")\n  };\n\n  function notImplementedMethod(name) {\n    return function () {\n      notImplemented(name, window);\n    };\n  }\n\n  define(this, {\n    name: \"\",\n    status: \"\",\n    devicePixelRatio: 1,\n    innerWidth: 1024,\n    innerHeight: 768,\n    outerWidth: 1024,\n    outerHeight: 768,\n    pageXOffset: 0,\n    pageYOffset: 0,\n    screenX: 0,\n    screenLeft: 0,\n    screenY: 0,\n    screenTop: 0,\n    scrollX: 0,\n    scrollY: 0,\n    alert: notImplementedMethod(\"window.alert\"),\n    blur: notImplementedMethod(\"window.blur\"),\n    confirm: notImplementedMethod(\"window.confirm\"),\n    focus: notImplementedMethod(\"window.focus\"),\n    moveBy: notImplementedMethod(\"window.moveBy\"),\n    moveTo: notImplementedMethod(\"window.moveTo\"),\n    open: notImplementedMethod(\"window.open\"),\n    print: notImplementedMethod(\"window.print\"),\n    prompt: notImplementedMethod(\"window.prompt\"),\n    resizeBy: notImplementedMethod(\"window.resizeBy\"),\n    resizeTo: notImplementedMethod(\"window.resizeTo\"),\n    scroll: notImplementedMethod(\"window.scroll\"),\n    scrollBy: notImplementedMethod(\"window.scrollBy\"),\n    scrollTo: notImplementedMethod(\"window.scrollTo\")\n  }); // ### INITIALIZATION\n\n  process.nextTick(() => {\n    if (!window.document) {\n      return; // window might've been closed already\n    }\n\n    if (window.document.readyState === \"complete\") {\n      fireAnEvent(\"load\", window, undefined, {}, true);\n    } else {\n      window.document.addEventListener(\"load\", () => {\n        fireAnEvent(\"load\", window, undefined, {}, true);\n\n        if (!window._document) {\n          return; // window might've been closed already\n        }\n\n        const documentImpl = idlUtils.implForWrapper(window._document);\n\n        if (!documentImpl._pageShowingFlag) {\n          documentImpl._pageShowingFlag = true;\n          fireAPageTransitionEvent(\"pageshow\", window, false);\n        }\n      });\n    }\n  });\n}\n\nfunction contextifyWindow(window) {\n  if (vm.isContext(window)) {\n    return;\n  }\n\n  vm.createContext(window);\n}","map":{"version":3,"names":["vm","require","webIDLConversions","CSSStyleDeclaration","Performance","RawPerformance","notImplemented","installInterfaces","define","mixin","Element","EventTarget","EventHandlerNonNull","IDLFunction","OnBeforeUnloadEventHandlerNonNull","OnErrorEventHandlerNonNull","fireAPageTransitionEvent","namedPropertiesWindow","postMessage","DOMException","btoa","atob","idlUtils","WebSocketImpl","implementation","BarProp","documents","External","Navigator","Screen","Crypto","Storage","Selection","reportException","getCurrentEventHandlerValue","fireAnEvent","SessionHistory","forEachMatchingSheetRuleOfElement","getResolvedValue","propertiesWithResolvedValueImplemented","SHADOW_DOM_PSEUDO_REGEXP","CustomElementRegistry","jsGlobals","GlobalEventHandlersImpl","WindowEventHandlersImpl","events","Set","exports","createWindow","options","Window","jsGlobalEntriesToInstall","Object","entries","filter","name","global","setupWindow","windowInstance","runScripts","contextifyWindow","globalName","globalPropDesc","propDesc","value","runInContext","defineProperty","EventTargetConstructor","windowConstructor","TypeError","setPrototypeOf","configurable","writable","windowPrototype","create","prototype","defineProperties","constructor","Symbol","toStringTag","setup","_initGlobalEvents","enumerable","get","tryWrapperForImpl","set","V","isObject","convert","context","_setEventHandlerFor","event","_globalObject","rawPerformance","windowInitialized","now","window","_resourceLoader","resourceLoader","_globalProxy","implForWrapper","wrapperSymbol","_document","createWrapper","parsingMode","contentType","encoding","cookieJar","url","lastModified","referrer","parseOptions","defaultView","parentOrigin","alwaysUseDocumentClass","isContext","documentImpl","_defaultView","documentOrigin","_origin","_sessionHistory","document","_URL","stateObject","_virtualConsole","virtualConsole","_runScripts","_parent","_top","_frameElement","_length","_currentEvent","undefined","_pretendToBeVisual","pretendToBeVisual","_storageQuota","storageQuota","commonForOrigin","_commonForOrigin","localStorageArea","Map","sessionStorageArea","windowsInSameOrigin","_currentOriginData","_localStorage","associatedWindow","storageArea","type","documentURI","_sessionStorage","_selection","createImpl","getSelection","locationbar","menubar","personalbar","scrollbars","statusbar","toolbar","external","navigator","userAgent","_userAgent","performance","screen","crypto","customElementRegistry","length","frameElement","wrapperForImpl","frames","self","parent","top","location","_location","history","_history","origin","localStorage","sessionStorage","customElements","initializeWindow","listOfActiveTimers","latestTimerId","setTimeout","handler","timeout","args","DOMString","long","timerInitializationSteps","methodContext","repeat","setInterval","clearTimeout","handle","nodejsTimer","delete","clearInterval","previousHandle","methodContextProxy","task","has","apply","filename","href","displayErrors","e","queueMicrotask","callback","animationFrameCallbackId","mapOfAnimationFrameCallbacks","animationFrameNodejsInterval","numberOfOngoingAnimationFrameCallbacks","requestAnimationFrame","runAnimationFrameCallbacks","cancelAnimationFrame","removeAnimationFrameCallback","callbackHandles","keys","stopAllTimers","values","clear","Option","text","defaultSelected","selected","boolean","option","createElement","impl","setAttributeNS","_selectedness","HTMLOptionElement","Image","img","String","HTMLImageElement","Audio","src","audio","HTMLAudioElement","str","result","stop","manager","_requestManager","close","i","_eventListeners","body","innerHTML","doc","cleanUpWindow","getComputedStyle","elt","pseudoElt","test","declaration","forEach","Array","style","rule","call","property","setProperty","getPropertyValue","getPropertyPriority","declarations","captureEvents","releaseEvents","wrapConsoleMethod","method","emit","console","assert","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeLog","timeEnd","trace","warn","notImplementedMethod","status","devicePixelRatio","innerWidth","innerHeight","outerWidth","outerHeight","pageXOffset","pageYOffset","screenX","screenLeft","screenY","screenTop","scrollX","scrollY","alert","blur","confirm","focus","moveBy","moveTo","open","print","prompt","resizeBy","resizeTo","scroll","scrollBy","scrollTo","process","nextTick","readyState","addEventListener","_pageShowingFlag","createContext"],"sources":["C:/Users/Danil/Desktop/122/node_modules/jsdom/lib/jsdom/browser/Window.js"],"sourcesContent":["\"use strict\";\nconst vm = require(\"vm\");\nconst webIDLConversions = require(\"webidl-conversions\");\nconst { CSSStyleDeclaration } = require(\"cssstyle\");\nconst { Performance: RawPerformance } = require(\"w3c-hr-time\");\nconst notImplemented = require(\"./not-implemented\");\nconst { installInterfaces } = require(\"../living/interfaces\");\nconst { define, mixin } = require(\"../utils\");\nconst Element = require(\"../living/generated/Element\");\nconst EventTarget = require(\"../living/generated/EventTarget\");\nconst EventHandlerNonNull = require(\"../living/generated/EventHandlerNonNull\");\nconst IDLFunction = require(\"../living/generated/Function\");\nconst OnBeforeUnloadEventHandlerNonNull = require(\"../living/generated/OnBeforeUnloadEventHandlerNonNull\");\nconst OnErrorEventHandlerNonNull = require(\"../living/generated/OnErrorEventHandlerNonNull\");\nconst { fireAPageTransitionEvent } = require(\"../living/helpers/page-transition-event\");\nconst namedPropertiesWindow = require(\"../living/named-properties-window\");\nconst postMessage = require(\"../living/post-message\");\nconst DOMException = require(\"domexception/webidl2js-wrapper\");\nconst { btoa, atob } = require(\"abab\");\nconst idlUtils = require(\"../living/generated/utils\");\nconst WebSocketImpl = require(\"../living/websockets/WebSocket-impl\").implementation;\nconst BarProp = require(\"../living/generated/BarProp\");\nconst documents = require(\"../living/documents.js\");\nconst External = require(\"../living/generated/External\");\nconst Navigator = require(\"../living/generated/Navigator\");\nconst Performance = require(\"../living/generated/Performance\");\nconst Screen = require(\"../living/generated/Screen\");\nconst Crypto = require(\"../living/generated/Crypto\");\nconst Storage = require(\"../living/generated/Storage\");\nconst Selection = require(\"../living/generated/Selection\");\nconst reportException = require(\"../living/helpers/runtime-script-errors\");\nconst { getCurrentEventHandlerValue } = require(\"../living/helpers/create-event-accessor.js\");\nconst { fireAnEvent } = require(\"../living/helpers/events\");\nconst SessionHistory = require(\"../living/window/SessionHistory\");\nconst { forEachMatchingSheetRuleOfElement, getResolvedValue, propertiesWithResolvedValueImplemented,\n  SHADOW_DOM_PSEUDO_REGEXP } = require(\"../living/helpers/style-rules.js\");\nconst CustomElementRegistry = require(\"../living/generated/CustomElementRegistry\");\nconst jsGlobals = require(\"./js-globals.json\");\n\nconst GlobalEventHandlersImpl = require(\"../living/nodes/GlobalEventHandlers-impl\").implementation;\nconst WindowEventHandlersImpl = require(\"../living/nodes/WindowEventHandlers-impl\").implementation;\n\nconst events = new Set([\n  // GlobalEventHandlers\n  \"abort\", \"autocomplete\",\n  \"autocompleteerror\", \"blur\",\n  \"cancel\", \"canplay\", \"canplaythrough\",\n  \"change\", \"click\",\n  \"close\", \"contextmenu\",\n  \"cuechange\", \"dblclick\",\n  \"drag\", \"dragend\",\n  \"dragenter\",\n  \"dragleave\", \"dragover\",\n  \"dragstart\", \"drop\",\n  \"durationchange\", \"emptied\",\n  \"ended\", \"focus\",\n  \"input\", \"invalid\",\n  \"keydown\", \"keypress\",\n  \"keyup\", \"load\", \"loadeddata\",\n  \"loadedmetadata\", \"loadstart\",\n  \"mousedown\", \"mouseenter\",\n  \"mouseleave\", \"mousemove\",\n  \"mouseout\", \"mouseover\",\n  \"mouseup\", \"wheel\",\n  \"pause\", \"play\",\n  \"playing\", \"progress\",\n  \"ratechange\", \"reset\",\n  \"resize\", \"scroll\",\n  \"securitypolicyviolation\",\n  \"seeked\", \"seeking\",\n  \"select\", \"sort\", \"stalled\",\n  \"submit\", \"suspend\",\n  \"timeupdate\", \"toggle\",\n  \"volumechange\", \"waiting\",\n\n  // WindowEventHandlers\n  \"afterprint\",\n  \"beforeprint\",\n  \"hashchange\",\n  \"languagechange\",\n  \"message\",\n  \"messageerror\",\n  \"offline\",\n  \"online\",\n  \"pagehide\",\n  \"pageshow\",\n  \"popstate\",\n  \"rejectionhandled\",\n  \"storage\",\n  \"unhandledrejection\",\n  \"unload\"\n\n  // \"error\" and \"beforeunload\" are added separately\n]);\n\nexports.createWindow = function (options) {\n  return new Window(options);\n};\n\nconst jsGlobalEntriesToInstall = Object.entries(jsGlobals).filter(([name]) => name in global);\n\n// https://html.spec.whatwg.org/#the-window-object\nfunction setupWindow(windowInstance, { runScripts }) {\n  if (runScripts === \"outside-only\" || runScripts === \"dangerously\") {\n    contextifyWindow(windowInstance);\n\n    // Without this, these globals will only appear to scripts running inside the context using vm.runScript; they will\n    // not appear to scripts running from the outside, including to JSDOM implementation code.\n    for (const [globalName, globalPropDesc] of jsGlobalEntriesToInstall) {\n      const propDesc = { ...globalPropDesc, value: vm.runInContext(globalName, windowInstance) };\n      Object.defineProperty(windowInstance, globalName, propDesc);\n    }\n  } else {\n    // Without contextifying the window, none of the globals will exist. So, let's at least alias them from the Node.js\n    // context. See https://github.com/jsdom/jsdom/issues/2727 for more background and discussion.\n    for (const [globalName, globalPropDesc] of jsGlobalEntriesToInstall) {\n      const propDesc = { ...globalPropDesc, value: global[globalName] };\n      Object.defineProperty(windowInstance, globalName, propDesc);\n    }\n  }\n\n  installInterfaces(windowInstance, [\"Window\"]);\n\n  const EventTargetConstructor = windowInstance.EventTarget;\n\n  // eslint-disable-next-line func-name-matching, func-style, no-shadow\n  const windowConstructor = function Window() {\n    throw new TypeError(\"Illegal constructor\");\n  };\n  Object.setPrototypeOf(windowConstructor, EventTargetConstructor);\n\n  Object.defineProperty(windowInstance, \"Window\", {\n    configurable: true,\n    writable: true,\n    value: windowConstructor\n  });\n\n  const windowPrototype = Object.create(EventTargetConstructor.prototype);\n  Object.defineProperties(windowPrototype, {\n    constructor: {\n      value: windowConstructor,\n      writable: true,\n      configurable: true\n    },\n    [Symbol.toStringTag]: {\n      value: \"Window\",\n      configurable: true\n    }\n  });\n\n  windowConstructor.prototype = windowPrototype;\n  Object.setPrototypeOf(windowInstance, windowPrototype);\n\n  EventTarget.setup(windowInstance, windowInstance);\n  mixin(windowInstance, WindowEventHandlersImpl.prototype);\n  mixin(windowInstance, GlobalEventHandlersImpl.prototype);\n  windowInstance._initGlobalEvents();\n\n  Object.defineProperty(windowInstance, \"onbeforeunload\", {\n    configurable: true,\n    enumerable: true,\n    get() {\n      return idlUtils.tryWrapperForImpl(getCurrentEventHandlerValue(this, \"beforeunload\"));\n    },\n    set(V) {\n      if (!idlUtils.isObject(V)) {\n        V = null;\n      } else {\n        V = OnBeforeUnloadEventHandlerNonNull.convert(windowInstance, V, {\n          context: \"Failed to set the 'onbeforeunload' property on 'Window': The provided value\"\n        });\n      }\n      this._setEventHandlerFor(\"beforeunload\", V);\n    }\n  });\n\n  Object.defineProperty(windowInstance, \"onerror\", {\n    configurable: true,\n    enumerable: true,\n    get() {\n      return idlUtils.tryWrapperForImpl(getCurrentEventHandlerValue(this, \"error\"));\n    },\n    set(V) {\n      if (!idlUtils.isObject(V)) {\n        V = null;\n      } else {\n        V = OnErrorEventHandlerNonNull.convert(windowInstance, V, {\n          context: \"Failed to set the 'onerror' property on 'Window': The provided value\"\n        });\n      }\n      this._setEventHandlerFor(\"error\", V);\n    }\n  });\n\n  for (const event of events) {\n    Object.defineProperty(windowInstance, `on${event}`, {\n      configurable: true,\n      enumerable: true,\n      get() {\n        return idlUtils.tryWrapperForImpl(getCurrentEventHandlerValue(this, event));\n      },\n      set(V) {\n        if (!idlUtils.isObject(V)) {\n          V = null;\n        } else {\n          V = EventHandlerNonNull.convert(windowInstance, V, {\n            context: `Failed to set the 'on${event}' property on 'Window': The provided value`\n          });\n        }\n        this._setEventHandlerFor(event, V);\n      }\n    });\n  }\n\n  windowInstance._globalObject = windowInstance;\n}\n\n// NOTE: per https://heycam.github.io/webidl/#Global, all properties on the Window object must be own-properties.\n// That is why we assign everything inside of the constructor, instead of using a shared prototype.\n// You can verify this in e.g. Firefox or Internet Explorer, which do a good job with Web IDL compliance.\nfunction Window(options) {\n  setupWindow(this, { runScripts: options.runScripts });\n\n  const rawPerformance = new RawPerformance();\n  const windowInitialized = rawPerformance.now();\n\n  const window = this;\n\n  // ### PRIVATE DATA PROPERTIES\n\n  this._resourceLoader = options.resourceLoader;\n\n  // vm initialization is deferred until script processing is activated\n  this._globalProxy = this;\n  Object.defineProperty(idlUtils.implForWrapper(this), idlUtils.wrapperSymbol, { get: () => this._globalProxy });\n\n  // List options explicitly to be clear which are passed through\n  this._document = documents.createWrapper(window, {\n    parsingMode: options.parsingMode,\n    contentType: options.contentType,\n    encoding: options.encoding,\n    cookieJar: options.cookieJar,\n    url: options.url,\n    lastModified: options.lastModified,\n    referrer: options.referrer,\n    parseOptions: options.parseOptions,\n    defaultView: this._globalProxy,\n    global: this,\n    parentOrigin: options.parentOrigin\n  }, { alwaysUseDocumentClass: true });\n\n  if (vm.isContext(window)) {\n    const documentImpl = idlUtils.implForWrapper(window._document);\n    documentImpl._defaultView = window._globalProxy = vm.runInContext(\"this\", window);\n  }\n\n  const documentOrigin = idlUtils.implForWrapper(this._document)._origin;\n  this._origin = documentOrigin;\n\n  // https://html.spec.whatwg.org/#session-history\n  this._sessionHistory = new SessionHistory({\n    document: idlUtils.implForWrapper(this._document),\n    url: idlUtils.implForWrapper(this._document)._URL,\n    stateObject: null\n  }, this);\n\n  this._virtualConsole = options.virtualConsole;\n\n  this._runScripts = options.runScripts;\n\n  // Set up the window as if it's a top level window.\n  // If it's not, then references will be corrected by frame/iframe code.\n  this._parent = this._top = this._globalProxy;\n  this._frameElement = null;\n\n  // This implements window.frames.length, since window.frames returns a\n  // self reference to the window object.  This value is incremented in the\n  // HTMLFrameElement implementation.\n  this._length = 0;\n\n  // https://dom.spec.whatwg.org/#window-current-event\n  this._currentEvent = undefined;\n\n  this._pretendToBeVisual = options.pretendToBeVisual;\n  this._storageQuota = options.storageQuota;\n\n  // Some properties (such as localStorage and sessionStorage) share data\n  // between windows in the same origin. This object is intended\n  // to contain such data.\n  if (options.commonForOrigin && options.commonForOrigin[documentOrigin]) {\n    this._commonForOrigin = options.commonForOrigin;\n  } else {\n    this._commonForOrigin = {\n      [documentOrigin]: {\n        localStorageArea: new Map(),\n        sessionStorageArea: new Map(),\n        windowsInSameOrigin: [this]\n      }\n    };\n  }\n\n  this._currentOriginData = this._commonForOrigin[documentOrigin];\n\n  // ### WEB STORAGE\n\n  this._localStorage = Storage.create(window, [], {\n    associatedWindow: this,\n    storageArea: this._currentOriginData.localStorageArea,\n    type: \"localStorage\",\n    url: this._document.documentURI,\n    storageQuota: this._storageQuota\n  });\n  this._sessionStorage = Storage.create(window, [], {\n    associatedWindow: this,\n    storageArea: this._currentOriginData.sessionStorageArea,\n    type: \"sessionStorage\",\n    url: this._document.documentURI,\n    storageQuota: this._storageQuota\n  });\n\n  // ### SELECTION\n\n  // https://w3c.github.io/selection-api/#dfn-selection\n  this._selection = Selection.createImpl(window);\n\n  // https://w3c.github.io/selection-api/#dom-window\n  this.getSelection = function () {\n    return window._selection;\n  };\n\n  // ### GETTERS\n\n  const locationbar = BarProp.create(window);\n  const menubar = BarProp.create(window);\n  const personalbar = BarProp.create(window);\n  const scrollbars = BarProp.create(window);\n  const statusbar = BarProp.create(window);\n  const toolbar = BarProp.create(window);\n  const external = External.create(window);\n  const navigator = Navigator.create(window, [], { userAgent: this._resourceLoader._userAgent });\n  const performance = Performance.create(window, [], { rawPerformance });\n  const screen = Screen.create(window);\n  const crypto = Crypto.create(window);\n  const customElementRegistry = CustomElementRegistry.create(window);\n\n  define(this, {\n    get length() {\n      return window._length;\n    },\n    get window() {\n      return window._globalProxy;\n    },\n    get frameElement() {\n      return idlUtils.wrapperForImpl(window._frameElement);\n    },\n    get frames() {\n      return window._globalProxy;\n    },\n    get self() {\n      return window._globalProxy;\n    },\n    get parent() {\n      return window._parent;\n    },\n    get top() {\n      return window._top;\n    },\n    get document() {\n      return window._document;\n    },\n    get external() {\n      return external;\n    },\n    get location() {\n      return idlUtils.wrapperForImpl(idlUtils.implForWrapper(window._document)._location);\n    },\n    get history() {\n      return idlUtils.wrapperForImpl(idlUtils.implForWrapper(window._document)._history);\n    },\n    get navigator() {\n      return navigator;\n    },\n    get locationbar() {\n      return locationbar;\n    },\n    get menubar() {\n      return menubar;\n    },\n    get personalbar() {\n      return personalbar;\n    },\n    get scrollbars() {\n      return scrollbars;\n    },\n    get statusbar() {\n      return statusbar;\n    },\n    get toolbar() {\n      return toolbar;\n    },\n    get performance() {\n      return performance;\n    },\n    get screen() {\n      return screen;\n    },\n    get crypto() {\n      return crypto;\n    },\n    get origin() {\n      return window._origin;\n    },\n    // The origin IDL attribute is defined with [Replaceable].\n    set origin(value) {\n      Object.defineProperty(this, \"origin\", {\n        value,\n        writable: true,\n        enumerable: true,\n        configurable: true\n      });\n    },\n    get localStorage() {\n      if (idlUtils.implForWrapper(this._document)._origin === \"null\") {\n        throw DOMException.create(window, [\n          \"localStorage is not available for opaque origins\",\n          \"SecurityError\"\n        ]);\n      }\n\n      return this._localStorage;\n    },\n    get sessionStorage() {\n      if (idlUtils.implForWrapper(this._document)._origin === \"null\") {\n        throw DOMException.create(window, [\n          \"sessionStorage is not available for opaque origins\",\n          \"SecurityError\"\n        ]);\n      }\n\n      return this._sessionStorage;\n    },\n    get customElements() {\n      return customElementRegistry;\n    },\n    get event() {\n      return window._currentEvent ? idlUtils.wrapperForImpl(window._currentEvent) : undefined;\n    },\n    set event(value) {\n      Object.defineProperty(window, \"event\", { configurable: true, enumerable: true, writable: true, value });\n    }\n  });\n\n  namedPropertiesWindow.initializeWindow(this, this._globalProxy);\n\n  // ### METHODS\n\n  // https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#timers\n\n  // In the spec the list of active timers is a set of IDs. We make it a map of IDs to Node.js timer objects, so that\n  // we can call Node.js-side clearTimeout() when clearing, and thus allow process shutdown faster.\n  const listOfActiveTimers = new Map();\n  let latestTimerId = 0;\n\n  this.setTimeout = function (handler, timeout = 0, ...args) {\n    if (typeof handler !== \"function\") {\n      handler = webIDLConversions.DOMString(handler);\n    }\n    timeout = webIDLConversions.long(timeout);\n\n    return timerInitializationSteps(handler, timeout, args, { methodContext: window, repeat: false });\n  };\n  this.setInterval = function (handler, timeout = 0, ...args) {\n    if (typeof handler !== \"function\") {\n      handler = webIDLConversions.DOMString(handler);\n    }\n    timeout = webIDLConversions.long(timeout);\n\n    return timerInitializationSteps(handler, timeout, args, { methodContext: window, repeat: true });\n  };\n\n  this.clearTimeout = function (handle = 0) {\n    handle = webIDLConversions.long(handle);\n\n    const nodejsTimer = listOfActiveTimers.get(handle);\n    if (nodejsTimer) {\n      clearTimeout(nodejsTimer);\n      listOfActiveTimers.delete(handle);\n    }\n  };\n  this.clearInterval = function (handle = 0) {\n    handle = webIDLConversions.long(handle);\n\n    const nodejsTimer = listOfActiveTimers.get(handle);\n    if (nodejsTimer) {\n      // We use setTimeout() in timerInitializationSteps even for this.setInterval().\n      clearTimeout(nodejsTimer);\n      listOfActiveTimers.delete(handle);\n    }\n  };\n\n  function timerInitializationSteps(handler, timeout, args, { methodContext, repeat, previousHandle }) {\n    // This appears to be unspecced, but matches browser behavior for close()ed windows.\n    if (!methodContext._document) {\n      return 0;\n    }\n\n    // TODO: implement timer nesting level behavior.\n\n    const methodContextProxy = methodContext._globalProxy;\n    const handle = previousHandle !== undefined ? previousHandle : ++latestTimerId;\n\n    function task() {\n      if (!listOfActiveTimers.has(handle)) {\n        return;\n      }\n\n      try {\n        if (typeof handler === \"function\") {\n          handler.apply(methodContextProxy, args);\n        } else if (window._runScripts === \"dangerously\") {\n          vm.runInContext(handler, window, { filename: window.location.href, displayErrors: false });\n        }\n      } catch (e) {\n        reportException(window, e, window.location.href);\n      }\n\n      if (listOfActiveTimers.has(handle)) {\n        if (repeat) {\n          timerInitializationSteps(handler, timeout, args, { methodContext, repeat: true, previousHandle: handle });\n        } else {\n          listOfActiveTimers.delete(handle);\n        }\n      }\n    }\n\n    if (timeout < 0) {\n      timeout = 0;\n    }\n\n    const nodejsTimer = setTimeout(task, timeout);\n    listOfActiveTimers.set(handle, nodejsTimer);\n\n    return handle;\n  }\n\n  // https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#microtask-queuing\n\n  this.queueMicrotask = function (callback) {\n    callback = IDLFunction.convert(this, callback);\n\n    queueMicrotask(() => {\n      try {\n        callback();\n      } catch (e) {\n        reportException(window, e, window.location.href);\n      }\n    });\n  };\n\n  // https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#animation-frames\n\n  let animationFrameCallbackId = 0;\n  const mapOfAnimationFrameCallbacks = new Map();\n  let animationFrameNodejsInterval = null;\n\n  // Unlike the spec, where an animation frame happens every 60 Hz regardless, we optimize so that if there are no\n  // requestAnimationFrame() calls outstanding, we don't fire the timer. This helps us track that.\n  let numberOfOngoingAnimationFrameCallbacks = 0;\n\n  if (this._pretendToBeVisual) {\n    this.requestAnimationFrame = function (callback) {\n      callback = IDLFunction.convert(this, callback);\n\n      const handle = ++animationFrameCallbackId;\n      mapOfAnimationFrameCallbacks.set(handle, callback);\n\n      ++numberOfOngoingAnimationFrameCallbacks;\n      if (numberOfOngoingAnimationFrameCallbacks === 1) {\n        animationFrameNodejsInterval = setInterval(() => {\n          runAnimationFrameCallbacks(rawPerformance.now() - windowInitialized);\n        }, 1000 / 60);\n      }\n\n      return handle;\n    };\n\n    this.cancelAnimationFrame = function (handle) {\n      handle = webIDLConversions[\"unsigned long\"](handle);\n\n      removeAnimationFrameCallback(handle);\n    };\n\n    function runAnimationFrameCallbacks(now) {\n      // Converting to an array is important to get a sync snapshot and thus match spec semantics.\n      const callbackHandles = [...mapOfAnimationFrameCallbacks.keys()];\n      for (const handle of callbackHandles) {\n        // This has() can be false if a callback calls cancelAnimationFrame().\n        if (mapOfAnimationFrameCallbacks.has(handle)) {\n          const callback = mapOfAnimationFrameCallbacks.get(handle);\n          removeAnimationFrameCallback(handle);\n          try {\n            callback(now);\n          } catch (e) {\n            reportException(window, e, window.location.href);\n          }\n        }\n      }\n    }\n\n    function removeAnimationFrameCallback(handle) {\n      if (mapOfAnimationFrameCallbacks.has(handle)) {\n        --numberOfOngoingAnimationFrameCallbacks;\n        if (numberOfOngoingAnimationFrameCallbacks === 0) {\n          clearInterval(animationFrameNodejsInterval);\n        }\n      }\n\n      mapOfAnimationFrameCallbacks.delete(handle);\n    }\n  }\n\n  function stopAllTimers() {\n    for (const nodejsTimer of listOfActiveTimers.values()) {\n      clearTimeout(nodejsTimer);\n    }\n    listOfActiveTimers.clear();\n\n    clearInterval(animationFrameNodejsInterval);\n  }\n\n  function Option(text, value, defaultSelected, selected) {\n    if (text === undefined) {\n      text = \"\";\n    }\n    text = webIDLConversions.DOMString(text);\n\n    if (value !== undefined) {\n      value = webIDLConversions.DOMString(value);\n    }\n\n    defaultSelected = webIDLConversions.boolean(defaultSelected);\n    selected = webIDLConversions.boolean(selected);\n\n    const option = window._document.createElement(\"option\");\n    const impl = idlUtils.implForWrapper(option);\n\n    if (text !== \"\") {\n      impl.text = text;\n    }\n    if (value !== undefined) {\n      impl.setAttributeNS(null, \"value\", value);\n    }\n    if (defaultSelected) {\n      impl.setAttributeNS(null, \"selected\", \"\");\n    }\n    impl._selectedness = selected;\n\n    return option;\n  }\n  Object.defineProperty(Option, \"prototype\", {\n    value: this.HTMLOptionElement.prototype,\n    configurable: false,\n    enumerable: false,\n    writable: false\n  });\n  Object.defineProperty(window, \"Option\", {\n    value: Option,\n    configurable: true,\n    enumerable: false,\n    writable: true\n  });\n\n  function Image(...args) {\n    const img = window._document.createElement(\"img\");\n    const impl = idlUtils.implForWrapper(img);\n\n    if (args.length > 0) {\n      impl.setAttributeNS(null, \"width\", String(args[0]));\n    }\n    if (args.length > 1) {\n      impl.setAttributeNS(null, \"height\", String(args[1]));\n    }\n\n    return img;\n  }\n  Object.defineProperty(Image, \"prototype\", {\n    value: this.HTMLImageElement.prototype,\n    configurable: false,\n    enumerable: false,\n    writable: false\n  });\n  Object.defineProperty(window, \"Image\", {\n    value: Image,\n    configurable: true,\n    enumerable: false,\n    writable: true\n  });\n\n  function Audio(src) {\n    const audio = window._document.createElement(\"audio\");\n    const impl = idlUtils.implForWrapper(audio);\n    impl.setAttributeNS(null, \"preload\", \"auto\");\n\n    if (src !== undefined) {\n      impl.setAttributeNS(null, \"src\", String(src));\n    }\n\n    return audio;\n  }\n  Object.defineProperty(Audio, \"prototype\", {\n    value: this.HTMLAudioElement.prototype,\n    configurable: false,\n    enumerable: false,\n    writable: false\n  });\n  Object.defineProperty(window, \"Audio\", {\n    value: Audio,\n    configurable: true,\n    enumerable: false,\n    writable: true\n  });\n\n  this.postMessage = postMessage(window);\n\n  this.atob = function (str) {\n    const result = atob(str);\n    if (result === null) {\n      throw DOMException.create(window, [\n        \"The string to be decoded contains invalid characters.\",\n        \"InvalidCharacterError\"\n      ]);\n    }\n    return result;\n  };\n\n  this.btoa = function (str) {\n    const result = btoa(str);\n    if (result === null) {\n      throw DOMException.create(window, [\n        \"The string to be encoded contains invalid characters.\",\n        \"InvalidCharacterError\"\n      ]);\n    }\n    return result;\n  };\n\n  this.stop = function () {\n    const manager = idlUtils.implForWrapper(this._document)._requestManager;\n    if (manager) {\n      manager.close();\n    }\n  };\n\n  this.close = function () {\n    // Recursively close child frame windows, then ourselves (depth-first).\n    for (let i = 0; i < this.length; ++i) {\n      this[i].close();\n    }\n\n    // Clear out all listeners. Any in-flight or upcoming events should not get delivered.\n    idlUtils.implForWrapper(this)._eventListeners = Object.create(null);\n\n    if (this._document) {\n      if (this._document.body) {\n        this._document.body.innerHTML = \"\";\n      }\n\n      if (this._document.close) {\n        // It's especially important to clear out the listeners here because document.close() causes a \"load\" event to\n        // fire.\n        idlUtils.implForWrapper(this._document)._eventListeners = Object.create(null);\n        this._document.close();\n      }\n      const doc = idlUtils.implForWrapper(this._document);\n      if (doc._requestManager) {\n        doc._requestManager.close();\n      }\n      delete this._document;\n    }\n\n    stopAllTimers();\n    WebSocketImpl.cleanUpWindow(this);\n  };\n\n  this.getComputedStyle = function (elt, pseudoElt = undefined) {\n    elt = Element.convert(this, elt);\n    if (pseudoElt !== undefined && pseudoElt !== null) {\n      pseudoElt = webIDLConversions.DOMString(pseudoElt);\n    }\n\n    if (pseudoElt !== undefined && pseudoElt !== null && pseudoElt !== \"\") {\n      // TODO: Parse pseudoElt\n\n      if (SHADOW_DOM_PSEUDO_REGEXP.test(pseudoElt)) {\n        throw new TypeError(\"Tried to get the computed style of a Shadow DOM pseudo-element.\");\n      }\n\n      notImplemented(\"window.computedStyle(elt, pseudoElt)\", this);\n    }\n\n    const declaration = new CSSStyleDeclaration();\n    const { forEach } = Array.prototype;\n    const { style } = elt;\n\n    forEachMatchingSheetRuleOfElement(elt, rule => {\n      forEach.call(rule.style, property => {\n        declaration.setProperty(\n          property,\n          rule.style.getPropertyValue(property),\n          rule.style.getPropertyPriority(property)\n        );\n      });\n    });\n\n    // https://drafts.csswg.org/cssom/#dom-window-getcomputedstyle\n    const declarations = Object.keys(propertiesWithResolvedValueImplemented);\n    forEach.call(declarations, property => {\n      declaration.setProperty(property, getResolvedValue(elt, property));\n    });\n\n    forEach.call(style, property => {\n      declaration.setProperty(property, style.getPropertyValue(property), style.getPropertyPriority(property));\n    });\n\n    return declaration;\n  };\n\n  this.getSelection = function () {\n    return window._document.getSelection();\n  };\n\n  // The captureEvents() and releaseEvents() methods must do nothing\n  this.captureEvents = function () {};\n\n  this.releaseEvents = function () {};\n\n  // ### PUBLIC DATA PROPERTIES (TODO: should be getters)\n\n  function wrapConsoleMethod(method) {\n    return (...args) => {\n      window._virtualConsole.emit(method, ...args);\n    };\n  }\n\n  this.console = {\n    assert: wrapConsoleMethod(\"assert\"),\n    clear: wrapConsoleMethod(\"clear\"),\n    count: wrapConsoleMethod(\"count\"),\n    countReset: wrapConsoleMethod(\"countReset\"),\n    debug: wrapConsoleMethod(\"debug\"),\n    dir: wrapConsoleMethod(\"dir\"),\n    dirxml: wrapConsoleMethod(\"dirxml\"),\n    error: wrapConsoleMethod(\"error\"),\n    group: wrapConsoleMethod(\"group\"),\n    groupCollapsed: wrapConsoleMethod(\"groupCollapsed\"),\n    groupEnd: wrapConsoleMethod(\"groupEnd\"),\n    info: wrapConsoleMethod(\"info\"),\n    log: wrapConsoleMethod(\"log\"),\n    table: wrapConsoleMethod(\"table\"),\n    time: wrapConsoleMethod(\"time\"),\n    timeLog: wrapConsoleMethod(\"timeLog\"),\n    timeEnd: wrapConsoleMethod(\"timeEnd\"),\n    trace: wrapConsoleMethod(\"trace\"),\n    warn: wrapConsoleMethod(\"warn\")\n  };\n\n  function notImplementedMethod(name) {\n    return function () {\n      notImplemented(name, window);\n    };\n  }\n\n  define(this, {\n    name: \"\",\n    status: \"\",\n    devicePixelRatio: 1,\n    innerWidth: 1024,\n    innerHeight: 768,\n    outerWidth: 1024,\n    outerHeight: 768,\n    pageXOffset: 0,\n    pageYOffset: 0,\n    screenX: 0,\n    screenLeft: 0,\n    screenY: 0,\n    screenTop: 0,\n    scrollX: 0,\n    scrollY: 0,\n\n    alert: notImplementedMethod(\"window.alert\"),\n    blur: notImplementedMethod(\"window.blur\"),\n    confirm: notImplementedMethod(\"window.confirm\"),\n    focus: notImplementedMethod(\"window.focus\"),\n    moveBy: notImplementedMethod(\"window.moveBy\"),\n    moveTo: notImplementedMethod(\"window.moveTo\"),\n    open: notImplementedMethod(\"window.open\"),\n    print: notImplementedMethod(\"window.print\"),\n    prompt: notImplementedMethod(\"window.prompt\"),\n    resizeBy: notImplementedMethod(\"window.resizeBy\"),\n    resizeTo: notImplementedMethod(\"window.resizeTo\"),\n    scroll: notImplementedMethod(\"window.scroll\"),\n    scrollBy: notImplementedMethod(\"window.scrollBy\"),\n    scrollTo: notImplementedMethod(\"window.scrollTo\")\n  });\n\n  // ### INITIALIZATION\n\n  process.nextTick(() => {\n    if (!window.document) {\n      return; // window might've been closed already\n    }\n\n    if (window.document.readyState === \"complete\") {\n      fireAnEvent(\"load\", window, undefined, {}, true);\n    } else {\n      window.document.addEventListener(\"load\", () => {\n        fireAnEvent(\"load\", window, undefined, {}, true);\n        if (!window._document) {\n          return; // window might've been closed already\n        }\n\n        const documentImpl = idlUtils.implForWrapper(window._document);\n        if (!documentImpl._pageShowingFlag) {\n          documentImpl._pageShowingFlag = true;\n          fireAPageTransitionEvent(\"pageshow\", window, false);\n        }\n      });\n    }\n  });\n}\n\nfunction contextifyWindow(window) {\n  if (vm.isContext(window)) {\n    return;\n  }\n\n  vm.createContext(window);\n}\n"],"mappings":"AAAA;;;;AACA,MAAMA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAlB;;AACA,MAAMC,iBAAiB,GAAGD,OAAO,CAAC,oBAAD,CAAjC;;AACA,MAAM;EAAEE;AAAF,IAA0BF,OAAO,CAAC,UAAD,CAAvC;;AACA,MAAM;EAAEG,WAAW,EAAEC;AAAf,IAAkCJ,OAAO,CAAC,aAAD,CAA/C;;AACA,MAAMK,cAAc,GAAGL,OAAO,CAAC,mBAAD,CAA9B;;AACA,MAAM;EAAEM;AAAF,IAAwBN,OAAO,CAAC,sBAAD,CAArC;;AACA,MAAM;EAAEO,MAAF;EAAUC;AAAV,IAAoBR,OAAO,CAAC,UAAD,CAAjC;;AACA,MAAMS,OAAO,GAAGT,OAAO,CAAC,6BAAD,CAAvB;;AACA,MAAMU,WAAW,GAAGV,OAAO,CAAC,iCAAD,CAA3B;;AACA,MAAMW,mBAAmB,GAAGX,OAAO,CAAC,yCAAD,CAAnC;;AACA,MAAMY,WAAW,GAAGZ,OAAO,CAAC,8BAAD,CAA3B;;AACA,MAAMa,iCAAiC,GAAGb,OAAO,CAAC,uDAAD,CAAjD;;AACA,MAAMc,0BAA0B,GAAGd,OAAO,CAAC,gDAAD,CAA1C;;AACA,MAAM;EAAEe;AAAF,IAA+Bf,OAAO,CAAC,yCAAD,CAA5C;;AACA,MAAMgB,qBAAqB,GAAGhB,OAAO,CAAC,mCAAD,CAArC;;AACA,MAAMiB,WAAW,GAAGjB,OAAO,CAAC,wBAAD,CAA3B;;AACA,MAAMkB,YAAY,GAAGlB,OAAO,CAAC,gCAAD,CAA5B;;AACA,MAAM;EAAEmB,IAAF;EAAQC;AAAR,IAAiBpB,OAAO,CAAC,MAAD,CAA9B;;AACA,MAAMqB,QAAQ,GAAGrB,OAAO,CAAC,2BAAD,CAAxB;;AACA,MAAMsB,aAAa,GAAGtB,OAAO,CAAC,qCAAD,CAAP,CAA+CuB,cAArE;;AACA,MAAMC,OAAO,GAAGxB,OAAO,CAAC,6BAAD,CAAvB;;AACA,MAAMyB,SAAS,GAAGzB,OAAO,CAAC,wBAAD,CAAzB;;AACA,MAAM0B,QAAQ,GAAG1B,OAAO,CAAC,8BAAD,CAAxB;;AACA,MAAM2B,SAAS,GAAG3B,OAAO,CAAC,+BAAD,CAAzB;;AACA,MAAMG,WAAW,GAAGH,OAAO,CAAC,iCAAD,CAA3B;;AACA,MAAM4B,MAAM,GAAG5B,OAAO,CAAC,4BAAD,CAAtB;;AACA,MAAM6B,MAAM,GAAG7B,OAAO,CAAC,4BAAD,CAAtB;;AACA,MAAM8B,OAAO,GAAG9B,OAAO,CAAC,6BAAD,CAAvB;;AACA,MAAM+B,SAAS,GAAG/B,OAAO,CAAC,+BAAD,CAAzB;;AACA,MAAMgC,eAAe,GAAGhC,OAAO,CAAC,yCAAD,CAA/B;;AACA,MAAM;EAAEiC;AAAF,IAAkCjC,OAAO,CAAC,4CAAD,CAA/C;;AACA,MAAM;EAAEkC;AAAF,IAAkBlC,OAAO,CAAC,0BAAD,CAA/B;;AACA,MAAMmC,cAAc,GAAGnC,OAAO,CAAC,iCAAD,CAA9B;;AACA,MAAM;EAAEoC,iCAAF;EAAqCC,gBAArC;EAAuDC,sCAAvD;EACJC;AADI,IACyBvC,OAAO,CAAC,kCAAD,CADtC;;AAEA,MAAMwC,qBAAqB,GAAGxC,OAAO,CAAC,2CAAD,CAArC;;AACA,MAAMyC,SAAS,GAAGzC,OAAO,CAAC,mBAAD,CAAzB;;AAEA,MAAM0C,uBAAuB,GAAG1C,OAAO,CAAC,0CAAD,CAAP,CAAoDuB,cAApF;;AACA,MAAMoB,uBAAuB,GAAG3C,OAAO,CAAC,0CAAD,CAAP,CAAoDuB,cAApF;;AAEA,MAAMqB,MAAM,GAAG,IAAIC,GAAJ,CAAQ,CACrB;AACA,OAFqB,EAEZ,cAFY,EAGrB,mBAHqB,EAGA,MAHA,EAIrB,QAJqB,EAIX,SAJW,EAIA,gBAJA,EAKrB,QALqB,EAKX,OALW,EAMrB,OANqB,EAMZ,aANY,EAOrB,WAPqB,EAOR,UAPQ,EAQrB,MARqB,EAQb,SARa,EASrB,WATqB,EAUrB,WAVqB,EAUR,UAVQ,EAWrB,WAXqB,EAWR,MAXQ,EAYrB,gBAZqB,EAYH,SAZG,EAarB,OAbqB,EAaZ,OAbY,EAcrB,OAdqB,EAcZ,SAdY,EAerB,SAfqB,EAeV,UAfU,EAgBrB,OAhBqB,EAgBZ,MAhBY,EAgBJ,YAhBI,EAiBrB,gBAjBqB,EAiBH,WAjBG,EAkBrB,WAlBqB,EAkBR,YAlBQ,EAmBrB,YAnBqB,EAmBP,WAnBO,EAoBrB,UApBqB,EAoBT,WApBS,EAqBrB,SArBqB,EAqBV,OArBU,EAsBrB,OAtBqB,EAsBZ,MAtBY,EAuBrB,SAvBqB,EAuBV,UAvBU,EAwBrB,YAxBqB,EAwBP,OAxBO,EAyBrB,QAzBqB,EAyBX,QAzBW,EA0BrB,yBA1BqB,EA2BrB,QA3BqB,EA2BX,SA3BW,EA4BrB,QA5BqB,EA4BX,MA5BW,EA4BH,SA5BG,EA6BrB,QA7BqB,EA6BX,SA7BW,EA8BrB,YA9BqB,EA8BP,QA9BO,EA+BrB,cA/BqB,EA+BL,SA/BK,EAiCrB;AACA,YAlCqB,EAmCrB,aAnCqB,EAoCrB,YApCqB,EAqCrB,gBArCqB,EAsCrB,SAtCqB,EAuCrB,cAvCqB,EAwCrB,SAxCqB,EAyCrB,QAzCqB,EA0CrB,UA1CqB,EA2CrB,UA3CqB,EA4CrB,UA5CqB,EA6CrB,kBA7CqB,EA8CrB,SA9CqB,EA+CrB,oBA/CqB,EAgDrB,QAhDqB,CAkDrB;AAlDqB,CAAR,CAAf;;AAqDAC,OAAO,CAACC,YAAR,GAAuB,UAAUC,OAAV,EAAmB;EACxC,OAAO,IAAIC,MAAJ,CAAWD,OAAX,CAAP;AACD,CAFD;;AAIA,MAAME,wBAAwB,GAAGC,MAAM,CAACC,OAAP,CAAeX,SAAf,EAA0BY,MAA1B,CAAiC,CAAC,CAACC,IAAD,CAAD,KAAYA,IAAI,IAAIC,MAArD,CAAjC,C,CAEA;;AACA,SAASC,WAAT,CAAqBC,cAArB,EAAqC;EAAEC;AAAF,CAArC,EAAqD;EACnD,IAAIA,UAAU,KAAK,cAAf,IAAiCA,UAAU,KAAK,aAApD,EAAmE;IACjEC,gBAAgB,CAACF,cAAD,CAAhB,CADiE,CAGjE;IACA;;IACA,KAAK,MAAM,CAACG,UAAD,EAAaC,cAAb,CAAX,IAA2CX,wBAA3C,EAAqE;MACnE,MAAMY,QAAQ,GAAG,EAAE,GAAGD,cAAL;QAAqBE,KAAK,EAAEhE,EAAE,CAACiE,YAAH,CAAgBJ,UAAhB,EAA4BH,cAA5B;MAA5B,CAAjB;MACAN,MAAM,CAACc,cAAP,CAAsBR,cAAtB,EAAsCG,UAAtC,EAAkDE,QAAlD;IACD;EACF,CATD,MASO;IACL;IACA;IACA,KAAK,MAAM,CAACF,UAAD,EAAaC,cAAb,CAAX,IAA2CX,wBAA3C,EAAqE;MACnE,MAAMY,QAAQ,GAAG,EAAE,GAAGD,cAAL;QAAqBE,KAAK,EAAER,MAAM,CAACK,UAAD;MAAlC,CAAjB;MACAT,MAAM,CAACc,cAAP,CAAsBR,cAAtB,EAAsCG,UAAtC,EAAkDE,QAAlD;IACD;EACF;;EAEDxD,iBAAiB,CAACmD,cAAD,EAAiB,CAAC,QAAD,CAAjB,CAAjB;EAEA,MAAMS,sBAAsB,GAAGT,cAAc,CAAC/C,WAA9C,CArBmD,CAuBnD;;EACA,MAAMyD,iBAAiB,GAAG,SAASlB,MAAT,GAAkB;IAC1C,MAAM,IAAImB,SAAJ,CAAc,qBAAd,CAAN;EACD,CAFD;;EAGAjB,MAAM,CAACkB,cAAP,CAAsBF,iBAAtB,EAAyCD,sBAAzC;EAEAf,MAAM,CAACc,cAAP,CAAsBR,cAAtB,EAAsC,QAAtC,EAAgD;IAC9Ca,YAAY,EAAE,IADgC;IAE9CC,QAAQ,EAAE,IAFoC;IAG9CR,KAAK,EAAEI;EAHuC,CAAhD;EAMA,MAAMK,eAAe,GAAGrB,MAAM,CAACsB,MAAP,CAAcP,sBAAsB,CAACQ,SAArC,CAAxB;EACAvB,MAAM,CAACwB,gBAAP,CAAwBH,eAAxB,EAAyC;IACvCI,WAAW,EAAE;MACXb,KAAK,EAAEI,iBADI;MAEXI,QAAQ,EAAE,IAFC;MAGXD,YAAY,EAAE;IAHH,CAD0B;IAMvC,CAACO,MAAM,CAACC,WAAR,GAAsB;MACpBf,KAAK,EAAE,QADa;MAEpBO,YAAY,EAAE;IAFM;EANiB,CAAzC;EAYAH,iBAAiB,CAACO,SAAlB,GAA8BF,eAA9B;EACArB,MAAM,CAACkB,cAAP,CAAsBZ,cAAtB,EAAsCe,eAAtC;EAEA9D,WAAW,CAACqE,KAAZ,CAAkBtB,cAAlB,EAAkCA,cAAlC;EACAjD,KAAK,CAACiD,cAAD,EAAiBd,uBAAuB,CAAC+B,SAAzC,CAAL;EACAlE,KAAK,CAACiD,cAAD,EAAiBf,uBAAuB,CAACgC,SAAzC,CAAL;;EACAjB,cAAc,CAACuB,iBAAf;;EAEA7B,MAAM,CAACc,cAAP,CAAsBR,cAAtB,EAAsC,gBAAtC,EAAwD;IACtDa,YAAY,EAAE,IADwC;IAEtDW,UAAU,EAAE,IAF0C;;IAGtDC,GAAG,GAAG;MACJ,OAAO7D,QAAQ,CAAC8D,iBAAT,CAA2BlD,2BAA2B,CAAC,IAAD,EAAO,cAAP,CAAtD,CAAP;IACD,CALqD;;IAMtDmD,GAAG,CAACC,CAAD,EAAI;MACL,IAAI,CAAChE,QAAQ,CAACiE,QAAT,CAAkBD,CAAlB,CAAL,EAA2B;QACzBA,CAAC,GAAG,IAAJ;MACD,CAFD,MAEO;QACLA,CAAC,GAAGxE,iCAAiC,CAAC0E,OAAlC,CAA0C9B,cAA1C,EAA0D4B,CAA1D,EAA6D;UAC/DG,OAAO,EAAE;QADsD,CAA7D,CAAJ;MAGD;;MACD,KAAKC,mBAAL,CAAyB,cAAzB,EAAyCJ,CAAzC;IACD;;EAfqD,CAAxD;EAkBAlC,MAAM,CAACc,cAAP,CAAsBR,cAAtB,EAAsC,SAAtC,EAAiD;IAC/Ca,YAAY,EAAE,IADiC;IAE/CW,UAAU,EAAE,IAFmC;;IAG/CC,GAAG,GAAG;MACJ,OAAO7D,QAAQ,CAAC8D,iBAAT,CAA2BlD,2BAA2B,CAAC,IAAD,EAAO,OAAP,CAAtD,CAAP;IACD,CAL8C;;IAM/CmD,GAAG,CAACC,CAAD,EAAI;MACL,IAAI,CAAChE,QAAQ,CAACiE,QAAT,CAAkBD,CAAlB,CAAL,EAA2B;QACzBA,CAAC,GAAG,IAAJ;MACD,CAFD,MAEO;QACLA,CAAC,GAAGvE,0BAA0B,CAACyE,OAA3B,CAAmC9B,cAAnC,EAAmD4B,CAAnD,EAAsD;UACxDG,OAAO,EAAE;QAD+C,CAAtD,CAAJ;MAGD;;MACD,KAAKC,mBAAL,CAAyB,OAAzB,EAAkCJ,CAAlC;IACD;;EAf8C,CAAjD;;EAkBA,KAAK,MAAMK,KAAX,IAAoB9C,MAApB,EAA4B;IAC1BO,MAAM,CAACc,cAAP,CAAsBR,cAAtB,EAAuC,KAAIiC,KAAM,EAAjD,EAAoD;MAClDpB,YAAY,EAAE,IADoC;MAElDW,UAAU,EAAE,IAFsC;;MAGlDC,GAAG,GAAG;QACJ,OAAO7D,QAAQ,CAAC8D,iBAAT,CAA2BlD,2BAA2B,CAAC,IAAD,EAAOyD,KAAP,CAAtD,CAAP;MACD,CALiD;;MAMlDN,GAAG,CAACC,CAAD,EAAI;QACL,IAAI,CAAChE,QAAQ,CAACiE,QAAT,CAAkBD,CAAlB,CAAL,EAA2B;UACzBA,CAAC,GAAG,IAAJ;QACD,CAFD,MAEO;UACLA,CAAC,GAAG1E,mBAAmB,CAAC4E,OAApB,CAA4B9B,cAA5B,EAA4C4B,CAA5C,EAA+C;YACjDG,OAAO,EAAG,wBAAuBE,KAAM;UADU,CAA/C,CAAJ;QAGD;;QACD,KAAKD,mBAAL,CAAyBC,KAAzB,EAAgCL,CAAhC;MACD;;IAfiD,CAApD;EAiBD;;EAED5B,cAAc,CAACkC,aAAf,GAA+BlC,cAA/B;AACD,C,CAED;AACA;AACA;;;AACA,SAASR,MAAT,CAAgBD,OAAhB,EAAyB;EACvBQ,WAAW,CAAC,IAAD,EAAO;IAAEE,UAAU,EAAEV,OAAO,CAACU;EAAtB,CAAP,CAAX;EAEA,MAAMkC,cAAc,GAAG,IAAIxF,cAAJ,EAAvB;EACA,MAAMyF,iBAAiB,GAAGD,cAAc,CAACE,GAAf,EAA1B;EAEA,MAAMC,MAAM,GAAG,IAAf,CANuB,CAQvB;;EAEA,KAAKC,eAAL,GAAuBhD,OAAO,CAACiD,cAA/B,CAVuB,CAYvB;;EACA,KAAKC,YAAL,GAAoB,IAApB;EACA/C,MAAM,CAACc,cAAP,CAAsB5C,QAAQ,CAAC8E,cAAT,CAAwB,IAAxB,CAAtB,EAAqD9E,QAAQ,CAAC+E,aAA9D,EAA6E;IAAElB,GAAG,EAAE,MAAM,KAAKgB;EAAlB,CAA7E,EAduB,CAgBvB;;EACA,KAAKG,SAAL,GAAiB5E,SAAS,CAAC6E,aAAV,CAAwBP,MAAxB,EAAgC;IAC/CQ,WAAW,EAAEvD,OAAO,CAACuD,WAD0B;IAE/CC,WAAW,EAAExD,OAAO,CAACwD,WAF0B;IAG/CC,QAAQ,EAAEzD,OAAO,CAACyD,QAH6B;IAI/CC,SAAS,EAAE1D,OAAO,CAAC0D,SAJ4B;IAK/CC,GAAG,EAAE3D,OAAO,CAAC2D,GALkC;IAM/CC,YAAY,EAAE5D,OAAO,CAAC4D,YANyB;IAO/CC,QAAQ,EAAE7D,OAAO,CAAC6D,QAP6B;IAQ/CC,YAAY,EAAE9D,OAAO,CAAC8D,YARyB;IAS/CC,WAAW,EAAE,KAAKb,YAT6B;IAU/C3C,MAAM,EAAE,IAVuC;IAW/CyD,YAAY,EAAEhE,OAAO,CAACgE;EAXyB,CAAhC,EAYd;IAAEC,sBAAsB,EAAE;EAA1B,CAZc,CAAjB;;EAcA,IAAIlH,EAAE,CAACmH,SAAH,CAAanB,MAAb,CAAJ,EAA0B;IACxB,MAAMoB,YAAY,GAAG9F,QAAQ,CAAC8E,cAAT,CAAwBJ,MAAM,CAACM,SAA/B,CAArB;IACAc,YAAY,CAACC,YAAb,GAA4BrB,MAAM,CAACG,YAAP,GAAsBnG,EAAE,CAACiE,YAAH,CAAgB,MAAhB,EAAwB+B,MAAxB,CAAlD;EACD;;EAED,MAAMsB,cAAc,GAAGhG,QAAQ,CAAC8E,cAAT,CAAwB,KAAKE,SAA7B,EAAwCiB,OAA/D;;EACA,KAAKA,OAAL,GAAeD,cAAf,CArCuB,CAuCvB;;EACA,KAAKE,eAAL,GAAuB,IAAIpF,cAAJ,CAAmB;IACxCqF,QAAQ,EAAEnG,QAAQ,CAAC8E,cAAT,CAAwB,KAAKE,SAA7B,CAD8B;IAExCM,GAAG,EAAEtF,QAAQ,CAAC8E,cAAT,CAAwB,KAAKE,SAA7B,EAAwCoB,IAFL;IAGxCC,WAAW,EAAE;EAH2B,CAAnB,EAIpB,IAJoB,CAAvB;EAMA,KAAKC,eAAL,GAAuB3E,OAAO,CAAC4E,cAA/B;EAEA,KAAKC,WAAL,GAAmB7E,OAAO,CAACU,UAA3B,CAhDuB,CAkDvB;EACA;;EACA,KAAKoE,OAAL,GAAe,KAAKC,IAAL,GAAY,KAAK7B,YAAhC;EACA,KAAK8B,aAAL,GAAqB,IAArB,CArDuB,CAuDvB;EACA;EACA;;EACA,KAAKC,OAAL,GAAe,CAAf,CA1DuB,CA4DvB;;EACA,KAAKC,aAAL,GAAqBC,SAArB;EAEA,KAAKC,kBAAL,GAA0BpF,OAAO,CAACqF,iBAAlC;EACA,KAAKC,aAAL,GAAqBtF,OAAO,CAACuF,YAA7B,CAhEuB,CAkEvB;EACA;EACA;;EACA,IAAIvF,OAAO,CAACwF,eAAR,IAA2BxF,OAAO,CAACwF,eAAR,CAAwBnB,cAAxB,CAA/B,EAAwE;IACtE,KAAKoB,gBAAL,GAAwBzF,OAAO,CAACwF,eAAhC;EACD,CAFD,MAEO;IACL,KAAKC,gBAAL,GAAwB;MACtB,CAACpB,cAAD,GAAkB;QAChBqB,gBAAgB,EAAE,IAAIC,GAAJ,EADF;QAEhBC,kBAAkB,EAAE,IAAID,GAAJ,EAFJ;QAGhBE,mBAAmB,EAAE,CAAC,IAAD;MAHL;IADI,CAAxB;EAOD;;EAED,KAAKC,kBAAL,GAA0B,KAAKL,gBAAL,CAAsBpB,cAAtB,CAA1B,CAjFuB,CAmFvB;;EAEA,KAAK0B,aAAL,GAAqBjH,OAAO,CAAC2C,MAAR,CAAesB,MAAf,EAAuB,EAAvB,EAA2B;IAC9CiD,gBAAgB,EAAE,IAD4B;IAE9CC,WAAW,EAAE,KAAKH,kBAAL,CAAwBJ,gBAFS;IAG9CQ,IAAI,EAAE,cAHwC;IAI9CvC,GAAG,EAAE,KAAKN,SAAL,CAAe8C,WAJ0B;IAK9CZ,YAAY,EAAE,KAAKD;EAL2B,CAA3B,CAArB;EAOA,KAAKc,eAAL,GAAuBtH,OAAO,CAAC2C,MAAR,CAAesB,MAAf,EAAuB,EAAvB,EAA2B;IAChDiD,gBAAgB,EAAE,IAD8B;IAEhDC,WAAW,EAAE,KAAKH,kBAAL,CAAwBF,kBAFW;IAGhDM,IAAI,EAAE,gBAH0C;IAIhDvC,GAAG,EAAE,KAAKN,SAAL,CAAe8C,WAJ4B;IAKhDZ,YAAY,EAAE,KAAKD;EAL6B,CAA3B,CAAvB,CA5FuB,CAoGvB;EAEA;;EACA,KAAKe,UAAL,GAAkBtH,SAAS,CAACuH,UAAV,CAAqBvD,MAArB,CAAlB,CAvGuB,CAyGvB;;EACA,KAAKwD,YAAL,GAAoB,YAAY;IAC9B,OAAOxD,MAAM,CAACsD,UAAd;EACD,CAFD,CA1GuB,CA8GvB;;;EAEA,MAAMG,WAAW,GAAGhI,OAAO,CAACiD,MAAR,CAAesB,MAAf,CAApB;EACA,MAAM0D,OAAO,GAAGjI,OAAO,CAACiD,MAAR,CAAesB,MAAf,CAAhB;EACA,MAAM2D,WAAW,GAAGlI,OAAO,CAACiD,MAAR,CAAesB,MAAf,CAApB;EACA,MAAM4D,UAAU,GAAGnI,OAAO,CAACiD,MAAR,CAAesB,MAAf,CAAnB;EACA,MAAM6D,SAAS,GAAGpI,OAAO,CAACiD,MAAR,CAAesB,MAAf,CAAlB;EACA,MAAM8D,OAAO,GAAGrI,OAAO,CAACiD,MAAR,CAAesB,MAAf,CAAhB;EACA,MAAM+D,QAAQ,GAAGpI,QAAQ,CAAC+C,MAAT,CAAgBsB,MAAhB,CAAjB;EACA,MAAMgE,SAAS,GAAGpI,SAAS,CAAC8C,MAAV,CAAiBsB,MAAjB,EAAyB,EAAzB,EAA6B;IAAEiE,SAAS,EAAE,KAAKhE,eAAL,CAAqBiE;EAAlC,CAA7B,CAAlB;EACA,MAAMC,WAAW,GAAG/J,WAAW,CAACsE,MAAZ,CAAmBsB,MAAnB,EAA2B,EAA3B,EAA+B;IAAEH;EAAF,CAA/B,CAApB;EACA,MAAMuE,MAAM,GAAGvI,MAAM,CAAC6C,MAAP,CAAcsB,MAAd,CAAf;EACA,MAAMqE,MAAM,GAAGvI,MAAM,CAAC4C,MAAP,CAAcsB,MAAd,CAAf;EACA,MAAMsE,qBAAqB,GAAG7H,qBAAqB,CAACiC,MAAtB,CAA6BsB,MAA7B,CAA9B;EAEAxF,MAAM,CAAC,IAAD,EAAO;IACX,IAAI+J,MAAJ,GAAa;MACX,OAAOvE,MAAM,CAACkC,OAAd;IACD,CAHU;;IAIX,IAAIlC,MAAJ,GAAa;MACX,OAAOA,MAAM,CAACG,YAAd;IACD,CANU;;IAOX,IAAIqE,YAAJ,GAAmB;MACjB,OAAOlJ,QAAQ,CAACmJ,cAAT,CAAwBzE,MAAM,CAACiC,aAA/B,CAAP;IACD,CATU;;IAUX,IAAIyC,MAAJ,GAAa;MACX,OAAO1E,MAAM,CAACG,YAAd;IACD,CAZU;;IAaX,IAAIwE,IAAJ,GAAW;MACT,OAAO3E,MAAM,CAACG,YAAd;IACD,CAfU;;IAgBX,IAAIyE,MAAJ,GAAa;MACX,OAAO5E,MAAM,CAAC+B,OAAd;IACD,CAlBU;;IAmBX,IAAI8C,GAAJ,GAAU;MACR,OAAO7E,MAAM,CAACgC,IAAd;IACD,CArBU;;IAsBX,IAAIP,QAAJ,GAAe;MACb,OAAOzB,MAAM,CAACM,SAAd;IACD,CAxBU;;IAyBX,IAAIyD,QAAJ,GAAe;MACb,OAAOA,QAAP;IACD,CA3BU;;IA4BX,IAAIe,QAAJ,GAAe;MACb,OAAOxJ,QAAQ,CAACmJ,cAAT,CAAwBnJ,QAAQ,CAAC8E,cAAT,CAAwBJ,MAAM,CAACM,SAA/B,EAA0CyE,SAAlE,CAAP;IACD,CA9BU;;IA+BX,IAAIC,OAAJ,GAAc;MACZ,OAAO1J,QAAQ,CAACmJ,cAAT,CAAwBnJ,QAAQ,CAAC8E,cAAT,CAAwBJ,MAAM,CAACM,SAA/B,EAA0C2E,QAAlE,CAAP;IACD,CAjCU;;IAkCX,IAAIjB,SAAJ,GAAgB;MACd,OAAOA,SAAP;IACD,CApCU;;IAqCX,IAAIP,WAAJ,GAAkB;MAChB,OAAOA,WAAP;IACD,CAvCU;;IAwCX,IAAIC,OAAJ,GAAc;MACZ,OAAOA,OAAP;IACD,CA1CU;;IA2CX,IAAIC,WAAJ,GAAkB;MAChB,OAAOA,WAAP;IACD,CA7CU;;IA8CX,IAAIC,UAAJ,GAAiB;MACf,OAAOA,UAAP;IACD,CAhDU;;IAiDX,IAAIC,SAAJ,GAAgB;MACd,OAAOA,SAAP;IACD,CAnDU;;IAoDX,IAAIC,OAAJ,GAAc;MACZ,OAAOA,OAAP;IACD,CAtDU;;IAuDX,IAAIK,WAAJ,GAAkB;MAChB,OAAOA,WAAP;IACD,CAzDU;;IA0DX,IAAIC,MAAJ,GAAa;MACX,OAAOA,MAAP;IACD,CA5DU;;IA6DX,IAAIC,MAAJ,GAAa;MACX,OAAOA,MAAP;IACD,CA/DU;;IAgEX,IAAIa,MAAJ,GAAa;MACX,OAAOlF,MAAM,CAACuB,OAAd;IACD,CAlEU;;IAmEX;IACA,IAAI2D,MAAJ,CAAWlH,KAAX,EAAkB;MAChBZ,MAAM,CAACc,cAAP,CAAsB,IAAtB,EAA4B,QAA5B,EAAsC;QACpCF,KADoC;QAEpCQ,QAAQ,EAAE,IAF0B;QAGpCU,UAAU,EAAE,IAHwB;QAIpCX,YAAY,EAAE;MAJsB,CAAtC;IAMD,CA3EU;;IA4EX,IAAI4G,YAAJ,GAAmB;MACjB,IAAI7J,QAAQ,CAAC8E,cAAT,CAAwB,KAAKE,SAA7B,EAAwCiB,OAAxC,KAAoD,MAAxD,EAAgE;QAC9D,MAAMpG,YAAY,CAACuD,MAAb,CAAoBsB,MAApB,EAA4B,CAChC,kDADgC,EAEhC,eAFgC,CAA5B,CAAN;MAID;;MAED,OAAO,KAAKgD,aAAZ;IACD,CArFU;;IAsFX,IAAIoC,cAAJ,GAAqB;MACnB,IAAI9J,QAAQ,CAAC8E,cAAT,CAAwB,KAAKE,SAA7B,EAAwCiB,OAAxC,KAAoD,MAAxD,EAAgE;QAC9D,MAAMpG,YAAY,CAACuD,MAAb,CAAoBsB,MAApB,EAA4B,CAChC,oDADgC,EAEhC,eAFgC,CAA5B,CAAN;MAID;;MAED,OAAO,KAAKqD,eAAZ;IACD,CA/FU;;IAgGX,IAAIgC,cAAJ,GAAqB;MACnB,OAAOf,qBAAP;IACD,CAlGU;;IAmGX,IAAI3E,KAAJ,GAAY;MACV,OAAOK,MAAM,CAACmC,aAAP,GAAuB7G,QAAQ,CAACmJ,cAAT,CAAwBzE,MAAM,CAACmC,aAA/B,CAAvB,GAAuEC,SAA9E;IACD,CArGU;;IAsGX,IAAIzC,KAAJ,CAAU3B,KAAV,EAAiB;MACfZ,MAAM,CAACc,cAAP,CAAsB8B,MAAtB,EAA8B,OAA9B,EAAuC;QAAEzB,YAAY,EAAE,IAAhB;QAAsBW,UAAU,EAAE,IAAlC;QAAwCV,QAAQ,EAAE,IAAlD;QAAwDR;MAAxD,CAAvC;IACD;;EAxGU,CAAP,CAAN;EA2GA/C,qBAAqB,CAACqK,gBAAtB,CAAuC,IAAvC,EAA6C,KAAKnF,YAAlD,EAxOuB,CA0OvB;EAEA;EAEA;EACA;;EACA,MAAMoF,kBAAkB,GAAG,IAAI3C,GAAJ,EAA3B;EACA,IAAI4C,aAAa,GAAG,CAApB;;EAEA,KAAKC,UAAL,GAAkB,UAAUC,OAAV,EAAmBC,OAAO,GAAG,CAA7B,EAAgC,GAAGC,IAAnC,EAAyC;IACzD,IAAI,OAAOF,OAAP,KAAmB,UAAvB,EAAmC;MACjCA,OAAO,GAAGxL,iBAAiB,CAAC2L,SAAlB,CAA4BH,OAA5B,CAAV;IACD;;IACDC,OAAO,GAAGzL,iBAAiB,CAAC4L,IAAlB,CAAuBH,OAAvB,CAAV;IAEA,OAAOI,wBAAwB,CAACL,OAAD,EAAUC,OAAV,EAAmBC,IAAnB,EAAyB;MAAEI,aAAa,EAAEhG,MAAjB;MAAyBiG,MAAM,EAAE;IAAjC,CAAzB,CAA/B;EACD,CAPD;;EAQA,KAAKC,WAAL,GAAmB,UAAUR,OAAV,EAAmBC,OAAO,GAAG,CAA7B,EAAgC,GAAGC,IAAnC,EAAyC;IAC1D,IAAI,OAAOF,OAAP,KAAmB,UAAvB,EAAmC;MACjCA,OAAO,GAAGxL,iBAAiB,CAAC2L,SAAlB,CAA4BH,OAA5B,CAAV;IACD;;IACDC,OAAO,GAAGzL,iBAAiB,CAAC4L,IAAlB,CAAuBH,OAAvB,CAAV;IAEA,OAAOI,wBAAwB,CAACL,OAAD,EAAUC,OAAV,EAAmBC,IAAnB,EAAyB;MAAEI,aAAa,EAAEhG,MAAjB;MAAyBiG,MAAM,EAAE;IAAjC,CAAzB,CAA/B;EACD,CAPD;;EASA,KAAKE,YAAL,GAAoB,UAAUC,MAAM,GAAG,CAAnB,EAAsB;IACxCA,MAAM,GAAGlM,iBAAiB,CAAC4L,IAAlB,CAAuBM,MAAvB,CAAT;IAEA,MAAMC,WAAW,GAAGd,kBAAkB,CAACpG,GAAnB,CAAuBiH,MAAvB,CAApB;;IACA,IAAIC,WAAJ,EAAiB;MACfF,YAAY,CAACE,WAAD,CAAZ;MACAd,kBAAkB,CAACe,MAAnB,CAA0BF,MAA1B;IACD;EACF,CARD;;EASA,KAAKG,aAAL,GAAqB,UAAUH,MAAM,GAAG,CAAnB,EAAsB;IACzCA,MAAM,GAAGlM,iBAAiB,CAAC4L,IAAlB,CAAuBM,MAAvB,CAAT;IAEA,MAAMC,WAAW,GAAGd,kBAAkB,CAACpG,GAAnB,CAAuBiH,MAAvB,CAApB;;IACA,IAAIC,WAAJ,EAAiB;MACf;MACAF,YAAY,CAACE,WAAD,CAAZ;MACAd,kBAAkB,CAACe,MAAnB,CAA0BF,MAA1B;IACD;EACF,CATD;;EAWA,SAASL,wBAAT,CAAkCL,OAAlC,EAA2CC,OAA3C,EAAoDC,IAApD,EAA0D;IAAEI,aAAF;IAAiBC,MAAjB;IAAyBO;EAAzB,CAA1D,EAAqG;IACnG;IACA,IAAI,CAACR,aAAa,CAAC1F,SAAnB,EAA8B;MAC5B,OAAO,CAAP;IACD,CAJkG,CAMnG;;;IAEA,MAAMmG,kBAAkB,GAAGT,aAAa,CAAC7F,YAAzC;IACA,MAAMiG,MAAM,GAAGI,cAAc,KAAKpE,SAAnB,GAA+BoE,cAA/B,GAAgD,EAAEhB,aAAjE;;IAEA,SAASkB,IAAT,GAAgB;MACd,IAAI,CAACnB,kBAAkB,CAACoB,GAAnB,CAAuBP,MAAvB,CAAL,EAAqC;QACnC;MACD;;MAED,IAAI;QACF,IAAI,OAAOV,OAAP,KAAmB,UAAvB,EAAmC;UACjCA,OAAO,CAACkB,KAAR,CAAcH,kBAAd,EAAkCb,IAAlC;QACD,CAFD,MAEO,IAAI5F,MAAM,CAAC8B,WAAP,KAAuB,aAA3B,EAA0C;UAC/C9H,EAAE,CAACiE,YAAH,CAAgByH,OAAhB,EAAyB1F,MAAzB,EAAiC;YAAE6G,QAAQ,EAAE7G,MAAM,CAAC8E,QAAP,CAAgBgC,IAA5B;YAAkCC,aAAa,EAAE;UAAjD,CAAjC;QACD;MACF,CAND,CAME,OAAOC,CAAP,EAAU;QACV/K,eAAe,CAAC+D,MAAD,EAASgH,CAAT,EAAYhH,MAAM,CAAC8E,QAAP,CAAgBgC,IAA5B,CAAf;MACD;;MAED,IAAIvB,kBAAkB,CAACoB,GAAnB,CAAuBP,MAAvB,CAAJ,EAAoC;QAClC,IAAIH,MAAJ,EAAY;UACVF,wBAAwB,CAACL,OAAD,EAAUC,OAAV,EAAmBC,IAAnB,EAAyB;YAAEI,aAAF;YAAiBC,MAAM,EAAE,IAAzB;YAA+BO,cAAc,EAAEJ;UAA/C,CAAzB,CAAxB;QACD,CAFD,MAEO;UACLb,kBAAkB,CAACe,MAAnB,CAA0BF,MAA1B;QACD;MACF;IACF;;IAED,IAAIT,OAAO,GAAG,CAAd,EAAiB;MACfA,OAAO,GAAG,CAAV;IACD;;IAED,MAAMU,WAAW,GAAGZ,UAAU,CAACiB,IAAD,EAAOf,OAAP,CAA9B;IACAJ,kBAAkB,CAAClG,GAAnB,CAAuB+G,MAAvB,EAA+BC,WAA/B;IAEA,OAAOD,MAAP;EACD,CAnUsB,CAqUvB;;;EAEA,KAAKa,cAAL,GAAsB,UAAUC,QAAV,EAAoB;IACxCA,QAAQ,GAAGrM,WAAW,CAAC2E,OAAZ,CAAoB,IAApB,EAA0B0H,QAA1B,CAAX;IAEAD,cAAc,CAAC,MAAM;MACnB,IAAI;QACFC,QAAQ;MACT,CAFD,CAEE,OAAOF,CAAP,EAAU;QACV/K,eAAe,CAAC+D,MAAD,EAASgH,CAAT,EAAYhH,MAAM,CAAC8E,QAAP,CAAgBgC,IAA5B,CAAf;MACD;IACF,CANa,CAAd;EAOD,CAVD,CAvUuB,CAmVvB;;;EAEA,IAAIK,wBAAwB,GAAG,CAA/B;EACA,MAAMC,4BAA4B,GAAG,IAAIxE,GAAJ,EAArC;EACA,IAAIyE,4BAA4B,GAAG,IAAnC,CAvVuB,CAyVvB;EACA;;EACA,IAAIC,sCAAsC,GAAG,CAA7C;;EAEA,IAAI,KAAKjF,kBAAT,EAA6B;IAC3B,KAAKkF,qBAAL,GAA6B,UAAUL,QAAV,EAAoB;MAC/CA,QAAQ,GAAGrM,WAAW,CAAC2E,OAAZ,CAAoB,IAApB,EAA0B0H,QAA1B,CAAX;MAEA,MAAMd,MAAM,GAAG,EAAEe,wBAAjB;MACAC,4BAA4B,CAAC/H,GAA7B,CAAiC+G,MAAjC,EAAyCc,QAAzC;MAEA,EAAEI,sCAAF;;MACA,IAAIA,sCAAsC,KAAK,CAA/C,EAAkD;QAChDD,4BAA4B,GAAGnB,WAAW,CAAC,MAAM;UAC/CsB,0BAA0B,CAAC3H,cAAc,CAACE,GAAf,KAAuBD,iBAAxB,CAA1B;QACD,CAFyC,EAEvC,OAAO,EAFgC,CAA1C;MAGD;;MAED,OAAOsG,MAAP;IACD,CAdD;;IAgBA,KAAKqB,oBAAL,GAA4B,UAAUrB,MAAV,EAAkB;MAC5CA,MAAM,GAAGlM,iBAAiB,CAAC,eAAD,CAAjB,CAAmCkM,MAAnC,CAAT;MAEAsB,4BAA4B,CAACtB,MAAD,CAA5B;IACD,CAJD;;IAMA,SAASoB,0BAAT,CAAoCzH,GAApC,EAAyC;MACvC;MACA,MAAM4H,eAAe,GAAG,CAAC,GAAGP,4BAA4B,CAACQ,IAA7B,EAAJ,CAAxB;;MACA,KAAK,MAAMxB,MAAX,IAAqBuB,eAArB,EAAsC;QACpC;QACA,IAAIP,4BAA4B,CAACT,GAA7B,CAAiCP,MAAjC,CAAJ,EAA8C;UAC5C,MAAMc,QAAQ,GAAGE,4BAA4B,CAACjI,GAA7B,CAAiCiH,MAAjC,CAAjB;UACAsB,4BAA4B,CAACtB,MAAD,CAA5B;;UACA,IAAI;YACFc,QAAQ,CAACnH,GAAD,CAAR;UACD,CAFD,CAEE,OAAOiH,CAAP,EAAU;YACV/K,eAAe,CAAC+D,MAAD,EAASgH,CAAT,EAAYhH,MAAM,CAAC8E,QAAP,CAAgBgC,IAA5B,CAAf;UACD;QACF;MACF;IACF;;IAED,SAASY,4BAAT,CAAsCtB,MAAtC,EAA8C;MAC5C,IAAIgB,4BAA4B,CAACT,GAA7B,CAAiCP,MAAjC,CAAJ,EAA8C;QAC5C,EAAEkB,sCAAF;;QACA,IAAIA,sCAAsC,KAAK,CAA/C,EAAkD;UAChDf,aAAa,CAACc,4BAAD,CAAb;QACD;MACF;;MAEDD,4BAA4B,CAACd,MAA7B,CAAoCF,MAApC;IACD;EACF;;EAED,SAASyB,aAAT,GAAyB;IACvB,KAAK,MAAMxB,WAAX,IAA0Bd,kBAAkB,CAACuC,MAAnB,EAA1B,EAAuD;MACrD3B,YAAY,CAACE,WAAD,CAAZ;IACD;;IACDd,kBAAkB,CAACwC,KAAnB;IAEAxB,aAAa,CAACc,4BAAD,CAAb;EACD;;EAED,SAASW,MAAT,CAAgBC,IAAhB,EAAsBjK,KAAtB,EAA6BkK,eAA7B,EAA8CC,QAA9C,EAAwD;IACtD,IAAIF,IAAI,KAAK7F,SAAb,EAAwB;MACtB6F,IAAI,GAAG,EAAP;IACD;;IACDA,IAAI,GAAG/N,iBAAiB,CAAC2L,SAAlB,CAA4BoC,IAA5B,CAAP;;IAEA,IAAIjK,KAAK,KAAKoE,SAAd,EAAyB;MACvBpE,KAAK,GAAG9D,iBAAiB,CAAC2L,SAAlB,CAA4B7H,KAA5B,CAAR;IACD;;IAEDkK,eAAe,GAAGhO,iBAAiB,CAACkO,OAAlB,CAA0BF,eAA1B,CAAlB;IACAC,QAAQ,GAAGjO,iBAAiB,CAACkO,OAAlB,CAA0BD,QAA1B,CAAX;;IAEA,MAAME,MAAM,GAAGrI,MAAM,CAACM,SAAP,CAAiBgI,aAAjB,CAA+B,QAA/B,CAAf;;IACA,MAAMC,IAAI,GAAGjN,QAAQ,CAAC8E,cAAT,CAAwBiI,MAAxB,CAAb;;IAEA,IAAIJ,IAAI,KAAK,EAAb,EAAiB;MACfM,IAAI,CAACN,IAAL,GAAYA,IAAZ;IACD;;IACD,IAAIjK,KAAK,KAAKoE,SAAd,EAAyB;MACvBmG,IAAI,CAACC,cAAL,CAAoB,IAApB,EAA0B,OAA1B,EAAmCxK,KAAnC;IACD;;IACD,IAAIkK,eAAJ,EAAqB;MACnBK,IAAI,CAACC,cAAL,CAAoB,IAApB,EAA0B,UAA1B,EAAsC,EAAtC;IACD;;IACDD,IAAI,CAACE,aAAL,GAAqBN,QAArB;IAEA,OAAOE,MAAP;EACD;;EACDjL,MAAM,CAACc,cAAP,CAAsB8J,MAAtB,EAA8B,WAA9B,EAA2C;IACzChK,KAAK,EAAE,KAAK0K,iBAAL,CAAuB/J,SADW;IAEzCJ,YAAY,EAAE,KAF2B;IAGzCW,UAAU,EAAE,KAH6B;IAIzCV,QAAQ,EAAE;EAJ+B,CAA3C;EAMApB,MAAM,CAACc,cAAP,CAAsB8B,MAAtB,EAA8B,QAA9B,EAAwC;IACtChC,KAAK,EAAEgK,MAD+B;IAEtCzJ,YAAY,EAAE,IAFwB;IAGtCW,UAAU,EAAE,KAH0B;IAItCV,QAAQ,EAAE;EAJ4B,CAAxC;;EAOA,SAASmK,KAAT,CAAe,GAAG/C,IAAlB,EAAwB;IACtB,MAAMgD,GAAG,GAAG5I,MAAM,CAACM,SAAP,CAAiBgI,aAAjB,CAA+B,KAA/B,CAAZ;;IACA,MAAMC,IAAI,GAAGjN,QAAQ,CAAC8E,cAAT,CAAwBwI,GAAxB,CAAb;;IAEA,IAAIhD,IAAI,CAACrB,MAAL,GAAc,CAAlB,EAAqB;MACnBgE,IAAI,CAACC,cAAL,CAAoB,IAApB,EAA0B,OAA1B,EAAmCK,MAAM,CAACjD,IAAI,CAAC,CAAD,CAAL,CAAzC;IACD;;IACD,IAAIA,IAAI,CAACrB,MAAL,GAAc,CAAlB,EAAqB;MACnBgE,IAAI,CAACC,cAAL,CAAoB,IAApB,EAA0B,QAA1B,EAAoCK,MAAM,CAACjD,IAAI,CAAC,CAAD,CAAL,CAA1C;IACD;;IAED,OAAOgD,GAAP;EACD;;EACDxL,MAAM,CAACc,cAAP,CAAsByK,KAAtB,EAA6B,WAA7B,EAA0C;IACxC3K,KAAK,EAAE,KAAK8K,gBAAL,CAAsBnK,SADW;IAExCJ,YAAY,EAAE,KAF0B;IAGxCW,UAAU,EAAE,KAH4B;IAIxCV,QAAQ,EAAE;EAJ8B,CAA1C;EAMApB,MAAM,CAACc,cAAP,CAAsB8B,MAAtB,EAA8B,OAA9B,EAAuC;IACrChC,KAAK,EAAE2K,KAD8B;IAErCpK,YAAY,EAAE,IAFuB;IAGrCW,UAAU,EAAE,KAHyB;IAIrCV,QAAQ,EAAE;EAJ2B,CAAvC;;EAOA,SAASuK,KAAT,CAAeC,GAAf,EAAoB;IAClB,MAAMC,KAAK,GAAGjJ,MAAM,CAACM,SAAP,CAAiBgI,aAAjB,CAA+B,OAA/B,CAAd;;IACA,MAAMC,IAAI,GAAGjN,QAAQ,CAAC8E,cAAT,CAAwB6I,KAAxB,CAAb;IACAV,IAAI,CAACC,cAAL,CAAoB,IAApB,EAA0B,SAA1B,EAAqC,MAArC;;IAEA,IAAIQ,GAAG,KAAK5G,SAAZ,EAAuB;MACrBmG,IAAI,CAACC,cAAL,CAAoB,IAApB,EAA0B,KAA1B,EAAiCK,MAAM,CAACG,GAAD,CAAvC;IACD;;IAED,OAAOC,KAAP;EACD;;EACD7L,MAAM,CAACc,cAAP,CAAsB6K,KAAtB,EAA6B,WAA7B,EAA0C;IACxC/K,KAAK,EAAE,KAAKkL,gBAAL,CAAsBvK,SADW;IAExCJ,YAAY,EAAE,KAF0B;IAGxCW,UAAU,EAAE,KAH4B;IAIxCV,QAAQ,EAAE;EAJ8B,CAA1C;EAMApB,MAAM,CAACc,cAAP,CAAsB8B,MAAtB,EAA8B,OAA9B,EAAuC;IACrChC,KAAK,EAAE+K,KAD8B;IAErCxK,YAAY,EAAE,IAFuB;IAGrCW,UAAU,EAAE,KAHyB;IAIrCV,QAAQ,EAAE;EAJ2B,CAAvC;EAOA,KAAKtD,WAAL,GAAmBA,WAAW,CAAC8E,MAAD,CAA9B;;EAEA,KAAK3E,IAAL,GAAY,UAAU8N,GAAV,EAAe;IACzB,MAAMC,MAAM,GAAG/N,IAAI,CAAC8N,GAAD,CAAnB;;IACA,IAAIC,MAAM,KAAK,IAAf,EAAqB;MACnB,MAAMjO,YAAY,CAACuD,MAAb,CAAoBsB,MAApB,EAA4B,CAChC,uDADgC,EAEhC,uBAFgC,CAA5B,CAAN;IAID;;IACD,OAAOoJ,MAAP;EACD,CATD;;EAWA,KAAKhO,IAAL,GAAY,UAAU+N,GAAV,EAAe;IACzB,MAAMC,MAAM,GAAGhO,IAAI,CAAC+N,GAAD,CAAnB;;IACA,IAAIC,MAAM,KAAK,IAAf,EAAqB;MACnB,MAAMjO,YAAY,CAACuD,MAAb,CAAoBsB,MAApB,EAA4B,CAChC,uDADgC,EAEhC,uBAFgC,CAA5B,CAAN;IAID;;IACD,OAAOoJ,MAAP;EACD,CATD;;EAWA,KAAKC,IAAL,GAAY,YAAY;IACtB,MAAMC,OAAO,GAAGhO,QAAQ,CAAC8E,cAAT,CAAwB,KAAKE,SAA7B,EAAwCiJ,eAAxD;;IACA,IAAID,OAAJ,EAAa;MACXA,OAAO,CAACE,KAAR;IACD;EACF,CALD;;EAOA,KAAKA,KAAL,GAAa,YAAY;IACvB;IACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKlF,MAAzB,EAAiC,EAAEkF,CAAnC,EAAsC;MACpC,KAAKA,CAAL,EAAQD,KAAR;IACD,CAJsB,CAMvB;;;IACAlO,QAAQ,CAAC8E,cAAT,CAAwB,IAAxB,EAA8BsJ,eAA9B,GAAgDtM,MAAM,CAACsB,MAAP,CAAc,IAAd,CAAhD;;IAEA,IAAI,KAAK4B,SAAT,EAAoB;MAClB,IAAI,KAAKA,SAAL,CAAeqJ,IAAnB,EAAyB;QACvB,KAAKrJ,SAAL,CAAeqJ,IAAf,CAAoBC,SAApB,GAAgC,EAAhC;MACD;;MAED,IAAI,KAAKtJ,SAAL,CAAekJ,KAAnB,EAA0B;QACxB;QACA;QACAlO,QAAQ,CAAC8E,cAAT,CAAwB,KAAKE,SAA7B,EAAwCoJ,eAAxC,GAA0DtM,MAAM,CAACsB,MAAP,CAAc,IAAd,CAA1D;;QACA,KAAK4B,SAAL,CAAekJ,KAAf;MACD;;MACD,MAAMK,GAAG,GAAGvO,QAAQ,CAAC8E,cAAT,CAAwB,KAAKE,SAA7B,CAAZ;;MACA,IAAIuJ,GAAG,CAACN,eAAR,EAAyB;QACvBM,GAAG,CAACN,eAAJ,CAAoBC,KAApB;MACD;;MACD,OAAO,KAAKlJ,SAAZ;IACD;;IAEDuH,aAAa;IACbtM,aAAa,CAACuO,aAAd,CAA4B,IAA5B;EACD,CA7BD;;EA+BA,KAAKC,gBAAL,GAAwB,UAAUC,GAAV,EAAeC,SAAS,GAAG7H,SAA3B,EAAsC;IAC5D4H,GAAG,GAAGtP,OAAO,CAAC8E,OAAR,CAAgB,IAAhB,EAAsBwK,GAAtB,CAAN;;IACA,IAAIC,SAAS,KAAK7H,SAAd,IAA2B6H,SAAS,KAAK,IAA7C,EAAmD;MACjDA,SAAS,GAAG/P,iBAAiB,CAAC2L,SAAlB,CAA4BoE,SAA5B,CAAZ;IACD;;IAED,IAAIA,SAAS,KAAK7H,SAAd,IAA2B6H,SAAS,KAAK,IAAzC,IAAiDA,SAAS,KAAK,EAAnE,EAAuE;MACrE;MAEA,IAAIzN,wBAAwB,CAAC0N,IAAzB,CAA8BD,SAA9B,CAAJ,EAA8C;QAC5C,MAAM,IAAI5L,SAAJ,CAAc,iEAAd,CAAN;MACD;;MAED/D,cAAc,CAAC,sCAAD,EAAyC,IAAzC,CAAd;IACD;;IAED,MAAM6P,WAAW,GAAG,IAAIhQ,mBAAJ,EAApB;IACA,MAAM;MAAEiQ;IAAF,IAAcC,KAAK,CAAC1L,SAA1B;IACA,MAAM;MAAE2L;IAAF,IAAYN,GAAlB;IAEA3N,iCAAiC,CAAC2N,GAAD,EAAMO,IAAI,IAAI;MAC7CH,OAAO,CAACI,IAAR,CAAaD,IAAI,CAACD,KAAlB,EAAyBG,QAAQ,IAAI;QACnCN,WAAW,CAACO,WAAZ,CACED,QADF,EAEEF,IAAI,CAACD,KAAL,CAAWK,gBAAX,CAA4BF,QAA5B,CAFF,EAGEF,IAAI,CAACD,KAAL,CAAWM,mBAAX,CAA+BH,QAA/B,CAHF;MAKD,CAND;IAOD,CARgC,CAAjC,CApB4D,CA8B5D;;IACA,MAAMI,YAAY,GAAGzN,MAAM,CAACwK,IAAP,CAAYrL,sCAAZ,CAArB;IACA6N,OAAO,CAACI,IAAR,CAAaK,YAAb,EAA2BJ,QAAQ,IAAI;MACrCN,WAAW,CAACO,WAAZ,CAAwBD,QAAxB,EAAkCnO,gBAAgB,CAAC0N,GAAD,EAAMS,QAAN,CAAlD;IACD,CAFD;IAIAL,OAAO,CAACI,IAAR,CAAaF,KAAb,EAAoBG,QAAQ,IAAI;MAC9BN,WAAW,CAACO,WAAZ,CAAwBD,QAAxB,EAAkCH,KAAK,CAACK,gBAAN,CAAuBF,QAAvB,CAAlC,EAAoEH,KAAK,CAACM,mBAAN,CAA0BH,QAA1B,CAApE;IACD,CAFD;IAIA,OAAON,WAAP;EACD,CAzCD;;EA2CA,KAAK3G,YAAL,GAAoB,YAAY;IAC9B,OAAOxD,MAAM,CAACM,SAAP,CAAiBkD,YAAjB,EAAP;EACD,CAFD,CA/lBuB,CAmmBvB;;;EACA,KAAKsH,aAAL,GAAqB,YAAY,CAAE,CAAnC;;EAEA,KAAKC,aAAL,GAAqB,YAAY,CAAE,CAAnC,CAtmBuB,CAwmBvB;;;EAEA,SAASC,iBAAT,CAA2BC,MAA3B,EAAmC;IACjC,OAAO,CAAC,GAAGrF,IAAJ,KAAa;MAClB5F,MAAM,CAAC4B,eAAP,CAAuBsJ,IAAvB,CAA4BD,MAA5B,EAAoC,GAAGrF,IAAvC;IACD,CAFD;EAGD;;EAED,KAAKuF,OAAL,GAAe;IACbC,MAAM,EAAEJ,iBAAiB,CAAC,QAAD,CADZ;IAEbjD,KAAK,EAAEiD,iBAAiB,CAAC,OAAD,CAFX;IAGbK,KAAK,EAAEL,iBAAiB,CAAC,OAAD,CAHX;IAIbM,UAAU,EAAEN,iBAAiB,CAAC,YAAD,CAJhB;IAKbO,KAAK,EAAEP,iBAAiB,CAAC,OAAD,CALX;IAMbQ,GAAG,EAAER,iBAAiB,CAAC,KAAD,CANT;IAObS,MAAM,EAAET,iBAAiB,CAAC,QAAD,CAPZ;IAQbU,KAAK,EAAEV,iBAAiB,CAAC,OAAD,CARX;IASbW,KAAK,EAAEX,iBAAiB,CAAC,OAAD,CATX;IAUbY,cAAc,EAAEZ,iBAAiB,CAAC,gBAAD,CAVpB;IAWba,QAAQ,EAAEb,iBAAiB,CAAC,UAAD,CAXd;IAYbc,IAAI,EAAEd,iBAAiB,CAAC,MAAD,CAZV;IAabe,GAAG,EAAEf,iBAAiB,CAAC,KAAD,CAbT;IAcbgB,KAAK,EAAEhB,iBAAiB,CAAC,OAAD,CAdX;IAebiB,IAAI,EAAEjB,iBAAiB,CAAC,MAAD,CAfV;IAgBbkB,OAAO,EAAElB,iBAAiB,CAAC,SAAD,CAhBb;IAiBbmB,OAAO,EAAEnB,iBAAiB,CAAC,SAAD,CAjBb;IAkBboB,KAAK,EAAEpB,iBAAiB,CAAC,OAAD,CAlBX;IAmBbqB,IAAI,EAAErB,iBAAiB,CAAC,MAAD;EAnBV,CAAf;;EAsBA,SAASsB,oBAAT,CAA8B/O,IAA9B,EAAoC;IAClC,OAAO,YAAY;MACjBjD,cAAc,CAACiD,IAAD,EAAOyC,MAAP,CAAd;IACD,CAFD;EAGD;;EAEDxF,MAAM,CAAC,IAAD,EAAO;IACX+C,IAAI,EAAE,EADK;IAEXgP,MAAM,EAAE,EAFG;IAGXC,gBAAgB,EAAE,CAHP;IAIXC,UAAU,EAAE,IAJD;IAKXC,WAAW,EAAE,GALF;IAMXC,UAAU,EAAE,IAND;IAOXC,WAAW,EAAE,GAPF;IAQXC,WAAW,EAAE,CARF;IASXC,WAAW,EAAE,CATF;IAUXC,OAAO,EAAE,CAVE;IAWXC,UAAU,EAAE,CAXD;IAYXC,OAAO,EAAE,CAZE;IAaXC,SAAS,EAAE,CAbA;IAcXC,OAAO,EAAE,CAdE;IAeXC,OAAO,EAAE,CAfE;IAiBXC,KAAK,EAAEf,oBAAoB,CAAC,cAAD,CAjBhB;IAkBXgB,IAAI,EAAEhB,oBAAoB,CAAC,aAAD,CAlBf;IAmBXiB,OAAO,EAAEjB,oBAAoB,CAAC,gBAAD,CAnBlB;IAoBXkB,KAAK,EAAElB,oBAAoB,CAAC,cAAD,CApBhB;IAqBXmB,MAAM,EAAEnB,oBAAoB,CAAC,eAAD,CArBjB;IAsBXoB,MAAM,EAAEpB,oBAAoB,CAAC,eAAD,CAtBjB;IAuBXqB,IAAI,EAAErB,oBAAoB,CAAC,aAAD,CAvBf;IAwBXsB,KAAK,EAAEtB,oBAAoB,CAAC,cAAD,CAxBhB;IAyBXuB,MAAM,EAAEvB,oBAAoB,CAAC,eAAD,CAzBjB;IA0BXwB,QAAQ,EAAExB,oBAAoB,CAAC,iBAAD,CA1BnB;IA2BXyB,QAAQ,EAAEzB,oBAAoB,CAAC,iBAAD,CA3BnB;IA4BX0B,MAAM,EAAE1B,oBAAoB,CAAC,eAAD,CA5BjB;IA6BX2B,QAAQ,EAAE3B,oBAAoB,CAAC,iBAAD,CA7BnB;IA8BX4B,QAAQ,EAAE5B,oBAAoB,CAAC,iBAAD;EA9BnB,CAAP,CAAN,CA5oBuB,CA6qBvB;;EAEA6B,OAAO,CAACC,QAAR,CAAiB,MAAM;IACrB,IAAI,CAACpO,MAAM,CAACyB,QAAZ,EAAsB;MACpB,OADoB,CACZ;IACT;;IAED,IAAIzB,MAAM,CAACyB,QAAP,CAAgB4M,UAAhB,KAA+B,UAAnC,EAA+C;MAC7ClS,WAAW,CAAC,MAAD,EAAS6D,MAAT,EAAiBoC,SAAjB,EAA4B,EAA5B,EAAgC,IAAhC,CAAX;IACD,CAFD,MAEO;MACLpC,MAAM,CAACyB,QAAP,CAAgB6M,gBAAhB,CAAiC,MAAjC,EAAyC,MAAM;QAC7CnS,WAAW,CAAC,MAAD,EAAS6D,MAAT,EAAiBoC,SAAjB,EAA4B,EAA5B,EAAgC,IAAhC,CAAX;;QACA,IAAI,CAACpC,MAAM,CAACM,SAAZ,EAAuB;UACrB,OADqB,CACb;QACT;;QAED,MAAMc,YAAY,GAAG9F,QAAQ,CAAC8E,cAAT,CAAwBJ,MAAM,CAACM,SAA/B,CAArB;;QACA,IAAI,CAACc,YAAY,CAACmN,gBAAlB,EAAoC;UAClCnN,YAAY,CAACmN,gBAAb,GAAgC,IAAhC;UACAvT,wBAAwB,CAAC,UAAD,EAAagF,MAAb,EAAqB,KAArB,CAAxB;QACD;MACF,CAXD;IAYD;EACF,CArBD;AAsBD;;AAED,SAASpC,gBAAT,CAA0BoC,MAA1B,EAAkC;EAChC,IAAIhG,EAAE,CAACmH,SAAH,CAAanB,MAAb,CAAJ,EAA0B;IACxB;EACD;;EAEDhG,EAAE,CAACwU,aAAH,CAAiBxO,MAAjB;AACD"},"metadata":{},"sourceType":"script"}